(self.webpackChunkclips_demo=self.webpackChunkclips_demo||[]).push([[179],{8697:(nn,st,H)=>{"use strict";H.d(st,{nm:()=>_a});var y=H(8186);H(5879),H(3182);var Y=H(5861),Ee=H(534),_e=H(4537),Fe=H(9058),ut=H(7879);const W=new Map,ne={activated:!1,tokenObservers:[]},Pe={initialized:!1,enabled:!1};function bt(mt){return W.get(mt)||Object.assign({},ne)}function $t(){return Pe}const Xt="https://content-firebaseappcheck.googleapis.com/v1",rt="exchangeDebugToken",Qe={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class at{constructor(ft,Ct,tn,ln,rn){if(this.operation=ft,this.retryPolicy=Ct,this.getWaitDuration=tn,this.lowerBound=ln,this.upperBound=rn,this.pending=null,this.nextErrorWaitInterval=ln,ln>rn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ft){var Ct=this;return(0,Y.Z)(function*(){Ct.stop();try{Ct.pending=new Fe.BH,yield function Ot(mt){return new Promise(ft=>{setTimeout(ft,mt)})}(Ct.getNextRun(ft)),Ct.pending.resolve(),yield Ct.pending.promise,Ct.pending=new Fe.BH,yield Ct.operation(),Ct.pending.resolve(),yield Ct.pending.promise,Ct.process(!0).catch(()=>{})}catch(tn){Ct.retryPolicy(tn)?Ct.process(!1).catch(()=>{}):Ct.stop()}})()}getNextRun(ft){if(ft)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ct=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ct}}}const jt=new Fe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Kt(mt){if(!bt(mt).activated)throw jt.create("use-before-activation",{appName:mt.name})}function jn(mt,ft){return zn.apply(this,arguments)}function zn(){return(zn=(0,Y.Z)(function*({url:mt,body:ft},Ct){const tn={"Content-Type":"application/json"},ln=Ct.getImmediate({optional:!0});if(ln){const ls=yield ln.getHeartbeatsHeader();ls&&(tn["X-Firebase-Client"]=ls)}const rn={method:"POST",body:JSON.stringify(ft),headers:tn};let Ln,Dn;try{Ln=yield fetch(mt,rn)}catch(ls){throw jt.create("fetch-network-error",{originalErrorMessage:ls?.message})}if(200!==Ln.status)throw jt.create("fetch-status-error",{httpStatus:Ln.status});try{Dn=yield Ln.json()}catch(ls){throw jt.create("fetch-parse-error",{originalErrorMessage:ls?.message})}const Sr=Dn.ttl.match(/^([\d.]+)(s)$/);if(!Sr||!Sr[2]||isNaN(Number(Sr[1])))throw jt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Dn.ttl}`});const $s=1e3*Number(Sr[1]),Ni=Date.now();return{token:Dn.token,expireTimeMillis:Ni+$s,issuedAtTimeMillis:Ni}})).apply(this,arguments)}function $n(mt,ft){const{projectId:Ct,appId:tn,apiKey:ln}=mt.options;return{url:`${Xt}/projects/${Ct}/apps/${tn}:${rt}?key=${ln}`,body:{debug_token:ft}}}const wr="firebase-app-check-database",Yr=1,Cr="firebase-app-check-store";let Mr=null;function xr(){return(xr=(0,Y.Z)(function*(mt,ft){const tn=(yield function Pr(){return Mr||(Mr=new Promise((mt,ft)=>{try{const Ct=indexedDB.open(wr,Yr);Ct.onsuccess=tn=>{mt(tn.target.result)},Ct.onerror=tn=>{var ln;ft(jt.create("storage-open",{originalErrorMessage:null===(ln=tn.target.error)||void 0===ln?void 0:ln.message}))},Ct.onupgradeneeded=tn=>{0===tn.oldVersion&&tn.target.result.createObjectStore(Cr,{keyPath:"compositeKey"})}}catch(Ct){ft(jt.create("storage-open",{originalErrorMessage:Ct?.message}))}}),Mr)}()).transaction(Cr,"readwrite"),rn=tn.objectStore(Cr).put({compositeKey:mt,value:ft});return new Promise((Ln,Dn)=>{rn.onsuccess=Sr=>{Ln()},tn.onerror=Sr=>{var $s;Dn(jt.create("storage-set",{originalErrorMessage:null===($s=Sr.target.error)||void 0===$s?void 0:$s.message}))}})})).apply(this,arguments)}const _i=new ut.Yd("@firebase/app-check");function On(mt,ft){return(0,Fe.hl)()?function Ir(mt,ft){return function Nn(mt,ft){return xr.apply(this,arguments)}(function Zr(mt){return`${mt.options.appId}-${mt.name}`}(mt),ft)}(mt,ft).catch(Ct=>{_i.warn(`Failed to write token to IndexedDB. Error: ${Ct}`)}):Promise.resolve()}function gr(){return $t().enabled}function zi(){return di.apply(this,arguments)}function di(){return(di=(0,Y.Z)(function*(){const mt=$t();if(mt.enabled&&mt.token)return mt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const bi={error:"UNKNOWN_ERROR"};function wi(mt){return Fe.US.encodeString(JSON.stringify(mt),!1)}function Vr(mt){return os.apply(this,arguments)}function os(){return(os=(0,Y.Z)(function*(mt,ft=!1){const Ct=mt.app;Kt(Ct);const tn=bt(Ct);let rn,ln=tn.token;if(ln&&!Ae(ln)&&(tn.token=void 0,ln=void 0),!ln){const Sr=yield tn.cachedTokenPromise;Sr&&(Ae(Sr)?ln=Sr:yield On(Ct,void 0))}if(!ft&&ln&&Ae(ln))return{token:ln.token};let Dn,Ln=!1;if(gr()){tn.exchangeTokenPromise||(tn.exchangeTokenPromise=jn($n(Ct,yield zi()),mt.heartbeatServiceProvider).finally(()=>{tn.exchangeTokenPromise=void 0}),Ln=!0);const Sr=yield tn.exchangeTokenPromise;return yield On(Ct,Sr),tn.token=Sr,{token:Sr.token}}try{tn.exchangeTokenPromise||(tn.exchangeTokenPromise=tn.provider.getToken().finally(()=>{tn.exchangeTokenPromise=void 0}),Ln=!0),ln=yield bt(Ct).exchangeTokenPromise}catch(Sr){"appCheck/throttled"===Sr.code?_i.warn(Sr.message):_i.error(Sr),rn=Sr}return ln?rn?Dn=Ae(ln)?{token:ln.token,internalError:rn}:yt(rn):(Dn={token:ln.token},tn.token=ln,yield On(Ct,ln)):Dn=yt(rn),Ln&&function ye(mt,ft){const Ct=bt(mt).tokenObservers;for(const tn of Ct)try{"EXTERNAL"===tn.type&&null!=ft.error?tn.error(ft.error):tn.next(ft)}catch{}}(Ct,Dn),Dn})).apply(this,arguments)}function Ar(mt){return vs.apply(this,arguments)}function vs(){return(vs=(0,Y.Z)(function*(mt){const ft=mt.app;Kt(ft);const{provider:Ct}=bt(ft);if(gr()){const tn=yield zi(),{token:ln}=yield jn($n(ft,tn),mt.heartbeatServiceProvider);return{token:ln}}{const{token:tn}=yield Ct.getToken();return{token:tn}}})).apply(this,arguments)}function tt(mt,ft){const Ct=bt(mt),tn=Ct.tokenObservers.filter(ln=>ln.next!==ft);0===tn.length&&Ct.tokenRefresher&&Ct.tokenRefresher.isRunning()&&Ct.tokenRefresher.stop(),Ct.tokenObservers=tn}function ve(mt){const{app:ft}=mt,Ct=bt(ft);let tn=Ct.tokenRefresher;tn||(tn=function be(mt){const{app:ft}=mt;return new at((0,Y.Z)(function*(){let tn;if(tn=bt(ft).token?yield Vr(mt,!0):yield Vr(mt),tn.error)throw tn.error;if(tn.internalError)throw tn.internalError}),()=>!0,()=>{const Ct=bt(ft);if(Ct.token){let tn=Ct.token.issuedAtTimeMillis+.5*(Ct.token.expireTimeMillis-Ct.token.issuedAtTimeMillis)+3e5;return tn=Math.min(tn,Ct.token.expireTimeMillis-3e5),Math.max(0,tn-Date.now())}return 0},Qe.RETRIAL_MIN_WAIT,Qe.RETRIAL_MAX_WAIT)}(mt),Ct.tokenRefresher=tn),!tn.isRunning()&&Ct.isTokenAutoRefreshEnabled&&tn.start()}function Ae(mt){return mt.expireTimeMillis-Date.now()>0}function yt(mt){return{token:wi(bi),error:mt}}class Yt{constructor(ft,Ct){this.app=ft,this.heartbeatServiceProvider=Ct}_delete(){const{tokenObservers:ft}=bt(this.app);for(const Ct of ft)tt(this.app,Ct.next);return Promise.resolve()}}const oi="app-check-internal";!function fo(){(0,Ee._registerComponent)(new _e.wA("app-check",mt=>function Tn(mt,ft){return new Yt(mt,ft)}(mt.getProvider("app").getImmediate(),mt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((mt,ft,Ct)=>{mt.getProvider(oi).initialize()})),(0,Ee._registerComponent)(new _e.wA(oi,mt=>function he(mt){return{getToken:ft=>Vr(mt,ft),getLimitedUseToken:()=>Ar(mt),addTokenListener:ft=>function Rn(mt,ft,Ct,tn){const{app:ln}=mt,rn=bt(ln);if(rn.tokenObservers=[...rn.tokenObservers,{next:Ct,error:tn,type:ft}],rn.token&&Ae(rn.token)){const Dn=rn.token;Promise.resolve().then(()=>{Ct({token:Dn.token}),ve(mt)}).catch(()=>{})}rn.cachedTokenPromise.then(()=>ve(mt))}(mt,"INTERNAL",ft),removeTokenListener:ft=>tt(mt.app,ft)}}(mt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ee.registerVersion)("@firebase/app-check","0.8.0")}();class _a{constructor(){return(0,y.vb)("app-check")}}typeof window<"u"&&window},6796:(nn,st,H)=>{"use strict";H.d(st,{zQ:()=>Xt,ww:()=>ot,rT:()=>Pe,f7:()=>Bt,L6:()=>W,_Q:()=>ne,lh:()=>bt,Qv:()=>ut,nw:()=>$t});var y=H(5879),fe=H(8645),se=H(2096),V=H(5592),Ce=H(2459),De=H(3019),$e=H(3093),Xe=H(4664),et=H(7398),Se=H(4552);class Re extends fe.x{constructor(rt=1/0,Qe=1/0,dt=Se.l){super(),this._bufferSize=rt,this._windowTime=Qe,this._timestampProvider=dt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Qe===1/0,this._bufferSize=Math.max(1,rt),this._windowTime=Math.max(1,Qe)}next(rt){const{isStopped:Qe,_buffer:dt,_infiniteTimeWindow:at,_timestampProvider:Ot,_windowTime:qt}=this;Qe||(dt.push(rt),!at&&dt.push(Ot.now()+qt)),this._trimBuffer(),super.next(rt)}_subscribe(rt){this._throwIfClosed(),this._trimBuffer();const Qe=this._innerSubscribe(rt),{_infiniteTimeWindow:dt,_buffer:at}=this,Ot=at.slice();for(let qt=0;qt<Ot.length&&!rt.closed;qt+=dt?1:2)rt.next(Ot[qt]);return this._checkFinalizedStatuses(rt),Qe}_trimBuffer(){const{_bufferSize:rt,_timestampProvider:Qe,_buffer:dt,_infiniteTimeWindow:at}=this,Ot=(at?1:2)*rt;if(rt<1/0&&Ot<dt.length&&dt.splice(0,dt.length-Ot),!at){const qt=Qe.now();let jt=0;for(let Lt=1;Lt<dt.length&&dt[Lt]<=qt;Lt+=2)jt=Lt;jt&&dt.splice(0,jt+1)}}}var Le=H(3020);function wt(Ye,rt,Qe){let dt,at=!1;return Ye&&"object"==typeof Ye?({bufferSize:dt=1/0,windowTime:rt=1/0,refCount:at=!1,scheduler:Qe}=Ye):dt=Ye??1/0,(0,Le.B)({connector:()=>new Re(dt,rt,Qe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:at})}var le=H(1374),vt=H(4674);function qe(Ye,rt){return(0,vt.m)(rt)?(0,Xe.w)(()=>Ye,rt):(0,Xe.w)(()=>Ye)}var Tt=H(5137),je=H(2181),Ve=H(8186),J=H(6304),Y=H(6814),Ee=H(8697),_e=H(7142);const ut=new y.OlP("angularfire2.auth.use-emulator"),W=new y.OlP("angularfire2.auth.settings"),ne=new y.OlP("angularfire2.auth.tenant-id"),Pe=new y.OlP("angularfire2.auth.langugage-code"),bt=new y.OlP("angularfire2.auth.use-device-language"),Bt=new y.OlP("angularfire.auth.persistence"),$t=(Ye,rt,Qe,dt,at,Ot,qt,jt)=>(0,J.cc)(`${Ye.name}.auth`,"AngularFireAuth",Ye.name,()=>{const Lt=rt.runOutsideAngular(()=>Ye.auth());if(Qe&&Lt.useEmulator(...Qe),dt&&(Lt.tenantId=dt),Lt.languageCode=at,Ot&&Lt.useDeviceLanguage(),qt)for(const[Kt,wn]of Object.entries(qt))Lt.settings[Kt]=wn;return jt&&Lt.setPersistence(jt),Lt},[Qe,dt,at,Ot,qt,jt]);let Xt=(()=>{class Ye{constructor(Qe,dt,at,Ot,qt,jt,Lt,Kt,wn,Fn,jn,zn){const ur=new fe.x,rr=(0,se.of)(void 0).pipe((0,$e.Q)(qt.outsideAngular),(0,Xe.w)(()=>Ot.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,5967)))),(0,et.U)(()=>(0,J.on)(Qe,Ot,dt)),(0,et.U)($n=>$t($n,Ot,jt,Kt,wn,Fn,Lt,jn)),wt({bufferSize:1,refCount:!1}));if((0,Y.PM)(at))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,se.of)(null);else{rr.pipe((0,le.P)()).subscribe();const wr=rr.pipe((0,Xe.w)(Hr=>Hr.getRedirectResult().then(Mr=>Mr,()=>null)),Ve.iC,wt({bufferSize:1,refCount:!1})),Yr=rr.pipe((0,Xe.w)(Hr=>new V.y(Mr=>({unsubscribe:Ot.runOutsideAngular(()=>Hr.onAuthStateChanged(Pr=>Mr.next(Pr),Pr=>Mr.error(Pr),()=>Mr.complete()))})))),Cr=rr.pipe((0,Xe.w)(Hr=>new V.y(Mr=>({unsubscribe:Ot.runOutsideAngular(()=>Hr.onIdTokenChanged(Pr=>Mr.next(Pr),Pr=>Mr.error(Pr),()=>Mr.complete()))}))));this.authState=wr.pipe(qe(Yr),(0,Tt.R)(qt.outsideAngular),(0,$e.Q)(qt.insideAngular)),this.user=wr.pipe(qe(Cr),(0,Tt.R)(qt.outsideAngular),(0,$e.Q)(qt.insideAngular)),this.idToken=this.user.pipe((0,Xe.w)(Hr=>Hr?(0,Ce.D)(Hr.getIdToken()):(0,se.of)(null))),this.idTokenResult=this.user.pipe((0,Xe.w)(Hr=>Hr?(0,Ce.D)(Hr.getIdTokenResult()):(0,se.of)(null))),this.credential=(0,De.T)(wr,ur,this.authState.pipe((0,je.h)(Hr=>!Hr))).pipe((0,et.U)(Hr=>Hr?.user?Hr:null),(0,Tt.R)(qt.outsideAngular),(0,$e.Q)(qt.insideAngular))}return(0,J.pX)(this,rr,Ot,{spy:{apply:($n,wr,Yr)=>{($n.startsWith("signIn")||$n.startsWith("createUser"))&&Yr.then(Cr=>ur.next(Cr))}}})}}return Ye.\u0275fac=function(Qe){return new(Qe||Ye)(y.LFG(J.Dh),y.LFG(J.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Ve.HU),y.LFG(ut,8),y.LFG(W,8),y.LFG(ne,8),y.LFG(Pe,8),y.LFG(bt,8),y.LFG(Bt,8),y.LFG(Ee.nm,8))},Ye.\u0275prov=y.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"any"}),Ye})(),ot=(()=>{class Ye{constructor(){_e.Z.registerVersion("angularfire",Ve.q4.full,"auth-compat")}}return Ye.\u0275fac=function(Qe){return new(Qe||Ye)},Ye.\u0275mod=y.oAB({type:Ye}),Ye.\u0275inj=y.cJS({providers:[Xt]}),Ye})()},8330:(nn,st,H)=>{"use strict";H.d(st,{ST:()=>Kr});var y=H(5879),fe=H(6321),se=H(5592),V=H(2459),Ce=H(2096),De=H(8186),$e=H(7921),Xe=H(9360),et=H(8251);function Se(){return(0,Xe.e)((o,e)=>{let n,a=!1;o.subscribe((0,et.x)(e,d=>{const g=n;n=d,a&&e.next([g,d]),a=!0}))})}var W,Re=H(7398),Le=H(6699),wt=H(3997),le=H(2181),vt=H(6304),qe=H(6814),je=(H(5967),H(3106)),Ve=H(5861),J=H(534),Y=H(4537),Ee=H(7879),_e=H(9058),Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ut={},ne=ne||{},Pe=Fe||self;function bt(o){var e=typeof o;return"array"==(e="object"!=e?e:o?Array.isArray(o)?"array":e:"null")||"object"==e&&"number"==typeof o.length}function Bt(o){var e=typeof o;return"object"==e&&null!=o||"function"==e}var Xt="closure_uid_"+(1e9*Math.random()>>>0),ot=0;function Ye(o,e,n){return o.call.apply(o.bind,arguments)}function rt(o,e,n){if(!o)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,a),o.apply(e,d)}}return function(){return o.apply(e,arguments)}}function Qe(o,e,n){return(Qe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ye:rt).apply(null,arguments)}function dt(o,e){var n=Array.prototype.slice.call(arguments,1);return function(){var a=n.slice();return a.push.apply(a,arguments),o.apply(this,a)}}function at(o,e){function n(){}n.prototype=e.prototype,o.$=e.prototype,o.prototype=new n,o.prototype.constructor=o,o.ac=function(a,d,g){for(var T=Array(arguments.length-2),O=2;O<arguments.length;O++)T[O-2]=arguments[O];return e.prototype[d].apply(a,T)}}function Ot(){this.s=this.s,this.o=this.o}Ot.prototype.s=!1,Ot.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function $t(o){Object.prototype.hasOwnProperty.call(o,Xt)&&o[Xt]||(o[Xt]=++ot)}(this)},Ot.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jt=Array.prototype.indexOf?function(o,e){return Array.prototype.indexOf.call(o,e,void 0)}:function(o,e){if("string"==typeof o)return"string"!=typeof e||1!=e.length?-1:o.indexOf(e,0);for(let n=0;n<o.length;n++)if(n in o&&o[n]===e)return n;return-1};function Lt(o){const e=o.length;if(0<e){const n=Array(e);for(let a=0;a<e;a++)n[a]=o[a];return n}return[]}function Kt(o,e){for(let n=1;n<arguments.length;n++){const a=arguments[n];if(bt(a)){const d=o.length||0,g=a.length||0;o.length=d+g;for(let T=0;T<g;T++)o[d+T]=a[T]}else o.push(a)}}function wn(o,e){this.type=o,this.g=this.target=e,this.defaultPrevented=!1}wn.prototype.h=function(){this.defaultPrevented=!0};var Fn=function(){if(!Pe.addEventListener||!Object.defineProperty)return!1;var o=!1,e=Object.defineProperty({},"passive",{get:function(){o=!0}});try{Pe.addEventListener("test",()=>{},e),Pe.removeEventListener("test",()=>{},e)}catch{}return o}();function jn(o){return/^[\s\xa0]*$/.test(o)}function zn(){var o=Pe.navigator;return o&&(o=o.userAgent)?o:""}function ur(o){return-1!=zn().indexOf(o)}function rr(o){return rr[" "](o),o}rr[" "]=function(){};var Ir,o,wr=ur("Opera"),Yr=ur("Trident")||ur("MSIE"),Cr=ur("Edge"),Hr=Cr||Yr,Mr=ur("Gecko")&&!(-1!=zn().toLowerCase().indexOf("webkit")&&!ur("Edge"))&&!(ur("Trident")||ur("MSIE"))&&!ur("Edge"),Pr=-1!=zn().toLowerCase().indexOf("webkit")&&!ur("Edge");function yi(){var o=Pe.document;return o?o.documentMode:void 0}e:{var dn="",Bn=(o=zn(),Mr?/rv:([^\);]+)(\)|;)/.exec(o):Cr?/Edge\/([\d\.]+)/.exec(o):Yr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):Pr?/WebKit\/(\S+)/.exec(o):wr?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(Bn&&(dn=Bn?Bn[1]:""),Yr){var Nn=yi();if(null!=Nn&&Nn>parseFloat(dn)){Ir=String(Nn);break e}}Ir=dn}var Gi=Pe.document&&Yr&&(yi()||parseInt(Ir,10))||void 0;function Zr(o,e){if(wn.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var n=this.type=o.type,a=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=e,e=o.relatedTarget){if(Mr){e:{try{rr(e.nodeName);var d=!0;break e}catch{}d=!1}d||(e=null)}}else"mouseover"==n?e=o.fromElement:"mouseout"==n&&(e=o.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:_i[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Zr.$.h.call(this)}}at(Zr,wn);var _i={2:"touch",3:"pen",4:"mouse"};Zr.prototype.h=function(){Zr.$.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ws="closure_listenable_"+(1e6*Math.random()|0),Rr=0;function On(o,e,n,a,d){this.listener=o,this.proxy=null,this.src=e,this.type=n,this.capture=!!a,this.la=d,this.key=++Rr,this.fa=this.ia=!1}function mr(o){o.fa=!0,o.listener=null,o.proxy=null,o.src=null,o.la=null}function ns(o,e,n){for(const a in o)e.call(n,o[a],a,o)}function zi(o){const e={};for(const n in o)e[n]=o[n];return e}const di="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xi(o,e){let n,a;for(let d=1;d<arguments.length;d++){for(n in a=arguments[d],a)o[n]=a[n];for(let g=0;g<di.length;g++)n=di[g],Object.prototype.hasOwnProperty.call(a,n)&&(o[n]=a[n])}}function bi(o){this.src=o,this.g={},this.h=0}function wi(o,e){var n=e.type;if(n in o.g){var g,a=o.g[n],d=jt(a,e);(g=0<=d)&&Array.prototype.splice.call(a,d,1),g&&(mr(e),0==o.g[n].length&&(delete o.g[n],o.h--))}}function Vr(o,e,n,a){for(var d=0;d<o.length;++d){var g=o[d];if(!g.fa&&g.listener==e&&g.capture==!!n&&g.la==a)return d}return-1}bi.prototype.add=function(o,e,n,a,d){var g=o.toString();(o=this.g[g])||(o=this.g[g]=[],this.h++);var T=Vr(o,e,a,d);return-1<T?(e=o[T],n||(e.ia=!1)):((e=new On(e,this.src,g,!!a,d)).ia=n,o.push(e)),e};var os="closure_lm_"+(1e6*Math.random()|0),Ar={};function vs(o,e,n,a,d){if(a&&a.once)return ve(o,e,n,a,d);if(Array.isArray(e)){for(var g=0;g<e.length;g++)vs(o,e[g],n,a,d);return null}return n=he(n),o&&o[Ws]?o.O(e,n,Bt(a)?!!a.capture:!!a,d):Rn(o,e,n,!1,a,d)}function Rn(o,e,n,a,d,g){if(!e)throw Error("Invalid event type");var T=Bt(d)?!!d.capture:!!d,O=Yt(o);if(O||(o[os]=O=new bi(o)),(n=O.add(e,n,a,T,g)).proxy)return n;if(a=function tt(){const e=yt;return function o(n){return e.call(o.src,o.listener,n)}}(),n.proxy=a,a.src=o,a.listener=n,o.addEventListener)Fn||(d=T),void 0===d&&(d=!1),o.addEventListener(e.toString(),a,d);else if(o.attachEvent)o.attachEvent(Ae(e.toString()),a);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(a)}return n}function ve(o,e,n,a,d){if(Array.isArray(e)){for(var g=0;g<e.length;g++)ve(o,e[g],n,a,d);return null}return n=he(n),o&&o[Ws]?o.P(e,n,Bt(a)?!!a.capture:!!a,d):Rn(o,e,n,!0,a,d)}function be(o,e,n,a,d){if(Array.isArray(e))for(var g=0;g<e.length;g++)be(o,e[g],n,a,d);else a=Bt(a)?!!a.capture:!!a,n=he(n),o&&o[Ws]?(o=o.i,(e=String(e).toString())in o.g&&-1<(n=Vr(g=o.g[e],n,a,d))&&(mr(g[n]),Array.prototype.splice.call(g,n,1),0==g.length&&(delete o.g[e],o.h--))):o&&(o=Yt(o))&&(e=o.g[e.toString()],o=-1,e&&(o=Vr(e,n,a,d)),(n=-1<o?e[o]:null)&&ye(n))}function ye(o){if("number"!=typeof o&&o&&!o.fa){var e=o.src;if(e&&e[Ws])wi(e.i,o);else{var n=o.type,a=o.proxy;e.removeEventListener?e.removeEventListener(n,a,o.capture):e.detachEvent?e.detachEvent(Ae(n),a):e.addListener&&e.removeListener&&e.removeListener(a),(n=Yt(e))?(wi(n,o),0==n.h&&(n.src=null,e[os]=null)):mr(o)}}}function Ae(o){return o in Ar?Ar[o]:Ar[o]="on"+o}function yt(o,e){if(o.fa)o=!0;else{e=new Zr(e,this);var n=o.listener,a=o.la||o.src;o.ia&&ye(o),o=n.call(a,e)}return o}function Yt(o){return(o=o[os])instanceof bi?o:null}var Tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function he(o){return"function"==typeof o?o:(o[Tn]||(o[Tn]=function(e){return o.handleEvent(e)}),o[Tn])}function pe(){Ot.call(this),this.i=new bi(this),this.S=this,this.J=null}function Ne(o,e){var n,a=o.J;if(a)for(n=[];a;a=a.J)n.push(a);if(o=o.S,a=e.type||e,"string"==typeof e)e=new wn(e,o);else if(e instanceof wn)e.target=e.target||o;else{var d=e;Xi(e=new wn(a,o),d)}if(d=!0,n)for(var g=n.length-1;0<=g;g--){var T=e.g=n[g];d=ct(T,a,!0,e)&&d}if(d=ct(T=e.g=o,a,!0,e)&&d,d=ct(T,a,!1,e)&&d,n)for(g=0;g<n.length;g++)d=ct(T=e.g=n[g],a,!1,e)&&d}function ct(o,e,n,a){if(!(e=o.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,g=0;g<e.length;++g){var T=e[g];if(T&&!T.fa&&T.capture==n){var O=T.listener,Z=T.la||T.src;T.ia&&wi(o.i,T),d=!1!==O.call(Z,a)&&d}}return d&&!a.defaultPrevented}at(pe,Ot),pe.prototype[Ws]=!0,pe.prototype.removeEventListener=function(o,e,n,a){be(this,o,e,n,a)},pe.prototype.N=function(){if(pe.$.N.call(this),this.i){var e,o=this.i;for(e in o.g){for(var n=o.g[e],a=0;a<n.length;a++)mr(n[a]);delete o.g[e],o.h--}}this.J=null},pe.prototype.O=function(o,e,n,a){return this.i.add(String(o),e,!1,n,a)},pe.prototype.P=function(o,e,n,a){return this.i.add(String(o),e,!0,n,a)};var cn=Pe.JSON.stringify;function kr(){var o=yr;let e=null;return o.g&&(e=o.g,o.g=o.g.next,o.g||(o.h=null),e.next=null),e}var Ut=new class Zn{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Et,o=>o.reset());class Et{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Jt(o){var e=1;o=o.split(":");const n=[];for(;0<e&&o.length;)n.push(o.shift()),e--;return o.length&&n.push(o.join(":")),n}function An(o){Pe.setTimeout(()=>{throw o},0)}let Yn,ir=!1,yr=new class ti{constructor(){this.h=this.g=null}add(e,n){const a=Ut.get();a.set(e,n),this.h?this.h.next=a:this.g=a,this.h=a}},Qr=()=>{const o=Pe.Promise.resolve(void 0);Yn=()=>{o.then(fi)}};var fi=()=>{for(var o;o=kr();){try{o.h.call(o.g)}catch(n){An(n)}var e=Ut;e.j(o),100>e.h&&(e.h++,o.next=e.g,e.g=o)}ir=!1};function pi(o,e){pe.call(this),this.h=o||1,this.g=e||Pe,this.j=Qe(this.qb,this),this.l=Date.now()}function rs(o){o.ga=!1,o.T&&(o.g.clearTimeout(o.T),o.T=null)}function Ks(o,e,n){if("function"==typeof o)n&&(o=Qe(o,n));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=Qe(o.handleEvent,o)}return 2147483647<Number(e)?-1:Pe.setTimeout(o,e||0)}function $o(o){o.g=Ks(()=>{o.g=null,o.i&&(o.i=!1,$o(o))},o.j);const e=o.h;o.h=null,o.m.apply(null,e)}at(pi,pe),(W=pi.prototype).ga=!1,W.T=null,W.qb=function(){if(this.ga){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-o):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ne(this,"tick"),this.ga&&(rs(this),this.start()))}},W.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},W.N=function(){pi.$.N.call(this),rs(this),delete this.g};class Ns extends Ot{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$o(this)}N(){super.N(),this.g&&(Pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function la(o){Ot.call(this),this.h=o,this.g={}}at(la,Ot);var Ls=[];function Ho(o,e,n,a){Array.isArray(n)||(n&&(Ls[0]=n.toString()),n=Ls);for(var d=0;d<n.length;d++){var g=vs(e,n[d],a||o.handleEvent,!1,o.h||o);if(!g)break;o.g[g.key]=g}}function Ss(o){ns(o.g,function(e,n){this.g.hasOwnProperty(n)&&ye(e)},o),o.g={}}function no(){this.g=!0}function Zs(o,e,n,a){o.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _a(o,e){if(!o.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(o=0;o<n.length;o++)if(Array.isArray(n[o])){var a=n[o];if(!(2>a.length)){var d=a[1];if(Array.isArray(d)&&!(1>d.length)){var g=d[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var T=1;T<d.length;T++)d[T]=""}}}return cn(n)}catch{return e}}(o,n)+(a?" "+a:"")})}la.prototype.N=function(){la.$.N.call(this),Ss(this)},la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},no.prototype.Ea=function(){this.g=!1},no.prototype.info=function(){};var ro={},Ds=null;function ba(){return Ds=Ds||new pe}function ju(o){wn.call(this,ro.Ta,o)}function Fs(o){const e=ba();Ne(e,new ju(e))}function za(o,e){wn.call(this,ro.STAT_EVENT,o),this.stat=e}function as(o){const e=ba();Ne(e,new za(e,o))}function qa(o,e){wn.call(this,ro.Ua,o),this.size=e}function As(o,e){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return Pe.setTimeout(function(){o()},e)}ro.Ta="serverreachability",at(ju,wn),ro.STAT_EVENT="statevent",at(za,wn),ro.Ua="timingevent",at(qa,wn);var _r={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},us={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ci(){}function is(){}Ci.prototype.h=null;var Ct,Ys={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mt(){wn.call(this,"d")}function ft(){wn.call(this,"c")}function tn(){}function ln(o,e,n,a){this.l=o,this.j=e,this.m=n,this.W=a||1,this.U=new la(this),this.P=Ln,this.V=new pi(o=Hr?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rn}function rn(){this.i=null,this.g="",this.h=!1}at(mt,wn),at(ft,wn),at(tn,Ci),tn.prototype.g=function(){return new XMLHttpRequest},tn.prototype.i=function(){return{}},Ct=new tn;var Ln=45e3,Dn={},Sr={};function $s(o,e,n){o.L=1,o.v=Na(Si(e)),o.s=n,o.S=!0,Ni(o,null)}function Ni(o,e){o.G=Date.now(),Qs(o),o.A=Si(o.v);var n=o.A,a=o.W;Array.isArray(a)||(a=[String(a)]),cs(n.i,"t",a),o.C=0,n=o.l.J,o.h=new rn,o.g=Uu(o.l,n?e:null,!o.s),0<o.O&&(o.M=new Ns(Qe(o.Pa,o,o.g),o.O)),Ho(o.U,o.g,"readystatechange",o.nb),e=o.I?zi(o.I):{},o.s?(o.u||(o.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",o.g.ha(o.A,o.u,o.s,e)):(o.u="GET",o.g.ha(o.A,o.u,null,e)),Fs(),function oi(o,e,n,a,d,g){o.info(function(){if(o.g)if(g)for(var T="",O=g.split("&"),Z=0;Z<O.length;Z++){var ue=O[Z].split("=");if(1<ue.length){var Ie=ue[0];ue=ue[1];var nt=Ie.split("_");T=2<=nt.length&&"type"==nt[1]?T+(Ie+"=")+ue+"&":T+(Ie+"=redacted&")}}else T=null;else T=g;return"XMLHTTP REQ ("+a+") [attempt "+d+"]: "+e+"\n"+n+"\n"+T})}(o.j,o.u,o.A,o.m,o.W,o.s)}function ls(o){return!!o.g&&"GET"==o.u&&2!=o.L&&o.l.Ha}function Li(o,e,n){let d,a=!0;for(;!o.J&&o.C<n.length;){if(d=Xr(o,n),d==Sr){4==e&&(o.o=4,as(14),a=!1),Zs(o.j,o.m,null,"[Incomplete Response]");break}if(d==Dn){o.o=4,as(15),Zs(o.j,o.m,n,"[Invalid Chunk]"),a=!1;break}Zs(o.j,o.m,d,null),qi(o,d)}ls(o)&&d!=Sr&&d!=Dn&&(o.h.g="",o.C=0),4!=e||0!=n.length||o.h.h||(o.o=1,as(16),a=!1),o.i=o.i&&a,a?0<n.length&&!o.ba&&(o.ba=!0,(e=o.l).g==o&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ka(e),e.M=!0,as(11))):(Zs(o.j,o.m,n,"[Invalid Chunked Response]"),ys(o),Ra(o))}function Xr(o,e){var n=o.C,a=e.indexOf("\n",n);return-1==a?Sr:(n=Number(e.substring(n,a)),isNaN(n)?Dn:(a+=1)+n>e.length?Sr:(e=e.slice(a,a+n),o.C=a+n,e))}function Qs(o){o.Y=Date.now()+o.P,br(o,o.P)}function br(o,e){if(null!=o.B)throw Error("WatchDog timer not null");o.B=As(Qe(o.lb,o),e)}function Ji(o){o.B&&(Pe.clearTimeout(o.B),o.B=null)}function Ra(o){0==o.l.H||o.J||Za(o.l,o)}function ys(o){Ji(o);var e=o.M;e&&"function"==typeof e.sa&&e.sa(),o.M=null,rs(o.V),Ss(o.U),o.g&&(e=o.g,o.g=null,e.abort(),e.sa())}function qi(o,e){try{var n=o.l;if(0!=n.H&&(n.g==o||Wi(n.i,o)))if(!o.K&&Wi(n.i,o)&&3==n.H){try{var a=n.Ja.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var d=a;if(0==d[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<o.G))break e;zo(n),xs(n)}Al(n),as(18)}}else n.Fa=d[1],0<n.Fa-n.V&&37500>d[2]&&n.G&&0==n.A&&!n.v&&(n.v=As(Qe(n.ib,n),6e3));if(1>=Wa(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Qo(n,11)}else if((o.K||n.g==o)&&zo(n),!jn(e))for(d=n.Ja.g.parse(e),e=0;e<d.length;e++){let ue=d[e];if(n.V=ue[0],ue=ue[1],2==n.H)if("c"==ue[0]){n.K=ue[1],n.pa=ue[2];const Ie=ue[3];null!=Ie&&(n.ra=Ie,n.l.info("VER="+n.ra));const nt=ue[4];null!=nt&&(n.Ga=nt,n.l.info("SVER="+n.Ga));const Ft=ue[5];null!=Ft&&"number"==typeof Ft&&0<Ft&&(n.L=a=1.5*Ft,n.l.info("backChannelRequestTimeoutMs_="+a)),a=n;const on=o.g;if(on){const xn=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xn){var g=a.i;g.g||-1==xn.indexOf("spdy")&&-1==xn.indexOf("quic")&&-1==xn.indexOf("h2")||(g.j=g.l,g.g=new Set,g.h&&(To(g,g.h),g.h=null))}if(a.F){const Wn=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Wn&&(a.Da=Wn,Pi(a.I,a.F,Wn))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-o.G,n.l.info("Handshake RTT: "+n.S+"ms"));var T=o;if((a=n).wa=al(a,a.J?a.pa:null,a.Y),T.K){Ca(a.i,T);var O=T,Z=a.L;Z&&O.setTimeout(Z),O.B&&(Ji(O),Qs(O)),a.g=T}else il(a);0<n.j.length&&hs(n)}else"stop"!=ue[0]&&"close"!=ue[0]||Qo(n,7);else 3==n.H&&("stop"==ue[0]||"close"==ue[0]?"stop"==ue[0]?Qo(n,7):ki(n):"noop"!=ue[0]&&n.h&&n.h.Aa(ue),n.A=0)}Fs()}catch{}}function po(o,e){if(o.forEach&&"function"==typeof o.forEach)o.forEach(e,void 0);else if(bt(o)||"string"==typeof o)Array.prototype.forEach.call(o,e,void 0);else for(var n=function Go(o){if(o.ta&&"function"==typeof o.ta)return o.ta();if(!o.Z||"function"!=typeof o.Z){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(bt(o)||"string"==typeof o){var e=[];o=o.length;for(var n=0;n<o;n++)e.push(n);return e}e=[],n=0;for(const a in o)e[n++]=a;return e}}}(o),a=function Yo(o){if(o.Z&&"function"==typeof o.Z)return o.Z();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if("string"==typeof o)return o.split("");if(bt(o)){for(var e=[],n=o.length,a=0;a<n;a++)e.push(o[a]);return e}for(a in e=[],n=0,o)e[n++]=o[a];return e}(o),d=a.length,g=0;g<d;g++)e.call(void 0,a[g],n&&n[g],o)}(W=ln.prototype).setTimeout=function(o){this.P=o},W.nb=function(o){o=o.target;const e=this.M;e&&3==Lr(o)?e.l():this.Pa(o)},W.Pa=function(o){try{if(o==this.g)e:{const Ie=Lr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Ie)&&(3!=Ie||Hr||this.g&&(this.h.h||this.g.ja()||ai(this.g)))){this.J||4!=Ie||7==e||Fs(),Ji(this);var n=this.g.da();this.ca=n;t:if(ls(this)){var a=ai(this.g);o="";var d=a.length,g=4==Lr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ys(this),Ra(this);var T="";break t}this.h.i=new Pe.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,o+=this.h.i.decode(a[e],{stream:g&&e==d-1});a.splice(0,d),this.h.g+=o,this.C=0,T=this.h.g}else T=this.g.ja();if(this.i=200==n,function fo(o,e,n,a,d,g,T){o.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+d+"]: "+e+"\n"+n+"\n"+g+" "+T})}(this.j,this.u,this.A,this.m,this.W,Ie,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var O,Z=this.g;if((O=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jn(O)){var ue=O;break t}}ue=null}if(!(n=ue)){this.i=!1,this.o=3,as(12),ys(this),Ra(this);break e}Zs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qi(this,n)}this.S?(Li(this,Ie,T),Hr&&this.i&&3==Ie&&(Ho(this.U,this.V,"tick",this.mb),this.V.start())):(Zs(this.j,this.m,T,null),qi(this,T)),4==Ie&&ys(this),this.i&&!this.J&&(4==Ie?Za(this.l,this):(this.i=!1,Qs(this)))}else(function Tr(o){const e={};o=(o.g&&2<=Lr(o)&&o.g.getAllResponseHeaders()||"").split("\r\n");for(let a=0;a<o.length;a++){if(jn(o[a]))continue;var n=Jt(o[a]);const d=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const g=e[d]||[];e[d]=g,g.push(n)}!function gr(o,e){for(const n in o)e.call(void 0,o[n],n,o)}(e,function(a){return a.join(", ")})})(this.g),400==n&&0<T.indexOf("Unknown SID")?(this.o=3,as(12)):(this.o=0,as(13)),ys(this),Ra(this)}}}catch{}},W.mb=function(){if(this.g){var o=Lr(this.g),e=this.g.ja();this.C<e.length&&(Ji(this),Li(this,o,e),this.i&&4!=o&&Qs(this))}},W.cancel=function(){this.J=!0,ys(this)},W.lb=function(){this.B=null;const o=Date.now();0<=o-this.Y?(function ya(o,e){o.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Fs(),as(17)),ys(this),this.o=2,Ra(this)):br(this,this.Y-o)};var ta=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ks(o){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,o instanceof ks){this.h=o.h,Ta(this,o.j),this.s=o.s,this.g=o.g,na(this,o.m),this.l=o.l;var e=o.i,n=new Fi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Fr(this,n),this.o=o.o}else o&&(e=String(o).match(ta))?(this.h=!1,Ta(this,e[1]||"",!0),this.s=go(e[2]||""),this.g=go(e[3]||"",!0),na(this,e[4]),this.l=go(e[5]||"",!0),Fr(this,e[6]||"",!0),this.o=go(e[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}function Si(o){return new ks(o)}function Ta(o,e,n){o.j=n?go(e,!0):e,o.j&&(o.j=o.j.replace(/:$/,""))}function na(o,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);o.m=e}else o.m=null}function Fr(o,e,n){e instanceof Fi?(o.i=e,function Oo(o,e){e&&!o.j&&(io(o),o.i=null,o.g.forEach(function(n,a){var d=a.toLowerCase();a!=d&&(js(this,a),cs(this,d,n))},o)),o.j=e}(o.i,o.h)):(n||(e=Hs(e,tc)),o.i=new Fi(e,o.h))}function Pi(o,e,n){o.i.set(e,n)}function Na(o){return Pi(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function go(o,e){return o?e?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Hs(o,e,n){return"string"==typeof o?(o=encodeURI(o).replace(e,Gs),n&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Gs(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}ks.prototype.toString=function(){var o=[],e=this.j;e&&o.push(Hs(e,Ea,!0),":");var n=this.g;return(n||"file"==e)&&(o.push("//"),(e=this.s)&&o.push(Hs(e,Ea,!0),"@"),o.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&o.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&o.push("/"),o.push(Hs(n,"/"==n.charAt(0)?Is:uu,!0))),(n=this.i.toString())&&o.push("?",n),(n=this.o)&&o.push("#",Hs(n,_s)),o.join("")};var Ea=/[#\/\?@]/g,uu=/[#\?:]/g,Is=/[#\?]/g,tc=/[#\?@]/g,_s=/#/g;function Fi(o,e){this.h=this.g=null,this.i=o||null,this.j=!!e}function io(o){o.g||(o.g=new Map,o.h=0,o.i&&function Eu(o,e){if(o){o=o.split("&");for(var n=0;n<o.length;n++){var a=o[n].indexOf("="),d=null;if(0<=a){var g=o[n].substring(0,a);d=o[n].substring(a+1)}else g=o[n];e(g,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(o.i,function(e,n){o.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function js(o,e){io(o),e=jr(o,e),o.g.has(e)&&(o.i=null,o.h-=o.g.get(e).length,o.g.delete(e))}function Po(o,e){return io(o),e=jr(o,e),o.g.has(e)}function cs(o,e,n){js(o,e),0<n.length&&(o.i=null,o.g.set(jr(o,e),Lt(n)),o.h+=n.length)}function jr(o,e){return e=String(e),o.j&&(e=e.toLowerCase()),e}function Bu(o){this.l=o||lu,o=Pe.PerformanceNavigationTiming?0<(o=Pe.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(Pe.g&&Pe.g.Ka&&Pe.g.Ka()&&Pe.g.Ka().ec),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(W=Fi.prototype).add=function(o,e){io(this),this.i=null,o=jr(this,o);var n=this.g.get(o);return n||this.g.set(o,n=[]),n.push(e),this.h+=1,this},W.forEach=function(o,e){io(this),this.g.forEach(function(n,a){n.forEach(function(d){o.call(e,d,a,this)},this)},this)},W.ta=function(){io(this);const o=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let a=0;a<e.length;a++){const d=o[a];for(let g=0;g<d.length;g++)n.push(e[a])}return n},W.Z=function(o){io(this);let e=[];if("string"==typeof o)Po(this,o)&&(e=e.concat(this.g.get(jr(this,o))));else{o=Array.from(this.g.values());for(let n=0;n<o.length;n++)e=e.concat(o[n])}return e},W.set=function(o,e){return io(this),this.i=null,Po(this,o=jr(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[e]),this.h+=1,this},W.get=function(o,e){return o&&0<(o=this.Z(o)).length?String(o[0]):e},W.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var a=e[n];const g=encodeURIComponent(String(a)),T=this.Z(a);for(a=0;a<T.length;a++){var d=g;""!==T[a]&&(d+="="+encodeURIComponent(String(T[a]))),o.push(d)}}return this.i=o.join("&")};var lu=10;function wa(o){return!!o.h||!!o.g&&o.g.size>=o.j}function Wa(o){return o.h?1:o.g?o.g.size:0}function Wi(o,e){return o.h?o.h==e:!!o.g&&o.g.has(e)}function To(o,e){o.g?o.g.add(e):o.h=e}function Ca(o,e){o.h&&o.h==e?o.h=null:o.g&&o.g.has(e)&&o.g.delete(e)}function Ro(o){if(null!=o.h)return o.i.concat(o.h.F);if(null!=o.g&&0!==o.g.size){let e=o.i;for(const n of o.g.values())e=e.concat(n.F);return e}return Lt(o.i)}Bu.prototype.cancel=function(){if(this.i=Ro(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const o of this.g.values())o.cancel();this.g.clear()}};var La=class{stringify(o){return Pe.JSON.stringify(o,void 0)}parse(o){return Pe.JSON.parse(o,void 0)}};function cu(){this.g=new La}function xl(o,e,n){const a=n||"";try{po(o,function(d,g){let T=d;Bt(d)&&(T=cn(d)),e.push(a+g+"="+encodeURIComponent(T))})}catch(d){throw e.push(a+"type="+encodeURIComponent("_badmap")),d}}function du(o,e,n,a,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(a)}catch{}}function ee(o){this.l=o.fc||null,this.j=o.ob||!1}function K(o,e){pe.call(this),this.F=o,this.u=e,this.m=void 0,this.readyState=G,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}at(ee,Ci),ee.prototype.g=function(){return new K(this.l,this.j)},ee.prototype.i=function(o){return function(){return o}}({}),at(K,pe);var G=0;function ke(o){o.j.read().then(o.Xa.bind(o)).catch(o.ka.bind(o))}function Wt(o){o.readyState=4,o.l=null,o.j=null,o.A=null,Q(o)}function Q(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(W=K.prototype).open=function(o,e){if(this.readyState!=G)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=e,this.readyState=1,Q(this)},W.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(e.body=o),(this.F||Pe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wt(this)),this.readyState=G},W.$a=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Q(this)),this.g&&(this.readyState=3,Q(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Pe.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ke(this)}else o.text().then(this.Za.bind(this),this.ka.bind(this))},W.Xa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var e=o.value?o.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!o.done}))&&(this.response=this.responseText+=e)}o.done?Wt(this):Q(this),3==this.readyState&&ke(this)}},W.Za=function(o){this.g&&(this.response=this.responseText=o,Wt(this))},W.Ya=function(o){this.g&&(this.response=o,Wt(this))},W.ka=function(){this.g&&Wt(this)},W.setRequestHeader=function(o,e){this.v.append(o,e)},W.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},W.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],e=this.h.entries();for(var n=e.next();!n.done;)o.push((n=n.value)[0]+": "+n[1]),n=e.next();return o.join("\r\n")},Object.defineProperty(K.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var X=Pe.JSON.parse;function xe(o){pe.call(this),this.headers=new Map,this.u=o||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=We,this.L=this.M=!1}at(xe,pe);var We="",ht=/^https?$/i,Mt=["POST","PUT"];function qn(o,e){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=e,o.m=5,Kn(o),ni(o)}function Kn(o){o.F||(o.F=!0,Ne(o,"complete"),Ne(o,"error"))}function lr(o){if(o.h&&typeof ne<"u"&&(!o.C[1]||4!=Lr(o)||2!=o.da()))if(o.v&&4==Lr(o))Ks(o.La,0,o);else if(Ne(o,"readystatechange"),4==Lr(o)){o.h=!1;try{const T=o.da();e:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var a;if(a=0===T){var d=String(o.I).match(ta)[1]||null;!d&&Pe.self&&Pe.self.location&&(d=Pe.self.location.protocol.slice(0,-1)),a=!ht.test(d?d.toLowerCase():"")}n=a}if(n)Ne(o,"complete"),Ne(o,"success");else{o.m=6;try{var g=2<Lr(o)?o.g.statusText:""}catch{g=""}o.j=g+" ["+o.da()+"]",Kn(o)}}finally{ni(o)}}}function ni(o,e){if(o.g){Oi(o);const n=o.g,a=o.C[0]?()=>{}:null;o.g=null,o.C=null,e||Ne(o,"ready");try{n.onreadystatechange=a}catch{}}}function Oi(o){o.g&&o.L&&(o.g.ontimeout=null),o.A&&(Pe.clearTimeout(o.A),o.A=null)}function Lr(o){return o.g?o.g.readyState:0}function ai(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.K){case We:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Zi(o){let e="";return ns(o,function(n,a){e+=a,e+=":",e+=n,e+="\r\n"}),e}function ds(o,e,n){e:{for(a in n){var a=!1;break e}a=!0}a||(n=Zi(n),"string"==typeof o?null!=n&&encodeURIComponent(String(n)):Pi(o,e,n))}function Xs(o,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[o]||e}function so(o){this.Ga=0,this.j=[],this.l=new no,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xs("failFast",!1,o),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xs("baseRetryDelayMs",5e3,o),this.hb=Xs("retryDelaySeedMs",1e4,o),this.eb=Xs("forwardChannelMaxRetries",2,o),this.xa=Xs("forwardChannelRequestTimeoutMs",2e4,o),this.va=o&&o.xmlHttpFactory||void 0,this.Ha=o&&o.dc||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.i=new Bu(o&&o.concurrentRequestLimit),this.Ja=new cu,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=o&&o.bc||!1,o&&o.Ea&&this.l.Ea(),o&&o.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&o&&o.detectBufferingProxy||!1,this.qa=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.qa=o.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ki(o){if(Eo(o),3==o.H){var e=o.W++,n=Si(o.I);if(Pi(n,"SID",o.K),Pi(n,"RID",e),Pi(n,"TYPE","terminate"),$r(o,n),(e=new ln(o,o.l,e)).L=2,e.v=Na(Si(n)),n=!1,Pe.navigator&&Pe.navigator.sendBeacon)try{n=Pe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Pe.Image&&((new Image).src=e.v,n=!0),n||(e.g=Uu(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Qs(e)}ol(o)}function xs(o){o.g&&(Ka(o),o.g.cancel(),o.g=null)}function Eo(o){xs(o),o.u&&(Pe.clearTimeout(o.u),o.u=null),zo(o),o.i.cancel(),o.m&&("number"==typeof o.m&&Pe.clearTimeout(o.m),o.m=null)}function hs(o){if(!wa(o.i)&&!o.m){o.m=!0;var e=o.Na;Yn||Qr(),ir||(Yn(),ir=!0),yr.add(e,o),o.C=0}}function da(o,e){var n;n=e?e.m:o.W++;const a=Si(o.I);Pi(a,"SID",o.K),Pi(a,"RID",n),Pi(a,"AID",o.V),$r(o,a),o.o&&o.s&&ds(a,o.o,o.s),n=new ln(o,o.l,n,o.C+1),null===o.o&&(n.I=o.s),e&&(o.j=e.F.concat(o.j)),e=mo(o,n,1e3),n.setTimeout(Math.round(.5*o.xa)+Math.round(.5*o.xa*Math.random())),To(o.i,n),$s(n,a,e)}function $r(o,e){o.na&&ns(o.na,function(n,a){Pi(e,a,n)}),o.h&&po({},function(n,a){Pi(e,a,n)})}function mo(o,e,n){n=Math.min(o.j.length,n);var a=o.h?Qe(o.h.Va,o.h,o):null;e:{var d=o.j;let g=-1;for(;;){const T=["count="+n];-1==g?0<n?(g=d[0].g,T.push("ofs="+g)):g=0:T.push("ofs="+g);let O=!0;for(let Z=0;Z<n;Z++){let ue=d[Z].g;const Ie=d[Z].map;if(ue-=g,0>ue)g=Math.max(0,d[Z].g-100),O=!1;else try{xl(Ie,T,"req"+ue+"_")}catch{a&&a(Ie)}}if(O){a=T.join("&");break e}}}return o=o.j.splice(0,n),e.F=o,a}function il(o){if(!o.g&&!o.u){o.ba=1;var e=o.Ma;Yn||Qr(),ir||(Yn(),ir=!0),yr.add(e,o),o.A=0}}function Al(o){return!(o.g||o.u||3<=o.A||(o.ba++,o.u=As(Qe(o.Ma,o),Ri(o,o.A)),o.A++,0))}function Ka(o){null!=o.B&&(Pe.clearTimeout(o.B),o.B=null)}function sl(o){o.g=new ln(o,o.l,"rpc",o.ba),null===o.o&&(o.g.I=o.s),o.g.O=0;var e=Si(o.wa);Pi(e,"RID","rpc"),Pi(e,"SID",o.K),Pi(e,"AID",o.V),Pi(e,"CI",o.G?"0":"1"),!o.G&&o.qa&&Pi(e,"TO",o.qa),Pi(e,"TYPE","xmlhttp"),$r(o,e),o.o&&o.s&&ds(e,o.o,o.s),o.L&&o.g.setTimeout(o.L);var n=o.g;o=o.pa,n.L=1,n.v=Na(Si(e)),n.s=null,n.S=!0,Ni(n,o)}function zo(o){null!=o.v&&(Pe.clearTimeout(o.v),o.v=null)}function Za(o,e){var n=null;if(o.g==e){zo(o),Ka(o),o.g=null;var a=2}else{if(!Wi(o.i,e))return;n=e.F,Ca(o.i,e),a=1}if(0!=o.H)if(e.i)if(1==a){n=e.s?e.s.length:0,e=Date.now()-e.G;var d=o.C;Ne(a=ba(),new qa(a,n)),hs(o)}else il(o);else if(3==(d=e.o)||0==d&&0<e.ca||!(1==a&&function Fa(o,e){return!(Wa(o.i)>=o.i.j-(o.m?1:0)||(o.m?(o.j=e.F.concat(o.j),0):1==o.H||2==o.H||o.C>=(o.cb?0:o.eb)||(o.m=As(Qe(o.Na,o,e),Ri(o,o.C)),o.C++,0)))}(o,e)||2==a&&Al(o)))switch(n&&0<n.length&&(e=o.i,e.i=e.i.concat(n)),d){case 1:Qo(o,5);break;case 4:Qo(o,10);break;case 3:Qo(o,6);break;default:Qo(o,2)}}function Ri(o,e){let n=o.ab+Math.floor(Math.random()*o.hb);return o.isActive()||(n*=2),n*e}function Qo(o,e){if(o.l.info("Error code "+e),2==e){var n=null;o.h&&(n=null);var a=Qe(o.pb,o);n||(n=new ks("//www.google.com/images/cleardot.gif"),Pe.location&&"http"==Pe.location.protocol||Ta(n,"https"),Na(n)),function Ki(o,e){const n=new no;if(Pe.Image){const a=new Image;a.onload=dt(du,n,a,"TestLoadImage: loaded",!0,e),a.onerror=dt(du,n,a,"TestLoadImage: error",!1,e),a.onabort=dt(du,n,a,"TestLoadImage: abort",!1,e),a.ontimeout=dt(du,n,a,"TestLoadImage: timeout",!1,e),Pe.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=o}else e(!1)}(n.toString(),a)}else as(2);o.H=0,o.h&&o.h.za(e),ol(o),Eo(o)}function ol(o){if(o.H=0,o.ma=[],o.h){const e=Ro(o.i);(0!=e.length||0!=o.j.length)&&(Kt(o.ma,e),Kt(o.ma,o.j),o.i.i.length=0,Lt(o.j),o.j.length=0),o.h.ya()}}function al(o,e,n){var a=n instanceof ks?Si(n):new ks(n);if(""!=a.g)e&&(a.g=e+"."+a.g),na(a,a.m);else{var d=Pe.location;a=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var g=new ks(null);a&&Ta(g,a),e&&(g.g=e),d&&na(g,d),n&&(g.l=n),a=g}return e=o.Da,(n=o.F)&&e&&Pi(a,n,e),Pi(a,"VER",o.ra),$r(o,a),a}function Uu(o,e,n){if(e&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xe(n&&o.Ha&&!o.va?new ee({ob:!0}):o.va)).Oa(o.J),e}function Sa(){}function hu(){if(Yr&&!(10<=Number(Gi)))throw Error("Environmental error: no available transport.")}function No(o,e){pe.call(this),this.g=new so(e),this.l=o,this.h=e&&e.messageUrlParams||null,o=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(o?o["X-WebChannel-Content-Type"]=e.messageContentType:o={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(o?o["X-WebChannel-Client-Profile"]=e.Ca:o={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=o,(o=e&&e.cc)&&!jn(o)&&(this.g.o=o),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jn(e)&&(this.g.F=e,null!==(o=this.h)&&e in o&&e in(o=this.h)&&delete o[e]),this.j=new oo(this)}function fu(o){mt.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var e=o.__sm__;if(e){e:{for(const n in e){o=n;break e}o=void 0}(this.i=o)&&(o=this.i,e=null!==e&&o in e?e[o]:void 0),this.data=e}else this.data=o}function Lo(){ft.call(this),this.status=1}function oo(o){this.g=o}function Br(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ra(o,e,n){n||(n=0);var a=Array(16);if("string"==typeof e)for(var d=0;16>d;++d)a[d]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(d=0;16>d;++d)a[d]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var g=o.g[3],T=(e=o.g[0])+(g^(n=o.g[1])&((d=o.g[2])^g))+a[0]+3614090360&4294967295;T=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=(n=(d=(g=(e=n+(T<<7&4294967295|T>>>25))+((T=g+(d^e&(n^d))+a[1]+3905402710&4294967295)<<12&4294967295|T>>>20))+((T=d+(n^g&(e^n))+a[2]+606105819&4294967295)<<17&4294967295|T>>>15))+((T=n+(e^d&(g^e))+a[3]+3250441966&4294967295)<<22&4294967295|T>>>10))+((T=e+(g^n&(d^g))+a[4]+4118548399&4294967295)<<7&4294967295|T>>>25))+((T=g+(d^e&(n^d))+a[5]+1200080426&4294967295)<<12&4294967295|T>>>20))+((T=d+(n^g&(e^n))+a[6]+2821735955&4294967295)<<17&4294967295|T>>>15))+((T=n+(e^d&(g^e))+a[7]+4249261313&4294967295)<<22&4294967295|T>>>10))+((T=e+(g^n&(d^g))+a[8]+1770035416&4294967295)<<7&4294967295|T>>>25))+((T=g+(d^e&(n^d))+a[9]+2336552879&4294967295)<<12&4294967295|T>>>20))+((T=d+(n^g&(e^n))+a[10]+4294925233&4294967295)<<17&4294967295|T>>>15))+((T=n+(e^d&(g^e))+a[11]+2304563134&4294967295)<<22&4294967295|T>>>10))+((T=e+(g^n&(d^g))+a[12]+1804603682&4294967295)<<7&4294967295|T>>>25))+((T=g+(d^e&(n^d))+a[13]+4254626195&4294967295)<<12&4294967295|T>>>20))+((T=d+(n^g&(e^n))+a[14]+2792965006&4294967295)<<17&4294967295|T>>>15))+((T=n+(e^d&(g^e))+a[15]+1236535329&4294967295)<<22&4294967295|T>>>10))+((T=e+(d^g&(n^d))+a[1]+4129170786&4294967295)<<5&4294967295|T>>>27))+((T=g+(n^d&(e^n))+a[6]+3225465664&4294967295)<<9&4294967295|T>>>23))+((T=d+(e^n&(g^e))+a[11]+643717713&4294967295)<<14&4294967295|T>>>18))+((T=n+(g^e&(d^g))+a[0]+3921069994&4294967295)<<20&4294967295|T>>>12))+((T=e+(d^g&(n^d))+a[5]+3593408605&4294967295)<<5&4294967295|T>>>27))+((T=g+(n^d&(e^n))+a[10]+38016083&4294967295)<<9&4294967295|T>>>23))+((T=d+(e^n&(g^e))+a[15]+3634488961&4294967295)<<14&4294967295|T>>>18))+((T=n+(g^e&(d^g))+a[4]+3889429448&4294967295)<<20&4294967295|T>>>12))+((T=e+(d^g&(n^d))+a[9]+568446438&4294967295)<<5&4294967295|T>>>27))+((T=g+(n^d&(e^n))+a[14]+3275163606&4294967295)<<9&4294967295|T>>>23))+((T=d+(e^n&(g^e))+a[3]+4107603335&4294967295)<<14&4294967295|T>>>18))+((T=n+(g^e&(d^g))+a[8]+1163531501&4294967295)<<20&4294967295|T>>>12))+((T=e+(d^g&(n^d))+a[13]+2850285829&4294967295)<<5&4294967295|T>>>27))+((T=g+(n^d&(e^n))+a[2]+4243563512&4294967295)<<9&4294967295|T>>>23))+((T=d+(e^n&(g^e))+a[7]+1735328473&4294967295)<<14&4294967295|T>>>18))+((T=n+(g^e&(d^g))+a[12]+2368359562&4294967295)<<20&4294967295|T>>>12))+((T=e+(n^d^g)+a[5]+4294588738&4294967295)<<4&4294967295|T>>>28))+((T=g+(e^n^d)+a[8]+2272392833&4294967295)<<11&4294967295|T>>>21))+((T=d+(g^e^n)+a[11]+1839030562&4294967295)<<16&4294967295|T>>>16))+((T=n+(d^g^e)+a[14]+4259657740&4294967295)<<23&4294967295|T>>>9))+((T=e+(n^d^g)+a[1]+2763975236&4294967295)<<4&4294967295|T>>>28))+((T=g+(e^n^d)+a[4]+1272893353&4294967295)<<11&4294967295|T>>>21))+((T=d+(g^e^n)+a[7]+4139469664&4294967295)<<16&4294967295|T>>>16))+((T=n+(d^g^e)+a[10]+3200236656&4294967295)<<23&4294967295|T>>>9))+((T=e+(n^d^g)+a[13]+681279174&4294967295)<<4&4294967295|T>>>28))+((T=g+(e^n^d)+a[0]+3936430074&4294967295)<<11&4294967295|T>>>21))+((T=d+(g^e^n)+a[3]+3572445317&4294967295)<<16&4294967295|T>>>16))+((T=n+(d^g^e)+a[6]+76029189&4294967295)<<23&4294967295|T>>>9))+((T=e+(n^d^g)+a[9]+3654602809&4294967295)<<4&4294967295|T>>>28))+((T=g+(e^n^d)+a[12]+3873151461&4294967295)<<11&4294967295|T>>>21))+((T=d+(g^e^n)+a[15]+530742520&4294967295)<<16&4294967295|T>>>16))+((T=n+(d^g^e)+a[2]+3299628645&4294967295)<<23&4294967295|T>>>9))+((T=e+(d^(n|~g))+a[0]+4096336452&4294967295)<<6&4294967295|T>>>26))+((T=g+(n^(e|~d))+a[7]+1126891415&4294967295)<<10&4294967295|T>>>22))+((T=d+(e^(g|~n))+a[14]+2878612391&4294967295)<<15&4294967295|T>>>17))+((T=n+(g^(d|~e))+a[5]+4237533241&4294967295)<<21&4294967295|T>>>11))+((T=e+(d^(n|~g))+a[12]+1700485571&4294967295)<<6&4294967295|T>>>26))+((T=g+(n^(e|~d))+a[3]+2399980690&4294967295)<<10&4294967295|T>>>22))+((T=d+(e^(g|~n))+a[10]+4293915773&4294967295)<<15&4294967295|T>>>17))+((T=n+(g^(d|~e))+a[1]+2240044497&4294967295)<<21&4294967295|T>>>11))+((T=e+(d^(n|~g))+a[8]+1873313359&4294967295)<<6&4294967295|T>>>26))+((T=g+(n^(e|~d))+a[15]+4264355552&4294967295)<<10&4294967295|T>>>22))+((T=d+(e^(g|~n))+a[6]+2734768916&4294967295)<<15&4294967295|T>>>17))+((T=n+(g^(d|~e))+a[13]+1309151649&4294967295)<<21&4294967295|T>>>11))+((g=(e=n+((T=e+(d^(n|~g))+a[4]+4149444226&4294967295)<<6&4294967295|T>>>26))+((T=g+(n^(e|~d))+a[11]+3174756917&4294967295)<<10&4294967295|T>>>22))^((d=g+((T=d+(e^(g|~n))+a[2]+718787259&4294967295)<<15&4294967295|T>>>17))|~e))+a[9]+3951481745&4294967295,o.g[0]=o.g[0]+e&4294967295,o.g[1]=o.g[1]+(d+(T<<21&4294967295|T>>>11))&4294967295,o.g[2]=o.g[2]+d&4294967295,o.g[3]=o.g[3]+g&4294967295}function N(o,e){this.h=e;for(var n=[],a=!0,d=o.length-1;0<=d;d--){var g=0|o[d];a&&g==e||(n[d]=g,a=!1)}this.g=n}(W=xe.prototype).Oa=function(o){this.M=o},W.ha=function(o,e,n,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+o);e=e?e.toUpperCase():"GET",this.I=o,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ct.g(),this.C=function Mo(o){return o.h||(o.h=o.i())}(this.u?this.u:Ct),this.g.onreadystatechange=Qe(this.La,this);try{this.G=!0,this.g.open(e,String(o),!0),this.G=!1}catch(g){return void qn(this,g)}if(o=n||"",n=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var d in a)n.set(d,a[d]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const g of a.keys())n.set(g,a.get(g))}a=Array.from(n.keys()).find(g=>"content-type"==g.toLowerCase()),d=Pe.FormData&&o instanceof Pe.FormData,!(0<=jt(Mt,e))||a||d||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[g,T]of n)this.g.setRequestHeader(g,T);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Oi(this),0<this.B&&((this.L=function hn(o){return Yr&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qe(this.ua,this)):this.A=Ks(this.ua,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(g){qn(this,g)}},W.ua=function(){typeof ne<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ne(this,"timeout"),this.abort(8))},W.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,Ne(this,"complete"),Ne(this,"abort"),ni(this))},W.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ni(this,!0)),xe.$.N.call(this)},W.La=function(){this.s||(this.G||this.v||this.l?lr(this):this.kb())},W.kb=function(){lr(this)},W.isActive=function(){return!!this.g},W.da=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},W.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},W.Wa=function(o){if(this.g){var e=this.g.responseText;return o&&0==e.indexOf(o)&&(e=e.substring(o.length)),X(e)}},W.Ia=function(){return this.m},W.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(W=so.prototype).ra=8,W.H=1,W.Na=function(o){if(this.m)if(this.m=null,1==this.H){if(!o){this.W=Math.floor(1e5*Math.random()),o=this.W++;const d=new ln(this,this.l,o);let g=this.s;if(this.U&&(g?(g=zi(g),Xi(g,this.U)):g=this.U),null!==this.o||this.O||(d.I=g,g=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var a=this.j[n];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=mo(this,d,e),Pi(n=Si(this.I),"RID",o),Pi(n,"CVER",22),this.F&&Pi(n,"X-HTTP-Session-Id",this.F),$r(this,n),g&&(this.O?e="headers="+encodeURIComponent(String(Zi(g)))+"&"+e:this.o&&ds(n,this.o,g)),To(this.i,d),this.bb&&Pi(n,"TYPE","init"),this.P?(Pi(n,"$req",e),Pi(n,"SID","null"),d.aa=!0,$s(d,n,null)):$s(d,n,e),this.H=2}}else 3==this.H&&(o?da(this,o):0==this.j.length||wa(this.i)||da(this))},W.Ma=function(){if(this.u=null,sl(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var o=2*this.S;this.l.info("BP detection timer enabled: "+o),this.B=As(Qe(this.jb,this),o)}},W.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,as(10),xs(this),sl(this))},W.ib=function(){null!=this.v&&(this.v=null,xs(this),Al(this),as(19))},W.pb=function(o){o?(this.l.info("Successfully pinged google.com"),as(2)):(this.l.info("Failed to ping google.com"),as(1))},W.isActive=function(){return!!this.h&&this.h.isActive(this)},(W=Sa.prototype).Ba=function(){},W.Aa=function(){},W.za=function(){},W.ya=function(){},W.isActive=function(){return!0},W.Va=function(){},hu.prototype.g=function(o,e){return new No(o,e)},at(No,pe),No.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var o=this.g,e=this.l,n=this.h||void 0;as(0),o.Y=e,o.na=n||{},o.G=o.aa,o.I=al(o,null,o.Y),hs(o)},No.prototype.close=function(){ki(this.g)},No.prototype.u=function(o){var e=this.g;if("string"==typeof o){var n={};n.__data__=o,o=n}else this.v&&((n={}).__data__=cn(o),o=n);e.j.push(new class{constructor(o,e){this.g=o,this.map=e}}(e.fb++,o)),3==e.H&&hs(e)},No.prototype.N=function(){this.g.h=null,delete this.j,ki(this.g),delete this.g,No.$.N.call(this)},at(fu,mt),at(Lo,ft),at(oo,Sa),oo.prototype.Ba=function(){Ne(this.g,"a")},oo.prototype.Aa=function(o){Ne(this.g,new fu(o))},oo.prototype.za=function(o){Ne(this.g,new Lo)},oo.prototype.ya=function(){Ne(this.g,"b")},at(Br,function ul(){this.blockSize=-1}),Br.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Br.prototype.j=function(o,e){void 0===e&&(e=o.length);for(var n=e-this.blockSize,a=this.m,d=this.h,g=0;g<e;){if(0==d)for(;g<=n;)ra(this,o,g),g+=this.blockSize;if("string"==typeof o){for(;g<e;)if(a[d++]=o.charCodeAt(g++),d==this.blockSize){ra(this,a),d=0;break}}else for(;g<e;)if(a[d++]=o[g++],d==this.blockSize){ra(this,a),d=0;break}}this.h=d,this.i+=e},Br.prototype.l=function(){var o=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);o[0]=128;for(var e=1;e<o.length-8;++e)o[e]=0;var n=8*this.i;for(e=o.length-8;e<o.length;++e)o[e]=255&n,n/=256;for(this.j(o),o=Array(16),e=n=0;4>e;++e)for(var a=0;32>a;a+=8)o[n++]=this.g[e]>>>a&255;return o};var ae={};function z(o){return-128<=o&&128>o?function $n(o,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,o)?n[o]:n[o]=e(o)}(o,function(e){return new N([0|e],0>e?-1:0)}):new N([0|o],0>o?-1:0)}function Te(o){if(isNaN(o)||!isFinite(o))return Zt;if(0>o)return hr(Te(-o));for(var e=[],n=1,a=0;o>=n;a++)e[a]=o/n|0,n*=Nt;return new N(e,0)}var Nt=4294967296,Zt=z(0),Jn=z(1),es=z(16777216);function Gr(o){if(0!=o.h)return!1;for(var e=0;e<o.g.length;e++)if(0!=o.g[e])return!1;return!0}function zr(o){return-1==o.h}function hr(o){for(var e=o.g.length,n=[],a=0;a<e;a++)n[a]=~o.g[a];return new N(n,~o.h).add(Jn)}function ji(o,e){return o.add(hr(e))}function Jr(o,e){for(;(65535&o[e])!=o[e];)o[e+1]+=o[e]>>>16,o[e]&=65535,e++}function Yi(o,e){this.g=o,this.h=e}function vr(o,e){if(Gr(e))throw Error("division by zero");if(Gr(o))return new Yi(Zt,Zt);if(zr(o))return e=vr(hr(o),e),new Yi(hr(e.g),hr(e.h));if(zr(e))return e=vr(o,hr(e)),new Yi(hr(e.g),e.h);if(30<o.g.length){if(zr(o)||zr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Jn,a=e;0>=a.X(o);)n=Qn(n),a=Qn(a);var d=qo(n,1),g=qo(a,1);for(a=qo(a,2),n=qo(n,2);!Gr(a);){var T=g.add(a);0>=T.X(o)&&(d=d.add(n),g=T),a=qo(a,1),n=qo(n,1)}return e=ji(o,d.R(e)),new Yi(d,e)}for(d=Zt;0<=o.X(e);){for(n=Math.max(1,Math.floor(o.ea()/e.ea())),a=48>=(a=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,a-48),T=(g=Te(n)).R(e);zr(T)||0<T.X(o);)T=(g=Te(n-=a)).R(e);Gr(g)&&(g=Jn),d=d.add(g),o=ji(o,T)}return new Yi(d,o)}function Qn(o){for(var e=o.g.length+1,n=[],a=0;a<e;a++)n[a]=o.D(a)<<1|o.D(a-1)>>>31;return new N(n,o.h)}function qo(o,e){var n=e>>5;e%=32;for(var a=o.g.length-n,d=[],g=0;g<a;g++)d[g]=0<e?o.D(g+n)>>>e|o.D(g+n+1)<<32-e:o.D(g+n);return new N(d,o.h)}(W=N.prototype).ea=function(){if(zr(this))return-hr(this).ea();for(var o=0,e=1,n=0;n<this.g.length;n++){var a=this.D(n);o+=(0<=a?a:Nt+a)*e,e*=Nt}return o},W.toString=function(o){if(2>(o=o||10)||36<o)throw Error("radix out of range: "+o);if(Gr(this))return"0";if(zr(this))return"-"+hr(this).toString(o);for(var e=Te(Math.pow(o,6)),n=this,a="";;){var d=vr(n,e).g,g=((0<(n=ji(n,d.R(e))).g.length?n.g[0]:n.h)>>>0).toString(o);if(Gr(n=d))return g+a;for(;6>g.length;)g="0"+g;a=g+a}},W.D=function(o){return 0>o?0:o<this.g.length?this.g[o]:this.h},W.X=function(o){return zr(o=ji(this,o))?-1:Gr(o)?0:1},W.abs=function(){return zr(this)?hr(this):this},W.add=function(o){for(var e=Math.max(this.g.length,o.g.length),n=[],a=0,d=0;d<=e;d++){var g=a+(65535&this.D(d))+(65535&o.D(d)),T=(g>>>16)+(this.D(d)>>>16)+(o.D(d)>>>16);a=T>>>16,n[d]=(T&=65535)<<16|(g&=65535)}return new N(n,-2147483648&n[n.length-1]?-1:0)},W.R=function(o){if(Gr(this)||Gr(o))return Zt;if(zr(this))return zr(o)?hr(this).R(hr(o)):hr(hr(this).R(o));if(zr(o))return hr(this.R(hr(o)));if(0>this.X(es)&&0>o.X(es))return Te(this.ea()*o.ea());for(var e=this.g.length+o.g.length,n=[],a=0;a<2*e;a++)n[a]=0;for(a=0;a<this.g.length;a++)for(var d=0;d<o.g.length;d++){var g=this.D(a)>>>16,T=65535&this.D(a),O=o.D(d)>>>16,Z=65535&o.D(d);n[2*a+2*d]+=T*Z,Jr(n,2*a+2*d),n[2*a+2*d+1]+=g*Z,Jr(n,2*a+2*d+1),n[2*a+2*d+1]+=T*O,Jr(n,2*a+2*d+1),n[2*a+2*d+2]+=g*O,Jr(n,2*a+2*d+2)}for(a=0;a<e;a++)n[a]=n[2*a+1]<<16|n[2*a];for(a=e;a<2*e;a++)n[a]=0;return new N(n,0)},W.gb=function(o){return vr(this,o).h},W.and=function(o){for(var e=Math.max(this.g.length,o.g.length),n=[],a=0;a<e;a++)n[a]=this.D(a)&o.D(a);return new N(n,this.h&o.h)},W.or=function(o){for(var e=Math.max(this.g.length,o.g.length),n=[],a=0;a<e;a++)n[a]=this.D(a)|o.D(a);return new N(n,this.h|o.h)},W.xor=function(o){for(var e=Math.max(this.g.length,o.g.length),n=[],a=0;a<e;a++)n[a]=this.D(a)^o.D(a);return new N(n,this.h^o.h)},hu.prototype.createWebChannel=hu.prototype.g,No.prototype.send=No.prototype.u,No.prototype.open=No.prototype.m,No.prototype.close=No.prototype.close,_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,us.COMPLETE="complete",is.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",pe.prototype.listen=pe.prototype.O,xe.prototype.listenOnce=xe.prototype.P,xe.prototype.getLastError=xe.prototype.Sa,xe.prototype.getLastErrorCode=xe.prototype.Ia,xe.prototype.getStatus=xe.prototype.da,xe.prototype.getResponseJson=xe.prototype.Wa,xe.prototype.getResponseText=xe.prototype.ja,xe.prototype.send=xe.prototype.ha,xe.prototype.setWithCredentials=xe.prototype.Oa,Br.prototype.digest=Br.prototype.l,Br.prototype.reset=Br.prototype.reset,Br.prototype.update=Br.prototype.j,N.prototype.add=N.prototype.add,N.prototype.multiply=N.prototype.R,N.prototype.modulo=N.prototype.gb,N.prototype.compare=N.prototype.X,N.prototype.toNumber=N.prototype.ea,N.prototype.toString=N.prototype.toString,N.prototype.getBits=N.prototype.D,N.fromNumber=Te,N.fromString=function Ke(o,e){if(0==o.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==o.charAt(0))return hr(Ke(o.substring(1),e));if(0<=o.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Te(Math.pow(e,8)),a=Zt,d=0;d<o.length;d+=8){var g=Math.min(8,o.length-d),T=parseInt(o.substring(d,d+g),e);8>g?(g=Te(Math.pow(e,g)),a=a.R(g).add(Te(T))):a=(a=a.R(n)).add(Te(T))}return a};var Fo=ut.createWebChannelTransport=function(){return new hu},bs=ut.getStatEventTarget=function(){return ba()},ia=ut.ErrorCode=_r,ja=ut.EventType=us,Nc=ut.Event=ro,jo=ut.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},kl=ut.FetchXmlHttpFactory=ee,wu=ut.WebChannel=is,Ml=ut.XhrIo=xe,sd=ut.Md5=Br,Cu=ut.Integer=N;const pn="@firebase/firestore";class Er{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");let pu="9.23.0";const zs=new Ee.Yd("@firebase/firestore");function ao(){return zs.logLevel}function En(o,...e){if(zs.logLevel<=Ee.in.DEBUG){const n=e.map(Ba);zs.debug(`Firestore (${pu}): ${o}`,...n)}}function Ui(o,...e){if(zs.logLevel<=Ee.in.ERROR){const n=e.map(Ba);zs.error(`Firestore (${pu}): ${o}`,...n)}}function Js(o,...e){if(zs.logLevel<=Ee.in.WARN){const n=e.map(Ba);zs.warn(`Firestore (${pu}): ${o}`,...n)}}function Ba(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch{return o}}function In(o="Unexpected state"){const e=`FIRESTORE (${pu}) INTERNAL ASSERTION FAILED: `+o;throw Ui(e),new Error(e)}function or(o,e){o||In()}function kn(o,e){return o}const Vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gn extends _e.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Ua{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Er.UNAUTHENTICATED))}shutdown(){}}class Pl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Xo{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var a=this;let d=this.i;const g=ue=>this.i!==d?(d=this.i,n(ue)):Promise.resolve();let T=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),T.resolve(),T=new ui,e.enqueueRetryable(()=>g(this.currentUser))};const O=()=>{const ue=T;e.enqueueRetryable((0,Ve.Z)(function*(){yield ue.promise,yield g(a.currentUser)}))},Z=ue=>{En("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ue,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(ue=>Z(ue)),setTimeout(()=>{if(!this.auth){const ue=this.t.getImmediate({optional:!0});ue?Z(ue):(En("FirebaseAuthCredentialsProvider","Auth not yet detected"),T.resolve(),T=new ui)}},0),O()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(a=>this.i!==e?(En("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(or("string"==typeof a.accessToken),new Ua(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return or(null===e||"string"==typeof e),new Er(e)}}class rc{constructor(e,n,a){this.h=e,this.l=n,this.m=a,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ol{constructor(e,n,a){this.h=e,this.l=n,this.m=a}getToken(){return Promise.resolve(new rc(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Da{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ic{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const a=g=>{null!=g.error&&En("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const T=g.token!==this.T;return this.T=g.token,En("FirebaseAppCheckTokenProvider",`Received ${T?"new":"existing"} token.`),T?n(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>a(g))};const d=g=>{En("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.I.onInit(g=>d(g)),setTimeout(()=>{if(!this.appCheck){const g=this.I.getImmediate({optional:!0});g?d(g):En("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(or("string"==typeof n.token),this.T=n.token,new Da(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Rl(o){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(o);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let a=0;a<o;a++)n[a]=Math.floor(256*Math.random());return n}class $u{static A(){const n=62*Math.floor(256/62);let a="";for(;a.length<20;){const d=Rl(40);for(let g=0;g<d.length;++g)a.length<20&&d[g]<n&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(d[g]%62))}return a}}function Nr(o,e){return o<e?-1:o>e?1:0}function Hu(o,e,n){return o.length===e.length&&o.every((a,d)=>n(a,e[d]))}function Jo(o){return o+"\0"}class gi{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new gn(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new gn(Vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new gn(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gn(Vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gi.fromMillis(Date.now())}static fromDate(e){return gi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*n));return new gi(n,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nr(this.nanoseconds,e.nanoseconds):Nr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class cr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new cr(e)}static min(){return new cr(new gi(0,0))}static max(){return new cr(new gi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ha{constructor(e,n,a){void 0===n?n=0:n>e.length&&In(),void 0===a?a=e.length-n:a>e.length-n&&In(),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return 0===ha.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ha?e.forEach(a=>{n.push(a)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let d=0;d<a;d++){const g=e.get(d),T=n.get(d);if(g<T)return-1;if(g>T)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Di extends ha{construct(e,n,a){return new Di(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new gn(Vt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter(d=>d.length>0))}return new Di(n)}static emptyPath(){return new Di([])}}const Ef=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends ha{construct(e,n,a){return new qr(e,n,a)}static isValidIdentifier(e){return Ef.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qr(["__name__"])}static fromServerFormat(e){const n=[];let a="",d=0;const g=()=>{if(0===a.length)throw new gn(Vt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let T=!1;for(;d<e.length;){const O=e[d];if("\\"===O){if(d+1===e.length)throw new gn(Vt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Z=e[d+1];if("\\"!==Z&&"."!==Z&&"`"!==Z)throw new gn(Vt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=Z,d+=2}else"`"===O?(T=!T,d++):"."!==O||T?(a+=O,d++):(g(),d++)}if(g(),T)throw new gn(Vt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(n)}static emptyPath(){return new qr([])}}class yn{constructor(e){this.path=e}static fromPath(e){return new yn(Di.fromString(e))}static fromName(e){return new yn(Di.fromString(e).popFirst(5))}static empty(){return new yn(Di.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Di.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Di.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yn(new Di(e.slice()))}}class A{constructor(e,n,a,d){this.indexId=e,this.collectionGroup=n,this.fields=a,this.indexState=d}}function R(o){return o.fields.find(e=>2===e.kind)}function D(o){return o.fields.filter(e=>2!==e.kind)}A.UNKNOWN_ID=-1;class oe{constructor(e,n){this.fieldPath=e,this.kind=n}}class Oe{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Oe(0,Hn.min())}}function St(o,e){const n=o.toTimestamp().seconds,a=o.toTimestamp().nanoseconds+1,d=cr.fromTimestamp(1e9===a?new gi(n+1,0):new gi(n,a));return new Hn(d,yn.empty(),e)}function _n(o){return new Hn(o.readTime,o.key,-1)}class Hn{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Hn(cr.min(),yn.empty(),-1)}static max(){return new Hn(cr.max(),yn.empty(),-1)}}function fr(o,e){let n=o.readTime.compareTo(e.readTime);return 0!==n?n:(n=yn.comparator(o.documentKey,e.documentKey),0!==n?n:Nr(o.largestBatchId,e.largestBatchId))}const Mi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function vo(o){return Gu.apply(this,arguments)}function Gu(){return Gu=(0,Ve.Z)(function*(o){if(o.code!==Vt.FAILED_PRECONDITION||o.message!==Mi)throw o;En("LocalStore","Unexpectedly lost primary lease")}),Gu.apply(this,arguments)}class Pt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&In(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Pt((a,d)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(a,d)},this.catchCallback=g=>{this.wrapFailure(n,g).next(a,d)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Pt?n:Pt.resolve(n)}catch(n){return Pt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Pt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Pt.reject(n)}static resolve(e){return new Pt((n,a)=>{n(e)})}static reject(e){return new Pt((n,a)=>{a(e)})}static waitFor(e){return new Pt((n,a)=>{let d=0,g=0,T=!1;e.forEach(O=>{++d,O.next(()=>{++g,T&&g===d&&n()},Z=>a(Z))}),T=!0,g===d&&n()})}static or(e){let n=Pt.resolve(!1);for(const a of e)n=n.next(d=>d?Pt.resolve(d):a());return n}static forEach(e,n){const a=[];return e.forEach((d,g)=>{a.push(n.call(this,d,g))}),this.waitFor(a)}static mapArray(e,n){return new Pt((a,d)=>{const g=e.length,T=new Array(g);let O=0;for(let Z=0;Z<g;Z++){const ue=Z;n(e[ue]).next(Ie=>{T[ue]=Ie,++O,O===g&&a(T)},Ie=>d(Ie))}})}static doWhile(e,n){return new Pt((a,d)=>{const g=()=>{!0===e()?n().next(()=>{g()},d):a()};g()})}}class Nl{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new ui,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new fs(e,n.error)):this.v.resolve()},this.transaction.onerror=a=>{const d=Fc(a.target.error);this.v.reject(new fs(e,d))}}static open(e,n,a,d){try{return new Nl(n,e.transaction(d,a))}catch(g){throw new fs(n,g)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(En("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Lc(n)}}class Bs{constructor(e,n,a){this.name=e,this.version=n,this.V=a,12.2===Bs.S((0,_e.z$)())&&Ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return En("SimpleDb","Removing database:",e),un(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,_e.hl)())return!1;if(Bs.C())return!0;const e=(0,_e.z$)(),n=Bs.S(e),a=0<n&&n<10,d=Bs.N(e),g=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||g)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static N(e){const n=e.match(/Android ([\d.]+)/i),a=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(a)}$(e){var n=this;return(0,Ve.Z)(function*(){return n.db||(En("SimpleDb","Opening database:",n.name),n.db=yield new Promise((a,d)=>{const g=indexedDB.open(n.name,n.version);g.onsuccess=T=>{a(T.target.result)},g.onblocked=()=>{d(new fs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=T=>{const O=T.target.error;d("VersionError"===O.name?new gn(Vt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new gn(Vt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new fs(e,O))},g.onupgradeneeded=T=>{En("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',T.oldVersion),n.V.O(T.target.result,g.transaction,T.oldVersion,n.version).next(()=>{En("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.F&&(n.db.onversionchange=a=>n.F(a)),n.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,a,d){var g=this;return(0,Ve.Z)(function*(){const T="readonly"===n;let O=0;for(;;){++O;try{g.db=yield g.$(e);const Z=Nl.open(g.db,e,T?"readonly":"readwrite",a),ue=d(Z).next(Ie=>(Z.P(),Ie)).catch(Ie=>(Z.abort(Ie),Pt.reject(Ie))).toPromise();return ue.catch(()=>{}),yield Z.R,ue}catch(Z){const ue=Z,Ie="FirebaseError"!==ue.name&&O<3;if(En("SimpleDb","Transaction failed with error:",ue.message,"Retrying:",Ie),g.close(),!Ie)return Promise.reject(ue)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class cl{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return un(this.L.delete())}}class fs extends gn{constructor(e,n){super(Vt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function zu(o){return"IndexedDbTransactionError"===o.name}class Lc{constructor(e){this.store=e}put(e,n){let a;return void 0!==n?(En("SimpleDb","PUT",this.store.name,e,n),a=this.store.put(n,e)):(En("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),un(a)}add(e){return En("SimpleDb","ADD",this.store.name,e,e),un(this.store.add(e))}get(e){return un(this.store.get(e)).next(n=>(void 0===n&&(n=null),En("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return En("SimpleDb","DELETE",this.store.name,e),un(this.store.delete(e))}count(){return En("SimpleDb","COUNT",this.store.name),un(this.store.count())}j(e,n){const a=this.options(e,n);if(a.index||"function"!=typeof this.store.getAll){const d=this.cursor(a),g=[];return this.W(d,(T,O)=>{g.push(O)}).next(()=>g)}{const d=this.store.getAll(a.range);return new Pt((g,T)=>{d.onerror=O=>{T(O.target.error)},d.onsuccess=O=>{g(O.target.result)}})}}H(e,n){const a=this.store.getAll(e,null===n?void 0:n);return new Pt((d,g)=>{a.onerror=T=>{g(T.target.error)},a.onsuccess=T=>{d(T.target.result)}})}J(e,n){En("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,n);a.Y=!1;const d=this.cursor(a);return this.W(d,(g,T,O)=>O.delete())}X(e,n){let a;n?a=e:(a={},n=e);const d=this.cursor(a);return this.W(d,n)}Z(e){const n=this.cursor({});return new Pt((a,d)=>{n.onerror=g=>{const T=Fc(g.target.error);d(T)},n.onsuccess=g=>{const T=g.target.result;T?e(T.primaryKey,T.value).next(O=>{O?T.continue():a()}):a()}})}W(e,n){const a=[];return new Pt((d,g)=>{e.onerror=T=>{g(T.target.error)},e.onsuccess=T=>{const O=T.target.result;if(!O)return void d();const Z=new cl(O),ue=n(O.primaryKey,O.value,Z);if(ue instanceof Pt){const Ie=ue.catch(nt=>(Z.done(),Pt.reject(nt)));a.push(Ie)}Z.isDone?d():null===Z.K?O.continue():O.continue(Z.K)}}).next(()=>Pt.waitFor(a))}options(e,n){let a;return void 0!==e&&("string"==typeof e?a=e:n=e),{index:a,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const a=this.store.index(e.index);return e.Y?a.openKeyCursor(e.range,n):a.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function un(o){return new Pt((e,n)=>{o.onsuccess=a=>{e(a.target.result)},o.onerror=a=>{const d=Fc(a.target.error);n(d)}})}let Ld=!1;function Fc(o){const e=Bs.S((0,_e.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(n)>=0){const a=new gn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ld||(Ld=!0,setTimeout(()=>{throw a},0)),a}}return o}class Fd{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var n=this;En("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ve.Z)(function*(){n.task=null;try{En("IndexBackiller",`Documents written: ${yield n.tt.nt()}`)}catch(a){zu(a)?En("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield vo(a)}yield n.et(6e4)}))}}class Ia{constructor(e,n){this.localStore=e,this.persistence=n}nt(e=50){var n=this;return(0,Ve.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>n.st(a,e))})()}st(e,n){const a=new Set;let d=n,g=!0;return Pt.doWhile(()=>!0===g&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(T=>{if(null!==T&&!a.has(T))return En("IndexBackiller",`Processing collection: ${T}`),this.it(e,T,d).next(O=>{d-=O,a.add(T)});g=!1})).next(()=>n-d)}it(e,n,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(d=>this.localStore.localDocuments.getNextDocuments(e,n,d,a).next(g=>{const T=g.changes;return this.localStore.indexManager.updateIndexEntries(e,T).next(()=>this.rt(d,g)).next(O=>(En("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,n,O))).next(()=>T.size)}))}rt(e,n){let a=e;return n.changes.forEach((d,g)=>{const T=_n(g);fr(T,a)>0&&(a=T)}),new Hn(a.readTime,a.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Co=(()=>{class o{constructor(n,a){this.previousValue=n,a&&(a.sequenceNumberHandler=d=>this.ot(d),this.ut=d=>a.writeSequenceNumber(d))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return o.ct=-1,o})();function So(o){return null==o}function sc(o){return 0===o&&1/o==-1/0}function oc(o){return"number"==typeof o&&Number.isInteger(o)&&!sc(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}function Ms(o){let e="";for(let n=0;n<o.length;n++)e.length>0&&(e=jd(e)),e=ac(o.get(n),e);return jd(e)}function ac(o,e){let n=e;const a=o.length;for(let d=0;d<a;d++){const g=o.charAt(d);switch(g){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=g}}return n}function jd(o){return o+"\x01\x01"}function Vi(o){const e=o.length;if(or(e>=2),2===e)return or("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),Di.emptyPath();const n=e-2,a=[];let d="";for(let g=0;g<e;){const T=o.indexOf("\x01",g);switch((T<0||T>n)&&In(),o.charAt(T+1)){case"\x01":const O=o.substring(g,T);let Z;0===d.length?Z=O:(d+=O,Z=d,d=""),a.push(Z);break;case"\x10":d+=o.substring(g,T),d+="\0";break;case"\x11":d+=o.substring(g,T+1);break;default:In()}g=T+2}return new Di(a)}const dl=["userId","batchId"];function Va(o,e){return[o,Ms(e)]}function Ya(o,e,n){return[o,Ms(e),n]}const wf={},Cf=["prefixPath","collectionGroup","readTime","documentId"],jc=["prefixPath","collectionGroup","documentId"],Bc=["collectionGroup","readTime","prefixPath","documentId"],qu=["canonicalId","targetId"],Su=["targetId","path"],Sf=["path","targetId"],Bd=["collectionId","parent"],od=["indexId","uid"],Dh=["uid","sequenceNumber"],Ud=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ag=["indexId","uid","orderedDocumentKey"],hl=["userId","collectionPath","documentId"],uc=["userId","collectionPath","largestBatchId"],Ih=["userId","collectionGroup","largestBatchId"],Vd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xh=[...Vd,"documentOverlays"],Du=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$d=Du,Ah=[...$d,"indexConfiguration","indexState","indexEntries"];class fl extends wo{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function Do(o,e){const n=kn(o);return Bs.M(n.ht,e)}function Df(o){let e=0;for(const n in o)Object.prototype.hasOwnProperty.call(o,n)&&e++;return e}function Qa(o,e){for(const n in o)Object.prototype.hasOwnProperty.call(o,n)&&e(n,o[n])}function Ll(o){for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e))return!1;return!0}class Ii{constructor(e,n){this.comparator=e,this.root=n||Io.EMPTY}insert(e,n){return new Ii(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Io.BLACK,null,null))}remove(e){return new Ii(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Io.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(0===a)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const d=this.comparator(e,a.key);if(0===d)return n+a.left.size;d<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,a)=>(e(n,a),!1))}toString(){const e=[];return this.inorderTraversal((n,a)=>(e.push(`${n}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xa(this.root,e,this.comparator,!0)}}class Xa{constructor(e,n,a,d){this.isReverse=d,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=n?a(e.key,n):1,n&&d&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Io{constructor(e,n,a,d,g){this.key=e,this.value=n,this.color=a??Io.RED,this.left=d??Io.EMPTY,this.right=g??Io.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,d,g){return new Io(e??this.key,n??this.value,a??this.color,d??this.left,g??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let d=this;const g=a(e,d.key);return d=g<0?d.copy(null,null,null,d.left.insert(e,n,a),null):0===g?d.copy(null,n,null,null,null):d.copy(null,null,null,null,d.right.insert(e,n,a)),d.fixUp()}removeMin(){if(this.left.isEmpty())return Io.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,d=this;if(n(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,n),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===n(e,d.key)){if(d.right.isEmpty())return Io.EMPTY;a=d.right.min(),d=d.copy(a.key,a.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,n))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Io.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Io.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw In();const e=this.left.check();if(e!==this.right.check())throw In();return e+(this.isRed()?0:1)}}Io.EMPTY=null,Io.RED=!0,Io.BLACK=!1,Io.EMPTY=new class{constructor(){this.size=0}get key(){throw In()}get value(){throw In()}get color(){throw In()}get left(){throw In()}get right(){throw In()}copy(o,e,n,a,d){return this}insert(o,e,n){return new Io(o,e)}remove(o,e){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xi{constructor(e){this.comparator=e,this.data=new Ii(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,a)=>(e(n),!1))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const d=a.getNext();if(this.comparator(d.key,e[1])>=0)return;n(d.key)}}forEachWhile(e,n){let a;for(a=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yo(this.data.getIterator())}getIteratorFrom(e){return new yo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(a=>{n=n.add(a)}),n}isEqual(e){if(!(e instanceof xi)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const d=n.getNext().key,g=a.getNext().key;if(0!==this.comparator(d,g))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xi(this.comparator);return n.data=e,n}}class yo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gu(o){return o.hasNext()?o.getNext():void 0}class ss{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new ss([])}unionWith(e){let n=new xi(qr.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new ss(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hu(this.fields,e.fields,(n,a)=>n.isEqual(a))}}class Hd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Us{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Hd("Invalid base64 string: "+d):d}}(e);return new Us(n)}static fromUint8Array(e){const n=function(a){let d="";for(let g=0;g<a.length;++g)d+=String.fromCharCode(a[g]);return d}(e);return new Us(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Us.EMPTY_BYTE_STRING=new Us("");const If=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Iu(o){if(or(!!o),"string"==typeof o){let e=0;const n=If.exec(o);if(or(!!n),n[1]){let d=n[1];d=(d+"000000000").substr(0,9),e=Number(d)}const a=new Date(o);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Bo(o.seconds),nanos:Bo(o.nanos)}}function Bo(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function Ja(o){return"string"==typeof o?Us.fromBase64String(o):Us.fromUint8Array(o)}function kh(o){var e,n;return"server_timestamp"===(null===(n=((null===(e=o?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Wu(o){const e=o.mapValue.fields.__previous_value__;return kh(e)?Wu(e):e}function eo(o){const e=Iu(o.mapValue.fields.__local_write_time__.timestampValue);return new gi(e.seconds,e.nanos)}class xf{constructor(e,n,a,d,g,T,O,Z,ue){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=d,this.ssl=g,this.forceLongPolling=T,this.autoDetectLongPolling=O,this.longPollingOptions=Z,this.useFetchStreams=ue}}class eu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new eu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}const $a={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wo={nullValue:"NULL_VALUE"};function Uo(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?kh(o)?4:Vn(o)?9007199254740991:10:In()}function xu(o,e){if(o===e)return!0;const n=Uo(o);if(n!==Uo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return o.booleanValue===e.booleanValue;case 4:return eo(o).isEqual(eo(e));case 3:return function(a,d){if("string"==typeof a.timestampValue&&"string"==typeof d.timestampValue&&a.timestampValue.length===d.timestampValue.length)return a.timestampValue===d.timestampValue;const g=Iu(a.timestampValue),T=Iu(d.timestampValue);return g.seconds===T.seconds&&g.nanos===T.nanos}(o,e);case 5:return o.stringValue===e.stringValue;case 6:return d=e,Ja(o.bytesValue).isEqual(Ja(d.bytesValue));case 7:return o.referenceValue===e.referenceValue;case 8:return function(a,d){return Bo(a.geoPointValue.latitude)===Bo(d.geoPointValue.latitude)&&Bo(a.geoPointValue.longitude)===Bo(d.geoPointValue.longitude)}(o,e);case 2:return function(a,d){if("integerValue"in a&&"integerValue"in d)return Bo(a.integerValue)===Bo(d.integerValue);if("doubleValue"in a&&"doubleValue"in d){const g=Bo(a.doubleValue),T=Bo(d.doubleValue);return g===T?sc(g)===sc(T):isNaN(g)&&isNaN(T)}return!1}(o,e);case 9:return Hu(o.arrayValue.values||[],e.arrayValue.values||[],xu);case 10:return function(a,d){const g=a.mapValue.fields||{},T=d.mapValue.fields||{};if(Df(g)!==Df(T))return!1;for(const O in g)if(g.hasOwnProperty(O)&&(void 0===T[O]||!xu(g[O],T[O])))return!1;return!0}(o,e);default:return In()}var d}function lc(o,e){return void 0!==(o.values||[]).find(n=>xu(n,e))}function tu(o,e){if(o===e)return 0;const n=Uo(o),a=Uo(e);if(n!==a)return Nr(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nr(o.booleanValue,e.booleanValue);case 2:return function(d,g){const T=Bo(d.integerValue||d.doubleValue),O=Bo(g.integerValue||g.doubleValue);return T<O?-1:T>O?1:T===O?0:isNaN(T)?isNaN(O)?0:-1:1}(o,e);case 3:return Fl(o.timestampValue,e.timestampValue);case 4:return Fl(eo(o),eo(e));case 5:return Nr(o.stringValue,e.stringValue);case 6:return function(d,g){const T=Ja(d),O=Ja(g);return T.compareTo(O)}(o.bytesValue,e.bytesValue);case 7:return function(d,g){const T=d.split("/"),O=g.split("/");for(let Z=0;Z<T.length&&Z<O.length;Z++){const ue=Nr(T[Z],O[Z]);if(0!==ue)return ue}return Nr(T.length,O.length)}(o.referenceValue,e.referenceValue);case 8:return function(d,g){const T=Nr(Bo(d.latitude),Bo(g.latitude));return 0!==T?T:Nr(Bo(d.longitude),Bo(g.longitude))}(o.geoPointValue,e.geoPointValue);case 9:return function(d,g){const T=d.values||[],O=g.values||[];for(let Z=0;Z<T.length&&Z<O.length;++Z){const ue=tu(T[Z],O[Z]);if(ue)return ue}return Nr(T.length,O.length)}(o.arrayValue,e.arrayValue);case 10:return function(d,g){if(d===$a.mapValue&&g===$a.mapValue)return 0;if(d===$a.mapValue)return 1;if(g===$a.mapValue)return-1;const T=d.fields||{},O=Object.keys(T),Z=g.fields||{},ue=Object.keys(Z);O.sort(),ue.sort();for(let Ie=0;Ie<O.length&&Ie<ue.length;++Ie){const nt=Nr(O[Ie],ue[Ie]);if(0!==nt)return nt;const Ft=tu(T[O[Ie]],Z[ue[Ie]]);if(0!==Ft)return Ft}return Nr(O.length,ue.length)}(o.mapValue,e.mapValue);default:throw In()}}function Fl(o,e){if("string"==typeof o&&"string"==typeof e&&o.length===e.length)return Nr(o,e);const n=Iu(o),a=Iu(e),d=Nr(n.seconds,a.seconds);return 0!==d?d:Nr(n.nanos,a.nanos)}function ad(o){return ud(o)}function ud(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?function(a){const d=Iu(a);return`time(${d.seconds},${d.nanos})`}(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?Ja(o.bytesValue).toBase64():"referenceValue"in o?yn.fromName(o.referenceValue).toString():"geoPointValue"in o?`geo(${(e=o.geoPointValue).latitude},${e.longitude})`:"arrayValue"in o?function(a){let d="[",g=!0;for(const T of a.values||[])g?g=!1:d+=",",d+=ud(T);return d+"]"}(o.arrayValue):"mapValue"in o?function(a){const d=Object.keys(a.fields||{}).sort();let g="{",T=!0;for(const O of d)T?T=!1:g+=",",g+=`${O}:${ud(a.fields[O])}`;return g+"}"}(o.mapValue):In();var e}function U(o,e){return{referenceValue:`projects/${o.projectId}/databases/${o.database}/documents/${e.path.canonicalString()}`}}function de(o){return!!o&&"integerValue"in o}function Ue(o){return!!o&&"arrayValue"in o}function pt(o){return!!o&&"nullValue"in o}function Dt(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function zt(o){return!!o&&"mapValue"in o}function Un(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){const e={mapValue:{fields:{}}};return Qa(o.mapValue.fields,(n,a)=>e.mapValue.fields[n]=Un(a)),e}if(o.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(o.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Un(o.arrayValue.values[n]);return e}return Object.assign({},o)}function Vn(o){return"__max__"===(((o.mapValue||{}).fields||{}).__type__||{}).stringValue}function dr(o){return"nullValue"in o?Wo:"booleanValue"in o?{booleanValue:!1}:"integerValue"in o||"doubleValue"in o?{doubleValue:NaN}:"timestampValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in o?{stringValue:""}:"bytesValue"in o?{bytesValue:""}:"referenceValue"in o?U(eu.empty(),yn.empty()):"geoPointValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in o?{arrayValue:{}}:"mapValue"in o?{mapValue:{}}:In()}function Wr(o){return"nullValue"in o?{booleanValue:!1}:"booleanValue"in o?{doubleValue:NaN}:"integerValue"in o||"doubleValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in o?{stringValue:""}:"stringValue"in o?{bytesValue:""}:"bytesValue"in o?U(eu.empty(),yn.empty()):"referenceValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in o?{arrayValue:{}}:"arrayValue"in o?{mapValue:{}}:"mapValue"in o?$a:In()}function ei(o,e){const n=tu(o.value,e.value);return 0!==n?n:o.inclusive&&!e.inclusive?-1:!o.inclusive&&e.inclusive?1:0}function xa(o,e){const n=tu(o.value,e.value);return 0!==n?n:o.inclusive&&!e.inclusive?1:!o.inclusive&&e.inclusive?-1:0}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!zt(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Un(n)}setAll(e){let n=qr.emptyPath(),a={},d=[];e.forEach((T,O)=>{if(!n.isImmediateParentOf(O)){const Z=this.getFieldsMap(n);this.applyChanges(Z,a,d),a={},d=[],n=O.popLast()}T?a[O.lastSegment()]=Un(T):d.push(O.lastSegment())});const g=this.getFieldsMap(n);this.applyChanges(g,a,d)}delete(e){const n=this.field(e.popLast());zt(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xu(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let d=n.mapValue.fields[e.get(a)];zt(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=d),n=d}return n.mapValue.fields}applyChanges(e,n,a){Qa(n,(d,g)=>e[d]=g);for(const d of a)delete e[d]}clone(){return new Ur(Un(this.value))}}function jl(o){const e=[];return Qa(o.fields,(n,a)=>{const d=new qr([n]);if(zt(a)){const g=jl(a.mapValue).fields;if(0===g.length)e.push(d);else for(const T of g)e.push(d.child(T))}else e.push(d)}),new ss(e)}class ps{constructor(e,n,a,d,g,T,O){this.key=e,this.documentType=n,this.version=a,this.readTime=d,this.createTime=g,this.data=T,this.documentState=O}static newInvalidDocument(e){return new ps(e,0,cr.min(),cr.min(),cr.min(),Ur.empty(),0)}static newFoundDocument(e,n,a,d){return new ps(e,1,n,cr.min(),a,d,0)}static newNoDocument(e,n){return new ps(e,2,n,cr.min(),cr.min(),Ur.empty(),0)}static newUnknownDocument(e,n){return new ps(e,3,n,cr.min(),cr.min(),Ur.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(cr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ps&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ps(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Aa{constructor(e,n){this.position=e,this.inclusive=n}}function Vo(o,e,n){let a=0;for(let d=0;d<o.position.length;d++){const g=e[d],T=o.position[d];if(a=g.field.isKeyField()?yn.comparator(yn.fromName(T.referenceValue),n.key):tu(T,n.data.field(g.field)),"desc"===g.dir&&(a*=-1),0!==a)break}return a}function mu(o,e){if(null===o)return null===e;if(null===e||o.inclusive!==e.inclusive||o.position.length!==e.position.length)return!1;for(let n=0;n<o.position.length;n++)if(!xu(o.position[n],e.position[n]))return!1;return!0}class Ku{constructor(e,n="asc"){this.field=e,this.dir=n}}function Mh(o,e){return o.dir===e.dir&&o.field.isEqual(e.field)}class ld{}class $i extends ld{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,a):new kf(e,n,a):"array-contains"===n?new cc(e,a):"in"===n?new Sp(e,a):"not-in"===n?new Pg(e,a):"array-contains-any"===n?new Og(e,a):new $i(e,n,a)}static createKeyFieldInFilter(e,n,a){return"in"===n?new wp(e,a):new Cp(e,a)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(tu(n,this.value)):null!==n&&Uo(this.value)===Uo(n)&&this.matchesComparison(tu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return In()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gs extends ld{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new gs(e,n)}matches(e){return pl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function pl(o){return"and"===o.op}function gl(o){return"or"===o.op}function Bl(o){return Ph(o)&&pl(o)}function Ph(o){for(const e of o.filters)if(e instanceof gs)return!1;return!0}function kg(o){if(o instanceof $i)return o.field.canonicalString()+o.op.toString()+ad(o.value);if(Bl(o))return o.filters.map(e=>kg(e)).join(",");{const e=o.filters.map(n=>kg(n)).join(",");return`${o.op}(${e})`}}function Ep(o,e){return o instanceof $i?(n=o,(a=e)instanceof $i&&n.op===a.op&&n.field.isEqual(a.field)&&xu(n.value,a.value)):o instanceof gs?function(n,a){return a instanceof gs&&n.op===a.op&&n.filters.length===a.filters.length&&n.filters.reduce((d,g,T)=>d&&Ep(g,a.filters[T]),!0)}(o,e):void In();var n,a}function Af(o,e){const n=o.filters.concat(e);return gs.create(n,o.op)}function Mg(o){return o instanceof $i?`${(e=o).field.canonicalString()} ${e.op} ${ad(e.value)}`:o instanceof gs?function(e){return e.op.toString()+" {"+e.getFilters().map(Mg).join(" ,")+"}"}(o):"Filter";var e}class kf extends $i{constructor(e,n,a){super(e,n,a),this.key=yn.fromName(a.referenceValue)}matches(e){const n=yn.comparator(e.key,this.key);return this.matchesComparison(n)}}class wp extends $i{constructor(e,n){super(e,"in",n),this.keys=Oh(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Cp extends $i{constructor(e,n){super(e,"not-in",n),this.keys=Oh(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Oh(o,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(a=>yn.fromName(a.referenceValue))}class cc extends $i{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ue(n)&&lc(n.arrayValue,this.value)}}class Sp extends $i{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&lc(this.value.arrayValue,n)}}class Pg extends $i{constructor(e,n){super(e,"not-in",n)}matches(e){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!lc(this.value.arrayValue,n)}}class Og extends $i{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ue(n)||!n.arrayValue.values)&&n.arrayValue.values.some(a=>lc(this.value.arrayValue,a))}}class Rg{constructor(e,n=null,a=[],d=[],g=null,T=null,O=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=d,this.limit=g,this.startAt=T,this.endAt=O,this.dt=null}}function Rh(o,e=null,n=[],a=[],d=null,g=null,T=null){return new Rg(o,e,n,a,d,g,T)}function Ul(o){const e=kn(o);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(a=>kg(a)).join(","),n+="|ob:",n+=e.orderBy.map(a=>{return(d=a).field.canonicalString()+d.dir;var d}).join(","),So(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(a=>ad(a)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(a=>ad(a)).join(",")),e.dt=n}return e.dt}function Gd(o,e){if(o.limit!==e.limit||o.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<o.orderBy.length;n++)if(!Mh(o.orderBy[n],e.orderBy[n]))return!1;if(o.filters.length!==e.filters.length)return!1;for(let n=0;n<o.filters.length;n++)if(!Ep(o.filters[n],e.filters[n]))return!1;return o.collectionGroup===e.collectionGroup&&!!o.path.isEqual(e.path)&&!!mu(o.startAt,e.startAt)&&mu(o.endAt,e.endAt)}function Uc(o){return yn.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}function Mf(o,e){return o.filters.filter(n=>n instanceof $i&&n.field.isEqual(e))}function Ng(o,e,n){let a=Wo,d=!0;for(const g of Mf(o,e)){let T=Wo,O=!0;switch(g.op){case"<":case"<=":T=dr(g.value);break;case"==":case"in":case">=":T=g.value;break;case">":T=g.value,O=!1;break;case"!=":case"not-in":T=Wo}ei({value:a,inclusive:d},{value:T,inclusive:O})<0&&(a=T,d=O)}if(null!==n)for(let g=0;g<o.orderBy.length;++g)if(o.orderBy[g].field.isEqual(e)){const T=n.position[g];ei({value:a,inclusive:d},{value:T,inclusive:n.inclusive})<0&&(a=T,d=n.inclusive);break}return{value:a,inclusive:d}}function zd(o,e,n){let a=$a,d=!0;for(const g of Mf(o,e)){let T=$a,O=!0;switch(g.op){case">=":case">":T=Wr(g.value),O=!1;break;case"==":case"in":case"<=":T=g.value;break;case"<":T=g.value,O=!1;break;case"!=":case"not-in":T=$a}xa({value:a,inclusive:d},{value:T,inclusive:O})>0&&(a=T,d=O)}if(null!==n)for(let g=0;g<o.orderBy.length;++g)if(o.orderBy[g].field.isEqual(e)){const T=n.position[g];xa({value:a,inclusive:d},{value:T,inclusive:n.inclusive})>0&&(a=T,d=n.inclusive);break}return{value:a,inclusive:d}}class dc{constructor(e,n=null,a=[],d=[],g=null,T="F",O=null,Z=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=d,this.limit=g,this.limitType=T,this.startAt=O,this.endAt=Z,this.wt=null,this._t=null}}function Lg(o,e,n,a,d,g,T,O){return new dc(o,e,n,a,d,g,T,O)}function cd(o){return new dc(o)}function Dp(o){return 0===o.filters.length&&null===o.limit&&null==o.startAt&&null==o.endAt&&(0===o.explicitOrderBy.length||1===o.explicitOrderBy.length&&o.explicitOrderBy[0].field.isKeyField())}function Fg(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function hc(o){for(const e of o.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function Zu(o){return null!==o.collectionGroup}function Vl(o){const e=kn(o);if(null===e.wt){e.wt=[];const n=hc(e),a=Fg(e);if(null!==n&&null===a)n.isKeyField()||e.wt.push(new Ku(n)),e.wt.push(new Ku(qr.keyField(),"asc"));else{let d=!1;for(const g of e.explicitOrderBy)e.wt.push(g),g.field.isKeyField()&&(d=!0);if(!d){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ku(qr.keyField(),g))}}}return e.wt}function Ko(o){const e=kn(o);if(!e._t)if("F"===e.limitType)e._t=Rh(e.path,e.collectionGroup,Vl(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const g of Vl(e))n.push(new Ku(g.field,"desc"===g.dir?"asc":"desc"));const a=e.endAt?new Aa(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new Aa(e.startAt.position,e.startAt.inclusive):null;e._t=Rh(e.path,e.collectionGroup,n,e.filters,e.limit,a,d)}return e._t}function dd(o,e){e.getFirstInequalityField(),hc(o);const n=o.filters.concat([e]);return new dc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),n,o.limit,o.limitType,o.startAt,o.endAt)}function fc(o,e,n){return new dc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),e,n,o.startAt,o.endAt)}function Yu(o,e){return Gd(Ko(o),Ko(e))&&o.limitType===e.limitType}function Nh(o){return`${Ul(Ko(o))}|lt:${o.limitType}`}function pc(o){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(a=>Mg(a)).join(", ")}]`),So(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(a=>{return`${(d=a).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(a=>ad(a)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(a=>ad(a)).join(",")),`Target(${n})`}(Ko(o))}; limitType=${o.limitType})`}function $l(o,e){return e.isFoundDocument()&&function(n,a){const d=a.key.path;return null!==n.collectionGroup?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(d):yn.isDocumentKey(n.path)?n.path.isEqual(d):n.path.isImmediateParentOf(d)}(o,e)&&function(n,a){for(const d of Vl(n))if(!d.field.isKeyField()&&null===a.data.field(d.field))return!1;return!0}(o,e)&&function(n,a){for(const d of n.filters)if(!d.matches(a))return!1;return!0}(o,e)&&(a=e,!((n=o).startAt&&!function(d,g,T){const O=Vo(d,g,T);return d.inclusive?O<=0:O<0}(n.startAt,Vl(n),a)||n.endAt&&!function(d,g,T){const O=Vo(d,g,T);return d.inclusive?O>=0:O>0}(n.endAt,Vl(n),a)));var n,a}function qd(o){return o.collectionGroup||(o.path.length%2==1?o.path.lastSegment():o.path.get(o.path.length-2))}function Au(o){return(e,n)=>{let a=!1;for(const d of Vl(o)){const g=Ip(d,e,n);if(0!==g)return g;a=a||d.field.isKeyField()}return 0}}function Ip(o,e,n){const a=o.field.isKeyField()?yn.comparator(e.key,n.key):function(d,g,T){const O=g.data.field(d),Z=T.data.field(d);return null!==O&&null!==Z?tu(O,Z):In()}(o.field,e,n);switch(o.dir){case"asc":return a;case"desc":return-1*a;default:return In()}}class Hl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(void 0!==a)for(const[d,g]of a)if(this.equalsFn(d,e))return g}has(e){return void 0!==this.get(e)}set(e,n){const a=this.mapKeyFn(e),d=this.inner[a];if(void 0===d)return this.inner[a]=[[e,n]],void this.innerSize++;for(let g=0;g<d.length;g++)if(this.equalsFn(d[g][0],e))return void(d[g]=[e,n]);d.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(void 0===a)return!1;for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],e))return 1===a.length?delete this.inner[n]:a.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Qa(this.inner,(n,a)=>{for(const[d,g]of a)e(d,g)})}isEmpty(){return Ll(this.inner)}size(){return this.innerSize}}const xp=new Ii(yn.comparator);function Ha(){return xp}const Lh=new Ii(yn.comparator);function gc(...o){let e=Lh;for(const n of o)e=e.insert(n.key,n);return e}function Fh(o){let e=Lh;return o.forEach((n,a)=>e=e.insert(n,a.overlayedDocument)),e}function Qu(){return Wd()}function jh(){return Wd()}function Wd(){return new Hl(o=>o.toString(),(o,e)=>o.isEqual(e))}const jg=new Ii(yn.comparator),nu=new xi(yn.comparator);function li(...o){let e=nu;for(const n of o)e=e.add(n);return e}const Bh=new xi(Nr);function Vc(){return Bh}function oa(o,e){if(o.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sc(e)?"-0":e}}function hd(o){return{integerValue:""+o}}function fd(o,e){return oc(e)?hd(e):oa(o,e)}class pd{constructor(){this._=void 0}}function vu(o,e,n){return o instanceof gd?function(a,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return d&&kh(d)&&(d=Wu(d)),d&&(g.fields.__previous_value__=d),{mapValue:g}}(n,e):o instanceof mc?Uh(o,e):o instanceof md?Ap(o,e):function(a,d){const g=Pf(a,d),T=ml(g)+ml(a.gt);return de(g)&&de(a.gt)?hd(T):oa(a.serializer,T)}(o,e)}function Xu(o,e,n){return o instanceof mc?Uh(o,e):o instanceof md?Ap(o,e):n}function Pf(o,e){return o instanceof $c?de(n=e)||(a=n)&&"doubleValue"in a?e:{integerValue:0}:null;var a,n}class gd extends pd{}class mc extends pd{constructor(e){super(),this.elements=e}}function Uh(o,e){const n=Vh(e);for(const a of o.elements)n.some(d=>xu(d,a))||n.push(a);return{arrayValue:{values:n}}}class md extends pd{constructor(e){super(),this.elements=e}}function Ap(o,e){let n=Vh(e);for(const a of o.elements)n=n.filter(d=>!xu(d,a));return{arrayValue:{values:n}}}class $c extends pd{constructor(e,n){super(),this.serializer=e,this.gt=n}}function ml(o){return Bo(o.integerValue||o.doubleValue)}function Vh(o){return Ue(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}class vc{constructor(e,n){this.field=e,this.transform=n}}class Um{constructor(e,n){this.version=e,this.transformResults=n}}class qs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qs}static exists(e){return new qs(void 0,e)}static updateTime(e){return new qs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fa(o,e){return void 0!==o.updateTime?e.isFoundDocument()&&e.version.isEqual(o.updateTime):void 0===o.exists||o.exists===e.isFoundDocument()}class vd{}function yc(o,e){if(!o.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return o.isNoDocument()?new vl(o.key,qs.none()):new Gl(o.key,o.data,qs.none());{const n=o.data,a=Ur.empty();let d=new xi(qr.comparator);for(let g of e.fields)if(!d.has(g)){let T=n.field(g);null===T&&g.length>1&&(g=g.popLast(),T=n.field(g)),null===T?a.delete(g):a.set(g,T),d=d.add(g)}return new bc(o.key,a,new ss(d.toArray()),qs.none())}}function Xn(o,e,n){o instanceof Gl?function(a,d,g){const T=a.value.clone(),O=Kd(a.fieldTransforms,d,g.transformResults);T.setAll(O),d.convertToFoundDocument(g.version,T).setHasCommittedMutations()}(o,e,n):o instanceof bc?function(a,d,g){if(!fa(a.precondition,d))return void d.convertToUnknownDocument(g.version);const T=Kd(a.fieldTransforms,d,g.transformResults),O=d.data;O.setAll(Ps(a)),O.setAll(T),d.convertToFoundDocument(g.version,O).setHasCommittedMutations()}(o,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function ru(o,e,n,a){return o instanceof Gl?function(d,g,T,O){if(!fa(d.precondition,g))return T;const Z=d.value.clone(),ue=$h(d.fieldTransforms,O,g);return Z.setAll(ue),g.convertToFoundDocument(g.version,Z).setHasLocalMutations(),null}(o,e,n,a):o instanceof bc?function(d,g,T,O){if(!fa(d.precondition,g))return T;const Z=$h(d.fieldTransforms,O,g),ue=g.data;return ue.setAll(Ps(d)),ue.setAll(Z),g.convertToFoundDocument(g.version,ue).setHasLocalMutations(),null===T?null:T.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(Ie=>Ie.field))}(o,e,n,a):(T=n,fa(o.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):T);var g,T}function _c(o,e){let n=null;for(const a of o.fieldTransforms){const d=e.data.field(a.field),g=Pf(a.transform,d||null);null!=g&&(null===n&&(n=Ur.empty()),n.set(a.field,g))}return n||null}function Hc(o,e){return o.type===e.type&&!!o.key.isEqual(e.key)&&!!o.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(n=o.fieldTransforms)&&void 0===a||n&&a&&Hu(n,a,(d,g)=>function Bg(o,e){return o.field.isEqual(e.field)&&(a=e.transform,(n=o.transform)instanceof mc&&a instanceof mc||n instanceof md&&a instanceof md?Hu(n.elements,a.elements,xu):n instanceof $c&&a instanceof $c?xu(n.gt,a.gt):n instanceof gd&&a instanceof gd);var n,a}(d,g))))&&(0===o.type?o.value.isEqual(e.value):1!==o.type||o.data.isEqual(e.data)&&o.fieldMask.isEqual(e.fieldMask));var n,a}class Gl extends vd{constructor(e,n,a,d=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class bc extends vd{constructor(e,n,a,d,g=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=d,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function Ps(o){const e=new Map;return o.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const a=o.data.field(n);e.set(n,a)}}),e}function Kd(o,e,n){const a=new Map;or(o.length===n.length);for(let d=0;d<n.length;d++){const g=o[d],T=g.transform,O=e.data.field(g.field);a.set(g.field,Xu(T,O,n[d]))}return a}function $h(o,e,n){const a=new Map;for(const d of o){const g=d.transform,T=n.data.field(d.field);a.set(d.field,vu(g,T,e))}return a}class vl extends vd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tc extends vd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class S{constructor(e,n,a,d){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=d}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let d=0;d<this.mutations.length;d++){const g=this.mutations[d];g.key.isEqual(e.key)&&Xn(g,e,a[d])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=ru(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=ru(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=jh();return this.mutations.forEach(d=>{const g=e.get(d.key),T=g.overlayedDocument;let O=this.applyToLocalView(T,g.mutatedFields);O=n.has(d.key)?null:O;const Z=yc(T,O);null!==Z&&a.set(d.key,Z),T.isValidDocument()||T.convertToNoDocument(cr.min())}),a}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),li())}isEqual(e){return this.batchId===e.batchId&&Hu(this.mutations,e.mutations,(n,a)=>Hc(n,a))&&Hu(this.baseMutations,e.baseMutations,(n,a)=>Hc(n,a))}}class m{constructor(e,n,a,d){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=d}static from(e,n,a){or(e.mutations.length===a.length);let d=jg;const g=e.mutations;for(let T=0;T<g.length;T++)d=d.insert(g[T].key,a[T].version);return new m(e,n,a,d)}}class b{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class te{constructor(e,n){this.count=e,this.unchangedNames=n}}var ge,Ze;function kt(o){switch(o){default:return In();case Vt.CANCELLED:case Vt.UNKNOWN:case Vt.DEADLINE_EXCEEDED:case Vt.RESOURCE_EXHAUSTED:case Vt.INTERNAL:case Vt.UNAVAILABLE:case Vt.UNAUTHENTICATED:return!1;case Vt.INVALID_ARGUMENT:case Vt.NOT_FOUND:case Vt.ALREADY_EXISTS:case Vt.PERMISSION_DENIED:case Vt.FAILED_PRECONDITION:case Vt.ABORTED:case Vt.OUT_OF_RANGE:case Vt.UNIMPLEMENTED:case Vt.DATA_LOSS:return!0}}function mn(o){if(void 0===o)return Ui("GRPC error has no .code"),Vt.UNKNOWN;switch(o){case ge.OK:return Vt.OK;case ge.CANCELLED:return Vt.CANCELLED;case ge.UNKNOWN:return Vt.UNKNOWN;case ge.DEADLINE_EXCEEDED:return Vt.DEADLINE_EXCEEDED;case ge.RESOURCE_EXHAUSTED:return Vt.RESOURCE_EXHAUSTED;case ge.INTERNAL:return Vt.INTERNAL;case ge.UNAVAILABLE:return Vt.UNAVAILABLE;case ge.UNAUTHENTICATED:return Vt.UNAUTHENTICATED;case ge.INVALID_ARGUMENT:return Vt.INVALID_ARGUMENT;case ge.NOT_FOUND:return Vt.NOT_FOUND;case ge.ALREADY_EXISTS:return Vt.ALREADY_EXISTS;case ge.PERMISSION_DENIED:return Vt.PERMISSION_DENIED;case ge.FAILED_PRECONDITION:return Vt.FAILED_PRECONDITION;case ge.ABORTED:return Vt.ABORTED;case ge.OUT_OF_RANGE:return Vt.OUT_OF_RANGE;case ge.UNIMPLEMENTED:return Vt.UNIMPLEMENTED;case ge.DATA_LOSS:return Vt.DATA_LOSS;default:return In()}}(Ze=ge||(ge={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";class Pn{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return gt}static getOrCreateInstance(){return null===gt&&(gt=new Pn),gt}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let gt=null;function ar(){return new TextEncoder}const Os=new Cu([4294967295,4294967295],0);function ku(o){const e=ar().encode(o),n=new sd;return n.update(e),new Uint8Array(n.digest())}function Zd(o){const e=new DataView(o.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),d=e.getUint32(8,!0),g=e.getUint32(12,!0);return[new Cu([n,a],0),new Cu([d,g],0)]}class Hh{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Ec(`Invalid padding: ${n}`);if(a<0)throw new Ec(`Invalid hash count: ${a}`);if(e.length>0&&0===this.hashCount)throw new Ec(`Invalid hash count: ${a}`);if(0===e.length&&0!==n)throw new Ec(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Cu.fromNumber(this.It)}Et(e,n,a){let d=e.add(n.multiply(Cu.fromNumber(a)));return 1===d.compare(Os)&&(d=new Cu([d.getBits(0),d.getBits(1)],0)),d.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=ku(e),[a,d]=Zd(n);for(let g=0;g<this.hashCount;g++){const T=this.Et(a,d,g);if(!this.At(T))return!1}return!0}static create(e,n,a){const d=e%8==0?0:8-e%8,g=new Uint8Array(Math.ceil(e/8)),T=new Hh(g,d,n);return a.forEach(O=>T.insert(O)),T}insert(e){if(0===this.It)return;const n=ku(e),[a,d]=Zd(n);for(let g=0;g<this.hashCount;g++){const T=this.Et(a,d,g);this.Rt(T)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pa{constructor(e,n,a,d,g){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=d,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const d=new Map;return d.set(e,zl.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new pa(cr.min(),d,new Ii(Nr),Ha(),li())}}class zl{constructor(e,n,a,d,g){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=d,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new zl(a,n,li(),li(),li())}}class aa{constructor(e,n,a,d){this.Pt=e,this.removedTargetIds=n,this.key=a,this.bt=d}}class ms{constructor(e,n){this.targetId=e,this.Vt=n}}class ua{constructor(e,n,a=Us.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=d}}class Mu{constructor(){this.St=0,this.Dt=yl(),this.Ct=Us.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=li(),n=li(),a=li();return this.Dt.forEach((d,g)=>{switch(g){case 0:e=e.add(d);break;case 2:n=n.add(d);break;case 1:a=a.add(d);break;default:In()}}),new zl(this.Ct,this.xt,e,n,a)}Ft(){this.Nt=!1,this.Dt=yl()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class yu{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ha(),this.zt=Of(),this.Wt=new Ii(Nr)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const a=this.Zt(n);switch(e.state){case 0:this.te(n)&&a.$t(e.resumeToken);break;case 1:a.Ut(),a.kt||a.Ft(),a.$t(e.resumeToken);break;case 2:a.Ut(),a.kt||this.removeTarget(n);break;case 3:this.te(n)&&(a.Kt(),a.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),a.$t(e.resumeToken));break;default:In()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((a,d)=>{this.te(d)&&n(d)})}ne(e){var n;const a=e.targetId,d=e.Vt.count,g=this.se(a);if(g){const T=g.target;if(Uc(T))if(0===d){const O=new yn(T.path);this.Yt(a,O,ps.newNoDocument(O,cr.min()))}else or(1===d);else{const O=this.ie(a);if(O!==d){const Z=this.re(e,O);0!==Z&&(this.ee(a),this.Wt=this.Wt.insert(a,2===Z?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=Pn.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(ue,Ie,nt){var Ft,on,xn,Wn,er,vi;const Bi={localCacheCount:Ie,existenceFilterCount:nt.count},Ti=nt.unchangedNames;return Ti&&(Bi.bloomFilter={applied:0===ue,hashCount:null!==(Ft=Ti?.hashCount)&&void 0!==Ft?Ft:0,bitmapLength:null!==(Wn=null===(xn=null===(on=Ti?.bits)||void 0===on?void 0:on.bitmap)||void 0===xn?void 0:xn.length)&&void 0!==Wn?Wn:0,padding:null!==(vi=null===(er=Ti?.bits)||void 0===er?void 0:er.padding)&&void 0!==vi?vi:0}),Bi}(Z,O,e.Vt))}}}}re(e,n){const{unchangedNames:a,count:d}=e.Vt;if(!a||!a.bits)return 1;const{bits:{bitmap:g="",padding:T=0},hashCount:O=0}=a;let Z,ue;try{Z=Ja(g).toUint8Array()}catch(Ie){if(Ie instanceof Hd)return Js("Decoding the base64 bloom filter in existence filter failed ("+Ie.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw Ie}try{ue=new Hh(Z,T,O)}catch(Ie){return Js(Ie instanceof Ec?"BloomFilter error: ":"Applying bloom filter failed: ",Ie),1}return 0===ue.It?1:d!==n-this.oe(e.targetId,ue)?2:0}oe(e,n){const a=this.Gt.getRemoteKeysForTarget(e);let d=0;return a.forEach(g=>{const T=this.Gt.ue(),O=`projects/${T.projectId}/databases/${T.database}/documents/${g.path.canonicalString()}`;n.vt(O)||(this.Yt(e,g,null),d++)}),d}ce(e){const n=new Map;this.Qt.forEach((g,T)=>{const O=this.se(T);if(O){if(g.current&&Uc(O.target)){const Z=new yn(O.target.path);null!==this.jt.get(Z)||this.ae(T,Z)||this.Yt(T,Z,ps.newNoDocument(Z,e))}g.Mt&&(n.set(T,g.Ot()),g.Ft())}});let a=li();this.zt.forEach((g,T)=>{let O=!0;T.forEachWhile(Z=>{const ue=this.se(Z);return!ue||"TargetPurposeLimboResolution"===ue.purpose||(O=!1,!1)}),O&&(a=a.add(g))}),this.jt.forEach((g,T)=>T.setReadTime(e));const d=new pa(e,n,this.Wt,this.jt,a);return this.jt=Ha(),this.zt=Of(),this.Wt=new Ii(Nr),d}Jt(e,n){if(!this.te(e))return;const a=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,a),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,a){if(!this.te(e))return;const d=this.Zt(e);this.ae(e,n)?d.Bt(n,1):d.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),a&&(this.jt=this.jt.insert(n,a))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new Mu,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new xi(Nr),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||En("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Mu),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Of(){return new Ii(yn.comparator)}function yl(){return new Ii(yn.comparator)}const Gc={asc:"ASCENDING",desc:"DESCENDING"},h_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ly={and:"AND",or:"OR"};class Fy{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vm(o,e){return o.useProto3Json||So(e)?e:{value:e}}function ql(o,e){return o.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $m(o,e){return o.useProto3Json?e.toBase64():e.toUint8Array()}function Hm(o,e){return ql(o,e.toTimestamp())}function _o(o){return or(!!o),cr.fromTimestamp(function(e){const n=Iu(e);return new gi(n.seconds,n.nanos)}(o))}function Gh(o,e){return(n=o,new Di(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function yd(o){const e=Di.fromString(o);return or(Gy(e)),e}function Rf(o,e){return Gh(o.databaseId,e.path)}function wc(o,e){const n=yd(e);if(n.get(1)!==o.databaseId.projectId)throw new gn(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+o.databaseId.projectId);if(n.get(3)!==o.databaseId.database)throw new gn(Vt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+o.databaseId.database);return new yn(zm(n))}function Gm(o,e){return Gh(o.databaseId,e)}function jy(o){const e=yd(o);return 4===e.length?Di.emptyPath():zm(e)}function zh(o){return new Di(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function zm(o){return or(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function qh(o,e,n){return{name:Rf(o,e),fields:n.value.mapValue.fields}}function _d(o,e,n){const a=wc(o,e.name),d=_o(e.updateTime),g=e.createTime?_o(e.createTime):cr.min(),T=new Ur({mapValue:{fields:e.fields}}),O=ps.newFoundDocument(a,d,g,T);return n&&O.setHasCommittedMutations(),n?O.setHasCommittedMutations():O}function Nf(o,e){let n;if(e instanceof Gl)n={update:qh(o,e.key,e.value)};else if(e instanceof vl)n={delete:Rf(o,e.key)};else if(e instanceof bc)n={update:qh(o,e.key,e.data),updateMask:Km(e.fieldMask)};else{if(!(e instanceof Tc))return In();n={verify:Rf(o,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(a=>function(d,g){const T=g.transform;if(T instanceof gd)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof mc)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof md)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof $c)return{fieldPath:g.field.canonicalString(),increment:T.gt};throw In()}(0,a))),e.precondition.isNone||(n.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:Hm(o,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:In()),n;var d}function kp(o,e){const n=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?qs.updateTime(_o(d.updateTime)):void 0!==d.exists?qs.exists(d.exists):qs.none():qs.none(),a=e.updateTransforms?e.updateTransforms.map(d=>function(g,T){let O=null;"setToServerValue"in T?(or("REQUEST_TIME"===T.setToServerValue),O=new gd):"appendMissingElements"in T?O=new mc(T.appendMissingElements.values||[]):"removeAllFromArray"in T?O=new md(T.removeAllFromArray.values||[]):"increment"in T?O=new $c(g,T.increment):In();const Z=qr.fromServerFormat(T.fieldPath);return new vc(Z,O)}(o,d)):[];var d;if(e.update){const d=wc(o,e.update.name),g=new Ur({mapValue:{fields:e.update.fields}});if(e.updateMask){const T=new ss((e.updateMask.fieldPaths||[]).map(ue=>qr.fromServerFormat(ue)));return new bc(d,g,T,n,a)}return new Gl(d,g,n,a)}if(e.delete){const d=wc(o,e.delete);return new vl(d,n)}if(e.verify){const d=wc(o,e.verify);return new Tc(d,n)}return In()}function Mp(o,e){return{documents:[Gm(o,e.path)]}}function qm(o,e){const n={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(n.parent=Gm(o,a),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Gm(o,a.popLast()),n.structuredQuery.from=[{collectionId:a.lastSegment()}]);const d=function(Z){if(0!==Z.length)return Wm(gs.create(Z,"and"))}(e.filters);d&&(n.structuredQuery.where=d);const g=function(Z){if(0!==Z.length)return Z.map(ue=>{return{field:Wl((Ie=ue).field),direction:Cc(Ie.dir)};var Ie})}(e.orderBy);g&&(n.structuredQuery.orderBy=g);const T=Vm(o,e.limit);var O,Z;return null!==T&&(n.structuredQuery.limit=T),e.startAt&&(n.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(n.structuredQuery.endAt={before:!(Z=e.endAt).inclusive,values:Z.position}),n}function Uy(o){let e=jy(o.parent);const n=o.structuredQuery,a=n.from?n.from.length:0;let d=null;if(a>0){or(1===a);const Ie=n.from[0];Ie.allDescendants?d=Ie.collectionId:e=e.child(Ie.collectionId)}let g=[];n.where&&(g=function(Ie){const nt=$y(Ie);return nt instanceof gs&&Bl(nt)?nt.getFilters():[nt]}(n.where));let T=[];n.orderBy&&(T=n.orderBy.map(Ie=>{return new Ku(ka((nt=Ie).field),function(Ft){switch(Ft){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(nt.direction));var nt}));let O=null;n.limit&&(O=function(Ie){let nt;return nt="object"==typeof Ie?Ie.value:Ie,So(nt)?null:nt}(n.limit));let Z=null;var Ie;n.startAt&&(Z=new Aa((Ie=n.startAt).values||[],!!Ie.before));let ue=null;return n.endAt&&(ue=function(Ie){return new Aa(Ie.values||[],!Ie.before)}(n.endAt)),Lg(e,d,T,g,O,"F",Z,ue)}function $y(o){return void 0!==o.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=ka(e.unaryFilter.field);return $i.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=ka(e.unaryFilter.field);return $i.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=ka(e.unaryFilter.field);return $i.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=ka(e.unaryFilter.field);return $i.create(g,"!=",{nullValue:"NULL_VALUE"});default:return In()}}(o):void 0!==o.fieldFilter?$i.create(ka((e=o).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return In()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==o.compositeFilter?function(e){return gs.create(e.compositeFilter.filters.map(n=>$y(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return In()}}(e.compositeFilter.op))}(o):In();var e}function Cc(o){return Gc[o]}function Yd(o){return h_[o]}function Hy(o){return Ly[o]}function Wl(o){return{fieldPath:o.canonicalString()}}function ka(o){return qr.fromServerFormat(o.fieldPath)}function Wm(o){return o instanceof $i?function(e){if("=="===e.op){if(Dt(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NAN"}};if(pt(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Dt(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NOT_NAN"}};if(pt(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wl(e.field),op:Yd(e.op),value:e.value}}}(o):o instanceof gs?function(e){const n=e.getFilters().map(a=>Wm(a));return 1===n.length?n[0]:{compositeFilter:{op:Hy(e.op),filters:n}}}(o):In()}function Km(o){const e=[];return o.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Gy(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}class zc{constructor(e,n,a,d,g=cr.min(),T=cr.min(),O=Us.EMPTY_BYTE_STRING,Z=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=d,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=T,this.resumeToken=O,this.expectedCount=Z}withSequenceNumber(e){return new zc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wh{constructor(e){this.fe=e}}function qy(o,e){const n=e.key,a={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:Rf(d=o.fe,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:ql(d,g.version.toTimestamp()),createTime:ql(d,g.createTime.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:n.path.toArray(),readTime:qc(e.version)};else{if(!e.isUnknownDocument())return In();a.unknownDocument={path:n.path.toArray(),version:qc(e.version)}}var d,g;return a}function Vg(o){const e=o.toTimestamp();return[e.seconds,e.nanoseconds]}function qc(o){const e=o.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _u(o){const e=new gi(o.seconds,o.nanoseconds);return cr.fromTimestamp(e)}function Sc(o,e){const n=(e.baseMutations||[]).map(g=>kp(o.fe,g));for(let g=0;g<e.mutations.length-1;++g)g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(e.mutations[g].updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g);const a=e.mutations.map(g=>kp(o.fe,g)),d=gi.fromMillis(e.localWriteTimeMs);return new S(e.batchId,d,n,a)}function Lf(o){const e=_u(o.readTime),n=void 0!==o.lastLimboFreeSnapshotVersion?_u(o.lastLimboFreeSnapshotVersion):cr.min();let a;var d;return void 0!==o.query.documents?(or(1===(d=o.query).documents.length),a=Ko(cd(jy(d.documents[0])))):a=Ko(Uy(o.query)),new zc(a,o.targetId,"TargetPurposeListen",o.lastListenSequenceNumber,e,n,Us.fromBase64String(o.resumeToken))}function Zm(o,e){const n=qc(e.snapshotVersion),a=qc(e.lastLimboFreeSnapshotVersion);let d;d=Uc(e.target)?Mp(o.fe,e.target):qm(o.fe,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ul(e.target),readTime:n,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:d}}function $g(o){const e=Uy({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?fc(e,e.limit,"L"):e}function Ym(o,e){return new b(e.largestBatchId,kp(o.fe,e.overlayMutation))}function Wy(o,e){const n=e.path.lastSegment();return[o,Ms(e.path.popLast()),n]}function Ky(o,e,n,a){return{indexId:o,uid:e.uid||"",sequenceNumber:n,readTime:qc(a.readTime),documentKey:Ms(a.documentKey.path),largestBatchId:a.largestBatchId}}class Pp{getBundleMetadata(e,n){return Ff(e).get(n).next(a=>{if(a)return{id:(d=a).bundleId,createTime:_u(d.createTime),version:d.version};var d})}saveBundleMetadata(e,n){return Ff(e).put({bundleId:(a=n).id,createTime:qc(_o(a.createTime)),version:a.version});var a}getNamedQuery(e,n){return jf(e).get(n).next(a=>{if(a)return{name:(d=a).name,query:$g(d.bundledQuery),readTime:_u(d.readTime)};var d})}saveNamedQuery(e,n){return jf(e).put({name:(a=n).name,readTime:qc(_o(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Ff(o){return Do(o,"bundles")}function jf(o){return Do(o,"namedQueries")}class Qm{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){return new Qm(e,n.uid||"")}getOverlay(e,n){return Qd(e).get(Wy(this.userId,n)).next(a=>a?Ym(this.serializer,a):null)}getOverlays(e,n){const a=Qu();return Pt.forEach(n,d=>this.getOverlay(e,d).next(g=>{null!==g&&a.set(d,g)})).next(()=>a)}saveOverlays(e,n,a){const d=[];return a.forEach((g,T)=>{const O=new b(n,T);d.push(this.we(e,O))}),Pt.waitFor(d)}removeOverlaysForBatchId(e,n,a){const d=new Set;n.forEach(T=>d.add(Ms(T.getCollectionPath())));const g=[];return d.forEach(T=>{const O=IDBKeyRange.bound([this.userId,T,a],[this.userId,T,a+1],!1,!0);g.push(Qd(e).J("collectionPathOverlayIndex",O))}),Pt.waitFor(g)}getOverlaysForCollection(e,n,a){const d=Qu(),g=Ms(n),T=IDBKeyRange.bound([this.userId,g,a],[this.userId,g,Number.POSITIVE_INFINITY],!0);return Qd(e).j("collectionPathOverlayIndex",T).next(O=>{for(const Z of O){const ue=Ym(this.serializer,Z);d.set(ue.getKey(),ue)}return d})}getOverlaysForCollectionGroup(e,n,a,d){const g=Qu();let T;const O=IDBKeyRange.bound([this.userId,n,a],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Qd(e).X({index:"collectionGroupOverlayIndex",range:O},(Z,ue,Ie)=>{const nt=Ym(this.serializer,ue);g.size()<d||nt.largestBatchId===T?(g.set(nt.getKey(),nt),T=nt.largestBatchId):Ie.done()}).next(()=>g)}we(e,n){return Qd(e).put(function(a,d,g){const[T,O,Z]=Wy(d,g.mutation.key);return{userId:d,collectionPath:O,documentId:Z,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Nf(a.fe,g.mutation)}}(this.serializer,this.userId,n))}}function Qd(o){return Do(o,"documentOverlays")}class Xd{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Bo(e.integerValue));else if("doubleValue"in e){const a=Bo(e.doubleValue);isNaN(a)?this.ye(n,13):(this.ye(n,15),sc(a)?n.pe(0):n.pe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ye(n,20),"string"==typeof a?n.Ie(a):(n.Ie(`${a.seconds||""}`),n.pe(a.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Ja(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const a=e.geoPointValue;this.ye(n,45),n.pe(a.latitude||0),n.pe(a.longitude||0)}else"mapValue"in e?Vn(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):In()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const a=e.fields||{};this.ye(n,55);for(const d of Object.keys(a))this.Te(d,n),this.me(a[d],n)}Pe(e,n){const a=e.values||[];this.ye(n,50);for(const d of a)this.me(d,n)}ve(e,n){this.ye(n,37),yn.fromName(e).path.forEach(a=>{this.ye(n,60),this.be(a,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}function f_(o){if(0===o)return 8;let e=0;return!(o>>4)&&(e+=4,o<<=4),!(o>>6)&&(e+=2,o<<=2),!(o>>7)&&(e+=1),e}function Hg(o){const e=64-function(n){let a=0;for(let d=0;d<8;++d){const g=f_(255&n[d]);if(a+=g,8!==g)break}return a}(o);return Math.ceil(e/8)}Xd.Ve=new Xd;class p_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let a=n.next();for(;!a.done;)this.De(a.value),a=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let a=n.next();for(;!a.done;)this.Ne(a.value),a=n.next();this.ke()}Me(e){for(const n of e){const a=n.charCodeAt(0);if(a<128)this.De(a);else if(a<2048)this.De(960|a>>>6),this.De(128|63&a);else if(n<"\ud800"||"\udbff"<n)this.De(480|a>>>12),this.De(128|63&a>>>6),this.De(128|63&a);else{const d=n.codePointAt(0);this.De(240|d>>>18),this.De(128|63&d>>>12),this.De(128|63&d>>>6),this.De(128|63&d)}}this.Ce()}$e(e){for(const n of e){const a=n.charCodeAt(0);if(a<128)this.Ne(a);else if(a<2048)this.Ne(960|a>>>6),this.Ne(128|63&a);else if(n<"\ud800"||"\udbff"<n)this.Ne(480|a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a);else{const d=n.codePointAt(0);this.Ne(240|d>>>18),this.Ne(128|63&d>>>12),this.Ne(128|63&d>>>6),this.Ne(128|63&d)}}this.ke()}Oe(e){const n=this.Fe(e),a=Hg(n);this.Be(1+a),this.buffer[this.position++]=255&a;for(let d=n.length-a;d<n.length;++d)this.buffer[this.position++]=255&n[d]}Le(e){const n=this.Fe(e),a=Hg(n);this.Be(1+a),this.buffer[this.position++]=~(255&a);for(let d=n.length-a;d<n.length;++d)this.buffer[this.position++]=~(255&n[d])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),a=0!=(128&n[0]);n[0]^=a?255:128;for(let d=1;d<n.length;++d)n[d]^=a?255:0;return n}De(e){const n=255&e;0===n?(this.Ue(0),this.Ue(255)):255===n?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;0===n?(this.Ge(0),this.Ge(255)):255===n?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let a=2*this.buffer.length;a<n&&(a=n);const d=new Uint8Array(a);d.set(this.buffer),this.buffer=d}}class Zy{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Gg{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Kh{constructor(){this.je=new p_,this.ze=new Zy(this.je),this.We=new Gg(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Kl{constructor(e,n,a,d){this.indexId=e,this.documentKey=n,this.arrayValue=a,this.directionalValue=d}Je(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(n);return a.set(this.directionalValue,0),n!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Kl(this.indexId,this.documentKey,this.arrayValue,a)}}function Td(o,e){let n=o.indexId-e.indexId;return 0!==n?n:(n=Zo(o.arrayValue,e.arrayValue),0!==n?n:(n=Zo(o.directionalValue,e.directionalValue),0!==n?n:yn.comparator(o.documentKey,e.documentKey)))}function Zo(o,e){for(let n=0;n<o.length&&n<e.length;++n){const a=o[n]-e[n];if(0!==a)return a}return o.length-e.length}class nb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const a=n;a.isInequality()?this.Ze=a:this.Xe.push(a)}}tn(e){or(e.collectionGroup===this.collectionId);const n=R(e);if(void 0!==n&&!this.en(n))return!1;const a=D(e);let d=new Set,g=0,T=0;for(;g<a.length&&this.en(a[g]);++g)d=d.add(a[g].fieldPath.canonicalString());if(g===a.length)return!0;if(void 0!==this.Ze){if(!d.has(this.Ze.field.canonicalString())){const O=a[g];if(!this.nn(this.Ze,O)||!this.sn(this.Ye[T++],O))return!1}++g}for(;g<a.length;++g)if(T>=this.Ye.length||!this.sn(this.Ye[T++],a[g]))return!1;return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function g_(o){var e,n;if(or(o instanceof $i||o instanceof gs),o instanceof $i){if(o instanceof Sp){const d=(null===(n=null===(e=o.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(g=>$i.create(o.field,"==",g)))||[];return gs.create(d,"or")}return o}const a=o.filters.map(d=>g_(d));return gs.create(a,o.op)}function Xm(o){if(0===o.getFilters().length)return[];const e=ev(g_(o));return or(Yy(e)),Op(e)||Jm(e)?[e]:e.getFilters()}function Op(o){return o instanceof $i}function Jm(o){return o instanceof gs&&Bl(o)}function Yy(o){return Op(o)||Jm(o)||function(e){if(e instanceof gs&&gl(e)){for(const n of e.getFilters())if(!Op(n)&&!Jm(n))return!1;return!0}return!1}(o)}function ev(o){if(or(o instanceof $i||o instanceof gs),o instanceof $i)return o;if(1===o.filters.length)return ev(o.filters[0]);const e=o.filters.map(a=>ev(a));let n=gs.create(e,o.op);return n=rv(n),Yy(n)?n:(or(n instanceof gs),or(pl(n)),or(n.filters.length>1),n.filters.reduce((a,d)=>tv(a,d)))}function tv(o,e){let n;return or(o instanceof $i||o instanceof gs),or(e instanceof $i||e instanceof gs),n=o instanceof $i?e instanceof $i?gs.create([o,e],"and"):nv(o,e):e instanceof $i?nv(e,o):function(a,d){if(or(a.filters.length>0&&d.filters.length>0),pl(a)&&pl(d))return Af(a,d.getFilters());const g=gl(a)?a:d,T=gl(a)?d:a,O=g.filters.map(Z=>tv(Z,T));return gs.create(O,"or")}(o,e),rv(n)}function nv(o,e){if(pl(e))return Af(e,o.getFilters());{const n=e.filters.map(a=>tv(o,a));return gs.create(n,"or")}}function rv(o){if(or(o instanceof $i||o instanceof gs),o instanceof $i)return o;const e=o.getFilters();if(1===e.length)return rv(e[0]);if(Ph(o))return o;const n=e.map(d=>rv(d)),a=[];return n.forEach(d=>{d instanceof $i?a.push(d):d instanceof gs&&(d.op===o.op?a.push(...d.filters):a.push(d))}),1===a.length?a[0]:gs.create(a,o.op)}class rb{constructor(){this.rn=new Jd}addToCollectionParentIndex(e,n){return this.rn.add(n),Pt.resolve()}getCollectionParents(e,n){return Pt.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return Pt.resolve()}deleteFieldIndex(e,n){return Pt.resolve()}getDocumentsMatchingTarget(e,n){return Pt.resolve(null)}getIndexType(e,n){return Pt.resolve(0)}getFieldIndexes(e,n){return Pt.resolve([])}getNextCollectionGroupToUpdate(e){return Pt.resolve(null)}getMinOffset(e,n){return Pt.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return Pt.resolve(Hn.min())}updateCollectionGroup(e,n,a){return Pt.resolve()}updateIndexEntries(e,n){return Pt.resolve()}}class Jd{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),d=this.index[n]||new xi(Di.comparator),g=!d.has(a);return this.index[n]=d.add(a),g}has(e){const n=e.lastSegment(),a=e.popLast(),d=this.index[n];return d&&d.has(a)}getEntries(e){return(this.index[e]||new xi(Di.comparator)).toArray()}}const ts=new Uint8Array(0);class Rp{constructor(e,n){this.user=e,this.databaseId=n,this.on=new Jd,this.un=new Hl(a=>Ul(a),(a,d)=>Gd(a,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const a=n.lastSegment(),d=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const g={collectionId:a,parent:Ms(d)};return iv(e).put(g)}return Pt.resolve()}getCollectionParents(e,n){const a=[],d=IDBKeyRange.bound([n,""],[Jo(n),""],!1,!0);return iv(e).j(d).next(g=>{for(const T of g){if(T.collectionId!==n)break;a.push(Vi(T.parent))}return a})}addFieldIndex(e,n){const a=Np(e),d={indexId:(T=n).indexId,collectionGroup:T.collectionGroup,fields:T.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var T;delete d.indexId;const g=a.add(d);if(n.indexState){const T=Yh(e);return g.next(O=>{T.put(Ky(O,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return g.next()}deleteFieldIndex(e,n){const a=Np(e),d=Yh(e),g=Zh(e);return a.delete(n.indexId).next(()=>d.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const a=Zh(e);let d=!0;const g=new Map;return Pt.forEach(this.cn(n),T=>this.an(e,T).next(O=>{d&&(d=!!O),g.set(T,O)})).next(()=>{if(d){let T=li();const O=[];return Pt.forEach(g,(Z,ue)=>{var Ie;En("IndexedDbIndexManager",`Using index ${Ie=Z,`id=${Ie.indexId}|cg=${Ie.collectionGroup}|f=${Ie.fields.map(Ti=>`${Ti.fieldPath}:${Ti.kind}`).join(",")}`} to execute ${Ul(n)}`);const nt=function(Ti,ko){const ho=R(ko);if(void 0===ho)return null;for(const ws of Mf(Ti,ho.fieldPath))switch(ws.op){case"array-contains-any":return ws.value.arrayValue.values||[];case"array-contains":return[ws.value]}return null}(ue,Z),Ft=function(Ti,ko){const ho=new Map;for(const ws of D(ko))for(const va of Mf(Ti,ws.fieldPath))switch(va.op){case"==":case"in":ho.set(ws.fieldPath.canonicalString(),va.value);break;case"not-in":case"!=":return ho.set(ws.fieldPath.canonicalString(),va.value),Array.from(ho.values())}return null}(ue,Z),on=function(Ti,ko){const ho=[];let ws=!0;for(const va of D(ko)){const Ch=0===va.kind?Ng(Ti,va.fieldPath,Ti.startAt):zd(Ti,va.fieldPath,Ti.startAt);ho.push(Ch.value),ws&&(ws=Ch.inclusive)}return new Aa(ho,ws)}(ue,Z),xn=function(Ti,ko){const ho=[];let ws=!0;for(const va of D(ko)){const Ch=0===va.kind?zd(Ti,va.fieldPath,Ti.endAt):Ng(Ti,va.fieldPath,Ti.endAt);ho.push(Ch.value),ws&&(ws=Ch.inclusive)}return new Aa(ho,ws)}(ue,Z),Wn=this.hn(Z,ue,on),er=this.hn(Z,ue,xn),vi=this.ln(Z,ue,Ft),Bi=this.fn(Z.indexId,nt,Wn,on.inclusive,er,xn.inclusive,vi);return Pt.forEach(Bi,Ti=>a.H(Ti,n.limit).next(ko=>{ko.forEach(ho=>{const ws=yn.fromSegments(ho.documentKey);T.has(ws)||(T=T.add(ws),O.push(ws))})}))}).next(()=>O)}return Pt.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:Xm(gs.create(e.filters,"and")).map(a=>Rh(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,a,d,g,T,O){const Z=(null!=n?n.length:1)*Math.max(a.length,g.length),ue=Z/(null!=n?n.length:1),Ie=[];for(let nt=0;nt<Z;++nt){const Ft=n?this.dn(n[nt/ue]):ts,on=this.wn(e,Ft,a[nt%ue],d),xn=this._n(e,Ft,g[nt%ue],T),Wn=O.map(er=>this.wn(e,Ft,er,!0));Ie.push(...this.createRange(on,xn,Wn))}return Ie}wn(e,n,a,d){const g=new Kl(e,yn.empty(),n,a);return d?g:g.Je()}_n(e,n,a,d){const g=new Kl(e,yn.empty(),n,a);return d?g.Je():g}an(e,n){const a=new nb(n),d=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,d).next(g=>{let T=null;for(const O of g)a.tn(O)&&(!T||O.fields.length>T.fields.length)&&(T=O);return T})}getIndexType(e,n){let a=2;const d=this.cn(n);return Pt.forEach(d,g=>this.an(e,g).next(T=>{T?0!==a&&T.fields.length<function(O){let Z=new xi(qr.comparator),ue=!1;for(const Ie of O.filters)for(const nt of Ie.getFlattenedFilters())nt.field.isKeyField()||("array-contains"===nt.op||"array-contains-any"===nt.op?ue=!0:Z=Z.add(nt.field));for(const Ie of O.orderBy)Ie.field.isKeyField()||(Z=Z.add(Ie.field));return Z.size+(ue?1:0)}(g)&&(a=1):a=0})).next(()=>null!==n.limit&&d.length>1&&2===a?1:a)}mn(e,n){const a=new Kh;for(const d of D(e)){const g=n.data.field(d.fieldPath);if(null==g)return null;const T=a.He(d.kind);Xd.Ve._e(g,T)}return a.Qe()}dn(e){const n=new Kh;return Xd.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const a=new Kh;return Xd.Ve._e(U(this.databaseId,n),a.He(function(d){const g=D(d);return 0===g.length?0:g[g.length-1].kind}(e))),a.Qe()}ln(e,n,a){if(null===a)return[];let d=[];d.push(new Kh);let g=0;for(const T of D(e)){const O=a[g++];for(const Z of d)if(this.yn(n,T.fieldPath)&&Ue(O))d=this.pn(d,T,O);else{const ue=Z.He(T.kind);Xd.Ve._e(O,ue)}}return this.In(d)}hn(e,n,a){return this.ln(e,n,a.position)}In(e){const n=[];for(let a=0;a<e.length;++a)n[a]=e[a].Qe();return n}pn(e,n,a){const d=[...e],g=[];for(const T of a.arrayValue.values||[])for(const O of d){const Z=new Kh;Z.seed(O.Qe()),Xd.Ve._e(T,Z.He(n.kind)),g.push(Z)}return g}yn(e,n){return!!e.filters.find(a=>a instanceof $i&&a.field.isEqual(n)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,n){const a=Np(e),d=Yh(e);return(n?a.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):a.j()).next(g=>{const T=[];return Pt.forEach(g,O=>d.get([O.indexId,this.uid]).next(Z=>{T.push(function(ue,Ie){const nt=Ie?new Oe(Ie.sequenceNumber,new Hn(_u(Ie.readTime),new yn(Vi(Ie.documentKey)),Ie.largestBatchId)):Oe.empty(),Ft=ue.fields.map(([on,xn])=>new oe(qr.fromServerFormat(on),xn));return new A(ue.indexId,ue.collectionGroup,Ft,nt)}(O,Z))})).next(()=>T)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((a,d)=>{const g=a.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==g?g:Nr(a.collectionGroup,d.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,a){const d=Np(e),g=Yh(e);return this.Tn(e).next(T=>d.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(O=>Pt.forEach(O,Z=>g.put(Ky(Z.indexId,this.user,T,a)))))}updateIndexEntries(e,n){const a=new Map;return Pt.forEach(n,(d,g)=>{const T=a.get(d.collectionGroup);return(T?Pt.resolve(T):this.getFieldIndexes(e,d.collectionGroup)).next(O=>(a.set(d.collectionGroup,O),Pt.forEach(O,Z=>this.En(e,d,Z).next(ue=>{const Ie=this.An(g,Z);return ue.isEqual(Ie)?Pt.resolve():this.vn(e,g,Z,ue,Ie)}))))})}Rn(e,n,a,d){return Zh(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.gn(a,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,a,d){return Zh(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.gn(a,n.key),n.key.path.toArray()])}En(e,n,a){const d=Zh(e);let g=new xi(Td);return d.X({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.gn(a,n)])},(T,O)=>{g=g.add(new Kl(a.indexId,n,O.arrayValue,O.directionalValue))}).next(()=>g)}An(e,n){let a=new xi(Td);const d=this.mn(n,e);if(null==d)return a;const g=R(n);if(null!=g){const T=e.data.field(g.fieldPath);if(Ue(T))for(const O of T.arrayValue.values||[])a=a.add(new Kl(n.indexId,e.key,this.dn(O),d))}else a=a.add(new Kl(n.indexId,e.key,ts,d));return a}vn(e,n,a,d,g){En("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const T=[];return function(O,Z,ue,Ie,nt){const Ft=O.getIterator(),on=Z.getIterator();let xn=gu(Ft),Wn=gu(on);for(;xn||Wn;){let er=!1,vi=!1;if(xn&&Wn){const Bi=ue(xn,Wn);Bi<0?vi=!0:Bi>0&&(er=!0)}else null!=xn?vi=!0:er=!0;er?(Ie(Wn),Wn=gu(on)):vi?(nt(xn),xn=gu(Ft)):(xn=gu(Ft),Wn=gu(on))}}(d,g,Td,O=>{T.push(this.Rn(e,n,a,O))},O=>{T.push(this.Pn(e,n,a,O))}),Pt.waitFor(T)}Tn(e){let n=1;return Yh(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,d,g)=>{g.done(),n=d.sequenceNumber+1}).next(()=>n)}createRange(e,n,a){a=a.sort((T,O)=>Td(T,O)).filter((T,O,Z)=>!O||0!==Td(T,Z[O-1]));const d=[];d.push(e);for(const T of a){const O=Td(T,e),Z=Td(T,n);if(0===O)d[0]=e.Je();else if(O>0&&Z<0)d.push(T),d.push(T.Je());else if(Z>0)break}d.push(n);const g=[];for(let T=0;T<d.length;T+=2){if(this.bn(d[T],d[T+1]))return[];g.push(IDBKeyRange.bound([d[T].indexId,this.uid,d[T].arrayValue,d[T].directionalValue,ts,[]],[d[T+1].indexId,this.uid,d[T+1].arrayValue,d[T+1].directionalValue,ts,[]]))}return g}bn(e,n){return Td(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Qy)}getMinOffset(e,n){return Pt.mapArray(this.cn(n),a=>this.an(e,a).next(d=>d||In())).next(Qy)}}function iv(o){return Do(o,"collectionParents")}function Zh(o){return Do(o,"indexEntries")}function Np(o){return Do(o,"indexConfiguration")}function Yh(o){return Do(o,"indexState")}function Qy(o){or(0!==o.length);let e=o[0].indexState.offset,n=e.largestBatchId;for(let a=1;a<o.length;a++){const d=o[a].indexState.offset;fr(d,e)<0&&(e=d),n<d.largestBatchId&&(n=d.largestBatchId)}return new Hn(e.readTime,e.documentKey,n)}const sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class iu{constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new iu(e,iu.DEFAULT_COLLECTION_PERCENTILE,iu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Lp(o,e,n){const a=o.store("mutations"),d=o.store("documentMutations"),g=[],T=IDBKeyRange.only(n.batchId);let O=0;const Z=a.X({range:T},(Ie,nt,Ft)=>(O++,Ft.delete()));g.push(Z.next(()=>{or(1===O)}));const ue=[];for(const Ie of n.mutations){const nt=Ya(e,Ie.key.path,n.batchId);g.push(d.delete(nt)),ue.push(Ie.key)}return Pt.waitFor(g).next(()=>ue)}function ov(o){if(!o)return 0;let e;if(o.document)e=o.document;else if(o.unknownDocument)e=o.unknownDocument;else{if(!o.noDocument)throw In();e=o.noDocument}return JSON.stringify(e).length}iu.DEFAULT_COLLECTION_PERCENTILE=10,iu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,iu.DEFAULT=new iu(41943040,iu.DEFAULT_COLLECTION_PERCENTILE,iu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),iu.DISABLED=new iu(-1,0,0);class eh{constructor(e,n,a,d){this.userId=e,this.serializer=n,this.indexManager=a,this.referenceDelegate=d,this.Vn={}}static de(e,n,a,d){or(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new eh(g,n,a,d)}checkEmpty(e){let n=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wc(e).X({index:"userMutationsIndex",range:a},(d,g,T)=>{n=!1,T.done()}).next(()=>n)}addMutationBatch(e,n,a,d){const g=th(e),T=Wc(e);return T.add({}).next(O=>{or("number"==typeof O);const Z=new S(O,n,a,d),ue=function(Ft,on,xn){const Wn=xn.baseMutations.map(vi=>Nf(Ft.fe,vi)),er=xn.mutations.map(vi=>Nf(Ft.fe,vi));return{userId:on,batchId:xn.batchId,localWriteTimeMs:xn.localWriteTime.toMillis(),baseMutations:Wn,mutations:er}}(this.serializer,this.userId,Z),Ie=[];let nt=new xi((Ft,on)=>Nr(Ft.canonicalString(),on.canonicalString()));for(const Ft of d){const on=Ya(this.userId,Ft.key.path,O);nt=nt.add(Ft.key.path.popLast()),Ie.push(T.put(ue)),Ie.push(g.put(on,wf))}return nt.forEach(Ft=>{Ie.push(this.indexManager.addToCollectionParentIndex(e,Ft))}),e.addOnCommittedListener(()=>{this.Vn[O]=Z.keys()}),Pt.waitFor(Ie).next(()=>Z)})}lookupMutationBatch(e,n){return Wc(e).get(n).next(a=>a?(or(a.userId===this.userId),Sc(this.serializer,a)):null)}Sn(e,n){return this.Vn[n]?Pt.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(a=>{if(a){const d=a.keys();return this.Vn[n]=d,d}return null})}getNextMutationBatchAfterBatchId(e,n){const a=n+1,d=IDBKeyRange.lowerBound([this.userId,a]);let g=null;return Wc(e).X({index:"userMutationsIndex",range:d},(T,O,Z)=>{O.userId===this.userId&&(or(O.batchId>=a),g=Sc(this.serializer,O)),Z.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Wc(e).X({index:"userMutationsIndex",range:n,reverse:!0},(d,g,T)=>{a=g.batchId,T.done()}).next(()=>a)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wc(e).j("userMutationsIndex",n).next(a=>a.map(d=>Sc(this.serializer,d)))}getAllMutationBatchesAffectingDocumentKey(e,n){const a=Va(this.userId,n.path),d=IDBKeyRange.lowerBound(a),g=[];return th(e).X({range:d},(T,O,Z)=>{const[ue,Ie,nt]=T,Ft=Vi(Ie);if(ue===this.userId&&n.path.isEqual(Ft))return Wc(e).get(nt).next(on=>{if(!on)throw In();or(on.userId===this.userId),g.push(Sc(this.serializer,on))});Z.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new xi(Nr);const d=[];return n.forEach(g=>{const T=Va(this.userId,g.path),O=IDBKeyRange.lowerBound(T),Z=th(e).X({range:O},(ue,Ie,nt)=>{const[Ft,on,xn]=ue,Wn=Vi(on);Ft===this.userId&&g.path.isEqual(Wn)?a=a.add(xn):nt.done()});d.push(Z)}),Pt.waitFor(d).next(()=>this.Dn(e,a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,d=a.length+1,g=Va(this.userId,a),T=IDBKeyRange.lowerBound(g);let O=new xi(Nr);return th(e).X({range:T},(Z,ue,Ie)=>{const[nt,Ft,on]=Z,xn=Vi(Ft);nt===this.userId&&a.isPrefixOf(xn)?xn.length===d&&(O=O.add(on)):Ie.done()}).next(()=>this.Dn(e,O))}Dn(e,n){const a=[],d=[];return n.forEach(g=>{d.push(Wc(e).get(g).next(T=>{if(null===T)throw In();or(T.userId===this.userId),a.push(Sc(this.serializer,T))}))}),Pt.waitFor(d).next(()=>a)}removeMutationBatch(e,n){return Lp(e.ht,this.userId,n).next(a=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),Pt.forEach(a,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Pt.resolve();const a=IDBKeyRange.lowerBound([this.userId]),d=[];return th(e).X({range:a},(g,T,O)=>{if(g[0]===this.userId){const Z=Vi(g[1]);d.push(Z)}else O.done()}).next(()=>{or(0===d.length)})})}containsKey(e,n){return Ma(e,this.userId,n)}xn(e){return av(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ma(o,e,n){const a=Va(e,n.path),d=a[1],g=IDBKeyRange.lowerBound(a);let T=!1;return th(o).X({range:g,Y:!0},(O,Z,ue)=>{const[Ie,nt,Ft]=O;Ie===e&&nt===d&&(T=!0),ue.done()}).next(()=>T)}function Wc(o){return Do(o,"mutations")}function th(o){return Do(o,"documentMutations")}function av(o){return Do(o,"mutationQueues")}class Ju{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ju(0)}static Mn(){return new Ju(-1)}}class Xy{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const a=new Ju(n.highestTargetId);return n.highestTargetId=a.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>cr.fromTimestamp(new gi(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,a){return this.$n(e).next(d=>(d.highestListenSequenceNumber=n,a&&(d.lastRemoteSnapshotVersion=a.toTimestamp()),n>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=n),this.On(e,d)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(a=>(a.targetCount+=1,this.Bn(n,a),this.On(e,a))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ed(e).delete(n.targetId)).next(()=>this.$n(e)).next(a=>(or(a.targetCount>0),a.targetCount-=1,this.On(e,a)))}removeTargets(e,n,a){let d=0;const g=[];return Ed(e).X((T,O)=>{const Z=Lf(O);Z.sequenceNumber<=n&&null===a.get(Z.targetId)&&(d++,g.push(this.removeTargetData(e,Z)))}).next(()=>Pt.waitFor(g)).next(()=>d)}forEachTarget(e,n){return Ed(e).X((a,d)=>{const g=Lf(d);n(g)})}$n(e){return Fp(e).get("targetGlobalKey").next(n=>(or(null!==n),n))}On(e,n){return Fp(e).put("targetGlobalKey",n)}Fn(e,n){return Ed(e).put(Zm(this.serializer,n))}Bn(e,n){let a=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,a=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const a=Ul(n),d=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let g=null;return Ed(e).X({range:d,index:"queryTargetsIndex"},(T,O,Z)=>{const ue=Lf(O);Gd(n,ue.target)&&(g=ue,Z.done())}).next(()=>g)}addMatchingKeys(e,n,a){const d=[],g=nh(e);return n.forEach(T=>{const O=Ms(T.path);d.push(g.put({targetId:a,path:O})),d.push(this.referenceDelegate.addReference(e,a,T))}),Pt.waitFor(d)}removeMatchingKeys(e,n,a){const d=nh(e);return Pt.forEach(n,g=>{const T=Ms(g.path);return Pt.waitFor([d.delete([a,T]),this.referenceDelegate.removeReference(e,a,g)])})}removeMatchingKeysForTargetId(e,n){const a=nh(e),d=IDBKeyRange.bound([n],[n+1],!1,!0);return a.delete(d)}getMatchingKeysForTargetId(e,n){const a=IDBKeyRange.bound([n],[n+1],!1,!0),d=nh(e);let g=li();return d.X({range:a,Y:!0},(T,O,Z)=>{const ue=Vi(T[1]),Ie=new yn(ue);g=g.add(Ie)}).next(()=>g)}containsKey(e,n){const a=Ms(n.path),d=IDBKeyRange.bound([a],[Jo(a)],!1,!0);let g=0;return nh(e).X({index:"documentTargetsIndex",Y:!0,range:d},([T,O],Z,ue)=>{0!==T&&(g++,ue.done())}).next(()=>g>0)}le(e,n){return Ed(e).get(n).next(a=>a?Lf(a):null)}}function Ed(o){return Do(o,"targets")}function Fp(o){return Do(o,"targetGlobal")}function nh(o){return Do(o,"targetDocuments")}function zg([o,e],[n,a]){const d=Nr(o,n);return 0===d?Nr(e,a):d}class qg{constructor(e){this.Ln=e,this.buffer=new xi(zg),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();zg(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rh{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var n=this;En("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ve.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(a){zu(a)?En("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield vo(a)}yield n.Qn(3e5)}))}}class Wg{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(a=>Math.floor(n/100*a))}nthSequenceNumber(e,n){if(0===n)return Pt.resolve(Co.ct);const a=new qg(n);return this.jn.forEachTarget(e,d=>a.Kn(d.sequenceNumber)).next(()=>this.jn.Wn(e,d=>a.Kn(d))).next(()=>a.maxValue)}removeTargets(e,n,a){return this.jn.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(En("LruGarbageCollector","Garbage collection skipped; disabled"),Pt.resolve(sv)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(En("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sv):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let a,d,g,T,O,Z,ue;const Ie=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(nt=>(nt>this.params.maximumSequenceNumbersToCollect?(En("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${nt}`),d=this.params.maximumSequenceNumbersToCollect):d=nt,T=Date.now(),this.nthSequenceNumber(e,d))).next(nt=>(a=nt,O=Date.now(),this.removeTargets(e,a,n))).next(nt=>(g=nt,Z=Date.now(),this.removeOrphanedDocuments(e,a))).next(nt=>(ue=Date.now(),ao()<=Ee.in.DEBUG&&En("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${T-Ie}ms\n\tDetermined least recently used ${d} in `+(O-T)+`ms\n\tRemoved ${g} targets in `+(Z-O)+`ms\n\tRemoved ${nt} documents in `+(ue-Z)+`ms\nTotal Duration: ${ue-Ie}ms`),Pt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:g,documentsRemoved:nt})))}}class Jy{constructor(e,n){this.db=e,this.garbageCollector=function jp(o,e){return new Wg(o,e)}(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>n.next(d=>a+d))}Jn(e){let n=0;return this.Wn(e,a=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(a,d)=>n(d))}addReference(e,n,a){return Bp(e,a)}removeReference(e,n,a){return Bp(e,a)}removeTargets(e,n,a){return this.db.getTargetCache().removeTargets(e,n,a)}markPotentiallyOrphaned(e,n){return Bp(e,n)}Xn(e,n){return function(a,d){let g=!1;return av(a).Z(T=>Ma(a,T,d).next(O=>(O&&(g=!0),Pt.resolve(!O)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let g=0;return this.Yn(e,(T,O)=>{if(O<=n){const Z=this.Xn(e,T).next(ue=>{if(!ue)return g++,a.getEntry(e,T).next(()=>(a.removeEntry(T,cr.min()),nh(e).delete([0,Ms(T.path)])))});d.push(Z)}}).next(()=>Pt.waitFor(d)).next(()=>a.apply(e)).next(()=>g)}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,n){return Bp(e,n)}Yn(e,n){const a=nh(e);let d,g=Co.ct;return a.X({index:"documentTargetsIndex"},([T,O],{path:Z,sequenceNumber:ue})=>{0===T?(g!==Co.ct&&n(new yn(Vi(d)),g),g=ue,d=Z):g=Co.ct}).next(()=>{g!==Co.ct&&n(new yn(Vi(d)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bp(o,e){return nh(o).put((a=o.currentSequenceNumber,{targetId:0,path:Ms(e.path),sequenceNumber:a}));var a}class uv{constructor(){this.changes=new Hl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ps.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return void 0!==a?Pt.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Bf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,a){return Zl(e).put(a)}removeEntry(e,n,a){return Zl(e).delete(function(d,g){const T=d.path.toArray();return[T.slice(0,T.length-2),T[T.length-2],Vg(g),T[T.length-1]]}(n,a))}updateMetadata(e,n){return this.getMetadata(e).next(a=>(a.byteSize+=n,this.Zn(e,a)))}getEntry(e,n){let a=ps.newInvalidDocument(n);return Zl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Pu(n))},(d,g)=>{a=this.ts(n,g)}).next(()=>a)}es(e,n){let a={size:0,document:ps.newInvalidDocument(n)};return Zl(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Pu(n))},(d,g)=>{a={document:this.ts(n,g),size:ov(g)}}).next(()=>a)}getEntries(e,n){let a=Ha();return this.ns(e,n,(d,g)=>{const T=this.ts(d,g);a=a.insert(d,T)}).next(()=>a)}ss(e,n){let a=Ha(),d=new Ii(yn.comparator);return this.ns(e,n,(g,T)=>{const O=this.ts(g,T);a=a.insert(g,O),d=d.insert(g,ov(T))}).next(()=>({documents:a,rs:d}))}ns(e,n,a){if(n.isEmpty())return Pt.resolve();let d=new xi(cv);n.forEach(Z=>d=d.add(Z));const g=IDBKeyRange.bound(Pu(d.first()),Pu(d.last())),T=d.getIterator();let O=T.getNext();return Zl(e).X({index:"documentKeyIndex",range:g},(Z,ue,Ie)=>{const nt=yn.fromSegments([...ue.prefixPath,ue.collectionGroup,ue.documentId]);for(;O&&cv(O,nt)<0;)a(O,null),O=T.getNext();O&&O.isEqual(nt)&&(a(O,ue),O=T.hasNext()?T.getNext():null),O?Ie.G(Pu(O)):Ie.done()}).next(()=>{for(;O;)a(O,null),O=T.hasNext()?T.getNext():null})}getDocumentsMatchingQuery(e,n,a,d){const g=n.path,T=[g.popLast().toArray(),g.lastSegment(),Vg(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],O=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zl(e).j(IDBKeyRange.bound(T,O,!0)).next(Z=>{let ue=Ha();for(const Ie of Z){const nt=this.ts(yn.fromSegments(Ie.prefixPath.concat(Ie.collectionGroup,Ie.documentId)),Ie);nt.isFoundDocument()&&($l(n,nt)||d.has(nt.key))&&(ue=ue.insert(nt.key,nt))}return ue})}getAllFromCollectionGroup(e,n,a,d){let g=Ha();const T=Zg(n,a),O=Zg(n,Hn.max());return Zl(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(T,O,!0)},(Z,ue,Ie)=>{const nt=this.ts(yn.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);g=g.insert(nt.key,nt),g.size===d&&Ie.done()}).next(()=>g)}newChangeBuffer(e){return new ib(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Kg(e).get("remoteDocumentGlobalKey").next(n=>(or(!!n),n))}Zn(e,n){return Kg(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const a=function zy(o,e){let n;if(e.document)n=_d(o.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=yn.fromSegments(e.noDocument.path),d=_u(e.noDocument.readTime);n=ps.newNoDocument(a,d),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return In();{const a=yn.fromSegments(e.unknownDocument.path),d=_u(e.unknownDocument.version);n=ps.newUnknownDocument(a,d)}}return e.readTime&&n.setReadTime(function(a){const d=new gi(a[0],a[1]);return cr.fromTimestamp(d)}(e.readTime)),n}(this.serializer,n);if(!a.isNoDocument()||!a.version.isEqual(cr.min()))return a}return ps.newInvalidDocument(e)}}function lv(o){return new Bf(o)}class ib extends uv{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new Hl(a=>a.toString(),(a,d)=>a.isEqual(d))}applyChanges(e){const n=[];let a=0,d=new xi((g,T)=>Nr(g.canonicalString(),T.canonicalString()));return this.changes.forEach((g,T)=>{const O=this.us.get(g);if(n.push(this.os.removeEntry(e,g,O.readTime)),T.isValidDocument()){const Z=qy(this.os.serializer,T);d=d.add(g.path.popLast());const ue=ov(Z);a+=ue-O.size,n.push(this.os.addEntry(e,g,Z))}else if(a-=O.size,this.trackRemovals){const Z=qy(this.os.serializer,T.convertToNoDocument(cr.min()));n.push(this.os.addEntry(e,g,Z))}}),d.forEach(g=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,g))}),n.push(this.os.updateMetadata(e,a)),Pt.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(a=>(this.us.set(n,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:a,rs:d})=>(d.forEach((g,T)=>{this.us.set(g,{size:T,readTime:a.get(g).readTime})}),a))}}function Kg(o){return Do(o,"remoteDocumentGlobal")}function Zl(o){return Do(o,"remoteDocumentsV14")}function Pu(o){const e=o.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zg(o,e){const n=e.documentKey.path.toArray();return[o,Vg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cv(o,e){const n=o.path.toArray(),a=e.path.toArray();let d=0;for(let g=0;g<n.length-2&&g<a.length-2;++g)if(d=Nr(n[g],a[g]),d)return d;return d=Nr(n.length,a.length),d||(d=Nr(n[n.length-2],a[a.length-2]),d||Nr(n[n.length-1],a[a.length-1]))}class dv{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class hv{constructor(e,n,a,d){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=d}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next(d=>(a=d,this.remoteDocumentCache.getEntry(e,n))).next(d=>(null!==a&&ru(a.mutation,d,ss.empty(),gi.now()),d))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.getLocalViewOfDocuments(e,a,li()).next(()=>a))}getLocalViewOfDocuments(e,n,a=li()){const d=Qu();return this.populateOverlays(e,d,n).next(()=>this.computeViews(e,n,d,a).next(g=>{let T=gc();return g.forEach((O,Z)=>{T=T.insert(O,Z.overlayedDocument)}),T}))}getOverlayedDocuments(e,n){const a=Qu();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,li()))}populateOverlays(e,n,a){const d=[];return a.forEach(g=>{n.has(g)||d.push(g)}),this.documentOverlayCache.getOverlays(e,d).next(g=>{g.forEach((T,O)=>{n.set(T,O)})})}computeViews(e,n,a,d){let g=Ha();const T=Wd(),O=Wd();return n.forEach((Z,ue)=>{const Ie=a.get(ue.key);d.has(ue.key)&&(void 0===Ie||Ie.mutation instanceof bc)?g=g.insert(ue.key,ue):void 0!==Ie?(T.set(ue.key,Ie.mutation.getFieldMask()),ru(Ie.mutation,ue,Ie.mutation.getFieldMask(),gi.now())):T.set(ue.key,ss.empty())}),this.recalculateAndSaveOverlays(e,g).next(Z=>(Z.forEach((ue,Ie)=>T.set(ue,Ie)),n.forEach((ue,Ie)=>{var nt;return O.set(ue,new dv(Ie,null!==(nt=T.get(ue))&&void 0!==nt?nt:null))}),O))}recalculateAndSaveOverlays(e,n){const a=Wd();let d=new Ii((T,O)=>T-O),g=li();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(T=>{for(const O of T)O.keys().forEach(Z=>{const ue=n.get(Z);if(null===ue)return;let Ie=a.get(Z)||ss.empty();Ie=O.applyToLocalView(ue,Ie),a.set(Z,Ie);const nt=(d.get(O.batchId)||li()).add(Z);d=d.insert(O.batchId,nt)})}).next(()=>{const T=[],O=d.getReverseIterator();for(;O.hasNext();){const Z=O.getNext(),ue=Z.key,Ie=Z.value,nt=jh();Ie.forEach(Ft=>{if(!g.has(Ft)){const on=yc(n.get(Ft),a.get(Ft));null!==on&&nt.set(Ft,on),g=g.add(Ft)}}),T.push(this.documentOverlayCache.saveOverlays(e,ue,nt))}return Pt.waitFor(T)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,n,a){return yn.isDocumentKey((d=n).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Zu(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a):this.getDocumentsMatchingCollectionQuery(e,n,a);var d}getNextDocuments(e,n,a,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,d).next(g=>{const T=d-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,d-g.size):Pt.resolve(Qu());let O=-1,Z=g;return T.next(ue=>Pt.forEach(ue,(Ie,nt)=>(O<nt.largestBatchId&&(O=nt.largestBatchId),g.get(Ie)?Pt.resolve():this.remoteDocumentCache.getEntry(e,Ie).next(Ft=>{Z=Z.insert(Ie,Ft)}))).next(()=>this.populateOverlays(e,ue,g)).next(()=>this.computeViews(e,Z,ue,li())).next(Ie=>({batchId:O,changes:Fh(Ie)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new yn(n)).next(a=>{let d=gc();return a.isFoundDocument()&&(d=d.insert(a.key,a)),d})}getDocumentsMatchingCollectionGroupQuery(e,n,a){const d=n.collectionGroup;let g=gc();return this.indexManager.getCollectionParents(e,d).next(T=>Pt.forEach(T,O=>{const Z=(ue=n,Ie=O.child(d),new dc(Ie,null,ue.explicitOrderBy.slice(),ue.filters.slice(),ue.limit,ue.limitType,ue.startAt,ue.endAt));var ue,Ie;return this.getDocumentsMatchingCollectionQuery(e,Z,a).next(ue=>{ue.forEach((Ie,nt)=>{g=g.insert(Ie,nt)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,a){let d;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next(g=>(d=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,d))).next(g=>{d.forEach((O,Z)=>{const ue=Z.getKey();null===g.get(ue)&&(g=g.insert(ue,ps.newInvalidDocument(ue)))});let T=gc();return g.forEach((O,Z)=>{const ue=d.get(O);void 0!==ue&&ru(ue.mutation,Z,ss.empty(),gi.now()),$l(n,Z)&&(T=T.insert(O,Z))}),T})}}class m_{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return Pt.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var a;return this.cs.set(n.id,{id:(a=n).id,version:a.version,createTime:_o(a.createTime)}),Pt.resolve()}getNamedQuery(e,n){return Pt.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(a=n).name,query:$g(a.bundledQuery),readTime:_o(a.readTime)}),Pt.resolve();var a}}class e0{constructor(){this.overlays=new Ii(yn.comparator),this.ls=new Map}getOverlay(e,n){return Pt.resolve(this.overlays.get(n))}getOverlays(e,n){const a=Qu();return Pt.forEach(n,d=>this.getOverlay(e,d).next(g=>{null!==g&&a.set(d,g)})).next(()=>a)}saveOverlays(e,n,a){return a.forEach((d,g)=>{this.we(e,n,g)}),Pt.resolve()}removeOverlaysForBatchId(e,n,a){const d=this.ls.get(a);return void 0!==d&&(d.forEach(g=>this.overlays=this.overlays.remove(g)),this.ls.delete(a)),Pt.resolve()}getOverlaysForCollection(e,n,a){const d=Qu(),g=n.length+1,T=new yn(n.child("")),O=this.overlays.getIteratorFrom(T);for(;O.hasNext();){const Z=O.getNext().value,ue=Z.getKey();if(!n.isPrefixOf(ue.path))break;ue.path.length===g&&Z.largestBatchId>a&&d.set(Z.getKey(),Z)}return Pt.resolve(d)}getOverlaysForCollectionGroup(e,n,a,d){let g=new Ii((ue,Ie)=>ue-Ie);const T=this.overlays.getIterator();for(;T.hasNext();){const ue=T.getNext().value;if(ue.getKey().getCollectionGroup()===n&&ue.largestBatchId>a){let Ie=g.get(ue.largestBatchId);null===Ie&&(Ie=Qu(),g=g.insert(ue.largestBatchId,Ie)),Ie.set(ue.getKey(),ue)}}const O=Qu(),Z=g.getIterator();for(;Z.hasNext()&&(Z.getNext().value.forEach((ue,Ie)=>O.set(ue,Ie)),!(O.size()>=d)););return Pt.resolve(O)}we(e,n,a){const d=this.overlays.get(a.key);if(null!==d){const T=this.ls.get(d.largestBatchId).delete(a.key);this.ls.set(d.largestBatchId,T)}this.overlays=this.overlays.insert(a.key,new b(n,a));let g=this.ls.get(n);void 0===g&&(g=li(),this.ls.set(n,g)),this.ls.set(n,g.add(a.key))}}class fv{constructor(){this.fs=new xi(su.ds),this.ws=new xi(su._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const a=new su(e,n);this.fs=this.fs.add(a),this.ws=this.ws.add(a)}gs(e,n){e.forEach(a=>this.addReference(a,n))}removeReference(e,n){this.ys(new su(e,n))}ps(e,n){e.forEach(a=>this.removeReference(a,n))}Is(e){const n=new yn(new Di([])),a=new su(n,e),d=new su(n,e+1),g=[];return this.ws.forEachInRange([a,d],T=>{this.ys(T),g.push(T.key)}),g}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new yn(new Di([])),a=new su(n,e),d=new su(n,e+1);let g=li();return this.ws.forEachInRange([a,d],T=>{g=g.add(T.key)}),g}containsKey(e){const n=new su(e,0),a=this.fs.firstAfterOrEqual(n);return null!==a&&e.isEqual(a.key)}}class su{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return yn.comparator(e.key,n.key)||Nr(e.As,n.As)}static _s(e,n){return Nr(e.As,n.As)||yn.comparator(e.key,n.key)}}class sb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new xi(su.ds)}checkEmpty(e){return Pt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,a,d){const g=this.vs;this.vs++;const T=new S(g,n,a,d);this.mutationQueue.push(T);for(const O of d)this.Rs=this.Rs.add(new su(O.key,g)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return Pt.resolve(T)}lookupMutationBatch(e,n){return Pt.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const d=this.bs(n+1),g=d<0?0:d;return Pt.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return Pt.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new su(n,0),d=new su(n,Number.POSITIVE_INFINITY),g=[];return this.Rs.forEachInRange([a,d],T=>{const O=this.Ps(T.As);g.push(O)}),Pt.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new xi(Nr);return n.forEach(d=>{const g=new su(d,0),T=new su(d,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([g,T],O=>{a=a.add(O.As)})}),Pt.resolve(this.Vs(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,d=a.length+1;let g=a;yn.isDocumentKey(g)||(g=g.child(""));const T=new su(new yn(g),0);let O=new xi(Nr);return this.Rs.forEachWhile(Z=>{const ue=Z.key.path;return!!a.isPrefixOf(ue)&&(ue.length===d&&(O=O.add(Z.As)),!0)},T),Pt.resolve(this.Vs(O))}Vs(e){const n=[];return e.forEach(a=>{const d=this.Ps(a);null!==d&&n.push(d)}),n}removeMutationBatch(e,n){or(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let a=this.Rs;return Pt.forEach(n.mutations,d=>{const g=new su(d.key,n.batchId);return a=a.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Rs=a})}Cn(e){}containsKey(e,n){const a=new su(n,0),d=this.Rs.firstAfterOrEqual(a);return Pt.resolve(n.isEqual(d&&d.key))}performConsistencyCheck(e){return Pt.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Up{constructor(e){this.Ds=e,this.docs=new Ii(yn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,d=this.docs.get(a),g=d?d.size:0,T=this.Ds(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:T}),this.size+=T-g,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return Pt.resolve(a?a.document.mutableCopy():ps.newInvalidDocument(n))}getEntries(e,n){let a=Ha();return n.forEach(d=>{const g=this.docs.get(d);a=a.insert(d,g?g.document.mutableCopy():ps.newInvalidDocument(d))}),Pt.resolve(a)}getDocumentsMatchingQuery(e,n,a,d){let g=Ha();const T=n.path,O=new yn(T.child("")),Z=this.docs.getIteratorFrom(O);for(;Z.hasNext();){const{key:ue,value:{document:Ie}}=Z.getNext();if(!T.isPrefixOf(ue.path))break;ue.path.length>T.length+1||fr(_n(Ie),a)<=0||(d.has(Ie.key)||$l(n,Ie))&&(g=g.insert(Ie.key,Ie.mutableCopy()))}return Pt.resolve(g)}getAllFromCollectionGroup(e,n,a,d){In()}Cs(e,n){return Pt.forEach(this.docs,a=>n(a))}newChangeBuffer(e){return new t0(this)}getSize(e){return Pt.resolve(this.size)}}class t0 extends uv{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((a,d)=>{d.isValidDocument()?n.push(this.os.addEntry(e,d)):this.os.removeEntry(a)}),Pt.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class pv{constructor(e){this.persistence=e,this.xs=new Hl(n=>Ul(n),Gd),this.lastRemoteSnapshotVersion=cr.min(),this.highestTargetId=0,this.Ns=0,this.ks=new fv,this.targetCount=0,this.Ms=Ju.kn()}forEachTarget(e,n){return this.xs.forEach((a,d)=>n(d)),Pt.resolve()}getLastRemoteSnapshotVersion(e){return Pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pt.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Pt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.Ns&&(this.Ns=n),Pt.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Ju(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,Pt.resolve()}updateTargetData(e,n){return this.Fn(n),Pt.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,Pt.resolve()}removeTargets(e,n,a){let d=0;const g=[];return this.xs.forEach((T,O)=>{O.sequenceNumber<=n&&null===a.get(O.targetId)&&(this.xs.delete(T),g.push(this.removeMatchingKeysForTargetId(e,O.targetId)),d++)}),Pt.waitFor(g).next(()=>d)}getTargetCount(e){return Pt.resolve(this.targetCount)}getTargetData(e,n){const a=this.xs.get(n)||null;return Pt.resolve(a)}addMatchingKeys(e,n,a){return this.ks.gs(n,a),Pt.resolve()}removeMatchingKeys(e,n,a){this.ks.ps(n,a);const d=this.persistence.referenceDelegate,g=[];return d&&n.forEach(T=>{g.push(d.markPotentiallyOrphaned(e,T))}),Pt.waitFor(g)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),Pt.resolve()}getMatchingKeysForTargetId(e,n){const a=this.ks.Es(n);return Pt.resolve(a)}containsKey(e,n){return Pt.resolve(this.ks.containsKey(n))}}class Vp{constructor(e,n){this.$s={},this.overlays={},this.Os=new Co(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new pv(this),this.indexManager=new rb,this.remoteDocumentCache=new Up(a=>this.referenceDelegate.Ls(a)),this.serializer=new Wh(n),this.qs=new m_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new e0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.$s[e.toKey()];return a||(a=new sb(n,this.referenceDelegate),this.$s[e.toKey()]=a),a}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,a){En("MemoryPersistence","Starting transaction:",e);const d=new $p(this.Os.next());return this.referenceDelegate.Us(),a(d).next(g=>this.referenceDelegate.Ks(d).next(()=>g)).toPromise().then(g=>(d.raiseOnCommittedEvent(),g))}Gs(e,n){return Pt.or(Object.values(this.$s).map(a=>()=>a.containsKey(e,n)))}}class $p extends wo{constructor(e){super(),this.currentSequenceNumber=e}}class Uf{constructor(e){this.persistence=e,this.Qs=new fv,this.js=null}static zs(e){return new Uf(e)}get Ws(){if(this.js)return this.js;throw In()}addReference(e,n,a){return this.Qs.addReference(a,n),this.Ws.delete(a.toString()),Pt.resolve()}removeReference(e,n,a){return this.Qs.removeReference(a,n),this.Ws.add(a.toString()),Pt.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),Pt.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(d=>this.Ws.add(d.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next(d=>{d.forEach(g=>this.Ws.add(g.toString()))}).next(()=>a.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pt.forEach(this.Ws,a=>{const d=yn.fromPath(a);return this.Hs(e,d).next(g=>{g||n.removeEntry(d,cr.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(a=>{a?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return Pt.or([()=>Pt.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class Hp{constructor(e){this.serializer=e}O(e,n,a,d){const g=new Nl("createOrUpgrade",n);var O;a<1&&d>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dl,{unique:!0}),O.createObjectStore("documentMutations"),Gp(e),function(O){O.createObjectStore("remoteDocuments")}(e));let T=Pt.resolve();return a<3&&d>=3&&(0!==a&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),Gp(e)),T=T.next(()=>function(O){const Z=O.store("targetGlobal"),ue={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:cr.min().toTimestamp(),targetCount:0};return Z.put("targetGlobalKey",ue)}(g))),a<4&&d>=4&&(0!==a&&(T=T.next(()=>function(O,Z){return Z.store("mutations").j().next(ue=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dl,{unique:!0});const Ie=Z.store("mutations"),nt=ue.map(Ft=>Ie.put(Ft));return Pt.waitFor(nt)})}(e,g))),T=T.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&d>=5&&(T=T.next(()=>this.Ys(g))),a<6&&d>=6&&(T=T.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(g)))),a<7&&d>=7&&(T=T.next(()=>this.Zs(g))),a<8&&d>=8&&(T=T.next(()=>this.ti(e,g))),a<9&&d>=9&&(T=T.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&d>=10&&(T=T.next(()=>this.ei(g))),a<11&&d>=11&&(T=T.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&d>=12&&(T=T.next(()=>{!function(O){const Z=O.createObjectStore("documentOverlays",{keyPath:hl});Z.createIndex("collectionPathOverlayIndex",uc,{unique:!1}),Z.createIndex("collectionGroupOverlayIndex",Ih,{unique:!1})}(e)})),a<13&&d>=13&&(T=T.next(()=>function(O){const Z=O.createObjectStore("remoteDocumentsV14",{keyPath:Cf});Z.createIndex("documentKeyIndex",jc),Z.createIndex("collectionGroupIndex",Bc)}(e)).next(()=>this.ni(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&d>=14&&(T=T.next(()=>this.si(e,g))),a<15&&d>=15&&(T=T.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:od}).createIndex("sequenceNumberIndex",Dh,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:Ud}).createIndex("documentKeyIndex",Ag,{unique:!1})}(e))),T}Xs(e){let n=0;return e.store("remoteDocuments").X((a,d)=>{n+=ov(d)}).next(()=>{const a={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Ys(e){const n=e.store("mutationQueues"),a=e.store("mutations");return n.j().next(d=>Pt.forEach(d,g=>{const T=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return a.j("userMutationsIndex",T).next(O=>Pt.forEach(O,Z=>{or(Z.userId===g.userId);const ue=Sc(this.serializer,Z);return Lp(e,g.userId,ue).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const g=[];return a.X((T,O)=>{const Z=new Di(T),ue=[0,Ms(Z)];g.push(n.get(ue).next(Ie=>Ie?Pt.resolve():n.put({targetId:0,path:Ms(Z),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Pt.waitFor(g))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Bd});const a=n.store("collectionParents"),d=new Jd,g=T=>{if(d.add(T)){const O=T.lastSegment(),Z=T.popLast();return a.put({collectionId:O,parent:Ms(Z)})}};return n.store("remoteDocuments").X({Y:!0},(T,O)=>{const Z=new Di(T);return g(Z.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([T,O,Z],ue)=>{const Ie=Vi(O);return g(Ie.popLast())}))}ei(e){const n=e.store("targets");return n.X((a,d)=>{const g=Lf(d),T=Zm(this.serializer,g);return n.put(T)})}ni(e,n){const a=n.store("remoteDocuments"),d=[];return a.X((g,T)=>{const O=n.store("remoteDocumentsV14"),Z=(ue=T,ue.document?new yn(Di.fromString(ue.document.name).popFirst(5)):ue.noDocument?yn.fromSegments(ue.noDocument.path):ue.unknownDocument?yn.fromSegments(ue.unknownDocument.path):In()).path.toArray();var ue;const Ie={prefixPath:Z.slice(0,Z.length-2),collectionGroup:Z[Z.length-2],documentId:Z[Z.length-1],readTime:T.readTime||[0,0],unknownDocument:T.unknownDocument,noDocument:T.noDocument,document:T.document,hasCommittedMutations:!!T.hasCommittedMutations};d.push(O.put(Ie))}).next(()=>Pt.waitFor(d))}si(e,n){const a=n.store("mutations"),d=lv(this.serializer),g=new Vp(Uf.zs,this.serializer.fe);return a.j().next(T=>{const O=new Map;return T.forEach(Z=>{var ue;let Ie=null!==(ue=O.get(Z.userId))&&void 0!==ue?ue:li();Sc(this.serializer,Z).keys().forEach(nt=>Ie=Ie.add(nt)),O.set(Z.userId,Ie)}),Pt.forEach(O,(Z,ue)=>{const Ie=new Er(ue),nt=Qm.de(this.serializer,Ie),Ft=g.getIndexManager(Ie),on=eh.de(Ie,this.serializer,Ft,g.referenceDelegate);return new hv(d,on,nt,Ft).recalculateAndSaveOverlaysForDocumentKeys(new fl(n,Co.ct),Z).next()})})}}function Gp(o){o.createObjectStore("targetDocuments",{keyPath:Su}).createIndex("documentTargetsIndex",Sf,{unique:!0}),o.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qu,{unique:!0}),o.createObjectStore("targetGlobal")}const ih="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Yg{constructor(e,n,a,d,g,T,O,Z,ue,Ie,nt=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=a,this.ii=g,this.window=T,this.document=O,this.ri=ue,this.oi=Ie,this.ui=nt,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=Ft=>Promise.resolve(),!Yg.D())throw new gn(Vt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jy(this,d),this.di=n+"main",this.serializer=new Wh(Z),this.wi=new Bs(this.di,this.ui,new Hp(this.serializer)),this.Bs=new Xy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lv(this.serializer),this.qs=new Pp,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===Ie&&Ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gn(Vt.FAILED_PRECONDITION,ih);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Co(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var n=this;return this.fi=function(){var a=(0,Ve.Z)(function*(d){if(n.started)return e(d)});return function(d){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var n=(0,Ve.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ve.Z)(function*(){n.started&&(yield n.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(zu(e))return En("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return En("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Kc(e).get("owner").next(n=>Pt.resolve(this.Ri(n)))}Pi(e){return sh(e).delete(this.clientId)}bi(){var e=this;return(0,Ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const d=Do(a,"clientMetadata");return d.j().next(g=>{const T=e.Si(g,18e5),O=g.filter(Z=>-1===T.indexOf(Z));return Pt.forEach(O,Z=>d.delete(Z.clientId)).next(()=>O)})}).catch(()=>[]);if(e._i)for(const a of n)e._i.removeItem(e.Di(a.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Pt.resolve(!0):Kc(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new gn(Vt.FAILED_PRECONDITION,ih);return!1}}return!(!this.networkEnabled||!this.inForeground)||sh(e).j().next(a=>void 0===this.Si(a,5e3).find(d=>!(this.clientId===d.clientId||!(!this.networkEnabled&&d.networkEnabled||!this.inForeground&&d.inForeground&&this.networkEnabled===d.networkEnabled))))}).next(n=>(this.isPrimary!==n&&En("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const a=new fl(n,Co.ct);return e.Ai(a).next(()=>e.Pi(a))}),e.wi.close(),e.Mi()})()}Si(e,n){return e.filter(a=>this.Vi(a.updateTimeMs,n)&&!this.Ci(a.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>sh(e).j().next(n=>this.Si(n,18e5).map(a=>a.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return eh.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rp(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Qm.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,a){En("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===n?"readonly":"readwrite",g=15===(T=this.ui)?Ah:14===T?$d:13===T?Du:12===T?xh:11===T?Vd:void In();var T;let O;return this.wi.runTransaction(e,d,g,Z=>(O=new fl(Z,this.Os?this.Os.next():Co.ct),"readwrite-primary"===n?this.Ti(O).next(ue=>!!ue||this.Ei(O)).next(ue=>{if(!ue)throw Ui(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new gn(Vt.FAILED_PRECONDITION,Mi);return a(O)}).next(ue=>this.vi(O).next(()=>ue)):this.Oi(O).next(()=>a(O)))).then(Z=>(O.raiseOnCommittedEvent(),Z))}Oi(e){return Kc(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new gn(Vt.FAILED_PRECONDITION,ih)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kc(e).put("owner",n)}static D(){return Bs.D()}Ai(e){const n=Kc(e);return n.get("owner").next(a=>this.Ri(a)?(En("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Pt.resolve())}Vi(e,n){const a=Date.now();return!(e<a-n||e>a&&(Ui(`Detected an update time that is in the future: ${e} > ${a}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,_e.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const a=null!==(null===(n=this._i)||void 0===n?void 0:n.getItem(this.Di(e)));return En("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Ui("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ui("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kc(o){return Do(o,"owner")}function sh(o){return Do(o,"clientMetadata")}function $f(o,e){let n=o.projectId;return o.isDefaultDatabase||(n+="."+o.database),"firestore/"+e+"/"+n+"/"}class oh{constructor(e,n,a,d){this.targetId=e,this.fromCache=n,this.Fi=a,this.Bi=d}static Li(e,n){let a=li(),d=li();for(const g of n.docChanges)switch(g.type){case 0:a=a.add(g.doc.key);break;case 1:d=d.add(g.doc.key)}return new oh(e,n.fromCache,a,d)}}class zp{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,a,d){return this.Ki(e,n).next(g=>g||this.Gi(e,n,d,a)).next(g=>g||this.Qi(e,n))}Ki(e,n){if(Dp(n))return Pt.resolve(null);let a=Ko(n);return this.indexManager.getIndexType(e,a).next(d=>0===d?null:(null!==n.limit&&1===d&&(n=fc(n,null,"F"),a=Ko(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next(g=>{const T=li(...g);return this.Ui.getDocuments(e,T).next(O=>this.indexManager.getMinOffset(e,a).next(Z=>{const ue=this.ji(n,O);return this.zi(n,ue,T,Z.readTime)?this.Ki(e,fc(n,null,"F")):this.Wi(e,ue,n,Z)}))})))}Gi(e,n,a,d){return Dp(n)||d.isEqual(cr.min())?this.Qi(e,n):this.Ui.getDocuments(e,a).next(g=>{const T=this.ji(n,g);return this.zi(n,T,a,d)?this.Qi(e,n):(ao()<=Ee.in.DEBUG&&En("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),pc(n)),this.Wi(e,T,n,St(d,-1)))})}ji(e,n){let a=new xi(Au(e));return n.forEach((d,g)=>{$l(e,g)&&(a=a.add(g))}),a}zi(e,n,a,d){if(null===e.limit)return!1;if(a.size!==n.size)return!0;const g="F"===e.limitType?n.last():n.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(d)>0)}Qi(e,n){return ao()<=Ee.in.DEBUG&&En("QueryEngine","Using full collection scan to execute query:",pc(n)),this.Ui.getDocumentsMatchingQuery(e,n,Hn.min())}Wi(e,n,a,d){return this.Ui.getDocumentsMatchingQuery(e,a,d).next(g=>(n.forEach(T=>{g=g.insert(T.key,T)}),g))}}class qp{constructor(e,n,a,d){this.persistence=e,this.Hi=n,this.serializer=d,this.Ji=new Ii(Nr),this.Yi=new Hl(g=>Ul(g),Gd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(a)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hv(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function Qh(o,e,n,a){return new qp(o,e,n,a)}function Qg(o,e){return Xg.apply(this,arguments)}function Xg(){return Xg=(0,Ve.Z)(function*(o,e){const n=kn(o);return yield n.persistence.runTransaction("Handle user change","readonly",a=>{let d;return n.mutationQueue.getAllMutationBatches(a).next(g=>(d=g,n.tr(e),n.mutationQueue.getAllMutationBatches(a))).next(g=>{const T=[],O=[];let Z=li();for(const ue of d){T.push(ue.batchId);for(const Ie of ue.mutations)Z=Z.add(Ie.key)}for(const ue of g){O.push(ue.batchId);for(const Ie of ue.mutations)Z=Z.add(Ie.key)}return n.localDocuments.getDocuments(a,Z).next(ue=>({er:ue,removedBatchIds:T,addedBatchIds:O}))})})}),Xg.apply(this,arguments)}function mv(o){const e=kn(o);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function y_(o,e,n){let a=li(),d=li();return n.forEach(g=>a=a.add(g)),e.getEntries(o,a).next(g=>{let T=Ha();return n.forEach((O,Z)=>{const ue=g.get(O);Z.isFoundDocument()!==ue.isFoundDocument()&&(d=d.add(O)),Z.isNoDocument()&&Z.version.isEqual(cr.min())?(e.removeEntry(O,Z.readTime),T=T.insert(O,Z)):!ue.isValidDocument()||Z.version.compareTo(ue.version)>0||0===Z.version.compareTo(ue.version)&&ue.hasPendingWrites?(e.addEntry(Z),T=T.insert(O,Z)):En("LocalStore","Ignoring outdated watch update for ",O,". Current version:",ue.version," Watch version:",Z.version)}),{nr:T,sr:d}})}function __(o,e){const n=kn(o);return n.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function ah(o,e){const n=kn(o);return n.persistence.runTransaction("Allocate target","readwrite",a=>{let d;return n.Bs.getTargetData(a,e).next(g=>g?(d=g,Pt.resolve(d)):n.Bs.allocateTargetId(a).next(T=>(d=new zc(e,T,"TargetPurposeListen",a.currentSequenceNumber),n.Bs.addTargetData(a,d).next(()=>d))))}).then(a=>{const d=n.Ji.get(a.targetId);return(null===d||a.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(a.targetId,a),n.Yi.set(e,a.targetId)),a})}function uh(o,e,n){return vv.apply(this,arguments)}function vv(){return vv=(0,Ve.Z)(function*(o,e,n){const a=kn(o),d=a.Ji.get(e),g=n?"readwrite":"readwrite-primary";try{n||(yield a.persistence.runTransaction("Release target",g,T=>a.persistence.referenceDelegate.removeTarget(T,d)))}catch(T){if(!zu(T))throw T;En("LocalStore",`Failed to update sequence numbers for target ${e}: ${T}`)}a.Ji=a.Ji.remove(e),a.Yi.delete(d.target)}),vv.apply(this,arguments)}function Wp(o,e,n){const a=kn(o);let d=cr.min(),g=li();return a.persistence.runTransaction("Execute query","readonly",T=>function(O,Z,ue){const Ie=kn(O),nt=Ie.Yi.get(ue);return void 0!==nt?Pt.resolve(Ie.Ji.get(nt)):Ie.Bs.getTargetData(Z,ue)}(a,T,Ko(e)).next(O=>{if(O)return d=O.lastLimboFreeSnapshotVersion,a.Bs.getMatchingKeysForTargetId(T,O.targetId).next(Z=>{g=Z})}).next(()=>a.Hi.getDocumentsMatchingQuery(T,e,n?d:cr.min(),n?g:li())).next(O=>(Hf(a,qd(e),O),{documents:O,ir:g})))}function Jg(o,e){const n=kn(o),a=kn(n.Bs),d=n.Ji.get(e);return d?Promise.resolve(d.target):n.persistence.runTransaction("Get target data","readonly",g=>a.le(g,e).next(T=>T?T.target:null))}function Kp(o,e){const n=kn(o),a=n.Xi.get(e)||cr.min();return n.persistence.runTransaction("Get new document changes","readonly",d=>n.Zi.getAllFromCollectionGroup(d,e,St(a,-1),Number.MAX_SAFE_INTEGER)).then(d=>(Hf(n,e,d),d))}function Hf(o,e,n){let a=o.Xi.get(e)||cr.min();n.forEach((d,g)=>{g.readTime.compareTo(a)>0&&(a=g.readTime)}),o.Xi.set(e,a)}function yv(){return yv=(0,Ve.Z)(function*(o,e,n,a){const d=kn(o);let g=li(),T=Ha();for(const ue of n){const Ie=e.rr(ue.metadata.name);ue.document&&(g=g.add(Ie));const nt=e.ur(ue);nt.setReadTime(e.cr(ue.metadata.readTime)),T=T.insert(Ie,nt)}const O=d.Zi.newChangeBuffer({trackRemovals:!0}),Z=yield ah(d,(ue=a,Ko(cd(Di.fromString(`__bundle__/docs/${ue}`)))));var ue;return d.persistence.runTransaction("Apply bundle documents","readwrite",ue=>y_(ue,O,T).next(Ie=>(O.apply(ue),Ie)).next(Ie=>d.Bs.removeMatchingKeysForTargetId(ue,Z.targetId).next(()=>d.Bs.addMatchingKeys(ue,g,Z.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(ue,Ie.nr,Ie.sr)).next(()=>Ie.nr)))}),yv.apply(this,arguments)}function r0(o,e){return s0.apply(this,arguments)}function s0(){return s0=(0,Ve.Z)(function*(o,e,n=li()){const a=yield ah(o,Ko($g(e.bundledQuery))),d=kn(o);return d.persistence.runTransaction("Save named query","readwrite",g=>{const T=_o(e.readTime);if(a.snapshotVersion.compareTo(T)>=0)return d.qs.saveNamedQuery(g,e);const O=a.withResumeToken(Us.EMPTY_BYTE_STRING,T);return d.Ji=d.Ji.insert(O.targetId,O),d.Bs.updateTargetData(g,O).next(()=>d.Bs.removeMatchingKeysForTargetId(g,a.targetId)).next(()=>d.Bs.addMatchingKeys(g,n,a.targetId)).next(()=>d.qs.saveNamedQuery(g,e))})}),s0.apply(this,arguments)}function o0(o,e){return`firestore_clients_${o}_${e}`}function Gf(o,e,n){let a=`firestore_mutations_${o}_${n}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function _v(o,e){return`firestore_targets_${o}_${e}`}class _l{constructor(e,n,a,d){this.user=e,this.batchId=n,this.state=a,this.error=d}static ar(e,n,a){const d=JSON.parse(a);let g,T="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return T&&d.error&&(T="string"==typeof d.error.message&&"string"==typeof d.error.code,T&&(g=new gn(d.error.code,d.error.message))),T?new _l(e,n,d.state,g):(Ui("SharedClientState",`Failed to parse mutation state for ID '${n}': ${a}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wd{constructor(e,n,a){this.targetId=e,this.state=n,this.error=a}static ar(e,n){const a=JSON.parse(n);let d,g="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return g&&a.error&&(g="string"==typeof a.error.message&&"string"==typeof a.error.code,g&&(d=new gn(a.error.code,a.error.message))),g?new wd(e,a.state,d):(Ui("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const a=JSON.parse(n);let d="object"==typeof a&&a.activeTargetIds instanceof Array,g=Vc();for(let T=0;d&&T<a.activeTargetIds.length;++T)d=oc(a.activeTargetIds[T]),g=g.add(a.activeTargetIds[T]);return d?new Zp(e,g):(Ui("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Xh{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Xh(n.clientId,n.onlineState):(Ui("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bv{constructor(){this.activeTargetIds=Vc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tv{constructor(e,n,a,d,g){this.window=e,this.ii=n,this.persistenceKey=a,this.wr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Ii(Nr),this.started=!1,this.yr=[];const T=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.pr=o0(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new bv),this.Tr=new RegExp(`^firestore_clients_${T}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${T}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${T}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.syncEngine.$i();for(const d of n){if(d===e.wr)continue;const g=e.getItem(o0(e.persistenceKey,d));if(g){const T=Zp.ar(d,g);T&&(e.gr=e.gr.insert(T.clientId,T))}}e.Pr();const a=e.storage.getItem(e.vr);if(a){const d=e.br(a);d&&e.Vr(d)}for(const d of e.yr)e.mr(d);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((a,d)=>{d.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,a){this.Dr(e,n,a),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(_v(this.persistenceKey,e));if(a){const d=wd.ar(e,a);d&&(n=d.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_v(this.persistenceKey,e))}updateQueryState(e,n,a){this.kr(e,n,a)}handleUserChange(e,n,a){n.forEach(d=>{this.Cr(d)}),this.currentUser=e,a.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return En("SharedClientState","READ",e,n),n}setItem(e,n){En("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){En("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var n=this;const a=e;if(a.storageArea===this.storage){if(En("SharedClientState","EVENT",a.key,a.newValue),a.key===this.pr)return void Ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ve.Z)(function*(){if(n.started){if(null!==a.key)if(n.Tr.test(a.key)){if(null==a.newValue){const d=n.Or(a.key);return n.Fr(d,null)}{const d=n.Br(a.key,a.newValue);if(d)return n.Fr(d.clientId,d)}}else if(n.Er.test(a.key)){if(null!==a.newValue){const d=n.Lr(a.key,a.newValue);if(d)return n.qr(d)}}else if(n.Ar.test(a.key)){if(null!==a.newValue){const d=n.Ur(a.key,a.newValue);if(d)return n.Kr(d)}}else if(a.key===n.vr){if(null!==a.newValue){const d=n.br(a.newValue);if(d)return n.Vr(d)}}else if(a.key===n.Ir){const d=function(g){let T=Co.ct;if(null!=g)try{const O=JSON.parse(g);or("number"==typeof O),T=O}catch(O){Ui("SharedClientState","Failed to read sequence number from WebStorage",O)}return T}(a.newValue);d!==Co.ct&&n.sequenceNumberHandler(d)}else if(a.key===n.Rr){const d=n.Gr(a.newValue);yield Promise.all(d.map(g=>n.syncEngine.Qr(g)))}}else n.yr.push(a)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,a){const d=new _l(this.currentUser,e,n,a),g=Gf(this.persistenceKey,this.currentUser,e);this.setItem(g,d.hr())}Cr(e){const n=Gf(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,n,a){const d=_v(this.persistenceKey,e),g=new wd(e,n,a);this.setItem(d,g.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const a=this.Or(e);return Zp.ar(a,n)}Lr(e,n){const a=this.Er.exec(e),d=Number(a[1]);return _l.ar(new Er(void 0!==a[2]?a[2]:null),d,n)}Ur(e,n){const a=this.Ar.exec(e),d=Number(a[1]);return wd.ar(d,n)}br(e){return Xh.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var n=this;return(0,Ve.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.jr(e.batchId,e.state,e.error);En("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const a=n?this.gr.insert(e,n):this.gr.remove(e),d=this.Sr(this.gr),g=this.Sr(a),T=[],O=[];return g.forEach(Z=>{d.has(Z)||T.push(Z)}),d.forEach(Z=>{g.has(Z)||O.push(Z)}),this.syncEngine.Wr(T,O).then(()=>{this.gr=a})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=Vc();return e.forEach((a,d)=>{n=n.unionWith(d.activeTargetIds)}),n}}class Jh{constructor(){this.Hr=new bv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,a){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new bv,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ev{Yr(e){}shutdown(){}}class wv{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){En("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){En("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ef=null;function tf(){return null===ef?ef=268435456+Math.round(2147483648*Math.random()):ef++,"0x"+ef.toString(16)}const Cv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ob{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ga="WebChannelConnection";class el extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,a,d,g){const T=tf(),O=this.To(e,n);En("RestConnection",`Sending RPC '${e}' ${T}:`,O,a);const Z={};return this.Eo(Z,d,g),this.Ao(e,O,Z,a).then(ue=>(En("RestConnection",`Received RPC '${e}' ${T}: `,ue),ue),ue=>{throw Js("RestConnection",`RPC '${e}' ${T} failed with error: `,ue,"url: ",O,"request:",a),ue})}vo(e,n,a,d,g,T){return this.Io(e,n,a,d,g)}Eo(e,n,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+pu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((d,g)=>e[g]=d),a&&a.headers.forEach((d,g)=>e[g]=d)}To(e,n){return`${this.mo}/v1/${n}:${Cv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,a,d){const g=tf();return new Promise((T,O)=>{const Z=new Ml;Z.setWithCredentials(!0),Z.listenOnce(ja.COMPLETE,()=>{try{switch(Z.getLastErrorCode()){case ia.NO_ERROR:const Ie=Z.getResponseJson();En(ga,`XHR for RPC '${e}' ${g} received:`,JSON.stringify(Ie)),T(Ie);break;case ia.TIMEOUT:En(ga,`RPC '${e}' ${g} timed out`),O(new gn(Vt.DEADLINE_EXCEEDED,"Request time out"));break;case ia.HTTP_ERROR:const nt=Z.getStatus();if(En(ga,`RPC '${e}' ${g} failed with status:`,nt,"response text:",Z.getResponseText()),nt>0){let Ft=Z.getResponseJson();Array.isArray(Ft)&&(Ft=Ft[0]);const on=Ft?.error;if(on&&on.status&&on.message){const xn=function(Wn){const er=Wn.toLowerCase().replace(/_/g,"-");return Object.values(Vt).indexOf(er)>=0?er:Vt.UNKNOWN}(on.status);O(new gn(xn,on.message))}else O(new gn(Vt.UNKNOWN,"Server responded with status "+Z.getStatus()))}else O(new gn(Vt.UNAVAILABLE,"Connection failed."));break;default:In()}}finally{En(ga,`RPC '${e}' ${g} completed.`)}});const ue=JSON.stringify(d);En(ga,`RPC '${e}' ${g} sending request:`,d),Z.send(n,"POST",ue,a,15)})}Ro(e,n,a){const d=tf(),g=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],T=Fo(),O=bs(),Z={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},ue=this.longPollingOptions.timeoutSeconds;void 0!==ue&&(Z.longPollingTimeout=Math.round(1e3*ue)),this.useFetchStreams&&(Z.xmlHttpFactory=new kl({})),this.Eo(Z.initMessageHeaders,n,a),Z.encodeInitMessageHeaders=!0;const Ie=g.join("");En(ga,`Creating RPC '${e}' stream ${d}: ${Ie}`,Z);const nt=T.createWebChannel(Ie,Z);let Ft=!1,on=!1;const xn=new ob({ro:er=>{on?En(ga,`Not sending because RPC '${e}' stream ${d} is closed:`,er):(Ft||(En(ga,`Opening RPC '${e}' stream ${d} transport.`),nt.open(),Ft=!0),En(ga,`RPC '${e}' stream ${d} sending:`,er),nt.send(er))},oo:()=>nt.close()}),Wn=(er,vi,Bi)=>{er.listen(vi,Ti=>{try{Bi(Ti)}catch(ko){setTimeout(()=>{throw ko},0)}})};return Wn(nt,wu.EventType.OPEN,()=>{on||En(ga,`RPC '${e}' stream ${d} transport opened.`)}),Wn(nt,wu.EventType.CLOSE,()=>{on||(on=!0,En(ga,`RPC '${e}' stream ${d} transport closed`),xn.wo())}),Wn(nt,wu.EventType.ERROR,er=>{on||(on=!0,Js(ga,`RPC '${e}' stream ${d} transport errored:`,er),xn.wo(new gn(Vt.UNAVAILABLE,"The operation could not be completed")))}),Wn(nt,wu.EventType.MESSAGE,er=>{var vi;if(!on){const Bi=er.data[0];or(!!Bi);const ko=Bi.error||(null===(vi=Bi[0])||void 0===vi?void 0:vi.error);if(ko){En(ga,`RPC '${e}' stream ${d} received error:`,ko);const ho=ko.status;let ws=function(Ch){const Py=ge[Ch];if(void 0!==Py)return mn(Py)}(ho),va=ko.message;void 0===ws&&(ws=Vt.INTERNAL,va="Unknown error status: "+ho+" with message "+ko.message),on=!0,xn.wo(new gn(ws,va)),nt.close()}else En(ga,`RPC '${e}' stream ${d} received:`,Bi),xn._o(Bi)}}),Wn(O,Nc.STAT_EVENT,er=>{er.stat===jo.PROXY?En(ga,`RPC '${e}' stream ${d} detected buffering proxy`):er.stat===jo.NOPROXY&&En(ga,`RPC '${e}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{xn.fo()},0),xn}}function zf(){return typeof window<"u"?window:null}function Yp(){return typeof document<"u"?document:null}function lh(o){return new Fy(o,!0)}class Sv{constructor(e,n,a=1e3,d=1.5,g=6e4){this.ii=e,this.timerId=n,this.Po=a,this.bo=d,this.Vo=g,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),a=Math.max(0,Date.now()-this.Co),d=Math.max(0,n-a);d>0&&En("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,d,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class nf{constructor(e,n,a,d,g,T,O,Z){this.ii=e,this.$o=a,this.Oo=d,this.connection=g,this.authCredentialsProvider=T,this.appCheckCredentialsProvider=O,this.listener=Z,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Sv(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var a=this;return(0,Ve.Z)(function*(){a.Ho(),a.Jo(),a.qo.cancel(),a.Fo++,4!==e?a.qo.reset():n&&n.code===Vt.RESOURCE_EXHAUSTED?(Ui(n.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),a.qo.xo()):n&&n.code===Vt.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Yo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,d])=>{this.Fo===n&&this.Zo(a,d)},a=>{e(()=>{const d=new gn(Vt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.tu(d)})})}Zo(e,n){const a=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{a(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(d=>{a(()=>this.tu(d))}),this.stream.onMessage(d=>{a(()=>this.onMessage(d))})}Go(){var e=this;this.state=5,this.qo.No((0,Ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return En("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(En("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a0 extends nf{constructor(e,n,a,d,g,T){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,d,T),this.serializer=g}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function By(o,e){let n;if("targetChange"in e){const a="NO_CHANGE"===(Z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Z?1:"REMOVE"===Z?2:"CURRENT"===Z?3:"RESET"===Z?4:In(),d=e.targetChange.targetIds||[],g=function(Z,ue){return Z.useProto3Json?(or(void 0===ue||"string"==typeof ue),Us.fromBase64String(ue||"")):(or(void 0===ue||ue instanceof Uint8Array),Us.fromUint8Array(ue||new Uint8Array))}(o,e.targetChange.resumeToken),T=e.targetChange.cause,O=T&&function(Z){const ue=void 0===Z.code?Vt.UNKNOWN:mn(Z.code);return new gn(ue,Z.message||"")}(T);n=new ua(a,d,g,O||null)}else if("documentChange"in e){const a=e.documentChange,d=wc(o,a.document.name),g=_o(a.document.updateTime),T=a.document.createTime?_o(a.document.createTime):cr.min(),O=new Ur({mapValue:{fields:a.document.fields}}),Z=ps.newFoundDocument(d,g,T,O);n=new aa(a.targetIds||[],a.removedTargetIds||[],Z.key,Z)}else if("documentDelete"in e){const a=e.documentDelete,d=wc(o,a.document),g=a.readTime?_o(a.readTime):cr.min(),T=ps.newNoDocument(d,g);n=new aa([],a.removedTargetIds||[],T.key,T)}else if("documentRemove"in e){const a=e.documentRemove,d=wc(o,a.document);n=new aa([],a.removedTargetIds||[],d,null)}else{if(!("filter"in e))return In();{const a=e.filter,{count:d=0,unchangedNames:g}=a,T=new te(d,g);n=new ms(a.targetId,T)}}var Z;return n}(this.serializer,e),a=function(d){if(!("targetChange"in d))return cr.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?cr.min():g.readTime?_o(g.readTime):cr.min()}(e);return this.listener.nu(n,a)}su(e){const n={};n.database=zh(this.serializer),n.addTarget=function(d,g){let T;const O=g.target;if(T=Uc(O)?{documents:Mp(d,O)}:{query:qm(d,O)},T.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){T.resumeToken=$m(d,g.resumeToken);const Z=Vm(d,g.expectedCount);null!==Z&&(T.expectedCount=Z)}else if(g.snapshotVersion.compareTo(cr.min())>0){T.readTime=ql(d,g.snapshotVersion.toTimestamp());const Z=Vm(d,g.expectedCount);null!==Z&&(T.expectedCount=Z)}return T}(this.serializer,e);const a=function Vy(o,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return In()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);a&&(n.labels=a),this.Wo(n)}iu(e){const n={};n.database=zh(this.serializer),n.removeTarget=e,this.Wo(n)}}class Zc extends nf{constructor(e,n,a,d,g,T){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,d,T),this.serializer=g,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(or(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function bd(o,e){return o&&o.length>0?(or(void 0!==e),o.map(n=>function(a,d){let g=_o(a.updateTime?a.updateTime:d);return g.isEqual(cr.min())&&(g=_o(d)),new Um(g,a.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),a=_o(e.commitTime);return this.listener.cu(a,n)}return or(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=zh(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(a=>Nf(this.serializer,a))};this.Wo(n)}}class bl extends class{}{constructor(e,n,a,d){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=d,this.lu=!1}fu(){if(this.lu)throw new gn(Vt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Io(e,n,a,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new gn(Vt.UNKNOWN,d.toString())})}vo(e,n,a,d){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,T])=>this.connection.vo(e,n,a,g,T,d)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new gn(Vt.UNKNOWN,g.toString())})}terminate(){this.lu=!0}}class rf{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ui(n),this.mu=!1):En("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Yc{constructor(e,n,a,d,g){var T=this;this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=g,this.Pu.Yr(O=>{a.enqueueAndForget((0,Ve.Z)(function*(){var Z;Cd(T)&&(En("RemoteStore","Restarting streams for network reachability change."),yield(Z=(0,Ve.Z)(function*(ue){const Ie=kn(ue);Ie.vu.add(4),yield qf(Ie),Ie.bu.set("Unknown"),Ie.vu.delete(4),yield sf(Ie)}),function(ue){return Z.apply(this,arguments)})(T))}))}),this.bu=new rf(a,d)}}function sf(o){return u0.apply(this,arguments)}function u0(){return u0=(0,Ve.Z)(function*(o){if(Cd(o))for(const e of o.Ru)yield e(!0)}),u0.apply(this,arguments)}function qf(o){return l0.apply(this,arguments)}function l0(){return l0=(0,Ve.Z)(function*(o){for(const e of o.Ru)yield e(!1)}),l0.apply(this,arguments)}function Dv(o,e){const n=kn(o);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Kf(n)?em(n):fh(n).Ko()&&Xp(n,e))}function Wf(o,e){const n=kn(o),a=fh(n);n.Au.delete(e),a.Ko()&&b_(n,e),0===n.Au.size&&(a.Ko()?a.jo():Cd(n)&&n.bu.set("Unknown"))}function Xp(o,e){if(o.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(cr.min())>0){const n=o.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fh(o).su(e)}function b_(o,e){o.Vu.qt(e),fh(o).iu(e)}function em(o){o.Vu=new yu({getRemoteKeysForTarget:e=>o.remoteSyncer.getRemoteKeysForTarget(e),le:e=>o.Au.get(e)||null,ue:()=>o.datastore.serializer.databaseId}),fh(o).start(),o.bu.gu()}function Kf(o){return Cd(o)&&!fh(o).Uo()&&o.Au.size>0}function Cd(o){return 0===kn(o).vu.size}function Iv(o){o.Vu=void 0}function Jp(o){return ci.apply(this,arguments)}function ci(){return ci=(0,Ve.Z)(function*(o){o.Au.forEach((e,n)=>{Xp(o,e)})}),ci.apply(this,arguments)}function c0(o,e){return tm.apply(this,arguments)}function tm(){return tm=(0,Ve.Z)(function*(o,e){Iv(o),Kf(o)?(o.bu.Iu(e),em(o)):o.bu.set("Unknown")}),tm.apply(this,arguments)}function ab(o,e,n){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,Ve.Z)(function*(o,e,n){if(o.bu.set("Online"),e instanceof ua&&2===e.state&&e.cause)try{yield(a=(0,Ve.Z)(function*(d,g){const T=g.cause;for(const O of g.targetIds)d.Au.has(O)&&(yield d.remoteSyncer.rejectListen(O,T),d.Au.delete(O),d.Vu.removeTarget(O))}),function(d,g){return a.apply(this,arguments)})(o,e)}catch(a){En("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Yf(o,a)}else if(e instanceof aa?o.Vu.Ht(e):e instanceof ms?o.Vu.ne(e):o.Vu.Xt(e),!n.isEqual(cr.min()))try{const a=yield mv(o.localStore);n.compareTo(a)>=0&&(yield function(d,g){const T=d.Vu.ce(g);return T.targetChanges.forEach((O,Z)=>{if(O.resumeToken.approximateByteSize()>0){const ue=d.Au.get(Z);ue&&d.Au.set(Z,ue.withResumeToken(O.resumeToken,g))}}),T.targetMismatches.forEach((O,Z)=>{const ue=d.Au.get(O);if(!ue)return;d.Au.set(O,ue.withResumeToken(Us.EMPTY_BYTE_STRING,ue.snapshotVersion)),b_(d,O);const Ie=new zc(ue.target,O,Z,ue.sequenceNumber);Xp(d,Ie)}),d.remoteSyncer.applyRemoteEvent(T)}(o,n))}catch(a){En("RemoteStore","Failed to raise snapshot:",a),yield Yf(o,a)}var a}),Zf.apply(this,arguments)}function Yf(o,e,n){return xv.apply(this,arguments)}function xv(){return xv=(0,Ve.Z)(function*(o,e,n){if(!zu(e))throw e;o.vu.add(1),yield qf(o),o.bu.set("Offline"),n||(n=()=>mv(o.localStore)),o.asyncQueue.enqueueRetryable((0,Ve.Z)(function*(){En("RemoteStore","Retrying IndexedDB access"),yield n(),o.vu.delete(1),yield sf(o)}))}),xv.apply(this,arguments)}function Av(o,e){return e().catch(n=>Yf(o,n,e))}function af(o){return kv.apply(this,arguments)}function kv(){return kv=(0,Ve.Z)(function*(o){const e=kn(o),n=Dc(e);let a=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;d0(e);)try{const d=yield __(e.localStore,a);if(null===d){0===e.Eu.length&&n.jo();break}a=d.batchId,T_(e,d)}catch(d){yield Yf(e,d)}h0(e)&&E_(e)}),kv.apply(this,arguments)}function d0(o){return Cd(o)&&o.Eu.length<10}function T_(o,e){o.Eu.push(e);const n=Dc(o);n.Ko()&&n.ou&&n.uu(e.mutations)}function h0(o){return Cd(o)&&!Dc(o).Uo()&&o.Eu.length>0}function E_(o){Dc(o).start()}function Qc(o){return nm.apply(this,arguments)}function nm(){return nm=(0,Ve.Z)(function*(o){Dc(o).hu()}),nm.apply(this,arguments)}function ch(o){return dh.apply(this,arguments)}function dh(){return dh=(0,Ve.Z)(function*(o){const e=Dc(o);for(const n of o.Eu)e.uu(n.mutations)}),dh.apply(this,arguments)}function f0(o,e,n){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,Ve.Z)(function*(o,e,n){const a=o.Eu.shift(),d=m.from(a,e,n);yield Av(o,()=>o.remoteSyncer.applySuccessfulWrite(d)),yield af(o)}),Mv.apply(this,arguments)}function rm(o,e){return hh.apply(this,arguments)}function hh(){return hh=(0,Ve.Z)(function*(o,e){var n;e&&Dc(o).ou&&(yield(n=(0,Ve.Z)(function*(a,d){if(kt(g=d.code)&&g!==Vt.ABORTED){const T=a.Eu.shift();Dc(a).Qo(),yield Av(a,()=>a.remoteSyncer.rejectFailedWrite(T.batchId,d)),yield af(a)}var g}),function(a,d){return n.apply(this,arguments)})(o,e)),h0(o)&&E_(o)}),hh.apply(this,arguments)}function eg(o,e){return uf.apply(this,arguments)}function uf(){return uf=(0,Ve.Z)(function*(o,e){const n=kn(o);n.asyncQueue.verifyOperationInProgress(),En("RemoteStore","RemoteStore received new credentials");const a=Cd(n);n.vu.add(3),yield qf(n),a&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield sf(n)}),uf.apply(this,arguments)}function im(o,e){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,Ve.Z)(function*(o,e){const n=kn(o);e?(n.vu.delete(2),yield sf(n)):e||(n.vu.add(2),yield qf(n),n.bu.set("Unknown"))}),Qf.apply(this,arguments)}function fh(o){return o.Su||(o.Su=function(e,n,a){const d=kn(e);return d.fu(),new a0(n,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,a)}(o.datastore,o.asyncQueue,{uo:Jp.bind(null,o),ao:c0.bind(null,o),nu:ab.bind(null,o)}),o.Ru.push(function(){var e=(0,Ve.Z)(function*(n){n?(o.Su.Qo(),Kf(o)?em(o):o.bu.set("Unknown")):(yield o.Su.stop(),Iv(o))});return function(n){return e.apply(this,arguments)}}())),o.Su}function Dc(o){return o.Du||(o.Du=function(e,n,a){const d=kn(e);return d.fu(),new Zc(n,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,a)}(o.datastore,o.asyncQueue,{uo:Qc.bind(null,o),ao:rm.bind(null,o),au:ch.bind(null,o),cu:f0.bind(null,o)}),o.Ru.push(function(){var e=(0,Ve.Z)(function*(n){n?(o.Du.Qo(),yield af(o)):(yield o.Du.stop(),o.Eu.length>0&&(En("RemoteStore",`Stopping write stream with ${o.Eu.length} pending writes`),o.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),o.Du}class sm{constructor(e,n,a,d,g){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=d,this.removalCallback=g,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(T=>{})}static createAndSchedule(e,n,a,d,g){const T=Date.now()+a,O=new sm(e,n,T,d,g);return O.start(a),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gn(Vt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ph(o,e){if(Ui("AsyncQueue",`${e}: ${o}`),zu(o))return new gn(Vt.UNAVAILABLE,`${e}: ${o}`);throw o}class Xf{constructor(e){this.comparator=e?(n,a)=>e(n,a)||yn.comparator(n.key,a.key):(n,a)=>yn.comparator(n.key,a.key),this.keyedMap=gc(),this.sortedSet=new Ii(this.comparator)}static emptySet(e){return new Xf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,a)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const d=n.getNext().key,g=a.getNext().key;if(!d.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const a=new Xf;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class p0{constructor(){this.Cu=new Ii(yn.comparator)}track(e){const n=e.doc.key,a=this.Cu.get(n);a?0!==e.type&&3===a.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==a.type?this.Cu=this.Cu.insert(n,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Cu=this.Cu.remove(n):1===e.type&&2===a.type?this.Cu=this.Cu.insert(n,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):In():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,a)=>{e.push(a)}),e}}class ma{constructor(e,n,a,d,g,T,O,Z,ue){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=d,this.mutatedKeys=g,this.fromCache=T,this.syncStateChanged=O,this.excludesMetadataChanges=Z,this.hasCachedResults=ue}static fromInitialDocuments(e,n,a,d,g){const T=[];return n.forEach(O=>{T.push({type:0,doc:O})}),new ma(e,n,Xf.emptySet(n),T,a,d,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let d=0;d<n.length;d++)if(n[d].type!==a[d].type||!n[d].doc.isEqual(a[d].doc))return!1;return!0}}class Pv{constructor(){this.Nu=void 0,this.listeners=[]}}class g0{constructor(){this.queries=new Hl(e=>Nh(e),Yu),this.onlineState="Unknown",this.ku=new Set}}function Ov(o,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,Ve.Z)(function*(o,e){const n=kn(o),a=e.query;let d=!1,g=n.queries.get(a);if(g||(d=!0,g=new Pv),d)try{g.Nu=yield n.onListen(a)}catch(T){const O=ph(T,`Initialization of query '${pc(e.query)}' failed`);return void e.onError(O)}n.queries.set(a,g),g.listeners.push(e),e.Mu(n.onlineState),g.Nu&&e.$u(g.Nu)&&Lv(n)}),Rv.apply(this,arguments)}function Nv(o,e){return om.apply(this,arguments)}function om(){return om=(0,Ve.Z)(function*(o,e){const n=kn(o),a=e.query;let d=!1;const g=n.queries.get(a);if(g){const T=g.listeners.indexOf(e);T>=0&&(g.listeners.splice(T,1),d=0===g.listeners.length)}if(d)return n.queries.delete(a),n.onUnlisten(a)}),om.apply(this,arguments)}function m0(o,e){const n=kn(o);let a=!1;for(const d of e){const T=n.queries.get(d.query);if(T){for(const O of T.listeners)O.$u(d)&&(a=!0);T.Nu=d}}a&&Lv(n)}function v0(o,e,n){const a=kn(o),d=a.queries.get(e);if(d)for(const g of d.listeners)g.onError(n);a.queries.delete(e)}function Lv(o){o.ku.forEach(e=>{e.next()})}class Ou{constructor(e,n,a){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=a||{}}$u(e){if(!this.options.includeMetadataChanges){const a=[];for(const d of e.docChanges)3!==d.type&&a.push(d);e=new ma(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class w_{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}class Fv{constructor(e){this.serializer=e}rr(e){return wc(this.serializer,e)}ur(e){return e.metadata.exists?_d(this.serializer,e.document,!1):ps.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return _o(e)}}class jv{constructor(e,n,a){this.ju=e,this.localStore=n,this.serializer=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Bv(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const a=Di.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,a=new Fv(this.serializer);for(const d of e)if(d.metadata.queries){const g=a.rr(d.metadata.name);for(const T of d.metadata.queries){const O=(n.get(T)||li()).add(g);n.set(T,O)}}return n}complete(){var e=this;return(0,Ve.Z)(function*(){const n=yield function n0(o,e,n,a){return yv.apply(this,arguments)}(e.localStore,new Fv(e.serializer),e.documents,e.ju.id),a=e.Wu(e.documents);for(const d of e.queries)yield r0(e.localStore,d,a.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:n}})()}}function Bv(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}class Uv{constructor(e){this.key=e}}class y0{constructor(e){this.key=e}}class _0{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=li(),this.mutatedKeys=li(),this.tc=Au(e),this.ec=new Xf(this.tc)}get nc(){return this.Yu}sc(e,n){const a=n?n.ic:new p0,d=n?n.ec:this.ec;let g=n?n.mutatedKeys:this.mutatedKeys,T=d,O=!1;const Z="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,ue="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((Ie,nt)=>{const Ft=d.get(Ie),on=$l(this.query,nt)?nt:null,xn=!!Ft&&this.mutatedKeys.has(Ft.key),Wn=!!on&&(on.hasLocalMutations||this.mutatedKeys.has(on.key)&&on.hasCommittedMutations);let er=!1;Ft&&on?Ft.data.isEqual(on.data)?xn!==Wn&&(a.track({type:3,doc:on}),er=!0):this.rc(Ft,on)||(a.track({type:2,doc:on}),er=!0,(Z&&this.tc(on,Z)>0||ue&&this.tc(on,ue)<0)&&(O=!0)):!Ft&&on?(a.track({type:0,doc:on}),er=!0):Ft&&!on&&(a.track({type:1,doc:Ft}),er=!0,(Z||ue)&&(O=!0)),er&&(on?(T=T.add(on),g=Wn?g.add(Ie):g.delete(Ie)):(T=T.delete(Ie),g=g.delete(Ie)))}),null!==this.query.limit)for(;T.size>this.query.limit;){const Ie="F"===this.query.limitType?T.last():T.first();T=T.delete(Ie.key),g=g.delete(Ie.key),a.track({type:1,doc:Ie})}return{ec:T,ic:a,zi:O,mutatedKeys:g}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a){const d=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const g=e.ic.xu();g.sort((ue,Ie)=>function(nt,Ft){const on=xn=>{switch(xn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return In()}};return on(nt)-on(Ft)}(ue.type,Ie.type)||this.tc(ue.doc,Ie.doc)),this.oc(a);const T=n?this.uc():[],O=0===this.Zu.size&&this.current?1:0,Z=O!==this.Xu;return this.Xu=O,0!==g.length||Z?{snapshot:new ma(this.query,e.ec,d,g,e.mutatedKeys,0===O,Z,!1,!!a&&a.resumeToken.approximateByteSize()>0),cc:T}:{cc:T}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new p0,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=li(),this.ec.forEach(a=>{this.ac(a.key)&&(this.Zu=this.Zu.add(a.key))});const n=[];return e.forEach(a=>{this.Zu.has(a)||n.push(new y0(a))}),this.Zu.forEach(a=>{e.has(a)||n.push(new Uv(a))}),n}hc(e){this.Yu=e.ir,this.Zu=li();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return ma.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class C_{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class b0{constructor(e){this.key=e,this.fc=!1}}class S_{constructor(e,n,a,d,g,T){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=d,this.currentUser=g,this.maxConcurrentLimboResolutions=T,this.dc={},this.wc=new Hl(O=>Nh(O),Yu),this._c=new Map,this.mc=new Set,this.gc=new Ii(yn.comparator),this.yc=new Map,this.Ic=new fv,this.Tc={},this.Ec=new Map,this.Ac=Ju.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function T0(o,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,Ve.Z)(function*(o,e){const n=Jv(o);let a,d;const g=n.wc.get(e);if(g)a=g.targetId,n.sharedClientState.addLocalQueryTarget(a),d=g.view.lc();else{const T=yield ah(n.localStore,Ko(e)),O=n.sharedClientState.addLocalQueryTarget(T.targetId);a=T.targetId,d=yield Vv(n,e,a,"current"===O,T.resumeToken),n.isPrimaryClient&&Dv(n.remoteStore,T)}return d}),Jf.apply(this,arguments)}function Vv(o,e,n,a,d){return am.apply(this,arguments)}function am(){return am=(0,Ve.Z)(function*(o,e,n,a,d){o.Rc=(nt,Ft,on)=>{return(xn=(0,Ve.Z)(function*(Wn,er,vi,Bi){let Ti=er.view.sc(vi);Ti.zi&&(Ti=yield Wp(Wn.localStore,er.query,!1).then(({documents:ws})=>er.view.sc(ws,Ti)));const ko=Bi&&Bi.targetChanges.get(er.targetId),ho=er.view.applyChanges(Ti,Wn.isPrimaryClient,ko);return qv(Wn,er.targetId,ho.cc),ho.snapshot}),function(Wn,er,vi,Bi){return xn.apply(this,arguments)})(o,nt,Ft,on);var xn};const g=yield Wp(o.localStore,e,!0),T=new _0(e,g.ir),O=T.sc(g.documents),Z=zl.createSynthesizedTargetChangeForCurrentChange(n,a&&"Offline"!==o.onlineState,d),ue=T.applyChanges(O,o.isPrimaryClient,Z);qv(o,n,ue.cc);const Ie=new C_(e,n,T);return o.wc.set(e,Ie),o._c.has(n)?o._c.get(n).push(e):o._c.set(n,[e]),ue.snapshot}),am.apply(this,arguments)}function D_(o,e){return $v.apply(this,arguments)}function $v(){return $v=(0,Ve.Z)(function*(o,e){const n=kn(o),a=n.wc.get(e),d=n._c.get(a.targetId);if(d.length>1)return n._c.set(a.targetId,d.filter(g=>!Yu(g,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||(yield uh(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),Wf(n.remoteStore,a.targetId),Xc(n,a.targetId)}).catch(vo))):(Xc(n,a.targetId),yield uh(n.localStore,a.targetId,!0))}),$v.apply(this,arguments)}function Yl(){return Yl=(0,Ve.Z)(function*(o,e,n){const a=ey(o);try{const d=yield function(g,T){const O=kn(g),Z=gi.now(),ue=T.reduce((Ft,on)=>Ft.add(on.key),li());let Ie,nt;return O.persistence.runTransaction("Locally write mutations","readwrite",Ft=>{let on=Ha(),xn=li();return O.Zi.getEntries(Ft,ue).next(Wn=>{on=Wn,on.forEach((er,vi)=>{vi.isValidDocument()||(xn=xn.add(er))})}).next(()=>O.localDocuments.getOverlayedDocuments(Ft,on)).next(Wn=>{Ie=Wn;const er=[];for(const vi of T){const Bi=_c(vi,Ie.get(vi.key).overlayedDocument);null!=Bi&&er.push(new bc(vi.key,Bi,jl(Bi.value.mapValue),qs.exists(!0)))}return O.mutationQueue.addMutationBatch(Ft,Z,er,T)}).next(Wn=>{nt=Wn;const er=Wn.applyToLocalDocumentSet(Ie,xn);return O.documentOverlayCache.saveOverlays(Ft,Wn.batchId,er)})}).then(()=>({batchId:nt.batchId,changes:Fh(Ie)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(d.batchId),function(g,T,O){let Z=g.Tc[g.currentUser.toKey()];Z||(Z=new Ii(Nr)),Z=Z.insert(T,O),g.Tc[g.currentUser.toKey()]=Z}(a,d.batchId,n),yield Sd(a,d.changes),yield af(a.remoteStore)}catch(d){const g=ph(d,"Failed to persist write");n.reject(g)}}),Yl.apply(this,arguments)}function um(o,e){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,Ve.Z)(function*(o,e){const n=kn(o);try{const a=yield function v_(o,e){const n=kn(o),a=e.snapshotVersion;let d=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const T=n.Zi.newChangeBuffer({trackRemovals:!0});d=n.Ji;const O=[];e.targetChanges.forEach((Ie,nt)=>{const Ft=d.get(nt);if(!Ft)return;O.push(n.Bs.removeMatchingKeys(g,Ie.removedDocuments,nt).next(()=>n.Bs.addMatchingKeys(g,Ie.addedDocuments,nt)));let on=Ft.withSequenceNumber(g.currentSequenceNumber);var xn,Wn,er;null!==e.targetMismatches.get(nt)?on=on.withResumeToken(Us.EMPTY_BYTE_STRING,cr.min()).withLastLimboFreeSnapshotVersion(cr.min()):Ie.resumeToken.approximateByteSize()>0&&(on=on.withResumeToken(Ie.resumeToken,a)),d=d.insert(nt,on),Wn=on,er=Ie,(0===(xn=Ft).resumeToken.approximateByteSize()||Wn.snapshotVersion.toMicroseconds()-xn.snapshotVersion.toMicroseconds()>=3e8||er.addedDocuments.size+er.modifiedDocuments.size+er.removedDocuments.size>0)&&O.push(n.Bs.updateTargetData(g,on))});let Z=Ha(),ue=li();if(e.documentUpdates.forEach(Ie=>{e.resolvedLimboDocuments.has(Ie)&&O.push(n.persistence.referenceDelegate.updateLimboDocument(g,Ie))}),O.push(y_(g,T,e.documentUpdates).next(Ie=>{Z=Ie.nr,ue=Ie.sr})),!a.isEqual(cr.min())){const Ie=n.Bs.getLastRemoteSnapshotVersion(g).next(nt=>n.Bs.setTargetsMetadata(g,g.currentSequenceNumber,a));O.push(Ie)}return Pt.waitFor(O).next(()=>T.apply(g)).next(()=>n.localDocuments.getLocalViewOfDocuments(g,Z,ue)).next(()=>Z)}).then(g=>(n.Ji=d,g))}(n.localStore,e);e.targetChanges.forEach((d,g)=>{const T=n.yc.get(g);T&&(or(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?T.fc=!0:d.modifiedDocuments.size>0?or(T.fc):d.removedDocuments.size>0&&(or(T.fc),T.fc=!1))}),yield Sd(n,a,e)}catch(a){yield vo(a)}}),Hv.apply(this,arguments)}function Gv(o,e,n){const a=kn(o);if(a.isPrimaryClient&&0===n||!a.isPrimaryClient&&1===n){const d=[];a.wc.forEach((g,T)=>{const O=T.view.Mu(e);O.snapshot&&d.push(O.snapshot)}),function(g,T){const O=kn(g);O.onlineState=T;let Z=!1;O.queries.forEach((ue,Ie)=>{for(const nt of Ie.listeners)nt.Mu(T)&&(Z=!0)}),Z&&Lv(O)}(a.eventManager,e),d.length&&a.dc.nu(d),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function E0(o,e,n){return lm.apply(this,arguments)}function lm(){return lm=(0,Ve.Z)(function*(o,e,n){const a=kn(o);a.sharedClientState.updateQueryState(e,"rejected",n);const d=a.yc.get(e),g=d&&d.key;if(g){let T=new Ii(yn.comparator);T=T.insert(g,ps.newNoDocument(g,cr.min()));const O=li().add(g),Z=new pa(cr.min(),new Map,new Ii(Nr),T,O);yield um(a,Z),a.gc=a.gc.remove(g),a.yc.delete(e),tp(a)}else yield uh(a.localStore,e,!1).then(()=>Xc(a,e,n)).catch(vo)}),lm.apply(this,arguments)}function w0(o,e){return ep.apply(this,arguments)}function ep(){return ep=(0,Ve.Z)(function*(o,e){const n=kn(o),a=e.batch.batchId;try{const d=yield function gv(o,e){const n=kn(o);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const d=e.batch.keys(),g=n.Zi.newChangeBuffer({trackRemovals:!0});return function(T,O,Z,ue){const Ie=Z.batch,nt=Ie.keys();let Ft=Pt.resolve();return nt.forEach(on=>{Ft=Ft.next(()=>ue.getEntry(O,on)).next(xn=>{const Wn=Z.docVersions.get(on);or(null!==Wn),xn.version.compareTo(Wn)<0&&(Ie.applyToRemoteDocument(xn,Z),xn.isValidDocument()&&(xn.setReadTime(Z.commitVersion),ue.addEntry(xn)))})}),Ft.next(()=>T.mutationQueue.removeMutationBatch(O,Ie))}(n,a,e,g).next(()=>g.apply(a)).next(()=>n.mutationQueue.performConsistencyCheck(a)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(a,d,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(T){let O=li();for(let Z=0;Z<T.mutationResults.length;++Z)T.mutationResults[Z].transformResults.length>0&&(O=O.add(T.batch.mutations[Z].key));return O}(e))).next(()=>n.localDocuments.getDocuments(a,d))})}(n.localStore,e);dm(n,a,null),lf(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),yield Sd(n,d)}catch(d){yield vo(d)}}),ep.apply(this,arguments)}function zv(o,e,n){return C0.apply(this,arguments)}function C0(){return C0=(0,Ve.Z)(function*(o,e,n){const a=kn(o);try{const d=yield function(g,T){const O=kn(g);return O.persistence.runTransaction("Reject batch","readwrite-primary",Z=>{let ue;return O.mutationQueue.lookupMutationBatch(Z,T).next(Ie=>(or(null!==Ie),ue=Ie.keys(),O.mutationQueue.removeMutationBatch(Z,Ie))).next(()=>O.mutationQueue.performConsistencyCheck(Z)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(Z,ue,T)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Z,ue)).next(()=>O.localDocuments.getDocuments(Z,ue))})}(a.localStore,e);dm(a,e,n),lf(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),yield Sd(a,d)}catch(d){yield vo(d)}}),C0.apply(this,arguments)}function cm(){return cm=(0,Ve.Z)(function*(o,e){const n=kn(o);Cd(n.remoteStore)||En("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(g){const T=kn(g);return T.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>T.mutationQueue.getHighestUnacknowledgedBatchId(O))}(n.localStore);if(-1===a)return void e.resolve();const d=n.Ec.get(a)||[];d.push(e),n.Ec.set(a,d)}catch(a){const d=ph(a,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),cm.apply(this,arguments)}function lf(o,e){(o.Ec.get(e)||[]).forEach(n=>{n.resolve()}),o.Ec.delete(e)}function dm(o,e,n){const a=kn(o);let d=a.Tc[a.currentUser.toKey()];if(d){const g=d.get(e);g&&(n?g.reject(n):g.resolve(),d=d.remove(e)),a.Tc[a.currentUser.toKey()]=d}}function Xc(o,e,n=null){o.sharedClientState.removeLocalQueryTarget(e);for(const a of o._c.get(e))o.wc.delete(a),n&&o.dc.Pc(a,n);o._c.delete(e),o.isPrimaryClient&&o.Ic.Is(e).forEach(a=>{o.Ic.containsKey(a)||Ic(o,a)})}function Ic(o,e){o.mc.delete(e.path.canonicalString());const n=o.gc.get(e);null!==n&&(Wf(o.remoteStore,n),o.gc=o.gc.remove(e),o.yc.delete(n),tp(o))}function qv(o,e,n){for(const a of n)a instanceof Uv?(o.Ic.addReference(a.key,e),x_(o,a)):a instanceof y0?(En("SyncEngine","Document no longer in limbo: "+a.key),o.Ic.removeReference(a.key,e),o.Ic.containsKey(a.key)||Ic(o,a.key)):In()}function x_(o,e){const n=e.key,a=n.path.canonicalString();o.gc.get(n)||o.mc.has(a)||(En("SyncEngine","New document in limbo: "+n),o.mc.add(a),tp(o))}function tp(o){for(;o.mc.size>0&&o.gc.size<o.maxConcurrentLimboResolutions;){const e=o.mc.values().next().value;o.mc.delete(e);const n=new yn(Di.fromString(e)),a=o.Ac.next();o.yc.set(a,new b0(n)),o.gc=o.gc.insert(n,a),Dv(o.remoteStore,new zc(Ko(cd(n.path)),a,"TargetPurposeLimboResolution",Co.ct))}}function Sd(o,e,n){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,Ve.Z)(function*(o,e,n){const a=kn(o),d=[],g=[],T=[];var O;a.wc.isEmpty()||(a.wc.forEach((O,Z)=>{T.push(a.Rc(Z,e,n).then(ue=>{if((ue||n)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(Z.targetId,ue?.fromCache?"not-current":"current"),ue){d.push(ue);const Ie=oh.Li(Z.targetId,ue);g.push(Ie)}}))}),yield Promise.all(T),a.dc.nu(d),yield(O=(0,Ve.Z)(function*(Z,ue){const Ie=kn(Z);try{yield Ie.persistence.runTransaction("notifyLocalViewChanges","readwrite",nt=>Pt.forEach(ue,Ft=>Pt.forEach(Ft.Fi,on=>Ie.persistence.referenceDelegate.addReference(nt,Ft.targetId,on)).next(()=>Pt.forEach(Ft.Bi,on=>Ie.persistence.referenceDelegate.removeReference(nt,Ft.targetId,on)))))}catch(nt){if(!zu(nt))throw nt;En("LocalStore","Failed to update sequence numbers: "+nt)}for(const nt of ue){const Ft=nt.targetId;if(!nt.fromCache){const on=Ie.Ji.get(Ft),Wn=on.withLastLimboFreeSnapshotVersion(on.snapshotVersion);Ie.Ji=Ie.Ji.insert(Ft,Wn)}}}),function(Z,ue){return O.apply(this,arguments)})(a.localStore,g))}),Wv.apply(this,arguments)}function A_(o,e){return D0.apply(this,arguments)}function D0(){return D0=(0,Ve.Z)(function*(o,e){const n=kn(o);if(!n.currentUser.isEqual(e)){En("SyncEngine","User change. New user:",e.toKey());const a=yield Qg(n.localStore,e);n.currentUser=e,(d=n).Ec.forEach(T=>{T.forEach(O=>{O.reject(new gn(Vt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.Ec.clear(),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield Sd(n,a.er)}var d}),D0.apply(this,arguments)}function Kv(o,e){const n=kn(o),a=n.yc.get(e);if(a&&a.fc)return li().add(a.key);{let d=li();const g=n._c.get(e);if(!g)return d;for(const T of g){const O=n.wc.get(T);d=d.unionWith(O.view.nc)}return d}}function Ts(o,e){return np.apply(this,arguments)}function np(){return np=(0,Ve.Z)(function*(o,e){const n=kn(o),a=yield Wp(n.localStore,e.query,!0),d=e.view.hc(a);return n.isPrimaryClient&&qv(n,e.targetId,d.cc),d}),np.apply(this,arguments)}function tg(o,e){return rp.apply(this,arguments)}function rp(){return rp=(0,Ve.Z)(function*(o,e){const n=kn(o);return Kp(n.localStore,e).then(a=>Sd(n,a))}),rp.apply(this,arguments)}function ub(o,e,n,a){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,Ve.Z)(function*(o,e,n,a){const d=kn(o),g=yield function(T,O){const Z=kn(T),ue=kn(Z.mutationQueue);return Z.persistence.runTransaction("Lookup mutation documents","readonly",Ie=>ue.Sn(Ie,O).next(nt=>nt?Z.localDocuments.getDocuments(Ie,nt):Pt.resolve(null)))}(d.localStore,e);var O;null!==g?("pending"===n?yield af(d.remoteStore):"acknowledged"===n||"rejected"===n?(dm(d,e,a||null),lf(d,e),O=e,kn(kn(d.localStore).mutationQueue).Cn(O)):In(),yield Sd(d,g)):En("SyncEngine","Cannot apply mutation batch with id: "+e)}),Zv.apply(this,arguments)}function hm(){return hm=(0,Ve.Z)(function*(o,e){const n=kn(o);if(Jv(n),ey(n),!0===e&&!0!==n.vc){const a=n.sharedClientState.getAllActiveQueryTargets(),d=yield x0(n,a.toArray());n.vc=!0,yield im(n.remoteStore,!0);for(const g of d)Dv(n.remoteStore,g)}else if(!1===e&&!1!==n.vc){const a=[];let d=Promise.resolve();n._c.forEach((g,T)=>{n.sharedClientState.isLocalQueryTarget(T)?a.push(T):d=d.then(()=>(Xc(n,T),uh(n.localStore,T,!0))),Wf(n.remoteStore,T)}),yield d,yield x0(n,a),function(g){const T=kn(g);T.yc.forEach((O,Z)=>{Wf(T.remoteStore,Z)}),T.Ic.Ts(),T.yc=new Map,T.gc=new Ii(yn.comparator)}(n),n.vc=!1,yield im(n.remoteStore,!1)}}),hm.apply(this,arguments)}function x0(o,e,n){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,Ve.Z)(function*(o,e,n){const a=kn(o),d=[],g=[];for(const T of e){let O;const Z=a._c.get(T);if(Z&&0!==Z.length){O=yield ah(a.localStore,Ko(Z[0]));for(const ue of Z){const Ie=a.wc.get(ue),nt=yield Ts(a,Ie);nt.snapshot&&g.push(nt.snapshot)}}else{const ue=yield Jg(a.localStore,T);O=yield ah(a.localStore,ue),yield Vv(a,Qv(ue),T,!1,O.resumeToken)}d.push(O)}return a.dc.nu(g),d}),Yv.apply(this,arguments)}function Qv(o){return Lg(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function A0(o){const e=kn(o);return kn(kn(e.localStore).persistence).$i()}function ng(o,e,n,a){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,Ve.Z)(function*(o,e,n,a){const d=kn(o);if(d.vc)return void En("SyncEngine","Ignoring unexpected query state notification.");const g=d._c.get(e);if(g&&g.length>0)switch(n){case"current":case"not-current":{const T=yield Kp(d.localStore,qd(g[0])),O=pa.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Us.EMPTY_BYTE_STRING);yield Sd(d,T,O);break}case"rejected":yield uh(d.localStore,e,!0),Xc(d,e,a);break;default:In()}}),Xv.apply(this,arguments)}function k0(o,e,n){return fm.apply(this,arguments)}function fm(){return fm=(0,Ve.Z)(function*(o,e,n){const a=Jv(o);if(a.vc){for(const d of e){if(a._c.has(d)){En("SyncEngine","Adding an already active target "+d);continue}const g=yield Jg(a.localStore,d),T=yield ah(a.localStore,g);yield Vv(a,Qv(g),T.targetId,!1,T.resumeToken),Dv(a.remoteStore,T)}for(const d of n)a._c.has(d)&&(yield uh(a.localStore,d,!1).then(()=>{Wf(a.remoteStore,d),Xc(a,d)}).catch(vo))}}),fm.apply(this,arguments)}function Jv(o){const e=kn(o);return e.remoteStore.remoteSyncer.applyRemoteEvent=um.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E0.bind(null,e),e.dc.nu=m0.bind(null,e.eventManager),e.dc.Pc=v0.bind(null,e.eventManager),e}function ey(o){const e=kn(o);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zv.bind(null,e),e}class ig{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Ve.Z)(function*(){n.serializer=lh(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Qh(this.persistence,new zp,e.initialUser,this.serializer)}createPersistence(e){return new Vp(Uf.zs,this.serializer)}createSharedClientState(e){return new Jh}terminate(){var e=this;return(0,Ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sg extends ig{constructor(e,n,a){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,a=this;return(0,Ve.Z)(function*(){yield n().call(a,e),yield a.Vc.initialize(a,e),yield ey(a.Vc.syncEngine),yield af(a.Vc.remoteStore),yield a.persistence.Ii(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Qh(this.persistence,new zp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new rh(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const a=new Ia(n,this.persistence);return new Fd(e.asyncQueue,a)}createPersistence(e){const n=$f(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?iu.withCacheSize(this.cacheSizeBytes):iu.DEFAULT;return new Yg(this.synchronizeTabs,n,e.clientId,a,e.asyncQueue,zf(),Yp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Jh}}class ty extends sg{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,a=this;return(0,Ve.Z)(function*(){yield n().call(a,e);const d=a.Vc.syncEngine;a.sharedClientState instanceof Tv&&(a.sharedClientState.syncEngine={jr:ub.bind(null,d),zr:ng.bind(null,d),Wr:k0.bind(null,d),$i:A0.bind(null,d),Qr:tg.bind(null,d)},yield a.sharedClientState.start()),yield a.persistence.Ii(function(){var g=(0,Ve.Z)(function*(T){yield function I0(o,e){return hm.apply(this,arguments)}(a.Vc.syncEngine,T),a.gcScheduler&&(T&&!a.gcScheduler.started?a.gcScheduler.start():T||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(T&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():T||a.indexBackfillerScheduler.stop())});return function(T){return g.apply(this,arguments)}}())})()}createSharedClientState(e){const n=zf();if(!Tv.D(n))throw new gn(Vt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=$f(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tv(n,e.asyncQueue,a,e.clientId,e.initialUser)}}class ip{initialize(e,n){var a=this;return(0,Ve.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(n),a.remoteStore=a.createRemoteStore(n),a.eventManager=a.createEventManager(n),a.syncEngine=a.createSyncEngine(n,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=d=>Gv(a.syncEngine,d,1),a.remoteStore.remoteSyncer.handleCredentialChange=A_.bind(null,a.syncEngine),yield im(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new g0}createDatastore(e){const n=lh(e.databaseInfo.databaseId),a=new el(e.databaseInfo);return new bl(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return n=this.localStore,a=this.datastore,d=e.asyncQueue,g=O=>Gv(this.syncEngine,O,0),T=wv.D()?new wv:new Ev,new Yc(n,a,d,g,T);var n,a,d,g,T}createSyncEngine(e,n){return function(a,d,g,T,O,Z,ue){const Ie=new S_(a,d,g,T,O,Z);return ue&&(Ie.vc=!0),Ie}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Ve.Z)(function*(n){const a=kn(n);En("RemoteStore","RemoteStore shutting down."),a.vu.add(5),yield qf(a),a.Pu.shutdown(),a.bu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function ny(o,e=10240){let n=0;return{read:()=>(0,Ve.Z)(function*(){if(n<o.byteLength){const a={value:o.slice(n,n+e),done:!1};return n+=e,a}return{done:!0}})(),cancel:()=>(0,Ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ry{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class M0{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new ui,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(a=>{a&&a.Qu()?this.metadata.resolve(a.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(a?.Gu)}`))},a=>this.metadata.reject(a))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.kc();if(null===n)return null;const a=e.xc.decode(n),d=Number(a);isNaN(d)&&e.Mc(`length string (${a}) is not valid number`);const g=yield e.$c(d);return new w_(JSON.parse(g),n.length+d)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const n=e.Oc();n<0&&e.Mc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),a})()}$c(e){var n=this;return(0,Ve.Z)(function*(){for(;n.buffer.length<e;)(yield n.Fc())&&n.Mc("Reached the end of bundle when more is expected.");const a=n.xc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),a})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.Cc.read();if(!n.done){const a=new Uint8Array(e.buffer.length+n.value.length);a.set(e.buffer),a.set(n.value,e.buffer.length),e.buffer=a}return n.done})()}}class c{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Ve.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new gn(Vt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(d=(0,Ve.Z)(function*(g,T){const O=kn(g),Z=zh(O.serializer)+"/documents",ue={documents:T.map(on=>Rf(O.serializer,on))},Ie=yield O.vo("BatchGetDocuments",Z,ue,T.length),nt=new Map;Ie.forEach(on=>{const xn=function Ug(o,e){return"found"in e?function(n,a){or(!!a.found);const d=wc(n,a.found.name),g=_o(a.found.updateTime),T=a.found.createTime?_o(a.found.createTime):cr.min(),O=new Ur({mapValue:{fields:a.found.fields}});return ps.newFoundDocument(d,g,T,O)}(o,e):"missing"in e?function(n,a){or(!!a.missing),or(!!a.readTime);const d=wc(n,a.missing),g=_o(a.readTime);return ps.newNoDocument(d,g)}(o,e):In()}(O.serializer,on);nt.set(xn.key.toString(),xn)});const Ft=[];return T.forEach(on=>{const xn=nt.get(on.toString());or(!!xn),Ft.push(xn)}),Ft}),function(g,T){return d.apply(this,arguments)})(n.datastore,e);var d;return a.forEach(d=>n.recordVersion(d)),a})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new vl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var a;e.mutations.forEach(a=>{n.delete(a.key.toString())}),n.forEach((a,d)=>{const g=yn.fromPath(d);e.mutations.push(new Tc(g,e.precondition(g)))}),yield(a=(0,Ve.Z)(function*(d,g){const T=kn(d),O=zh(T.serializer)+"/documents",Z={writes:g.map(ue=>Nf(T.serializer,ue))};yield T.Io("Commit",O,Z)}),function(d,g){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw In();n=cr.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!n.isEqual(a))throw new gn(Vt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(cr.min())?qs.exists(!1):qs.updateTime(n):qs.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(cr.min()))throw new gn(Vt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qs.updateTime(n)}return qs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class t{constructor(e,n,a,d,g){this.asyncQueue=e,this.datastore=n,this.options=a,this.updateFunction=d,this.deferred=g,this.Bc=a.maxAttempts,this.qo=new Sv(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ve.Z)(function*(){const n=new c(e.datastore),a=e.qc(n);a&&a.then(d=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(d)}).catch(g=>{e.Uc(g)}))}).catch(d=>{e.Uc(d)})}))}qc(e){try{const n=this.updateFunction(e);return!So(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!kt(n)}return!1}}class i{constructor(e,n,a,d){var g=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=d,this.user=Er.UNAUTHENTICATED,this.clientId=$u.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var T=(0,Ve.Z)(function*(O){En("FirestoreClient","Received user=",O.uid),yield g.authCredentialListener(O),g.user=O});return function(O){return T.apply(this,arguments)}}()),this.appCheckCredentials.start(a,T=>(En("FirestoreClient","Received new app check token=",T),this.appCheckCredentialListener(T,this.user)))}getConfiguration(){var e=this;return(0,Ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gn(Vt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(a){const d=ph(a,"Failed to shutdown persistence");n.reject(d)}})),n.promise}}function l(o,e){return f.apply(this,arguments)}function f(){return f=(0,Ve.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress(),En("FirestoreClient","Initializing OfflineComponentProvider");const n=yield o.getConfiguration();yield e.initialize(n);let a=n.initialUser;o.setCredentialChangeListener(function(){var d=(0,Ve.Z)(function*(g){a.isEqual(g)||(yield Qg(e.localStore,g),a=g)});return function(g){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>o.terminate()),o._offlineComponents=e}),f.apply(this,arguments)}function v(o,e){return E.apply(this,arguments)}function E(){return E=(0,Ve.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress();const n=yield $(o);En("FirestoreClient","Initializing OnlineComponentProvider");const a=yield o.getConfiguration();yield e.initialize(n,a),o.setCredentialChangeListener(d=>eg(e.remoteStore,d)),o.setAppCheckTokenChangeListener((d,g)=>eg(e.remoteStore,g)),o._onlineComponents=e}),E.apply(this,arguments)}function I(o){return"FirebaseError"===o.name?o.code===Vt.FAILED_PRECONDITION||o.code===Vt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code}function $(o){return ce.apply(this,arguments)}function ce(){return ce=(0,Ve.Z)(function*(o){if(!o._offlineComponents)if(o._uninitializedComponentsProvider){En("FirestoreClient","Using user provided OfflineComponentProvider");try{yield l(o,o._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!I(n))throw n;Js("Error using user provided cache. Falling back to memory cache: "+n),yield l(o,new ig)}}else En("FirestoreClient","Using default OfflineComponentProvider"),yield l(o,new ig);return o._offlineComponents}),ce.apply(this,arguments)}function me(o){return ze.apply(this,arguments)}function ze(){return ze=(0,Ve.Z)(function*(o){return o._onlineComponents||(o._uninitializedComponentsProvider?(En("FirestoreClient","Using user provided OnlineComponentProvider"),yield v(o,o._uninitializedComponentsProvider._online)):(En("FirestoreClient","Using default OnlineComponentProvider"),yield v(o,new ip))),o._onlineComponents}),ze.apply(this,arguments)}function It(o){return $(o).then(e=>e.persistence)}function xt(o){return $(o).then(e=>e.localStore)}function it(o){return me(o).then(e=>e.remoteStore)}function Gt(o){return me(o).then(e=>e.syncEngine)}function an(o){return Qt.apply(this,arguments)}function Qt(){return Qt=(0,Ve.Z)(function*(o){const e=yield me(o),n=e.eventManager;return n.onListen=T0.bind(null,e.syncEngine),n.onUnlisten=D_.bind(null,e.syncEngine),n}),Qt.apply(this,arguments)}function Gn(o,e,n={}){const a=new ui;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(d,g,T,O,Z){const ue=new ry({next:nt=>{g.enqueueAndForget(()=>Nv(d,Ie));const Ft=nt.docs.has(T);!Ft&&nt.fromCache?Z.reject(new gn(Vt.UNAVAILABLE,"Failed to get document because the client is offline.")):Ft&&nt.fromCache&&O&&"server"===O.source?Z.reject(new gn(Vt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Z.resolve(nt)},error:nt=>Z.reject(nt)}),Ie=new Ou(cd(T.path),ue,{includeMetadataChanges:!0,Ku:!0});return Ov(d,Ie)}(yield an(o),o.asyncQueue,e,n,a)})),a.promise}function mi(o,e,n={}){const a=new ui;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(d,g,T,O,Z){const ue=new ry({next:nt=>{g.enqueueAndForget(()=>Nv(d,Ie)),nt.fromCache&&"server"===O.source?Z.reject(new gn(Vt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Z.resolve(nt)},error:nt=>Z.reject(nt)}),Ie=new Ou(T,ue,{includeMetadataChanges:!0,Ku:!0});return Ov(d,Ie)}(yield an(o),o.asyncQueue,e,n,a)})),a.promise}function pr(o){const e={};return void 0!==o.timeoutSeconds&&(e.timeoutSeconds=o.timeoutSeconds),e}const Vs=new Map;function ou(o,e,n){if(!n)throw new gn(Vt.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${e}.`)}function Ru(o,e,n,a){if(!0===e&&!0===a)throw new gn(Vt.INVALID_ARGUMENT,`${o} and ${n} cannot be used together.`)}function tl(o){if(!yn.isDocumentKey(o))throw new gn(Vt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function El(o){if(yn.isDocumentKey(o))throw new gn(Vt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${o} has ${o.length}.`)}function Nu(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";{const e=(n=o).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof o?"a function":In()}function hi(o,e){if("_delegate"in o&&(o=o._delegate),!(o instanceof e)){if(e.name===o.constructor.name)throw new gn(Vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nu(o);throw new gn(Vt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return o}function wl(o,e){if(e<=0)throw new gn(Vt.INVALID_ARGUMENT,`Function ${o}() requires a positive number, but it was: ${e}.`)}class Cl{constructor(e){var n,a;if(void 0===e.host){if(void 0!==e.ssl)throw new gn(Vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gn(Vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ru("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=pr(null!==(a=e.experimentalLongPollingOptions)&&void 0!==a?a:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new gn(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new gn(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new gn(Vt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sl{constructor(e,n,a,d){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new gn(Vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gn(Vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cl(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new sa;switch(n.type){case"firstParty":return new Ol(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new gn(Vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Vs.get(e);n&&(En("ComponentProvider","Removing Datastore"),Vs.delete(e),n.terminate())}(this),Promise.resolve()}}class uo{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uo(this.firestore,e,this._key)}}class Pa{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Pa(this.firestore,e,this._query)}}class xc extends Pa{constructor(e,n,a){super(e,n,cd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uo(this.firestore,null,new yn(e))}withConverter(e){return new xc(this.firestore,e,this._path)}}function iy(o,e,...n){if(o=(0,_e.m9)(o),ou("collection","path",e),o instanceof Sl){const a=Di.fromString(e,...n);return El(a),new xc(o,null,a)}{if(!(o instanceof uo||o instanceof xc))throw new gn(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=o._path.child(Di.fromString(e,...n));return El(a),new xc(o.firestore,null,a)}}function og(o,e,...n){if(o=(0,_e.m9)(o),1===arguments.length&&(e=$u.A()),ou("doc","path",e),o instanceof Sl){const a=Di.fromString(e,...n);return tl(a),new uo(o,null,new yn(a))}{if(!(o instanceof uo||o instanceof xc))throw new gn(Vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=o._path.child(Di.fromString(e,...n));return tl(a),new uo(o.firestore,o instanceof xc?o.converter:null,new yn(a))}}function sy(o,e){return o=(0,_e.m9)(o),e=(0,_e.m9)(e),(o instanceof uo||o instanceof xc)&&(e instanceof uo||e instanceof xc)&&o.firestore===e.firestore&&o.path===e.path&&o.converter===e.converter}function ag(o,e){return o=(0,_e.m9)(o),e=(0,_e.m9)(e),o instanceof Pa&&e instanceof Pa&&o.firestore===e.firestore&&Yu(o._query,e._query)&&o.converter===e.converter}class oy{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Sv(this,"async_queue_retry"),this.Xc=()=>{const n=Yp();n&&En("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Yp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Yp();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new ui;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!zu(n))throw n;En("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(a=>{throw this.Wc=a,this.Hc=!1,Ui("INTERNAL UNHANDLED ERROR: ",function(g){let T=g.message||"";return g.stack&&(T=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),T}(a)),a}).then(a=>(this.Hc=!1,a))));return this.Gc=n,n}enqueueAfterDelay(e,n,a){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const d=sm.createAndSchedule(this,e,n,a,g=>this.na(g));return this.zc.push(d),d}Zc(){this.Wc&&In()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ve.Z)(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,a)=>n.targetTimeMs-a.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function ay(o){return function(e,n){if("object"!=typeof e||null===e)return!1;const a=e;for(const d of["next","error","complete"])if(d in a&&"function"==typeof a[d])return!0;return!1}(o)}class cb{constructor(){this._progressObserver={},this._taskCompletionResolver=new ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,a){this._progressObserver={next:e,error:n,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ao extends Sl{constructor(e,n,a,d){super(e,n,a,d),this.type="firestore",this._queue=new oy,this._persistenceKey=d?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||M_(this),this._firestoreClient.terminate()}}function ii(o){return o._firestoreClient||M_(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function M_(o){var e,n,a;const d=o._freezeSettings(),g=(O=(null===(e=o._app)||void 0===e?void 0:e.options.appId)||"",new xf(o._databaseId,O,o._persistenceKey,(ue=d).host,ue.ssl,ue.experimentalForceLongPolling,ue.experimentalAutoDetectLongPolling,pr(ue.experimentalLongPollingOptions),ue.useFetchStreams));var O,ue;o._firestoreClient=new i(o._authCredentials,o._appCheckCredentials,o._queue,g),null!==(n=d.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(a=d.cache)&&void 0!==a&&a._onlineComponentProvider&&(o._firestoreClient._uninitializedComponentsProvider={_offlineKind:d.cache.kind,_offline:d.cache._offlineComponentProvider,_online:d.cache._onlineComponentProvider})}function gm(o,e,n){const a=new ui;return o.asyncQueue.enqueue((0,Ve.Z)(function*(){try{yield l(o,n),yield v(o,e),a.resolve()}catch(d){const g=d;if(!I(g))throw g;Js("Error enabling indexeddb cache. Falling back to memory cache: "+g),a.reject(g)}})).then(()=>a.promise)}function bo(o){if(o._initialized||o._terminated)throw new gn(Vt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jc(Us.fromBase64String(e))}catch(n){throw new gn(Vt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jc(Us.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Id{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new gn(Vt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xd{constructor(e){this._methodName=e}}class hf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new gn(Vt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new gn(Vt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nr(this._lat,e._lat)||Nr(this._long,e._long)}}const vm=/^__.*__$/;class fb{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return null!==this.fieldMask?new bc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gl(e,this.data,n,this.fieldTransforms)}}class R0{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new bc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function N0(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw In()}}class up{constructor(e,n,a,d,g,T){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=d,void 0===g&&this.ua(),this.fieldTransforms=g||[],this.fieldMask=T||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new up(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const a=null===(n=this.path)||void 0===n?void 0:n.child(e),d=this.aa({path:a,la:!1});return d.fa(e),d}da(e){var n;const a=null===(n=this.path)||void 0===n?void 0:n.child(e),d=this.aa({path:a,la:!1});return d.ua(),d}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return pf(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(N0(this.ca)&&vm.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class O_{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||lh(e)}ya(e,n,a,d=!1){return new up({ca:e,methodName:n,ga:a,path:qr.emptyPath(),la:!1,ma:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ad(o){const e=o._freezeSettings(),n=lh(o._databaseId);return new O_(o._databaseId,!!e.ignoreUndefinedProperties,n)}function ym(o,e,n,a,d,g={}){const T=o.ya(g.merge||g.mergeFields?2:0,e,n,d);Md("Data must be an object, but it was:",T,a);const O=cg(a,T);let Z,ue;if(g.merge)Z=new ss(T.fieldMask),ue=T.fieldTransforms;else if(g.mergeFields){const Ie=[];for(const nt of g.mergeFields){const Ft=Es(e,nt,n);if(!T.contains(Ft))throw new gn(Vt.INVALID_ARGUMENT,`Field '${Ft}' is specified in your field mask but missing from your input data.`);B0(Ie,Ft)||Ie.push(Ft)}Z=new ss(Ie),ue=T.fieldTransforms.filter(nt=>Z.covers(nt.field))}else Z=null,ue=T.fieldTransforms;return new fb(new Ur(O),Z,ue)}class lg extends xd{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lg}}function cy(o,e,n){return new up({ca:3,ga:e.settings.ga,methodName:o._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _m extends xd{_toFieldTransform(e){return new vc(e.path,new gd)}isEqual(e){return e instanceof _m}}class L0 extends xd{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=cy(this,e,!0),a=this.pa.map(g=>kd(g,n)),d=new mc(a);return new vc(e.path,d)}isEqual(e){return this===e}}class F0 extends xd{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=cy(this,e,!0),a=this.pa.map(g=>kd(g,n)),d=new md(a);return new vc(e.path,d)}isEqual(e){return this===e}}class dy extends xd{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new $c(e.serializer,fd(e.serializer,this.Ia));return new vc(e.path,n)}isEqual(e){return this===e}}function lp(o,e,n,a){const d=o.ya(1,e,n);Md("Data must be an object, but it was:",d,a);const g=[],T=Ur.empty();Qa(a,(Z,ue)=>{const Ie=ff(e,Z,n);ue=(0,_e.m9)(ue);const nt=d.da(Ie);if(ue instanceof lg)g.push(Ie);else{const Ft=kd(ue,nt);null!=Ft&&(g.push(Ie),T.set(Ie,Ft))}});const O=new ss(g);return new R0(T,O,d.fieldTransforms)}function au(o,e,n,a,d,g){const T=o.ya(1,e,n),O=[Es(e,a,n)],Z=[d];if(g.length%2!=0)throw new gn(Vt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ft=0;Ft<g.length;Ft+=2)O.push(Es(e,g[Ft])),Z.push(g[Ft+1]);const ue=[],Ie=Ur.empty();for(let Ft=O.length-1;Ft>=0;--Ft)if(!B0(ue,O[Ft])){const on=O[Ft];let xn=Z[Ft];xn=(0,_e.m9)(xn);const Wn=T.da(on);if(xn instanceof lg)ue.push(on);else{const er=kd(xn,Wn);null!=er&&(ue.push(on),Ie.set(on,er))}}const nt=new ss(ue);return new R0(Ie,nt,T.fieldTransforms)}function bm(o,e,n,a=!1){return kd(n,o.ya(a?4:3,e))}function kd(o,e){if(Dl(o=(0,_e.m9)(o)))return Md("Unsupported field value:",e,o),cg(o,e);if(o instanceof xd)return function(n,a){if(!N0(a.ca))throw a._a(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a._a(`${n._methodName}() is not currently supported inside arrays`);const d=n._toFieldTransform(a);d&&a.fieldTransforms.push(d)}(o,e),null;if(void 0===o&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),o instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,a){const d=[];let g=0;for(const T of n){let O=kd(T,a.wa(g));null==O&&(O={nullValue:"NULL_VALUE"}),d.push(O),g++}return{arrayValue:{values:d}}}(o,e)}return function(n,a){if(null===(n=(0,_e.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return fd(a.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const d=gi.fromDate(n);return{timestampValue:ql(a.serializer,d)}}if(n instanceof gi){const d=new gi(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ql(a.serializer,d)}}if(n instanceof hf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Jc)return{bytesValue:$m(a.serializer,n._byteString)};if(n instanceof uo){const d=a.databaseId,g=n.firestore._databaseId;if(!g.isEqual(d))throw a._a(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Gh(n.firestore._databaseId||a.databaseId,n._key.path)}}throw a._a(`Unsupported field value: ${Nu(n)}`)}(o,e)}function cg(o,e){const n={};return Ll(o)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qa(o,(a,d)=>{const g=kd(d,e.ha(a));null!=g&&(n[a]=g)}),{mapValue:{fields:n}}}function Dl(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof gi||o instanceof hf||o instanceof Jc||o instanceof uo||o instanceof xd)}function Md(o,e,n){if(!Dl(n)||"object"!=typeof(a=n)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Nu(n);throw e._a("an object"===a?o+" a custom object":o+" "+a)}var a}function Es(o,e,n){if((e=(0,_e.m9)(e))instanceof Id)return e._internalPath;if("string"==typeof e)return ff(o,e);throw pf("Field path arguments must be of type string or ",o,!1,void 0,n)}const j0=new RegExp("[~\\*/\\[\\]]");function ff(o,e,n){if(e.search(j0)>=0)throw pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,n);try{return new Id(...e.split("."))._internalPath}catch{throw pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,n)}}function pf(o,e,n,a,d){const g=a&&!a.isEmpty(),T=void 0!==d;let O=`Function ${e}() called with invalid data`;n&&(O+=" (via `toFirestore()`)"),O+=". ";let Z="";return(g||T)&&(Z+=" (found",g&&(Z+=` in field ${a}`),T&&(Z+=` in document ${d}`),Z+=")"),new gn(Vt.INVALID_ARGUMENT,O+o+Z)}function B0(o,e){return o.some(n=>n.isEqual(e))}class nl{constructor(e,n,a,d,g){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=d,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new uo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lo(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class lo extends nl{data(){return super.data()}}function cp(o,e){return"string"==typeof e?ff(o,e):e instanceof Id?e._internalPath:e._delegate._internalPath}function dp(o){if("L"===o.limitType&&0===o.explicitOrderBy.length)throw new gn(Vt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class dg extends hy{}function Pd(o,e,...n){let a=[];e instanceof hy&&a.push(e),a=a.concat(n),function(d){const g=d.filter(O=>O instanceof ed).length,T=d.filter(O=>O instanceof gh).length;if(g>1||g>0&&T>0)throw new gn(Vt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const d of a)o=d._apply(o);return o}class gh extends dg{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new gh(e,n,a)}_apply(e){const n=this._parse(e);return my(e._query,n),new Pa(e.firestore,e.converter,dd(e._query,n))}_parse(e){const n=Ad(e.firestore);return function(d,g,T,O,Z,ue,Ie){let nt;if(Z.isKeyField()){if("array-contains"===ue||"array-contains-any"===ue)throw new gn(Vt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ue}' queries on documentId().`);if("in"===ue||"not-in"===ue){gp(Ie,ue);const Ft=[];for(const on of Ie)Ft.push(td(O,d,on));nt={arrayValue:{values:Ft}}}else nt=td(O,d,Ie)}else"in"!==ue&&"not-in"!==ue&&"array-contains-any"!==ue||gp(Ie,ue),nt=bm(T,"where",Ie,"in"===ue||"not-in"===ue);return $i.create(Z,ue,nt)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class ed extends hy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ed(e,n)}_parse(e){const n=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return 1===n.length?n[0]:gs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(a,d){let g=a;const T=d.getFlattenedFilters();for(const O of T)my(g,O),g=dd(g,O)}(e._query,n),new Pa(e.firestore,e.converter,dd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Em extends dg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Em(e,n)}_apply(e){const n=function(a,d,g){if(null!==a.startAt)throw new gn(Vt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new gn(Vt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const T=new Ku(d,g);return function(O,Z){if(null===Fg(O)){const ue=hc(O);null!==ue&&pg(0,ue,Z.field)}}(a,T),T}(e._query,this._field,this._direction);return new Pa(e.firestore,e.converter,function(a,d){const g=a.explicitOrderBy.concat([d]);return new dc(a.path,a.collectionGroup,g,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}class mh extends dg{constructor(e,n,a){super(),this.type=e,this._limit=n,this._limitType=a}static _create(e,n,a){return new mh(e,n,a)}_apply(e){return new Pa(e.firestore,e.converter,fc(e._query,this._limit,this._limitType))}}class Od extends dg{constructor(e,n,a){super(),this.type=e,this._docOrFields=n,this._inclusive=a}static _create(e,n,a){return new Od(e,n,a)}_apply(e){const n=gy(e,this.type,this._docOrFields,this._inclusive);return new Pa(e.firestore,e.converter,(d=n,new dc((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,d,a.endAt)));var a,d}}class pp extends dg{constructor(e,n,a){super(),this.type=e,this._docOrFields=n,this._inclusive=a}static _create(e,n,a){return new pp(e,n,a)}_apply(e){const n=gy(e,this.type,this._docOrFields,this._inclusive);return new Pa(e.firestore,e.converter,(d=n,new dc((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,d)));var a,d}}function gy(o,e,n,a){if(n[0]=(0,_e.m9)(n[0]),n[0]instanceof nl)return function(d,g,T,O,Z){if(!O)throw new gn(Vt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${T}().`);const ue=[];for(const Ie of Vl(d))if(Ie.field.isKeyField())ue.push(U(g,O.key));else{const nt=O.data.field(Ie.field);if(kh(nt))throw new gn(Vt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ie.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===nt){const Ft=Ie.field.canonicalString();throw new gn(Vt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ft}' (used as the orderBy) does not exist.`)}ue.push(nt)}return new Aa(ue,Z)}(o._query,o.firestore._databaseId,e,n[0]._document,a);{const d=Ad(o.firestore);return function(g,T,O,Z,ue,Ie){const nt=g.explicitOrderBy;if(ue.length>nt.length)throw new gn(Vt.INVALID_ARGUMENT,`Too many arguments provided to ${Z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ft=[];for(let on=0;on<ue.length;on++){const xn=ue[on];if(nt[on].field.isKeyField()){if("string"!=typeof xn)throw new gn(Vt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Z}(), but got a ${typeof xn}`);if(!Zu(g)&&-1!==xn.indexOf("/"))throw new gn(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Z}() must be a plain document ID, but '${xn}' contains a slash.`);const Wn=g.path.child(Di.fromString(xn));if(!yn.isDocumentKey(Wn))throw new gn(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Z}() must result in a valid document path, but '${Wn}' is not because it contains an odd number of segments.`);const er=new yn(Wn);Ft.push(U(T,er))}else{const Wn=bm(O,Z,xn);Ft.push(Wn)}}return new Aa(Ft,Ie)}(o._query,o.firestore._databaseId,d,e,n,a)}}function td(o,e,n){if("string"==typeof(n=(0,_e.m9)(n))){if(""===n)throw new gn(Vt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zu(e)&&-1!==n.indexOf("/"))throw new gn(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Di.fromString(n));if(!yn.isDocumentKey(a))throw new gn(Vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return U(o,new yn(a))}if(n instanceof uo)return U(o,n._key);throw new gn(Vt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nu(n)}.`)}function gp(o,e){if(!Array.isArray(o)||0===o.length)throw new gn(Vt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function my(o,e){if(e.isInequality()){const a=hc(o),d=e.field;if(null!==a&&!a.isEqual(d))throw new gn(Vt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${a.toString()}' and '${d.toString()}'`);const g=Fg(o);null!==g&&pg(0,d,g)}const n=function(a,d){for(const g of a)for(const T of g.getFlattenedFilters())if(d.indexOf(T.op)>=0)return T.op;return null}(o.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new gn(Vt.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function pg(o,e,n){if(!n.isEqual(e))throw new gn(Vt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class bu{convertValue(e,n="none"){switch(Uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ja(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw In()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Qa(e,(d,g)=>{a[d]=this.convertValue(g,n)}),a}convertGeoPoint(e){return new hf(Bo(e.latitude),Bo(e.longitude))}convertArray(e,n){return(e.values||[]).map(a=>this.convertValue(a,n))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Wu(e);return null==a?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(eo(e));default:return null}}convertTimestamp(e){const n=Iu(e);return new gi(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Di.fromString(e);or(Gy(a));const d=new eu(a.get(1),a.get(3)),g=new yn(a.popFirst(5));return d.isEqual(n)||Ui(`Document ${g} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),g}}function Ac(o,e,n){let a;return a=o?n&&(n.merge||n.mergeFields)?o.toFirestore(e,n):o.toFirestore(e):e,a}class wm extends bu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new uo(this.firestore,null,n)}}class kc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vh extends nl{constructor(e,n,a,d,g,T){super(e,n,a,d,T),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(cp("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}}class Dm extends vh{data(e={}){return super.data(e)}}class yh{constructor(e,n,a,d){this._firestore=e,this._userDataWriter=n,this._snapshot=d,this.metadata=new kc(d.hasPendingWrites,d.fromCache),this.query=a}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(a=>{e.call(n,new Dm(this._firestore,this._userDataWriter,a.key,a,new kc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new gn(Vt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,d){if(a._snapshot.oldDocs.isEmpty()){let g=0;return a._snapshot.docChanges.map(T=>({type:"added",doc:new Dm(a._firestore,a._userDataWriter,T.doc.key,T.doc,new kc(a._snapshot.mutatedKeys.has(T.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:g++}))}{let g=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(T=>d||3!==T.type).map(T=>{const O=new Dm(a._firestore,a._userDataWriter,T.doc.key,T.doc,new kc(a._snapshot.mutatedKeys.has(T.doc.key),a._snapshot.fromCache),a.query.converter);let Z=-1,ue=-1;return 0!==T.type&&(Z=g.indexOf(T.doc.key),g=g.delete(T.doc.key)),1!==T.type&&(g=g.add(T.doc),ue=g.indexOf(T.doc.key)),{type:Im(T.type),doc:O,oldIndex:Z,newIndex:ue}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Im(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return In()}}function xm(o,e){return o instanceof vh&&e instanceof vh?o._firestore===e._firestore&&o._key.isEqual(e._key)&&(null===o._document?null===e._document:o._document.isEqual(e._document))&&o._converter===e._converter:o instanceof yh&&e instanceof yh&&o._firestore===e._firestore&&ag(o.query,e.query)&&o.metadata.isEqual(e.metadata)&&o._snapshot.isEqual(e._snapshot)}class co extends bu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new uo(this.firestore,null,n)}}function Am(o,e,n){o=hi(o,uo);const a=hi(o.firestore,Ao),d=Ac(o.converter,e,n);return gf(a,[ym(Ad(a),"setDoc",o._key,d,null!==o.converter,n).toMutation(o._key,qs.none())])}function vy(o,e,n,...a){o=hi(o,uo);const d=hi(o.firestore,Ao),g=Ad(d);let T;return T="string"==typeof(e=(0,_e.m9)(e))||e instanceof Id?au(g,"updateDoc",o._key,e,n,a):lp(g,"updateDoc",o._key,e),gf(d,[T.toMutation(o._key,qs.exists(!0))])}function yy(o,...e){var n,a,d;o=(0,_e.m9)(o);let g={includeMetadataChanges:!1},T=0;"object"!=typeof e[T]||ay(e[T])||(g=e[T],T++);const O={includeMetadataChanges:g.includeMetadataChanges};if(ay(e[T])){const nt=e[T];e[T]=null===(n=nt.next)||void 0===n?void 0:n.bind(nt),e[T+1]=null===(a=nt.error)||void 0===a?void 0:a.bind(nt),e[T+2]=null===(d=nt.complete)||void 0===d?void 0:d.bind(nt)}let Z,ue,Ie;if(o instanceof uo)ue=hi(o.firestore,Ao),Ie=cd(o._key.path),Z={next:nt=>{e[T]&&e[T](km(ue,o,nt))},error:e[T+1],complete:e[T+2]};else{const nt=hi(o,Pa);ue=hi(nt.firestore,Ao),Ie=nt._query;const Ft=new co(ue);Z={next:on=>{e[T]&&e[T](new yh(ue,Ft,nt,on))},error:e[T+1],complete:e[T+2]},dp(o._query)}return function(nt,Ft,on,xn){const Wn=new ry(xn),er=new Ou(Ft,Wn,on);return nt.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return Ov(yield an(nt),er)})),()=>{Wn.Dc(),nt.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return Nv(yield an(nt),er)}))}}(ii(ue),Ie,O,Z)}function gf(o,e){return function(n,a){const d=new ui;return n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function I_(o,e,n){return Yl.apply(this,arguments)}(yield Gt(n),a,d)})),d.promise}(ii(o),e)}function km(o,e,n){const a=n.docs.get(e._key),d=new co(o);return new vh(o,d,e._key,a,new kc(n.hasPendingWrites,n.fromCache),e.converter)}const Mm={maxAttempts:5};class _h{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ad(e)}set(e,n,a){this._verifyNotCommitted();const d=Tu(e,this._firestore),g=Ac(d.converter,n,a),T=ym(this._dataReader,"WriteBatch.set",d._key,g,null!==d.converter,a);return this._mutations.push(T.toMutation(d._key,qs.none())),this}update(e,n,a,...d){this._verifyNotCommitted();const g=Tu(e,this._firestore);let T;return T="string"==typeof(n=(0,_e.m9)(n))||n instanceof Id?au(this._dataReader,"WriteBatch.update",g._key,n,a,d):lp(this._dataReader,"WriteBatch.update",g._key,n),this._mutations.push(T.toMutation(g._key,qs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Tu(e,this._firestore);return this._mutations=this._mutations.concat(new vl(n._key,qs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new gn(Vt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tu(o,e){if((o=(0,_e.m9)(o)).firestore!==e)throw new gn(Vt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}class Pm extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ad(e)}get(e){const n=Tu(e,this._firestore),a=new wm(this._firestore);return this._transaction.lookup([n._key]).then(d=>{if(!d||1!==d.length)return In();const g=d[0];if(g.isFoundDocument())return new nl(this._firestore,a,g.key,g,n.converter);if(g.isNoDocument())return new nl(this._firestore,a,n._key,null,n.converter);throw In()})}set(e,n,a){const d=Tu(e,this._firestore),g=Ac(d.converter,n,a),T=ym(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,a);return this._transaction.set(d._key,T),this}update(e,n,a,...d){const g=Tu(e,this._firestore);let T;return T="string"==typeof(n=(0,_e.m9)(n))||n instanceof Id?au(this._dataReader,"Transaction.update",g._key,n,a,d):lp(this._dataReader,"Transaction.update",g._key,n),this._transaction.update(g._key,T),this}delete(e){const n=Tu(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Tu(e,this._firestore),a=new co(this._firestore);return super.get(e).then(d=>new vh(this._firestore,a,n._key,d._document,new kc(!1,!1),n.converter))}}function bh(o,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gn("invalid-argument",`Invalid options passed to function ${o}(): You cannot specify both "merge" and "mergeFields".`);return e}function mf(){if(typeof Uint8Array>"u")throw new gn("unimplemented","Uint8Arrays are not available in this environment.")}function Pc(){if(!function ri(){return typeof atob<"u"}())throw new gn("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(o,e=!0){pu=J.SDK_VERSION,(0,J._registerComponent)(new Y.wA("firestore",(n,{instanceIdentifier:a,options:d})=>{const g=n.getProvider("app").getImmediate(),T=new Ao(new Xo(n.getProvider("auth-internal")),new ic(n.getProvider("app-check-internal")),function(O,Z){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new gn(Vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(O.options.projectId,Z)}(g,a),g);return d=Object.assign({useFetchStreams:e},d),T._setSettings(d),T},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(pn,"3.13.0",o),(0,J.registerVersion)(pn,"3.13.0","esm2017")}();class vf{constructor(e){this._delegate=e}static fromBase64String(e){return Pc(),new vf(Jc.fromBase64String(e))}static fromUint8Array(e){return mf(),new vf(Jc.fromUint8Array(e))}toBase64(){return Pc(),this._delegate.toBase64()}toUint8Array(){return mf(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Tg(o){return function Ey(o,e){if("object"!=typeof o||null===o)return!1;const n=o;for(const a of e)if(a in n&&"function"==typeof n[a])return!0;return!1}(o,["next","error","complete"])}class Lm{enableIndexedDbPersistence(e,n){return function uy(o,e){bo(o=hi(o,Ao));const n=ii(o);if(n._uninitializedComponentsProvider)throw new gn(Vt.FAILED_PRECONDITION,"SDK cache is already specified.");Js("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const a=o._freezeSettings(),d=new ip;return gm(n,d,new sg(d,a.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function P_(o){bo(o=hi(o,Ao));const e=ii(o);if(e._uninitializedComponentsProvider)throw new gn(Vt.FAILED_PRECONDITION,"SDK cache is already specified.");Js("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=o._freezeSettings(),a=new ip;return gm(e,a,new ty(a,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ug(o){if(o._initialized&&!o._terminated)throw new gn(Vt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ui;return o._queue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{yield(n=(0,Ve.Z)(function*(a){if(!Bs.D())return Promise.resolve();const d=a+"main";yield Bs.delete(d)}),function(a){return n.apply(this,arguments)})($f(o._databaseId,o._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class wy{constructor(e,n,a){this._delegate=n,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof eu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Js("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,a={}){!function pm(o,e,n,a={}){var d;const g=(o=hi(o,Sl))._getSettings(),T=`${e}:${n}`;if("firestore.googleapis.com"!==g.host&&g.host!==T&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),o._setSettings(Object.assign(Object.assign({},g),{host:T,ssl:!1})),a.mockUserToken){let O,Z;if("string"==typeof a.mockUserToken)O=a.mockUserToken,Z=Er.MOCK_USER;else{O=(0,_e.Sg)(a.mockUserToken,null===(d=o._app)||void 0===d?void 0:d.options.projectId);const ue=a.mockUserToken.sub||a.mockUserToken.user_id;if(!ue)throw new gn(Vt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Z=new Er(ue)}o._authCredentials=new Pl(new Ua(O,Z))}}(this._delegate,e,n,a)}enableNetwork(){return function sp(o){return function Sn(o){return o.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield It(o),n=yield it(o);return e.setNetworkEnabled(!0),function(a){const d=kn(a);return d.vu.delete(0),sf(d)}(n)}))}(ii(o=hi(o,Ao)))}(this._delegate)}disableNetwork(){return function op(o){return function fn(o){return o.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield It(o),n=yield it(o);return e.setNetworkEnabled(!1),(a=(0,Ve.Z)(function*(d){const g=kn(d);g.vu.add(0),yield qf(g),g.bu.set("Offline")}),function(d){return a.apply(this,arguments)})(n);var a}))}(ii(o=hi(o,Ao)))}(this._delegate)}enablePersistence(e){let n=!1,a=!1;return e&&(n=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,Ru("synchronizeTabs",n,"experimentalForceOwningTab",a)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function df(o){return function(e){const n=new ui;return e.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function S0(o,e){return cm.apply(this,arguments)}(yield Gt(e),n)})),n.promise}(ii(o=hi(o,Ao)))}(this._delegate)}onSnapshotsInSync(e){return function z0(o,e){return function Hi(o,e){const n=new ry(e);return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return a=yield an(o),d=n,kn(a).ku.add(d),void d.next();var a,d})),()=>{n.Dc(),o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return a=yield an(o),d=n,void kn(a).ku.delete(d);var a,d}))}}(ii(o=hi(o,Ao)),ay(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new gn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yp(this,iy(this._delegate,e))}catch(n){throw Lu(n,"collection()","Firestore.collection()")}}doc(e){try{return new Jl(this,og(this._delegate,e))}catch(n){throw Lu(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fu(this,function P0(o,e){if(o=hi(o,Sl),ou("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gn(Vt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pa(o,null,(n=e,new dc(Di.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw Lu(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Xl(o,e,n){o=hi(o,Ao);const a=Object.assign(Object.assign({},Mm),n);return function(d){if(d.maxAttempts<1)throw new gn(Vt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(d,g,T){const O=new ui;return d.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){const Z=yield function en(o){return me(o).then(e=>e.datastore)}(d);new t(d.asyncQueue,Z,T,g,O).run()})),O.promise}(ii(o),d=>e(new Pm(o,d)),a)}(this._delegate,n=>e(new vp(this,n)))}batch(){return ii(this._delegate),new Y0(new _h(this._delegate,e=>gf(this._delegate,e)))}loadBundle(e){return function ap(o,e){const n=ii(o=hi(o,Ao)),a=new cb;return function Qi(o,e,n,a){const d=function(g,T){let O;return O="string"==typeof g?ar().encode(g):g,Z=function(Z,ue){if(Z instanceof Uint8Array)return ny(Z,void 0);if(Z instanceof ArrayBuffer)return ny(new Uint8Array(Z),void 0);if(Z instanceof ReadableStream)return Z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new M0(Z,T);var Z}(n,lh(e));o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){!function rg(o,e,n){const a=kn(o);var d;(d=(0,Ve.Z)(function*(g,T,O){try{const Z=yield T.getMetadata();if(yield function(Ft,on){const xn=kn(Ft),Wn=_o(on.createTime);return xn.persistence.runTransaction("hasNewerBundle","readonly",er=>xn.qs.getBundleMetadata(er,on.id)).then(er=>!!er&&er.createTime.compareTo(Wn)>=0)}(g.localStore,Z))return yield T.close(),O._completeWith({taskState:"Success",documentsLoaded:(Ft=Z).totalDocuments,bytesLoaded:Ft.totalBytes,totalDocuments:Ft.totalDocuments,totalBytes:Ft.totalBytes}),Promise.resolve(new Set);O._updateProgress(Bv(Z));const ue=new jv(Z,g.localStore,T.serializer);let Ie=yield T.bc();for(;Ie;){const Ft=yield ue.zu(Ie);Ft&&O._updateProgress(Ft),Ie=yield T.bc()}const nt=yield ue.complete();return yield Sd(g,nt.Ju,void 0),yield function(Ft,on){const xn=kn(Ft);return xn.persistence.runTransaction("Save bundle","readwrite",Wn=>xn.qs.saveBundleMetadata(Wn,on))}(g.localStore,Z),O._completeWith(nt.progress),Promise.resolve(nt.Hu)}catch(Z){return Js("SyncEngine",`Loading bundle failed with ${Z}`),O._failWith(Z),Promise.resolve(new Set)}var Ft}),function(g,T,O){return d.apply(this,arguments)})(a,e,n).then(d=>{a.sharedClientState.notifyBundleLoaded(d)})}(yield Gt(o),d,a)}))}(n,o._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function ly(o,e){return function ea(o,e){return o.asyncQueue.enqueue((0,Ve.Z)(function*(){return function(n,a){const d=kn(n);return d.persistence.runTransaction("Get named query","readonly",g=>d.qs.getNamedQuery(g,a))}(yield xt(o),e)}))}(ii(o=hi(o,Ao)),e).then(n=>n?new Pa(o,null,n.query):null)}(this._delegate,e).then(n=>n?new Fu(this,n):null)}}class Eg extends bu{constructor(e){super(),this.firestore=e}convertBytes(e){return new vf(new Jc(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Jl.forKey(n,this.firestore,null)}}class vp{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Eg(e)}get(e){const n=Eh(e);return this._delegate.get(n).then(a=>new wg(this._firestore,new vh(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,n.converter)))}set(e,n,a){const d=Eh(e);return a?(bh("Transaction.set",a),this._delegate.set(d,n,a)):this._delegate.set(d,n),this}update(e,n,a,...d){const g=Eh(e);return 2===arguments.length?this._delegate.update(g,n):this._delegate.update(g,n,a,...d),this}delete(e){const n=Eh(e);return this._delegate.delete(n),this}}class Y0{constructor(e){this._delegate=e}set(e,n,a){const d=Eh(e);return a?(bh("WriteBatch.set",a),this._delegate.set(d,n,a)):this._delegate.set(d,n),this}update(e,n,a,...d){const g=Eh(e);return 2===arguments.length?this._delegate.update(g,n):this._delegate.update(g,n,a,...d),this}delete(e){const n=Eh(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Th{constructor(e,n,a){this._firestore=e,this._userDataWriter=n,this._delegate=a}fromFirestore(e,n){const a=new Dm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cg(this._firestore,a),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const a=Th.INSTANCES;let d=a.get(e);d||(d=new WeakMap,a.set(e,d));let g=d.get(n);return g||(g=new Th(e,new Eg(e),n),d.set(n,g)),g}}Th.INSTANCES=new WeakMap;class Jl{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Eg(e)}static forPath(e,n,a){if(e.length%2!=0)throw new gn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Jl(n,new uo(n._delegate,a,new yn(e)))}static forKey(e,n,a){return new Jl(n,new uo(n._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new yp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yp(this.firestore,iy(this._delegate,e))}catch(n){throw Lu(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,_e.m9)(e))instanceof uo&&sy(this._delegate,e)}set(e,n){n=bh("DocumentReference.set",n);try{return n?Am(this._delegate,e,n):Am(this._delegate,e)}catch(a){throw Lu(a,"setDoc()","DocumentReference.set()")}}update(e,n,...a){try{return 1===arguments.length?vy(this._delegate,e):vy(this._delegate,e,n,...a)}catch(d){throw Lu(d,"updateDoc()","DocumentReference.update()")}}delete(){return function mp(o){return gf(hi(o.firestore,Ao),[new vl(o._key,qs.none())])}(this._delegate)}onSnapshot(...e){const n=Cy(e),a=Sy(e,d=>new wg(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return yy(this._delegate,n,a)}get(e){let n;return n="cache"===e?.source?function $0(o){o=hi(o,uo);const e=hi(o.firestore,Ao),n=ii(e),a=new co(e);return function Ht(o,e){const n=new ui;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(a=(0,Ve.Z)(function*(d,g,T){try{const O=yield function(Z,ue){const Ie=kn(Z);return Ie.persistence.runTransaction("read document","readonly",nt=>Ie.localDocuments.getDocument(nt,ue))}(d,g);O.isFoundDocument()?T.resolve(O):O.isNoDocument()?T.resolve(null):T.reject(new gn(Vt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const Z=ph(O,`Failed to get document '${g} from cache`);T.reject(Z)}}),function(d,g,T){return a.apply(this,arguments)})(yield xt(o),e,n);var a})),n.promise}(n,o._key).then(d=>new vh(e,a,o._key,d,new kc(null!==d&&d.hasLocalMutations,!0),o.converter))}(this._delegate):"server"===e?.source?function H0(o){o=hi(o,uo);const e=hi(o.firestore,Ao);return Gn(ii(e),o._key,{source:"server"}).then(n=>km(e,o,n))}(this._delegate):function N_(o){o=hi(o,uo);const e=hi(o.firestore,Ao);return Gn(ii(e),o._key).then(n=>km(e,o,n))}(this._delegate),n.then(a=>new wg(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new Jl(this.firestore,this._delegate.withConverter(e?Th.getInstance(this.firestore,e):null))}}function Lu(o,e,n){return o.message=o.message.replace(e,n),o}function Cy(o){for(const e of o)if("object"==typeof e&&!Tg(e))return e;return{}}function Sy(o,e){var n,a;let d;return d=Tg(o[0])?o[0]:Tg(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]},{next:g=>{d.next&&d.next(e(g))},error:null===(n=d.error)||void 0===n?void 0:n.bind(d),complete:null===(a=d.complete)||void 0===a?void 0:a.bind(d)}}class wg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Jl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return xm(this._delegate,e._delegate)}}class Cg extends wg{data(e){const n=this._delegate.data(e);return function nc(o,e){o||In()}(void 0!==n),n}}class Fu{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Eg(e)}where(e,n,a){try{return new Fu(this.firestore,Pd(this._delegate,function Tm(o,e,n){const a=e,d=cp("where",o);return gh._create(d,a,n)}(e,n,a)))}catch(d){throw Lu(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Fu(this.firestore,Pd(this._delegate,function hg(o,e="asc"){const n=e,a=cp("orderBy",o);return Em._create(a,n)}(e,n)))}catch(a){throw Lu(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fu(this.firestore,Pd(this._delegate,function fy(o){return wl("limit",o),mh._create("limit",o,"F")}(e)))}catch(n){throw Lu(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Fu(this.firestore,Pd(this._delegate,function fg(o){return wl("limitToLast",o),mh._create("limitToLast",o,"L")}(e)))}catch(n){throw Lu(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Fu(this.firestore,Pd(this._delegate,function hp(...o){return Od._create("startAt",o,!0)}(...e)))}catch(n){throw Lu(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Fu(this.firestore,Pd(this._delegate,function fp(...o){return Od._create("startAfter",o,!1)}(...e)))}catch(n){throw Lu(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Fu(this.firestore,Pd(this._delegate,function py(...o){return pp._create("endBefore",o,!1)}(...e)))}catch(n){throw Lu(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Fu(this.firestore,Pd(this._delegate,function V0(...o){return pp._create("endAt",o,!0)}(...e)))}catch(n){throw Lu(n,"endAt()","Query.endAt()")}}isEqual(e){return ag(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function vg(o){o=hi(o,Pa);const e=hi(o.firestore,Ao),n=ii(e),a=new co(e);return function Dr(o,e){const n=new ui;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(a=(0,Ve.Z)(function*(d,g,T){try{const O=yield Wp(d,g,!0),Z=new _0(g,O.ir),ue=Z.sc(O.documents),Ie=Z.applyChanges(ue,!1);T.resolve(Ie.snapshot)}catch(O){const Z=ph(O,`Failed to execute query '${g} against cache`);T.reject(Z)}}),function(d,g,T){return a.apply(this,arguments)})(yield xt(o),e,n);var a})),n.promise}(n,o._query).then(d=>new yh(e,a,o,d))}(this._delegate):"server"===e?.source?function yg(o){o=hi(o,Pa);const e=hi(o.firestore,Ao),n=ii(e),a=new co(e);return mi(n,o._query,{source:"server"}).then(d=>new yh(e,a,o,d))}(this._delegate):function L_(o){o=hi(o,Pa);const e=hi(o.firestore,Ao),n=ii(e),a=new co(e);return dp(o._query),mi(n,o._query).then(d=>new yh(e,a,o,d))}(this._delegate),n.then(a=>new Dy(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const n=Cy(e),a=Sy(e,d=>new Dy(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return yy(this._delegate,n,a)}withConverter(e){return new Fu(this.firestore,this._delegate.withConverter(e?Th.getInstance(this.firestore,e):null))}}class Q0{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Cg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dy{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Fu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Q0(this._firestore,n))}forEach(e,n){this._delegate.forEach(a=>{e.call(n,new Cg(this._firestore,a))})}isEqual(e){return xm(this._delegate,e._delegate)}}class yp extends Fu{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Jl(this.firestore,e):null}doc(e){try{return new Jl(this.firestore,void 0===e?og(this._delegate):og(this._delegate,e))}catch(n){throw Lu(n,"doc()","CollectionReference.doc()")}}add(e){return function G0(o,e){const n=hi(o.firestore,Ao),a=og(o),d=Ac(o.converter,e);return gf(n,[ym(Ad(o.firestore),"addDoc",a._key,d,null!==o.converter,{}).toMutation(a._key,qs.exists(!1))]).then(()=>a)}(this._delegate,e).then(n=>new Jl(this.firestore,n))}isEqual(e){return sy(this._delegate,e._delegate)}withConverter(e){return new yp(this.firestore,this._delegate.withConverter(e?Th.getInstance(this.firestore,e):null))}}function Eh(o){return hi(o,uo)}class Iy{constructor(...e){this._delegate=new Id(...e)}static documentId(){return new Iy(qr.keyField().canonicalString())}isEqual(e){return(e=(0,_e.m9)(e))instanceof Id&&this._delegate._internalPath.isEqual(e._internalPath)}}class wh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Om(){return new _m("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new wh(e)}static delete(){const e=function Nd(){return new lg("deleteField")}();return e._methodName="FieldValue.delete",new wh(e)}static arrayUnion(...e){const n=function Ty(...o){return new L0("arrayUnion",o)}(...e);return n._methodName="FieldValue.arrayUnion",new wh(n)}static arrayRemove(...e){const n=function K0(...o){return new F0("arrayRemove",o)}(...e);return n._methodName="FieldValue.arrayRemove",new wh(n)}static increment(e){const n=function Rm(o){return new dy("increment",o)}(e);return n._methodName="FieldValue.increment",new wh(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $_={Firestore:wy,GeoPoint:hf,Timestamp:gi,Blob:vf,Transaction:vp,WriteBatch:Y0,DocumentReference:Jl,DocumentSnapshot:wg,Query:Fu,QueryDocumentSnapshot:Cg,QuerySnapshot:Dy,CollectionReference:yp,FieldPath:Iy,FieldValue:wh,setLogLevel:function Z0(o){!function Vu(o){zs.setLogLevel(o)}(o)},CACHE_SIZE_UNLIMITED:-1};!function Sg(o){(function X0(o,e){o.INTERNAL.registerComponent(new Y.wA("firestore-compat",n=>{const a=n.getProvider("app-compat").getImmediate(),d=n.getProvider("firestore").getImmediate();return e(a,d)},"PUBLIC").setServiceProps(Object.assign({},$_)))})(o,(e,n)=>new wy(e,n,new Lm)),o.registerVersion("@firebase/firestore-compat","0.3.12")}(je.Z);var rd=H(6796),J0=H(8697);function xy(o,e){return function _p(o,e=fe.z){return new se.y(n=>{let a;return null!=e?e.schedule(()=>{a=o.onSnapshot({includeMetadataChanges:!0},n)}):a=o.onSnapshot({includeMetadataChanges:!0},n),()=>{a?.()}})}(o,e)}function Fm(o,e){return xy(o,e).pipe((0,Re.U)(n=>({payload:n,type:"query"})))}function bp(o,e){return Fm(o,e).pipe((0,$e.O)(void 0),Se(),(0,Re.U)(([n,a])=>{const d=a.payload.docChanges(),g=d.map(T=>({type:T.type,payload:T}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((T,O)=>{const Z=d.find(Ie=>Ie.doc.ref.isEqual(T.ref)),ue=n?.payload.docs.find(Ie=>Ie.ref.isEqual(T.ref));Z&&JSON.stringify(Z.doc.metadata)===JSON.stringify(T.metadata)||!Z&&ue&&JSON.stringify(ue.metadata)===JSON.stringify(T.metadata)||g.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:T}})}),g}))}function Ay(o,e,n){return bp(o,n).pipe((0,Le.R)((a,d)=>function t_(o,e,n){return e.forEach(a=>{n.indexOf(a.type)>-1&&(o=function yf(o,e){switch(e.type){case"added":if(!o[e.newIndex]||!o[e.newIndex].doc.ref.isEqual(e.doc.ref))return jm(o,e.newIndex,0,e);break;case"modified":if(null==o[e.oldIndex]||o[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=o.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return jm(o,e.newIndex,1,e)}break;case"removed":if(o[e.oldIndex]&&o[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jm(o,e.oldIndex,1)}return o}(o,a))}),o}(a,d.map(g=>g.payload),e),[]),(0,wt.x)(),(0,Re.U)(a=>a.map(d=>({type:d.type,payload:d}))))}function jm(o,e,n,...a){const d=o.slice();return d.splice(e,n,...a),d}function n_(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}H(7142);class r_{constructor(e,n,a){this.ref=e,this.query=n,this.afs=a}stateChanges(e){let n=bp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Re.U)(a=>a.filter(d=>e.indexOf(d.type)>-1)))),n.pipe((0,$e.O)(void 0),Se(),(0,le.h)(([a,d])=>d.length>0||!a),(0,Re.U)(([a,d])=>d),De.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Le.R)((n,a)=>[...n,...a],[]))}snapshotChanges(e){const n=n_(e);return Ay(this.query,n,this.afs.schedulers.outsideAngular).pipe(De.iC)}valueChanges(e={}){return Fm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Re.U)(n=>n.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),De.iC)}get(e){return(0,V.D)(this.query.get(e)).pipe(De.iC)}add(e){return this.ref.add(e)}doc(e){return new _f(this.ref.doc(e),this.afs)}}class _f{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const a=this.ref.collection(e),{ref:d,query:g}=G_(a,n);return new r_(d,g,this.afs)}snapshotChanges(){return function e_(o,e){return xy(o,e).pipe((0,$e.O)(void 0),Se(),(0,Re.U)(([n,a])=>a.exists?n?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(De.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Re.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,V.D)(this.ref.get(e)).pipe(De.iC)}}class vb{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?bp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Re.U)(n=>n.filter(a=>e.indexOf(a.type)>-1)),(0,le.h)(n=>n.length>0),De.iC):bp(this.query,this.afs.schedulers.outsideAngular).pipe(De.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Le.R)((n,a)=>[...n,...a],[]))}snapshotChanges(e){const n=n_(e);return Ay(this.query,n,this.afs.schedulers.outsideAngular).pipe(De.iC)}valueChanges(e={}){return Fm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Re.U)(a=>a.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),De.iC)}get(e){return(0,V.D)(this.query.get(e)).pipe(De.iC)}}const ky=new y.OlP("angularfire2.enableFirestorePersistence"),My=new y.OlP("angularfire2.firestore.persistenceSettings"),i_=new y.OlP("angularfire2.firestore.settings"),s_=new y.OlP("angularfire2.firestore.use-emulator");function G_(o,e=(n=>n)){return{query:e(o),ref:o}}let Kr=(()=>{class o{constructor(n,a,d,g,T,O,Z,ue,Ie,nt,Ft,on,xn,Wn,er,vi,Bi){this.schedulers=Z;const Ti=(0,vt.on)(n,O,a),ko=Ie;nt&&(0,rd.nw)(Ti,O,Ft,xn,Wn,er,on,vi),[this.firestore,this.persistenceEnabled$]=(0,vt.cc)(`${Ti.name}.firestore`,"AngularFirestore",Ti.name,()=>{const ho=O.runOutsideAngular(()=>Ti.firestore());if(g&&ho.settings(g),ko&&ho.useEmulator(...ko),d&&!(0,qe.PM)(T)){const ws=()=>{try{return(0,V.D)(ho.enablePersistence(ue||void 0).then(()=>!0,()=>!1))}catch(va){return typeof console<"u"&&console.warn(va),(0,Ce.of)(!1)}};return[ho,O.runOutsideAngular(ws)]}return[ho,(0,Ce.of)(!1)]},[g,ko,d])}collection(n,a){let d;d="string"==typeof n?this.firestore.collection(n):n;const{ref:g,query:T}=G_(d,a),O=this.schedulers.ngZone.run(()=>g);return new r_(O,T,this)}collectionGroup(n,a){const d=a||(T=>T),g=this.firestore.collectionGroup(n);return new vb(d(g),this)}doc(n){let a;a="string"==typeof n?this.firestore.doc(n):n;const d=this.schedulers.ngZone.run(()=>a);return new _f(d,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(n){return new(n||o)(y.LFG(vt.Dh),y.LFG(vt.xv,8),y.LFG(ky,8),y.LFG(i_,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(De.HU),y.LFG(My,8),y.LFG(s_,8),y.LFG(rd.zQ,8),y.LFG(rd.Qv,8),y.LFG(rd.L6,8),y.LFG(rd._Q,8),y.LFG(rd.rT,8),y.LFG(rd.lh,8),y.LFG(rd.f7,8),y.LFG(J0.nm,8))},o.\u0275prov=y.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})()},6240:(nn,st,H)=>{"use strict";H.d(st,{Q1:()=>K,TE:()=>Wt});var y=H(5592),fe=H(2096),se=H(2459),V=H(6321),Ce=H(9360),De=H(8251),Xe=H(7398),et=H(4664),Se=H(8186),Re=H(5879),Le=H(6304),wt=H(3106),le=H(5861),vt=H(534),qe=H(9058),Tt=H(4537);const je="firebasestorage.googleapis.com",Ve="storageBucket";class _e extends qe.ZR{constructor(X,xe,We=0){super(ut(X),`Firebase Storage: ${xe} (${ut(X)})`),this.status_=We,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_e.prototype)}get status(){return this.status_}set status(X){this.status_=X}_codeEquals(X){return ut(X)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(X){this.customData.serverResponse=X,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Fe=(()=>((Fe=Fe||{}).UNKNOWN="unknown",Fe.OBJECT_NOT_FOUND="object-not-found",Fe.BUCKET_NOT_FOUND="bucket-not-found",Fe.PROJECT_NOT_FOUND="project-not-found",Fe.QUOTA_EXCEEDED="quota-exceeded",Fe.UNAUTHENTICATED="unauthenticated",Fe.UNAUTHORIZED="unauthorized",Fe.UNAUTHORIZED_APP="unauthorized-app",Fe.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Fe.INVALID_CHECKSUM="invalid-checksum",Fe.CANCELED="canceled",Fe.INVALID_EVENT_NAME="invalid-event-name",Fe.INVALID_URL="invalid-url",Fe.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Fe.NO_DEFAULT_BUCKET="no-default-bucket",Fe.CANNOT_SLICE_BLOB="cannot-slice-blob",Fe.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Fe.NO_DOWNLOAD_URL="no-download-url",Fe.INVALID_ARGUMENT="invalid-argument",Fe.INVALID_ARGUMENT_COUNT="invalid-argument-count",Fe.APP_DELETED="app-deleted",Fe.INVALID_ROOT_OPERATION="invalid-root-operation",Fe.INVALID_FORMAT="invalid-format",Fe.INTERNAL_ERROR="internal-error",Fe.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Fe))();function ut(Q){return"storage/"+Q}function W(){return new _e(Fe.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xt(){return new _e(Fe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ot(){return new _e(Fe.CANCELED,"User canceled the upload/download.")}function dt(){return new _e(Fe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jt(Q){return new _e(Fe.INVALID_ARGUMENT,Q)}function Lt(){return new _e(Fe.APP_DELETED,"The Firebase app was deleted.")}function Kt(Q){return new _e(Fe.INVALID_ROOT_OPERATION,"The operation '"+Q+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wn(Q,X){return new _e(Fe.INVALID_FORMAT,"String does not match format '"+Q+"': "+X)}function Fn(Q){throw new _e(Fe.INTERNAL_ERROR,"Internal error: "+Q)}class jn{constructor(X,xe){this.bucket=X,this.path_=xe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const X=encodeURIComponent;return"/b/"+X(this.bucket)+"/o/"+X(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(X,xe){let We;try{We=jn.makeFromUrl(X,xe)}catch{return new jn(X,"")}if(""===We.path)return We;throw function rt(Q){return new _e(Fe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+Q+"'.")}(X)}static makeFromUrl(X,xe){let We=null;const ht="([A-Za-z0-9.\\-_]+)",qn=new RegExp("^gs://"+ht+"(/(.*))?$","i");function lr(xs){xs.path_=decodeURIComponent(xs.path)}const Oi=xe.replace(/[.]/g,"\\."),ki=[{regex:qn,indices:{bucket:1,path:3},postModify:function Mt(xs){"/"===xs.path.charAt(xs.path.length-1)&&(xs.path_=xs.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Oi}/v[A-Za-z0-9_]+/b/${ht}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:lr},{regex:new RegExp(`^https?://${xe===je?"(?:storage.googleapis.com|storage.cloud.google.com)":xe}/${ht}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:lr}];for(let xs=0;xs<ki.length;xs++){const Eo=ki[xs],hs=Eo.regex.exec(X);if(hs){let da=hs[Eo.indices.path];da||(da=""),We=new jn(hs[Eo.indices.bucket],da),Eo.postModify(We);break}}if(null==We)throw function Ye(Q){return new _e(Fe.INVALID_URL,"Invalid URL '"+Q+"'.")}(X);return We}}class zn{constructor(X){this.promise_=Promise.reject(X)}getPromise(){return this.promise_}cancel(X=!1){}}function Cr(Q){return"string"==typeof Q||Q instanceof String}function Hr(Q){return Mr()&&Q instanceof Blob}function Mr(){return typeof Blob<"u"&&!(0,qe.UG)()}function Pr(Q,X,xe,We){if(We<X)throw jt(`Invalid value for '${Q}'. Expected ${X} or greater.`);if(We>xe)throw jt(`Invalid value for '${Q}'. Expected ${xe} or less.`)}function yi(Q,X,xe){let We=X;return null==xe&&(We=`https://${X}`),`${xe}://${We}/v0${Q}`}function Ir(Q){const X=encodeURIComponent;let xe="?";for(const We in Q)Q.hasOwnProperty(We)&&(xe=xe+(X(We)+"=")+X(Q[We])+"&");return xe=xe.slice(0,-1),xe}var dn=(()=>((dn=dn||{})[dn.NO_ERROR=0]="NO_ERROR",dn[dn.NETWORK_ERROR=1]="NETWORK_ERROR",dn[dn.ABORT=2]="ABORT",dn))();function Bn(Q,X){const xe=Q>=500&&Q<600,ht=-1!==[408,429].indexOf(Q),Mt=-1!==X.indexOf(Q);return xe||ht||Mt}class Nn{constructor(X,xe,We,ht,Mt,hn,qn,Kn,lr,ni,Oi,Lr=!0){this.url_=X,this.method_=xe,this.headers_=We,this.body_=ht,this.successCodes_=Mt,this.additionalRetryCodes_=hn,this.callback_=qn,this.errorCallback_=Kn,this.timeout_=lr,this.progressCallback_=ni,this.connectionFactory_=Oi,this.retry=Lr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ai,Tr)=>{this.resolve_=ai,this.reject_=Tr,this.start_()})}start_(){const xe=(We,ht)=>{const Mt=this.resolve_,hn=this.reject_,qn=ht.connection;if(ht.wasSuccessCode)try{const Kn=this.callback_(qn,qn.getResponse());!function $n(Q){return void 0!==Q}(Kn)?Mt():Mt(Kn)}catch(Kn){hn(Kn)}else if(null!==qn){const Kn=W();Kn.serverResponse=qn.getErrorText(),hn(this.errorCallback_?this.errorCallback_(qn,Kn):Kn)}else hn(ht.canceled?this.appDelete_?Lt():ot():Xt())};this.canceled_?xe(0,new xr(!1,null,!0)):this.backoffId_=function ur(Q,X,xe){let We=1,ht=null,Mt=null,hn=!1,qn=0;function Kn(){return 2===qn}let lr=!1;function ni(...ds){lr||(lr=!0,X.apply(null,ds))}function Oi(ds){ht=setTimeout(()=>{ht=null,Q(ai,Kn())},ds)}function Lr(){Mt&&clearTimeout(Mt)}function ai(ds,...Xs){if(lr)return void Lr();if(ds)return Lr(),void ni.call(null,ds,...Xs);if(Kn()||hn)return Lr(),void ni.call(null,ds,...Xs);let ki;We<64&&(We*=2),1===qn?(qn=2,ki=0):ki=1e3*(We+Math.random()),Oi(ki)}let Tr=!1;function Zi(ds){Tr||(Tr=!0,Lr(),!lr&&(null!==ht?(ds||(qn=2),clearTimeout(ht),Oi(0)):ds||(qn=1)))}return Oi(0),Mt=setTimeout(()=>{hn=!0,Zi(!0)},xe),Zi}((We,ht)=>{if(ht)return void We(!1,new xr(!1,null,!0));const Mt=this.connectionFactory_();this.pendingConnection_=Mt;const hn=qn=>{null!==this.progressCallback_&&this.progressCallback_(qn.loaded,qn.lengthComputable?qn.total:-1)};null!==this.progressCallback_&&Mt.addUploadProgressListener(hn),Mt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Mt.removeUploadProgressListener(hn),this.pendingConnection_=null;const qn=Mt.getErrorCode()===dn.NO_ERROR,Kn=Mt.getStatus();if(!qn||Bn(Kn,this.additionalRetryCodes_)&&this.retry){const ni=Mt.getErrorCode()===dn.ABORT;return void We(!1,new xr(!1,null,ni))}const lr=-1!==this.successCodes_.indexOf(Kn);We(!0,new xr(lr,Mt))})},xe,this.timeout_)}getPromise(){return this.promise_}cancel(X){this.canceled_=!0,this.appDelete_=X||!1,null!==this.backoffId_&&function rr(Q){Q(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xr{constructor(X,xe,We){this.wasSuccessCode=X,this.connection=xe,this.canceled=!!We}}function On(...Q){const X=function Rr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==X){const xe=new X;for(let We=0;We<Q.length;We++)xe.append(Q[We]);return xe.getBlob()}if(Mr())return new Blob(Q);throw new _e(Fe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zi{constructor(X,xe){this.data=X,this.contentType=xe||null}}function di(Q,X){switch(Q){case gr.RAW:return new zi(Xi(X));case gr.BASE64:case gr.BASE64URL:return new zi(wi(Q,X));case gr.DATA_URL:return new zi(function os(Q){const X=new Vr(Q);return X.base64?wi(gr.BASE64,X.rest):function bi(Q){let X;try{X=decodeURIComponent(Q)}catch{throw wn(gr.DATA_URL,"Malformed data URL.")}return Xi(X)}(X.rest)}(X),function Ar(Q){return new Vr(Q).contentType}(X))}throw W()}function Xi(Q){const X=[];for(let xe=0;xe<Q.length;xe++){let We=Q.charCodeAt(xe);We<=127?X.push(We):We<=2047?X.push(192|We>>6,128|63&We):55296==(64512&We)?xe<Q.length-1&&56320==(64512&Q.charCodeAt(xe+1))?(We=65536|(1023&We)<<10|1023&Q.charCodeAt(++xe),X.push(240|We>>18,128|We>>12&63,128|We>>6&63,128|63&We)):X.push(239,191,189):56320==(64512&We)?X.push(239,191,189):X.push(224|We>>12,128|We>>6&63,128|63&We)}return new Uint8Array(X)}function wi(Q,X){switch(Q){case gr.BASE64:{const ht=-1!==X.indexOf("-"),Mt=-1!==X.indexOf("_");if(ht||Mt)throw wn(Q,"Invalid character '"+(ht?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{const ht=-1!==X.indexOf("+"),Mt=-1!==X.indexOf("/");if(ht||Mt)throw wn(Q,"Invalid character '"+(ht?"+":"/")+"' found: is it base64 encoded?");X=X.replace(/-/g,"+").replace(/_/g,"/");break}}let xe;try{xe=function ns(Q){if(typeof atob>"u")throw function qt(Q){return new _e(Fe.UNSUPPORTED_ENVIRONMENT,`${Q} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(Q)}(X)}catch(ht){throw ht.message.includes("polyfill")?ht:wn(Q,"Invalid character found")}const We=new Uint8Array(xe.length);for(let ht=0;ht<xe.length;ht++)We[ht]=xe.charCodeAt(ht);return We}class Vr{constructor(X){this.base64=!1,this.contentType=null;const xe=X.match(/^data:([^,]+)?,/);if(null===xe)throw wn(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const We=xe[1]||null;null!=We&&(this.base64=function vs(Q,X){return Q.length>=X.length&&Q.substring(Q.length-X.length)===X}(We,";base64"),this.contentType=this.base64?We.substring(0,We.length-7):We),this.rest=X.substring(X.indexOf(",")+1)}}class Rn{constructor(X,xe){let We=0,ht="";Hr(X)?(this.data_=X,We=X.size,ht=X.type):X instanceof ArrayBuffer?(xe?this.data_=new Uint8Array(X):(this.data_=new Uint8Array(X.byteLength),this.data_.set(new Uint8Array(X))),We=this.data_.length):X instanceof Uint8Array&&(xe?this.data_=X:(this.data_=new Uint8Array(X.length),this.data_.set(X)),We=X.length),this.size_=We,this.type_=ht}size(){return this.size_}type(){return this.type_}slice(X,xe){if(Hr(this.data_)){const ht=function mr(Q,X,xe){return Q.webkitSlice?Q.webkitSlice(X,xe):Q.mozSlice?Q.mozSlice(X,xe):Q.slice?Q.slice(X,xe):null}(this.data_,X,xe);return null===ht?null:new Rn(ht)}{const We=new Uint8Array(this.data_.buffer,X,xe-X);return new Rn(We,!0)}}static getBlob(...X){if(Mr()){const xe=X.map(We=>We instanceof Rn?We.data_:We);return new Rn(On.apply(null,xe))}{const xe=X.map(hn=>Cr(hn)?di(gr.RAW,hn).data:hn.data_);let We=0;xe.forEach(hn=>{We+=hn.byteLength});const ht=new Uint8Array(We);let Mt=0;return xe.forEach(hn=>{for(let qn=0;qn<hn.length;qn++)ht[Mt++]=hn[qn]}),new Rn(ht,!0)}}uploadData(){return this.data_}}function tt(Q){let X;try{X=JSON.parse(Q)}catch{return null}return function Yr(Q){return"object"==typeof Q&&!Array.isArray(Q)}(X)?X:null}function ye(Q){const X=Q.lastIndexOf("/",Q.length-2);return-1===X?Q:Q.slice(X+1)}function Ae(Q,X){return X}class yt{constructor(X,xe,We,ht){this.server=X,this.local=xe||X,this.writable=!!We,this.xform=ht||Ae}}let Yt=null;function he(){if(Yt)return Yt;const Q=[];Q.push(new yt("bucket")),Q.push(new yt("generation")),Q.push(new yt("metageneration")),Q.push(new yt("name","fullPath",!0));const xe=new yt("name");xe.xform=function X(Mt,hn){return function Tn(Q){return!Cr(Q)||Q.length<2?Q:ye(Q)}(hn)},Q.push(xe);const ht=new yt("size");return ht.xform=function We(Mt,hn){return void 0!==hn?Number(hn):hn},Q.push(ht),Q.push(new yt("timeCreated")),Q.push(new yt("updated")),Q.push(new yt("md5Hash",null,!0)),Q.push(new yt("cacheControl",null,!0)),Q.push(new yt("contentDisposition",null,!0)),Q.push(new yt("contentEncoding",null,!0)),Q.push(new yt("contentLanguage",null,!0)),Q.push(new yt("contentType",null,!0)),Q.push(new yt("metadata","customMetadata",!0)),Yt=Q,Yt}function ct(Q,X,xe){const We=tt(X);return null===We?null:function Ne(Q,X,xe){const We={type:"file"},ht=xe.length;for(let Mt=0;Mt<ht;Mt++){const hn=xe[Mt];We[hn.local]=hn.xform(We,X[hn.server])}return function pe(Q,X){Object.defineProperty(Q,"ref",{get:function xe(){const Mt=new jn(Q.bucket,Q.fullPath);return X._makeStorageReference(Mt)}})}(We,Q),We}(Q,We,xe)}function Zn(Q,X){const xe={},We=X.length;for(let ht=0;ht<We;ht++){const Mt=X[ht];Mt.writable&&(xe[Mt.server]=Q[Mt.local])}return JSON.stringify(xe)}const kr="prefixes",ti="items";class Jt{constructor(X,xe,We,ht){this.url=X,this.method=xe,this.handler=We,this.timeout=ht,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function An(Q){if(!Q)throw W()}function Yn(Q,X){return function xe(We,ht){const Mt=ct(Q,ht,X);return An(null!==Mt),Mt}}function Qr(Q){return function X(xe,We){let ht;return ht=401===xe.getStatus()?xe.getErrorText().includes("Firebase App Check token is invalid")?function Bt(){return new _e(Fe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function bt(){return new _e(Fe.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===xe.getStatus()?function Pe(Q){return new _e(Fe.QUOTA_EXCEEDED,"Quota for bucket '"+Q+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Q.bucket):403===xe.getStatus()?function $t(Q){return new _e(Fe.UNAUTHORIZED,"User does not have permission to access '"+Q+"'.")}(Q.path):We,ht.status=xe.getStatus(),ht.serverResponse=We.serverResponse,ht}}function fi(Q){const X=Qr(Q);return function xe(We,ht){let Mt=X(We,ht);return 404===We.getStatus()&&(Mt=function ne(Q){return new _e(Fe.OBJECT_NOT_FOUND,"Object '"+Q+"' does not exist.")}(Q.path)),Mt.serverResponse=ht.serverResponse,Mt}}function pi(Q,X,xe){const ht=yi(X.fullServerUrl(),Q.host,Q._protocol),hn=Q.maxOperationRetryTime,qn=new Jt(ht,"GET",Yn(Q,xe),hn);return qn.errorHandler=fi(X),qn}function rs(Q,X,xe,We,ht){const Mt={};Mt.prefix=X.isRoot?"":X.path+"/",xe&&xe.length>0&&(Mt.delimiter=xe),We&&(Mt.pageToken=We),ht&&(Mt.maxResults=ht);const qn=yi(X.bucketOnlyServerUrl(),Q.host,Q._protocol),lr=Q.maxOperationRetryTime,ni=new Jt(qn,"GET",function ir(Q,X){return function xe(We,ht){const Mt=function Et(Q,X,xe){const We=tt(xe);return null===We?null:function Ut(Q,X,xe){const We={prefixes:[],items:[],nextPageToken:xe.nextPageToken};if(xe[kr])for(const ht of xe[kr]){const Mt=ht.replace(/\/$/,""),hn=Q._makeStorageReference(new jn(X,Mt));We.prefixes.push(hn)}if(xe[ti])for(const ht of xe[ti]){const Mt=Q._makeStorageReference(new jn(X,ht.name));We.items.push(Mt)}return We}(Q,X,We)}(Q,X,ht);return An(null!==Mt),Mt}}(Q,X.bucket),lr);return ni.urlParams=Mt,ni.errorHandler=Qr(X),ni}function Ho(Q,X,xe){const We=Object.assign({},xe);return We.fullPath=Q.path,We.size=X.size(),We.contentType||(We.contentType=function Ls(Q,X){return Q&&Q.contentType||X&&X.type()||"application/octet-stream"}(null,X)),We}class no{constructor(X,xe,We,ht){this.current=X,this.total=xe,this.finalized=!!We,this.metadata=ht||null}}function oi(Q,X){let xe=null;try{xe=Q.getResponseHeader("X-Goog-Upload-Status")}catch{An(!1)}return An(!!xe&&-1!==(X||["active"]).indexOf(xe)),xe}const ro={STATE_CHANGED:"state_changed"},Ds={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ba(Q){switch(Q){case"running":case"pausing":case"canceling":return Ds.RUNNING;case"paused":return Ds.PAUSED;case"success":return Ds.SUCCESS;case"canceled":return Ds.CANCELED;default:return Ds.ERROR}}class ju{constructor(X,xe,We){if(function wr(Q){return"function"==typeof Q}(X)||null!=xe||null!=We)this.next=X,this.error=xe??void 0,this.complete=We??void 0;else{const Mt=X;this.next=Mt.next,this.error=Mt.error,this.complete=Mt.complete}}}function Fs(Q){return(...X)=>{Promise.resolve().then(()=>Q(...X))}}let za=null;class as{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dn.NO_ERROR,this.sendPromise_=new Promise(X=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dn.ABORT,X()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dn.NETWORK_ERROR,X()}),this.xhr_.addEventListener("load",()=>{X()})})}send(X,xe,We,ht){if(this.sent_)throw Fn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(xe,X,!0),void 0!==ht)for(const Mt in ht)ht.hasOwnProperty(Mt)&&this.xhr_.setRequestHeader(Mt,ht[Mt].toString());return void 0!==We?this.xhr_.send(We):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(X){return this.xhr_.getResponseHeader(X)}addUploadProgressListener(X){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",X)}removeUploadProgressListener(X){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",X)}}class qa extends as{initXhr(){this.xhr_.responseType="text"}}function As(){return za?za():new qa}class is{constructor(X,xe,We=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=X,this._blob=xe,this._metadata=We,this._mappings=he(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=ht=>{if(this._request=void 0,this._chunkMultiplier=1,ht._codeEquals(Fe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const Mt=this.isExponentialBackoffExpired();if(Bn(ht.status,[])){if(!Mt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();ht=Xt()}this._error=ht,this._transition("error")}},this._metadataErrorHandler=ht=>{this._request=void 0,ht._codeEquals(Fe.CANCELED)?this.completeTransitions_():(this._error=ht,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((ht,Mt)=>{this._resolve=ht,this._reject=Mt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const X=this._transferred;return xe=>this._updateProgress(X+xe)}_shouldDoResumable(X){return X.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(X){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([xe,We])=>{switch(this._state){case"running":X(xe,We);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((X,xe)=>{const We=function fo(Q,X,xe,We,ht){const Mt=X.bucketOnlyServerUrl(),hn=Ho(X,We,ht),qn={name:hn.fullPath},Kn=yi(Mt,Q.host,Q._protocol),ni={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${We.size()}`,"X-Goog-Upload-Header-Content-Type":hn.contentType,"Content-Type":"application/json; charset=utf-8"},Oi=Zn(hn,xe),Tr=new Jt(Kn,"POST",function ai(Zi){let ds;oi(Zi);try{ds=Zi.getResponseHeader("X-Goog-Upload-URL")}catch{An(!1)}return An(Cr(ds)),ds},Q.maxUploadRetryTime);return Tr.urlParams=qn,Tr.headers=ni,Tr.body=Oi,Tr.errorHandler=Qr(X),Tr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ht=this._ref.storage._makeRequest(We,As,X,xe);this._request=ht,ht.getPromise().then(Mt=>{this._request=void 0,this._uploadUrl=Mt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const X=this._uploadUrl;this._resolveToken((xe,We)=>{const ht=function Zs(Q,X,xe,We){const Kn=new Jt(xe,"POST",function Mt(lr){const ni=oi(lr,["active","final"]);let Oi=null;try{Oi=lr.getResponseHeader("X-Goog-Upload-Size-Received")}catch{An(!1)}Oi||An(!1);const Lr=Number(Oi);return An(!isNaN(Lr)),new no(Lr,We.size(),"final"===ni)},Q.maxUploadRetryTime);return Kn.headers={"X-Goog-Upload-Command":"query"},Kn.errorHandler=Qr(X),Kn}(this._ref.storage,this._ref._location,X,this._blob),Mt=this._ref.storage._makeRequest(ht,As,xe,We);this._request=Mt,Mt.getPromise().then(hn=>{this._request=void 0,this._updateProgress(hn.current),this._needToFetchStatus=!1,hn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const X=262144*this._chunkMultiplier,xe=new no(this._transferred,this._blob.size()),We=this._uploadUrl;this._resolveToken((ht,Mt)=>{let hn;try{hn=function _a(Q,X,xe,We,ht,Mt,hn,qn){const Kn=new no(0,0);if(hn?(Kn.current=hn.current,Kn.total=hn.total):(Kn.current=0,Kn.total=We.size()),We.size()!==Kn.total)throw function at(){return new _e(Fe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const lr=Kn.total-Kn.current;let ni=lr;ht>0&&(ni=Math.min(ni,ht));const Oi=Kn.current;let ai="";ai=0===ni?"finalize":lr===ni?"upload, finalize":"upload";const Tr={"X-Goog-Upload-Command":ai,"X-Goog-Upload-Offset":`${Kn.current}`},Zi=We.slice(Oi,Oi+ni);if(null===Zi)throw dt();const ki=new Jt(xe,"POST",function ds(xs,Eo){const hs=oi(xs,["active","final"]),Fa=Kn.current+ni,da=We.size();let $r;return $r="final"===hs?Yn(X,Mt)(xs,Eo):null,new no(Fa,da,"final"===hs,$r)},X.maxUploadRetryTime);return ki.headers=Tr,ki.body=Zi.uploadData(),ki.progressCallback=qn||null,ki.errorHandler=Qr(Q),ki}(this._ref._location,this._ref.storage,We,this._blob,X,this._mappings,xe,this._makeProgressCallback())}catch(Kn){return this._error=Kn,void this._transition("error")}const qn=this._ref.storage._makeRequest(hn,As,ht,Mt,!1);this._request=qn,qn.getPromise().then(Kn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Kn.current),Kn.finalized?(this._metadata=Kn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((X,xe)=>{const We=pi(this._ref.storage,this._ref._location,this._mappings),ht=this._ref.storage._makeRequest(We,As,X,xe);this._request=ht,ht.getPromise().then(Mt=>{this._request=void 0,this._metadata=Mt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((X,xe)=>{const We=function Ss(Q,X,xe,We,ht){const Mt=X.bucketOnlyServerUrl(),hn={"X-Goog-Upload-Protocol":"multipart"},Kn=function qn(){let ki="";for(let xs=0;xs<2;xs++)ki+=Math.random().toString().slice(2);return ki}();hn["Content-Type"]="multipart/related; boundary="+Kn;const lr=Ho(X,We,ht),ni=Zn(lr,xe),ai=Rn.getBlob("--"+Kn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ni+"\r\n--"+Kn+"\r\nContent-Type: "+lr.contentType+"\r\n\r\n",We,"\r\n--"+Kn+"--");if(null===ai)throw dt();const Tr={name:lr.fullPath},Zi=yi(Mt,Q.host,Q._protocol),Xs=Q.maxUploadRetryTime,so=new Jt(Zi,"POST",Yn(Q,xe),Xs);return so.urlParams=Tr,so.headers=hn,so.body=ai.uploadData(),so.errorHandler=Qr(X),so}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ht=this._ref.storage._makeRequest(We,As,X,xe);this._request=ht,ht.getPromise().then(Mt=>{this._request=void 0,this._metadata=Mt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(X){const xe=this._transferred;this._transferred=X,this._transferred!==xe&&this._notifyObservers()}_transition(X){if(this._state!==X)switch(X){case"canceling":case"pausing":this._state=X,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const xe="paused"===this._state;this._state=X,xe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=X,this._notifyObservers();break;case"canceled":this._error=ot(),this._state=X,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const X=ba(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:X,metadata:this._metadata,task:this,ref:this._ref}}on(X,xe,We,ht){const Mt=new ju(xe||void 0,We||void 0,ht||void 0);return this._addObserver(Mt),()=>{this._removeObserver(Mt)}}then(X,xe){return this._promise.then(X,xe)}catch(X){return this.then(null,X)}_addObserver(X){this._observers.push(X),this._notifyObserver(X)}_removeObserver(X){const xe=this._observers.indexOf(X);-1!==xe&&this._observers.splice(xe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(xe=>{this._notifyObserver(xe)})}_finishPromise(){if(void 0!==this._resolve){let X=!0;switch(ba(this._state)){case Ds.SUCCESS:Fs(this._resolve.bind(null,this.snapshot))();break;case Ds.CANCELED:case Ds.ERROR:Fs(this._reject.bind(null,this._error))();break;default:X=!1}X&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(X){switch(ba(this._state)){case Ds.RUNNING:case Ds.PAUSED:X.next&&Fs(X.next.bind(X,this.snapshot))();break;case Ds.SUCCESS:X.complete&&Fs(X.complete.bind(X))();break;default:X.error&&Fs(X.error.bind(X,this._error))()}}resume(){const X="paused"===this._state||"pausing"===this._state;return X&&this._transition("running"),X}pause(){const X="running"===this._state;return X&&this._transition("pausing"),X}cancel(){const X="running"===this._state||"pausing"===this._state;return X&&this._transition("canceling"),X}}class Ys{constructor(X,xe){this._service=X,this._location=xe instanceof jn?xe:jn.makeFromUrl(xe,X.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(X,xe){return new Ys(X,xe)}get root(){const X=new jn(this._location.bucket,"");return this._newRef(this._service,X)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ye(this._location.path)}get storage(){return this._service}get parent(){const X=function ve(Q){if(0===Q.length)return null;const X=Q.lastIndexOf("/");return-1===X?"":Q.slice(0,X)}(this._location.path);if(null===X)return null;const xe=new jn(this._location.bucket,X);return new Ys(this._service,xe)}_throwIfRoot(X){if(""===this._location.path)throw Kt(X)}}function Ln(Q,X,xe){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,le.Z)(function*(Q,X,xe){const ht=yield Sr(Q,{pageToken:xe});X.prefixes.push(...ht.prefixes),X.items.push(...ht.items),null!=ht.nextPageToken&&(yield Ln(Q,X,ht.nextPageToken))})).apply(this,arguments)}function Sr(Q,X){null!=X&&"number"==typeof X.maxResults&&Pr("options.maxResults",1,1e3,X.maxResults);const xe=X||{},We=rs(Q.storage,Q._location,"/",xe.pageToken,xe.maxResults);return Q.storage.makeRequestWithTokens(We,As)}function ls(Q){Q._throwIfRoot("getDownloadURL");const X=function $o(Q,X,xe){const ht=yi(X.fullServerUrl(),Q.host,Q._protocol),hn=Q.maxOperationRetryTime,qn=new Jt(ht,"GET",function yr(Q,X){return function xe(We,ht){const Mt=ct(Q,ht,X);return An(null!==Mt),function cn(Q,X,xe,We){const ht=tt(X);if(null===ht||!Cr(ht.downloadTokens))return null;const Mt=ht.downloadTokens;if(0===Mt.length)return null;const hn=encodeURIComponent;return Mt.split(",").map(lr=>{const Oi=Q.fullPath;return yi("/b/"+hn(Q.bucket)+"/o/"+hn(Oi),xe,We)+Ir({alt:"media",token:lr})})[0]}(Mt,ht,Q.host,Q._protocol)}}(Q,xe),hn);return qn.errorHandler=fi(X),qn}(Q.storage,Q._location,he());return Q.storage.makeRequestWithTokens(X,As).then(xe=>{if(null===xe)throw function Ot(){return new _e(Fe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return xe})}function Xr(Q,X){const xe=function be(Q,X){const xe=X.split("/").filter(We=>We.length>0).join("/");return 0===Q.length?xe:Q+"/"+xe}(Q._location.path,X),We=new jn(Q._location.bucket,xe);return new Ys(Q.storage,We)}function Ji(Q,X){if(Q instanceof Yo){const xe=Q;if(null==xe._bucket)throw function Qe(){return new _e(Fe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ve+"' property when initializing the app?")}();const We=new Ys(xe,xe._bucket);return null!=X?Ji(We,X):We}return void 0!==X?Xr(Q,X):Q}function Ra(Q,X){if(X&&function Qs(Q){return/^[A-Za-z]+:\/\//.test(Q)}(X)){if(Q instanceof Yo)return function br(Q,X){return new Ys(Q,X)}(Q,X);throw jt("To use ref(service, url), the first argument must be a Storage instance.")}return Ji(Q,X)}function ys(Q,X){const xe=X?.[Ve];return null==xe?null:jn.makeFromBucketSpec(xe,Q)}class Yo{constructor(X,xe,We,ht,Mt){this.app=X,this._authProvider=xe,this._appCheckProvider=We,this._url=ht,this._firebaseVersion=Mt,this._bucket=null,this._host=je,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=ht?jn.makeFromBucketSpec(ht,this._host):ys(this._host,this.app.options)}get host(){return this._host}set host(X){this._host=X,this._bucket=null!=this._url?jn.makeFromBucketSpec(this._url,X):ys(X,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(X){Pr("time",0,Number.POSITIVE_INFINITY,X),this._maxUploadRetryTime=X}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(X){Pr("time",0,Number.POSITIVE_INFINITY,X),this._maxOperationRetryTime=X}_getAuthToken(){var X=this;return(0,le.Z)(function*(){if(X._overrideAuthToken)return X._overrideAuthToken;const xe=X._authProvider.getImmediate({optional:!0});if(xe){const We=yield xe.getToken();if(null!==We)return We.accessToken}return null})()}_getAppCheckToken(){var X=this;return(0,le.Z)(function*(){const xe=X._appCheckProvider.getImmediate({optional:!0});return xe?(yield xe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(X=>X.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(X){return new Ys(this,X)}_makeRequest(X,xe,We,ht,Mt=!0){if(this._deleted)return new zn(Lt());{const hn=function Ws(Q,X,xe,We,ht,Mt,hn=!0){const qn=Ir(Q.urlParams),Kn=Q.url+qn,lr=Object.assign({},Q.headers);return function Zr(Q,X){X&&(Q["X-Firebase-GMPID"]=X)}(lr,X),function sr(Q,X){null!==X&&X.length>0&&(Q.Authorization="Firebase "+X)}(lr,xe),function Gi(Q,X){Q["X-Firebase-Storage-Version"]="webjs/"+(X??"AppManager")}(lr,Mt),function _i(Q,X){null!==X&&(Q["X-Firebase-AppCheck"]=X)}(lr,We),new Nn(Kn,Q.method,lr,Q.body,Q.successCodes,Q.additionalRetryCodes,Q.handler,Q.errorHandler,Q.timeout,Q.progressCallback,ht,hn)}(X,this._appId,We,ht,xe,this._firebaseVersion,Mt);return this._requests.add(hn),hn.getPromise().then(()=>this._requests.delete(hn),()=>this._requests.delete(hn)),hn}}makeRequestWithTokens(X,xe){var We=this;return(0,le.Z)(function*(){const[ht,Mt]=yield Promise.all([We._getAuthToken(),We._getAppCheckToken()]);return We._makeRequest(X,xe,ht,Mt).getPromise()})()}}const Go="@firebase/storage";function Gs(Q,X){return Ra(Q=(0,qe.m9)(Q),X)}function Fi(Q,{instanceIdentifier:X}){const xe=Q.getProvider("app").getImmediate(),We=Q.getProvider("auth-internal"),ht=Q.getProvider("app-check-internal");return new Yo(xe,We,ht,X,vt.SDK_VERSION)}!function io(){(0,vt._registerComponent)(new Tt.wA("storage",Fi,"PUBLIC").setMultipleInstances(!0)),(0,vt.registerVersion)(Go,"0.11.2",""),(0,vt.registerVersion)(Go,"0.11.2","esm2017")}();class js{constructor(X,xe,We){this._delegate=X,this.task=xe,this.ref=We}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Po{constructor(X,xe){this._delegate=X,this._ref=xe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new js(this._delegate.snapshot,this,this._ref)}then(X,xe){return this._delegate.then(We=>{if(X)return X(new js(We,this,this._ref))},xe)}on(X,xe,We,ht){let Mt;return xe&&(Mt="function"==typeof xe?hn=>xe(new js(hn,this,this._ref)):{next:xe.next?hn=>xe.next(new js(hn,this,this._ref)):void 0,complete:xe.complete||void 0,error:xe.error||void 0}),this._delegate.on(X,Mt,We||void 0,ht||void 0)}}class cs{constructor(X,xe){this._delegate=X,this._service=xe}get prefixes(){return this._delegate.prefixes.map(X=>new jr(X,this._service))}get items(){return this._delegate.items.map(X=>new jr(X,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jr{constructor(X,xe){this._delegate=X,this.storage=xe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(X){const xe=function Ea(Q,X){return Xr(Q,X)}(this._delegate,X);return new jr(xe,this.storage)}get root(){return new jr(this._delegate.root,this.storage)}get parent(){const X=this._delegate.parent;return null==X?null:new jr(X,this.storage)}put(X,xe){return this._throwIfRoot("put"),new Po(function Ta(Q,X,xe){return function tn(Q,X,xe){return Q._throwIfRoot("uploadBytesResumable"),new is(Q,new Rn(X),xe)}(Q=(0,qe.m9)(Q),X,xe)}(this._delegate,X,xe),this)}putString(X,xe=gr.RAW,We){this._throwIfRoot("putString");const ht=di(xe,X),Mt=Object.assign({},We);return null==Mt.contentType&&null!=ht.contentType&&(Mt.contentType=ht.contentType),new Po(new is(this._delegate,new Rn(ht.data,!0),Mt),this)}listAll(){return function Na(Q){return function rn(Q){const X={prefixes:[],items:[]};return Ln(Q,X).then(()=>X)}(Q=(0,qe.m9)(Q))}(this._delegate).then(X=>new cs(X,this.storage))}list(X){return function Pi(Q,X){return Sr(Q=(0,qe.m9)(Q),X)}(this._delegate,X||void 0).then(xe=>new cs(xe,this.storage))}getMetadata(){return function na(Q){return function $s(Q){Q._throwIfRoot("getMetadata");const X=pi(Q.storage,Q._location,he());return Q.storage.makeRequestWithTokens(X,As)}(Q=(0,qe.m9)(Q))}(this._delegate)}updateMetadata(X){return function Fr(Q,X){return function Ni(Q,X){Q._throwIfRoot("updateMetadata");const xe=function Ns(Q,X,xe,We){const Mt=yi(X.fullServerUrl(),Q.host,Q._protocol),qn=Zn(xe,We),lr=Q.maxOperationRetryTime,ni=new Jt(Mt,"PATCH",Yn(Q,We),lr);return ni.headers={"Content-Type":"application/json; charset=utf-8"},ni.body=qn,ni.errorHandler=fi(X),ni}(Q.storage,Q._location,X,he());return Q.storage.makeRequestWithTokens(xe,As)}(Q=(0,qe.m9)(Q),X)}(this._delegate,X)}getDownloadURL(){return function go(Q){return ls(Q=(0,qe.m9)(Q))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Hs(Q){return function Li(Q){Q._throwIfRoot("deleteObject");const X=function la(Q,X){const We=yi(X.fullServerUrl(),Q.host,Q._protocol),qn=new Jt(We,"DELETE",function hn(Kn,lr){},Q.maxOperationRetryTime);return qn.successCodes=[200,204],qn.errorHandler=fi(X),qn}(Q.storage,Q._location);return Q.storage.makeRequestWithTokens(X,As)}(Q=(0,qe.m9)(Q))}(this._delegate)}_throwIfRoot(X){if(""===this._delegate._location.path)throw Kt(X)}}class Oo{constructor(X,xe){this.app=X,this._delegate=xe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(X){if(ca(X))throw jt("ref() expected a child path but got a URL, use refFromURL instead.");return new jr(Gs(this._delegate,X),this)}refFromURL(X){if(!ca(X))throw jt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{jn.makeFromUrl(X,this._delegate.host)}catch{throw jt("refFromUrl() expected a valid full URL but got an invalid one.")}return new jr(Gs(this._delegate,X),this)}setMaxUploadRetryTime(X){this._delegate.maxUploadRetryTime=X}setMaxOperationRetryTime(X){this._delegate.maxOperationRetryTime=X}useEmulator(X,xe,We={}){!function Is(Q,X,xe,We={}){!function qi(Q,X,xe,We={}){Q.host=`${X}:${xe}`,Q._protocol="http";const{mockUserToken:ht}=We;ht&&(Q._overrideAuthToken="string"==typeof ht?ht:(0,qe.Sg)(ht,Q.app.options.projectId))}(Q,X,xe,We)}(this._delegate,X,xe,We)}}function ca(Q){return/^[A-Za-z]+:\/\//.test(Q)}function Wa(Q,{instanceIdentifier:X}){const xe=Q.getProvider("app-compat").getImmediate(),We=Q.getProvider("storage").getImmediate({identifier:X});return new Oo(xe,We)}!function Wi(Q){const X={TaskState:Ds,TaskEvent:ro,StringFormat:gr,Storage:Oo,Reference:jr};Q.INTERNAL.registerComponent(new Tt.wA("storage-compat",Wa,"PUBLIC").setServiceProps(X).setMultipleInstances(!0)),Q.registerVersion("@firebase/storage-compat","0.3.2")}(wt.Z);var To=H(8697),Ca=H(7142);function La(Q){const X=function Ro(Q){return new y.y(X=>{const xe=hn=>X.next(hn);xe(Q.snapshot);const Mt=Q.on("state_changed",xe);return Q.then(hn=>{xe(hn),X.complete()},hn=>{xe(Q.snapshot),(hn=>{X.error(hn)})(hn)}),function(){Mt()}}).pipe(function $e(Q,X=V.z){return(0,Ce.e)((xe,We)=>{let ht=null,Mt=null,hn=null;const qn=()=>{if(ht){ht.unsubscribe(),ht=null;const lr=Mt;Mt=null,We.next(lr)}};function Kn(){const lr=hn+Q,ni=X.now();if(ni<lr)return ht=this.schedule(void 0,lr-ni),void We.add(ht);qn()}xe.subscribe((0,De.x)(We,lr=>{Mt=lr,hn=X.now(),ht||(ht=X.schedule(Kn,Q),We.add(ht))},()=>{qn(),We.complete()},void 0,()=>{Mt=ht=null}))})}(0))}(Q);return{task:Q,then:Q.then.bind(Q),catch:Q.catch.bind(Q),pause:Q.pause.bind(Q),cancel:Q.cancel.bind(Q),resume:Q.resume.bind(Q),snapshotChanges:()=>X,percentageChanges:()=>X.pipe((0,Xe.U)(xe=>xe.bytesTransferred/xe.totalBytes*100))}}function cu(Q){return{getDownloadURL:()=>(0,fe.of)(void 0).pipe(Se.fc,(0,et.w)(()=>Q.getDownloadURL()),Se.iC),getMetadata:()=>(0,fe.of)(void 0).pipe(Se.fc,(0,et.w)(()=>Q.getMetadata()),Se.iC),delete:()=>(0,se.D)(Q.delete()),child:X=>cu(Q.child(X)),updateMetadata:X=>(0,se.D)(Q.updateMetadata(X)),put:(X,xe)=>La(Q.put(X,xe)),putString:(X,xe,We)=>La(Q.putString(X,xe,We)),list:X=>(0,se.D)(Q.list(X)),listAll:()=>(0,se.D)(Q.listAll())}}const xl=new Re.OlP("angularfire2.storageBucket"),Ki=new Re.OlP("angularfire2.storage.maxUploadRetryTime"),du=new Re.OlP("angularfire2.storage.maxOperationRetryTime"),ee=new Re.OlP("angularfire2.storage.use-emulator");let K=(()=>{class Q{constructor(xe,We,ht,Mt,hn,qn,Kn,lr,ni,Oi){const Lr=(0,Le.on)(xe,hn,We);this.storage=(0,Le.cc)(`${Lr.name}.storage.${ht}`,"AngularFireStorage",Lr.name,()=>{const ai=hn.runOutsideAngular(()=>Lr.storage(ht||void 0)),Tr=ni;return Tr&&ai.useEmulator(...Tr),Kn&&ai.setMaxUploadRetryTime(Kn),lr&&ai.setMaxOperationRetryTime(lr),ai},[Kn,lr])}ref(xe){return cu(this.storage.ref(xe))}refFromURL(xe){return cu(this.storage.refFromURL(xe))}upload(xe,We,ht){return cu(this.storage.ref(xe)).put(We,ht)}}return Q.\u0275fac=function(xe){return new(xe||Q)(Re.LFG(Le.Dh),Re.LFG(Le.xv,8),Re.LFG(xl,8),Re.LFG(Re.Lbi),Re.LFG(Re.R0b),Re.LFG(Se.HU),Re.LFG(Ki,8),Re.LFG(du,8),Re.LFG(ee,8),Re.LFG(To.nm,8))},Q.\u0275prov=Re.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"any"}),Q})(),ke=(()=>{class Q{}return Q.\u0275fac=function(xe){return new(xe||Q)},Q.\u0275mod=Re.oAB({type:Q}),Q.\u0275inj=Re.cJS({}),Q})(),Wt=(()=>{class Q{constructor(){Ca.Z.registerVersion("angularfire",Se.q4.full,"gcs-compat")}}return Q.\u0275fac=function(xe){return new(xe||Q)},Q.\u0275mod=Re.oAB({type:Q}),Q.\u0275inj=Re.cJS({providers:[K],imports:[ke]}),Q})()},6304:(nn,st,H)=>{"use strict";H.d(st,{Dh:()=>Xe,GT:()=>De,cc:()=>le,hO:()=>wt,on:()=>Se,pX:()=>Ce,xv:()=>et});var y=H(5879),fe=H(7142),se=H(8186);nn=H.hmd(nn);const V=["ngOnDestroy"],Ce=(je,Ve,J,Y={})=>new Proxy(je,{get:(Ee,_e)=>J.runOutsideAngular(()=>{var Fe;if(je[_e])return!(null===(Fe=Y?.spy)||void 0===Fe)&&Fe.get&&Y.spy.get(_e,je[_e]),je[_e];if(V.indexOf(_e)>-1)return()=>{};const ut=Ve.toPromise().then(W=>{const ne=W&&W[_e];return"function"==typeof ne?ne.bind(W):ne&&ne.then?ne.then(Pe=>J.run(()=>Pe)):J.run(()=>ne)});return new Proxy(()=>{},{get:(W,ne)=>ut[ne],apply:(W,ne,Pe)=>ut.then(bt=>{var Bt;const $t=bt&&bt(...Pe);return!(null===(Bt=Y?.spy)||void 0===Bt)&&Bt.apply&&Y.spy.apply(_e,Pe,$t),$t})})})}),De=(je,Ve)=>{Ve.forEach(J=>{Object.getOwnPropertyNames(J.prototype||J).forEach(Y=>{Object.defineProperty(je.prototype,Y,Object.getOwnPropertyDescriptor(J.prototype||J,Y))})})};class $e{constructor(Ve){return Ve}}const Xe=new y.OlP("angularfire2.app.options"),et=new y.OlP("angularfire2.app.name");function Se(je,Ve,J){const Ee="object"==typeof J&&J||{};Ee.name=Ee.name||"string"==typeof J&&J||"[DEFAULT]";const Fe=fe.Z.apps.filter(ut=>ut&&ut.name===Ee.name)[0]||Ve.runOutsideAngular(()=>fe.Z.initializeApp(je,Ee));try{JSON.stringify(je)!==JSON.stringify(Fe.options)&&Re("error",`${Fe.name} Firebase App already initialized with different options${nn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new $e(Fe)}const Re=(je,...Ve)=>{(0,y.X6Q)()&&typeof console<"u"&&console[je](...Ve)},Le={provide:$e,useFactory:Se,deps:[Xe,y.R0b,[new y.FiY,et]]};let wt=(()=>{class je{constructor(J){fe.Z.registerVersion("angularfire",se.q4.full,"core"),fe.Z.registerVersion("angularfire",se.q4.full,"app-compat"),fe.Z.registerVersion("angular",y.q4F.full,J.toString())}static initializeApp(J,Y){return{ngModule:je,providers:[{provide:Xe,useValue:J},{provide:et,useValue:Y}]}}}return je.\u0275fac=function(J){return new(J||je)(y.LFG(y.Lbi))},je.\u0275mod=y.oAB({type:je}),je.\u0275inj=y.cJS({providers:[Le]}),je})();function le(je,Ve,J,Y,Ee){const[,_e,Fe]=globalThis.\u0275AngularfireInstanceCache.find(ut=>ut[0]===je)||[];if(_e)return function vt(je,Ve){try{return je.toString()===Ve.toString()}catch{return je===Ve}}(Ee,Fe)||(Tt("error",`${Ve} was already initialized on the ${J} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),Tt("warn",{is:Ee,was:Fe})),_e;{const ut=Y();return globalThis.\u0275AngularfireInstanceCache.push([je,ut,Ee]),ut}}const qe=!!nn.hot,Tt=(je,...Ve)=>{(0,y.X6Q)()&&typeof console<"u"&&console[je](...Ve)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(nn,st,H)=>{"use strict";H.d(st,{q4:()=>Io,iC:()=>tu,fc:()=>xu,HU:()=>eu,vb:()=>kh,JM:()=>Ja});var y=H(5879),fe=H(3182),se=H(5861),V=H(534),Ce=H(9058),De=H(4537),$e=H(7879);const Xe=(P,U)=>U.some(de=>P instanceof de);let et,Se;const wt=new WeakMap,le=new WeakMap,vt=new WeakMap,qe=new WeakMap,Tt=new WeakMap;let J={get(P,U,de){if(P instanceof IDBTransaction){if("done"===U)return le.get(P);if("objectStoreNames"===U)return P.objectStoreNames||vt.get(P);if("store"===U)return de.objectStoreNames[1]?void 0:de.objectStore(de.objectStoreNames[0])}return Fe(P[U])},set:(P,U,de)=>(P[U]=de,!0),has:(P,U)=>P instanceof IDBTransaction&&("done"===U||"store"===U)||U in P};function _e(P){return"function"==typeof P?function Ee(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Le(){return Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...U){return P.apply(ut(this),U),Fe(wt.get(this))}:function(...U){return Fe(P.apply(ut(this),U))}:function(U,...de){const Ue=P.call(ut(this),U,...de);return vt.set(Ue,U.sort?U.sort():[U]),Fe(Ue)}}(P):(P instanceof IDBTransaction&&function Ve(P){if(le.has(P))return;const U=new Promise((de,Ue)=>{const pt=()=>{P.removeEventListener("complete",Dt),P.removeEventListener("error",zt),P.removeEventListener("abort",zt)},Dt=()=>{de(),pt()},zt=()=>{Ue(P.error||new DOMException("AbortError","AbortError")),pt()};P.addEventListener("complete",Dt),P.addEventListener("error",zt),P.addEventListener("abort",zt)});le.set(P,U)}(P),Xe(P,function Re(){return et||(et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,J):P)}function Fe(P){if(P instanceof IDBRequest)return function je(P){const U=new Promise((de,Ue)=>{const pt=()=>{P.removeEventListener("success",Dt),P.removeEventListener("error",zt)},Dt=()=>{de(Fe(P.result)),pt()},zt=()=>{Ue(P.error),pt()};P.addEventListener("success",Dt),P.addEventListener("error",zt)});return U.then(de=>{de instanceof IDBCursor&&wt.set(de,P)}).catch(()=>{}),Tt.set(U,P),U}(P);if(qe.has(P))return qe.get(P);const U=_e(P);return U!==P&&(qe.set(P,U),Tt.set(U,P)),U}const ut=P=>Tt.get(P),Pe=["get","getKey","getAll","getAllKeys","count"],bt=["put","add","delete","clear"],Bt=new Map;function $t(P,U){if(!(P instanceof IDBDatabase)||U in P||"string"!=typeof U)return;if(Bt.get(U))return Bt.get(U);const de=U.replace(/FromIndex$/,""),Ue=U!==de,pt=bt.includes(de);if(!(de in(Ue?IDBIndex:IDBObjectStore).prototype)||!pt&&!Pe.includes(de))return;const Dt=function(){var zt=(0,se.Z)(function*(Un,...Vn){const dr=this.transaction(Un,pt?"readwrite":"readonly");let Wr=dr.store;return Ue&&(Wr=Wr.index(Vn.shift())),(yield Promise.all([Wr[de](...Vn),pt&&dr.done]))[0]});return function(Vn){return zt.apply(this,arguments)}}();return Bt.set(U,Dt),Dt}!function Y(P){J=P(J)}(P=>({...P,get:(U,de,Ue)=>$t(U,de)||P.get(U,de,Ue),has:(U,de)=>!!$t(U,de)||P.has(U,de)}));const Xt="@firebase/installations",ot="0.6.4",Ye=1e4,rt=`w:${ot}`,Qe="FIS_v2",dt="https://firebaseinstallations.googleapis.com/v1",at=36e5,Lt=new Ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Kt(P){return P instanceof Ce.ZR&&P.code.includes("request-failed")}function wn({projectId:P}){return`${dt}/projects/${P}/installations`}function Fn(P){return{token:P.token,requestStatus:2,expiresIn:Yr(P.expiresIn),creationTime:Date.now()}}function jn(P,U){return zn.apply(this,arguments)}function zn(){return(zn=(0,se.Z)(function*(P,U){const Ue=(yield U.json()).error;return Lt.create("request-failed",{requestName:P,serverCode:Ue.code,serverMessage:Ue.message,serverStatus:Ue.status})})).apply(this,arguments)}function ur({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function $n(P){return wr.apply(this,arguments)}function wr(){return(wr=(0,se.Z)(function*(P){const U=yield P();return U.status>=500&&U.status<600?P():U})).apply(this,arguments)}function Yr(P){return Number(P.replace("s","000"))}function Mr(){return(Mr=(0,se.Z)(function*({appConfig:P,heartbeatServiceProvider:U},{fid:de}){const Ue=wn(P),pt=ur(P),Dt=U.getImmediate({optional:!0});if(Dt){const dr=yield Dt.getHeartbeatsHeader();dr&&pt.append("x-firebase-client",dr)}const Un={method:"POST",headers:pt,body:JSON.stringify({fid:de,authVersion:Qe,appId:P.appId,sdkVersion:rt})},Vn=yield $n(()=>fetch(Ue,Un));if(Vn.ok){const dr=yield Vn.json();return{fid:dr.fid||de,registrationStatus:2,refreshToken:dr.refreshToken,authToken:Fn(dr.authToken)}}throw yield jn("Create Installation",Vn)})).apply(this,arguments)}function Pr(P){return new Promise(U=>{setTimeout(U,P)})}const Ir=/^[cdef][\w-]{21}$/,dn="";function Bn(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const de=function Nn(P){return function yi(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return Ir.test(de)?de:dn}catch{return dn}}function xr(P){return`${P.appName}!${P.appId}`}const sr=new Map;function Gi(P,U){const de=xr(P);Ws(de,U),function Rr(P,U){const de=function mr(){return!On&&"BroadcastChannel"in self&&(On=new BroadcastChannel("[Firebase] FID Change"),On.onmessage=P=>{Ws(P.data.key,P.data.fid)}),On}();de&&de.postMessage({key:P,fid:U}),function ns(){0===sr.size&&On&&(On.close(),On=null)}()}(de,U)}function Ws(P,U){const de=sr.get(P);if(de)for(const Ue of de)Ue(U)}let On=null;const gr="firebase-installations-database",zi=1,di="firebase-installations-store";let Xi=null;function bi(){return Xi||(Xi=function W(P,U,{blocked:de,upgrade:Ue,blocking:pt,terminated:Dt}={}){const zt=indexedDB.open(P,U),Un=Fe(zt);return Ue&&zt.addEventListener("upgradeneeded",Vn=>{Ue(Fe(zt.result),Vn.oldVersion,Vn.newVersion,Fe(zt.transaction))}),de&&zt.addEventListener("blocked",()=>de()),Un.then(Vn=>{Dt&&Vn.addEventListener("close",()=>Dt()),pt&&Vn.addEventListener("versionchange",()=>pt())}).catch(()=>{}),Un}(gr,zi,{upgrade:(P,U)=>{0===U&&P.createObjectStore(di)}})),Xi}function wi(P,U){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,se.Z)(function*(P,U){const de=xr(P),pt=(yield bi()).transaction(di,"readwrite"),Dt=pt.objectStore(di),zt=yield Dt.get(de);return yield Dt.put(U,de),yield pt.done,(!zt||zt.fid!==U.fid)&&Gi(P,U.fid),U})).apply(this,arguments)}function os(P){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,se.Z)(function*(P){const U=xr(P),Ue=(yield bi()).transaction(di,"readwrite");yield Ue.objectStore(di).delete(U),yield Ue.done})).apply(this,arguments)}function vs(P,U){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,se.Z)(function*(P,U){const de=xr(P),pt=(yield bi()).transaction(di,"readwrite"),Dt=pt.objectStore(di),zt=yield Dt.get(de),Un=U(zt);return void 0===Un?yield Dt.delete(de):yield Dt.put(Un,de),yield pt.done,Un&&(!zt||zt.fid!==Un.fid)&&Gi(P,Un.fid),Un})).apply(this,arguments)}function tt(P){return ve.apply(this,arguments)}function ve(){return ve=(0,se.Z)(function*(P){let U;const de=yield vs(P.appConfig,Ue=>{const pt=function be(P){return pe(P||{fid:Bn(),registrationStatus:0})}(Ue),Dt=function ye(P,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(Lt.create("app-offline"))};const de={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},Ue=function Ae(P,U){return yt.apply(this,arguments)}(P,de);return{installationEntry:de,registrationPromise:Ue}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:Yt(P)}:{installationEntry:U}}(P,pt);return U=Dt.registrationPromise,Dt.installationEntry});return de.fid===dn?{installationEntry:yield U}:{installationEntry:de,registrationPromise:U}}),ve.apply(this,arguments)}function yt(){return yt=(0,se.Z)(function*(P,U){try{const de=yield function Hr(P,U){return Mr.apply(this,arguments)}(P,U);return wi(P.appConfig,de)}catch(de){throw Kt(de)&&409===de.customData.serverCode?yield os(P.appConfig):yield wi(P.appConfig,{fid:U.fid,registrationStatus:0}),de}}),yt.apply(this,arguments)}function Yt(P){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,se.Z)(function*(P){let U=yield he(P.appConfig);for(;1===U.registrationStatus;)yield Pr(100),U=yield he(P.appConfig);if(0===U.registrationStatus){const{installationEntry:de,registrationPromise:Ue}=yield tt(P);return Ue||de}return U})).apply(this,arguments)}function he(P){return vs(P,U=>{if(!U)throw Lt.create("installation-not-found");return pe(U)})}function pe(P){return function Ne(P){return 1===P.registrationStatus&&P.registrationTime+Ye<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function cn(){return(cn=(0,se.Z)(function*({appConfig:P,heartbeatServiceProvider:U},de){const Ue=function Zn(P,{fid:U}){return`${wn(P)}/${U}/authTokens:generate`}(P,de),pt=function rr(P,{refreshToken:U}){const de=ur(P);return de.append("Authorization",function Cr(P){return`${Qe} ${P}`}(U)),de}(P,de),Dt=U.getImmediate({optional:!0});if(Dt){const dr=yield Dt.getHeartbeatsHeader();dr&&pt.append("x-firebase-client",dr)}const Un={method:"POST",headers:pt,body:JSON.stringify({installation:{sdkVersion:rt,appId:P.appId}})},Vn=yield $n(()=>fetch(Ue,Un));if(Vn.ok)return Fn(yield Vn.json());throw yield jn("Generate Auth Token",Vn)})).apply(this,arguments)}function kr(P){return ti.apply(this,arguments)}function ti(){return ti=(0,se.Z)(function*(P,U=!1){let de;const Ue=yield vs(P.appConfig,Dt=>{if(!ir(Dt))throw Lt.create("not-registered");const zt=Dt.authToken;if(!U&&function yr(P){return 2===P.requestStatus&&!function Qr(P){const U=Date.now();return U<P.creationTime||P.creationTime+P.expiresIn<U+at}(P)}(zt))return Dt;if(1===zt.requestStatus)return de=function Ut(P,U){return Et.apply(this,arguments)}(P,U),Dt;{if(!navigator.onLine)throw Lt.create("app-offline");const Un=function fi(P){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:U})}(Dt);return de=function An(P,U){return Yn.apply(this,arguments)}(P,Un),Un}});return de?yield de:Ue.authToken}),ti.apply(this,arguments)}function Et(){return(Et=(0,se.Z)(function*(P,U){let de=yield Jt(P.appConfig);for(;1===de.authToken.requestStatus;)yield Pr(100),de=yield Jt(P.appConfig);const Ue=de.authToken;return 0===Ue.requestStatus?kr(P,U):Ue})).apply(this,arguments)}function Jt(P){return vs(P,U=>{if(!ir(U))throw Lt.create("not-registered");return function pi(P){return 1===P.requestStatus&&P.requestTime+Ye<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function Yn(){return Yn=(0,se.Z)(function*(P,U){try{const de=yield function ct(P,U){return cn.apply(this,arguments)}(P,U),Ue=Object.assign(Object.assign({},U),{authToken:de});return yield wi(P.appConfig,Ue),de}catch(de){if(!Kt(de)||401!==de.customData.serverCode&&404!==de.customData.serverCode){const Ue=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield wi(P.appConfig,Ue)}else yield os(P.appConfig);throw de}}),Yn.apply(this,arguments)}function ir(P){return void 0!==P&&2===P.registrationStatus}function Ks(){return(Ks=(0,se.Z)(function*(P){const U=P,{installationEntry:de,registrationPromise:Ue}=yield tt(U);return Ue?Ue.catch(console.error):kr(U).catch(console.error),de.fid})).apply(this,arguments)}function Ns(){return Ns=(0,se.Z)(function*(P,U=!1){const de=P;return yield function la(P){return Ls.apply(this,arguments)}(de),(yield kr(de,U)).token}),Ns.apply(this,arguments)}function Ls(){return(Ls=(0,se.Z)(function*(P){const{registrationPromise:U}=yield tt(P);U&&(yield U)})).apply(this,arguments)}function ro(P){return Lt.create("missing-app-config-values",{valueName:P})}const Ds="installations",ju=P=>{const U=P.getProvider("app").getImmediate(),de=function _a(P){if(!P||!P.options)throw ro("App Configuration");if(!P.name)throw ro("App Name");const U=["projectId","apiKey","appId"];for(const de of U)if(!P.options[de])throw ro(de);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(U);return{app:U,appConfig:de,heartbeatServiceProvider:(0,V._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},Fs=P=>{const U=P.getProvider("app").getImmediate(),de=(0,V._getProvider)(U,Ds).getImmediate();return{getId:()=>function rs(P){return Ks.apply(this,arguments)}(de),getToken:pt=>function $o(P){return Ns.apply(this,arguments)}(de,pt)}};(function za(){(0,V._registerComponent)(new De.wA(Ds,ju,"PUBLIC")),(0,V._registerComponent)(new De.wA("installations-internal",Fs,"PRIVATE"))})(),(0,V.registerVersion)(Xt,ot),(0,V.registerVersion)(Xt,ot,"esm2017");const as="@firebase/remote-config",Ci=new Ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ji{constructor(U,de,Ue,pt){this.client=U,this.storage=de,this.storageCache=Ue,this.logger=pt}isCachedDataFresh(U,de){if(!de)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ue=Date.now()-de,pt=Ue<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ue}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${pt}.`),pt}fetch(U){var de=this;return(0,se.Z)(function*(){const[Ue,pt]=yield Promise.all([de.storage.getLastSuccessfulFetchTimestampMillis(),de.storage.getLastSuccessfulFetchResponse()]);if(pt&&de.isCachedDataFresh(U.cacheMaxAgeMillis,Ue))return pt;U.eTag=pt&&pt.eTag;const Dt=yield de.client.fetch(U),zt=[de.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Dt.status&&zt.push(de.storage.setLastSuccessfulFetchResponse(Dt)),yield Promise.all(zt),Dt})()}}function Ra(P=navigator){return P.languages&&P.languages[0]||P.language}class ys{constructor(U,de,Ue,pt,Dt,zt){this.firebaseInstallations=U,this.sdkVersion=de,this.namespace=Ue,this.projectId=pt,this.apiKey=Dt,this.appId=zt}fetch(U){var de=this;return(0,se.Z)(function*(){const[Ue,pt]=yield Promise.all([de.firebaseInstallations.getId(),de.firebaseInstallations.getToken()]),zt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${de.projectId}/namespaces/${de.namespace}:fetch?key=${de.apiKey}`,Un={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},Vn={sdk_version:de.sdkVersion,app_instance_id:Ue,app_instance_id_token:pt,app_id:de.appId,language_code:Ra()},dr={method:"POST",headers:Un,body:JSON.stringify(Vn)},Wr=fetch(zt,dr),ei=new Promise((Vo,mu)=>{U.signal.addEventListener(()=>{const Ku=new Error("The operation was aborted.");Ku.name="AbortError",mu(Ku)})});let xa;try{yield Promise.race([Wr,ei]),xa=yield Wr}catch(Vo){let mu="fetch-client-network";throw"AbortError"===Vo?.name&&(mu="fetch-timeout"),Ci.create(mu,{originalErrorMessage:Vo?.message})}let Ur=xa.status;const jl=xa.headers.get("ETag")||void 0;let ps,Aa;if(200===xa.status){let Vo;try{Vo=yield xa.json()}catch(mu){throw Ci.create("fetch-client-parse",{originalErrorMessage:mu?.message})}ps=Vo.entries,Aa=Vo.state}if("INSTANCE_STATE_UNSPECIFIED"===Aa?Ur=500:"NO_CHANGE"===Aa?Ur=304:("NO_TEMPLATE"===Aa||"EMPTY_CONFIG"===Aa)&&(ps={}),304!==Ur&&200!==Ur)throw Ci.create("fetch-status",{httpStatus:Ur});return{status:Ur,eTag:jl,config:ps}})()}}class Go{constructor(U,de){this.client=U,this.storage=de}fetch(U){var de=this;return(0,se.Z)(function*(){const Ue=(yield de.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return de.attemptFetch(U,Ue)})()}attemptFetch(U,{throttleEndTimeMillis:de,backoffCount:Ue}){var pt=this;return(0,se.Z)(function*(){yield function qi(P,U){return new Promise((de,Ue)=>{const pt=Math.max(U-Date.now(),0),Dt=setTimeout(de,pt);P.addEventListener(()=>{clearTimeout(Dt),Ue(Ci.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,de);try{const Dt=yield pt.client.fetch(U);return yield pt.storage.deleteThrottleMetadata(),Dt}catch(Dt){if(!function Yo(P){if(!(P instanceof Ce.ZR&&P.customData))return!1;const U=Number(P.customData.httpStatus);return 429===U||500===U||503===U||504===U}(Dt))throw Dt;const zt={throttleEndTimeMillis:Date.now()+(0,Ce.$s)(Ue),backoffCount:Ue+1};return yield pt.storage.setThrottleMetadata(zt),pt.attemptFetch(U,zt)}})()}}class Eu{constructor(U,de,Ue,pt,Dt){this.app=U,this._client=de,this._storageCache=Ue,this._storage=pt,this._logger=Dt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ks(P,U){const de=P.target.error||void 0;return Ci.create(U,{originalErrorMessage:de&&de?.message})}const Si="app_namespace_store";class Pi{constructor(U,de,Ue,pt=function Fr(){return new Promise((P,U)=>{try{const de=indexedDB.open("firebase_remote_config",1);de.onerror=Ue=>{U(ks(Ue,"storage-open"))},de.onsuccess=Ue=>{P(Ue.target.result)},de.onupgradeneeded=Ue=>{0===Ue.oldVersion&&Ue.target.result.createObjectStore(Si,{keyPath:"compositeKey"})}}catch(de){U(Ci.create("storage-open",{originalErrorMessage:de?.message}))}})}()){this.appId=U,this.appName=de,this.namespace=Ue,this.openDbPromise=pt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var de=this;return(0,se.Z)(function*(){const Ue=yield de.openDbPromise;return new Promise((pt,Dt)=>{const Un=Ue.transaction([Si],"readonly").objectStore(Si),Vn=de.createCompositeKey(U);try{const dr=Un.get(Vn);dr.onerror=Wr=>{Dt(ks(Wr,"storage-get"))},dr.onsuccess=Wr=>{const ei=Wr.target.result;pt(ei?ei.value:void 0)}}catch(dr){Dt(Ci.create("storage-get",{originalErrorMessage:dr?.message}))}})})()}set(U,de){var Ue=this;return(0,se.Z)(function*(){const pt=yield Ue.openDbPromise;return new Promise((Dt,zt)=>{const Vn=pt.transaction([Si],"readwrite").objectStore(Si),dr=Ue.createCompositeKey(U);try{const Wr=Vn.put({compositeKey:dr,value:de});Wr.onerror=ei=>{zt(ks(ei,"storage-set"))},Wr.onsuccess=()=>{Dt()}}catch(Wr){zt(Ci.create("storage-set",{originalErrorMessage:Wr?.message}))}})})()}delete(U){var de=this;return(0,se.Z)(function*(){const Ue=yield de.openDbPromise;return new Promise((pt,Dt)=>{const Un=Ue.transaction([Si],"readwrite").objectStore(Si),Vn=de.createCompositeKey(U);try{const dr=Un.delete(Vn);dr.onerror=Wr=>{Dt(ks(Wr,"storage-delete"))},dr.onsuccess=()=>{pt()}}catch(dr){Dt(Ci.create("storage-delete",{originalErrorMessage:dr?.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class Na{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,se.Z)(function*(){const de=U.storage.getLastFetchStatus(),Ue=U.storage.getLastSuccessfulFetchTimestampMillis(),pt=U.storage.getActiveConfig(),Dt=yield de;Dt&&(U.lastFetchStatus=Dt);const zt=yield Ue;zt&&(U.lastSuccessfulFetchTimestampMillis=zt);const Un=yield pt;Un&&(U.activeConfig=Un)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function Ea(){return uu.apply(this,arguments)}function uu(){return(uu=(0,se.Z)(function*(){if(!(0,Ce.hl)())return!1;try{return yield(0,Ce.eu)()}catch{return!1}})).apply(this,arguments)}!function go(){(0,V._registerComponent)(new De.wA("remote-config",function P(U,{instanceIdentifier:de}){const Ue=U.getProvider("app").getImmediate(),pt=U.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ci.create("registration-window");if(!(0,Ce.hl)())throw Ci.create("indexed-db-unavailable");const{projectId:Dt,apiKey:zt,appId:Un}=Ue.options;if(!Dt)throw Ci.create("registration-project-id");if(!zt)throw Ci.create("registration-api-key");if(!Un)throw Ci.create("registration-app-id");const Vn=new Pi(Un,Ue.name,de=de||"firebase"),dr=new Na(Vn),Wr=new $e.Yd(as);Wr.logLevel=$e.in.ERROR;const ei=new ys(pt,V.SDK_VERSION,de,Dt,zt,Un),xa=new Go(ei,Vn),Ur=new Ji(xa,Vn,dr,Wr),jl=new Eu(Ue,Ur,dr,Vn,Wr);return function Ln(P){const U=(0,Ce.m9)(P);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(jl),jl},"PUBLIC").setMultipleInstances(!0)),(0,V.registerVersion)(as,"0.4.4"),(0,V.registerVersion)(as,"0.4.4","esm2017")}();const Is=(P,U)=>U.some(de=>P instanceof de);let tc,_s;const js=new WeakMap,Po=new WeakMap,cs=new WeakMap,jr=new WeakMap,Oo=new WeakMap;let lu={get(P,U,de){if(P instanceof IDBTransaction){if("done"===U)return Po.get(P);if("objectStoreNames"===U)return P.objectStoreNames||cs.get(P);if("store"===U)return de.objectStoreNames[1]?void 0:de.objectStore(de.objectStoreNames[0])}return To(P[U])},set:(P,U,de)=>(P[U]=de,!0),has:(P,U)=>P instanceof IDBTransaction&&("done"===U||"store"===U)||U in P};function Wi(P){return"function"==typeof P?function Wa(P){return P!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function io(){return _s||(_s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(P)?function(...U){return P.apply(Ca(this),U),To(js.get(this))}:function(...U){return To(P.apply(Ca(this),U))}:function(U,...de){const Ue=P.call(Ca(this),U,...de);return cs.set(Ue,U.sort?U.sort():[U]),To(Ue)}}(P):(P instanceof IDBTransaction&&function Bu(P){if(Po.has(P))return;const U=new Promise((de,Ue)=>{const pt=()=>{P.removeEventListener("complete",Dt),P.removeEventListener("error",zt),P.removeEventListener("abort",zt)},Dt=()=>{de(),pt()},zt=()=>{Ue(P.error||new DOMException("AbortError","AbortError")),pt()};P.addEventListener("complete",Dt),P.addEventListener("error",zt),P.addEventListener("abort",zt)});Po.set(P,U)}(P),Is(P,function Fi(){return tc||(tc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(P,lu):P)}function To(P){if(P instanceof IDBRequest)return function ca(P){const U=new Promise((de,Ue)=>{const pt=()=>{P.removeEventListener("success",Dt),P.removeEventListener("error",zt)},Dt=()=>{de(To(P.result)),pt()},zt=()=>{Ue(P.error),pt()};P.addEventListener("success",Dt),P.addEventListener("error",zt)});return U.then(de=>{de instanceof IDBCursor&&js.set(de,P)}).catch(()=>{}),Oo.set(U,P),U}(P);if(jr.has(P))return jr.get(P);const U=Wi(P);return U!==P&&(jr.set(P,U),Oo.set(U,P)),U}const Ca=P=>Oo.get(P);function Ro(P,U,{blocked:de,upgrade:Ue,blocking:pt,terminated:Dt}={}){const zt=indexedDB.open(P,U),Un=To(zt);return Ue&&zt.addEventListener("upgradeneeded",Vn=>{Ue(To(zt.result),Vn.oldVersion,Vn.newVersion,To(zt.transaction))}),de&&zt.addEventListener("blocked",()=>de()),Un.then(Vn=>{Dt&&Vn.addEventListener("close",()=>Dt()),pt&&Vn.addEventListener("versionchange",()=>pt())}).catch(()=>{}),Un}function La(P,{blocked:U}={}){const de=indexedDB.deleteDatabase(P);return U&&de.addEventListener("blocked",()=>U()),To(de).then(()=>{})}const cu=["get","getKey","getAll","getAllKeys","count"],xl=["put","add","delete","clear"],Ki=new Map;function du(P,U){if(!(P instanceof IDBDatabase)||U in P||"string"!=typeof U)return;if(Ki.get(U))return Ki.get(U);const de=U.replace(/FromIndex$/,""),Ue=U!==de,pt=xl.includes(de);if(!(de in(Ue?IDBIndex:IDBObjectStore).prototype)||!pt&&!cu.includes(de))return;const Dt=function(){var zt=(0,se.Z)(function*(Un,...Vn){const dr=this.transaction(Un,pt?"readwrite":"readonly");let Wr=dr.store;return Ue&&(Wr=Wr.index(Vn.shift())),(yield Promise.all([Wr[de](...Vn),pt&&dr.done]))[0]});return function(Vn){return zt.apply(this,arguments)}}();return Ki.set(U,Dt),Dt}!function wa(P){lu=P(lu)}(P=>({...P,get:(U,de,Ue)=>du(U,de)||P.get(U,de,Ue),has:(U,de)=>!!du(U,de)||P.has(U,de)}));const ee="/firebase-messaging-sw.js",K="/firebase-cloud-messaging-push-scope",G="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ke="https://fcmregistrations.googleapis.com/v1",Wt="google.c.a.c_id",Q="google.c.a.c_l",X="google.c.a.ts";var ht=(()=>((ht=ht||{}).PUSH_RECEIVED="push-received",ht.NOTIFICATION_CLICKED="notification-clicked",ht))();function Mt(P){const U=new Uint8Array(P);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hn(P){const de=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ue=atob(de),pt=new Uint8Array(Ue.length);for(let Dt=0;Dt<Ue.length;++Dt)pt[Dt]=Ue.charCodeAt(Dt);return pt}const qn="fcm_token_details_db",Kn=5,lr="fcm_token_object_Store";function Oi(){return Oi=(0,se.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Dt=>Dt.name).includes(qn))return null;let U=null;return(yield Ro(qn,Kn,{upgrade:(Ue=(0,se.Z)(function*(pt,Dt,zt,Un){var Vn;if(Dt<2||!pt.objectStoreNames.contains(lr))return;const dr=Un.objectStore(lr),Wr=yield dr.index("fcmSenderId").get(P);if(yield dr.clear(),Wr)if(2===Dt){const ei=Wr;if(!ei.auth||!ei.p256dh||!ei.endpoint)return;U={token:ei.fcmToken,createTime:null!==(Vn=ei.createTime)&&void 0!==Vn?Vn:Date.now(),subscriptionOptions:{auth:ei.auth,p256dh:ei.p256dh,endpoint:ei.endpoint,swScope:ei.swScope,vapidKey:"string"==typeof ei.vapidKey?ei.vapidKey:Mt(ei.vapidKey)}}}else if(3===Dt){const ei=Wr;U={token:ei.fcmToken,createTime:ei.createTime,subscriptionOptions:{auth:Mt(ei.auth),p256dh:Mt(ei.p256dh),endpoint:ei.endpoint,swScope:ei.swScope,vapidKey:Mt(ei.vapidKey)}}}else if(4===Dt){const ei=Wr;U={token:ei.fcmToken,createTime:ei.createTime,subscriptionOptions:{auth:Mt(ei.auth),p256dh:Mt(ei.p256dh),endpoint:ei.endpoint,swScope:ei.swScope,vapidKey:Mt(ei.vapidKey)}}}}),function(Dt,zt,Un,Vn){return Ue.apply(this,arguments)})})).close(),yield La(qn),yield La("fcm_vapid_details_db"),yield La("undefined"),function Lr(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:U}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}(U)?U:null;var Ue}),Oi.apply(this,arguments)}const ai="firebase-messaging-database",Tr=1,Zi="firebase-messaging-store";let ds=null;function Xs(){return ds||(ds=Ro(ai,Tr,{upgrade:(P,U)=>{0===U&&P.createObjectStore(Zi)}})),ds}function so(P){return ki.apply(this,arguments)}function ki(){return ki=(0,se.Z)(function*(P){const U=da(P),Ue=yield(yield Xs()).transaction(Zi).objectStore(Zi).get(U);if(Ue)return Ue;{const pt=yield function ni(P){return Oi.apply(this,arguments)}(P.appConfig.senderId);if(pt)return yield xs(P,pt),pt}}),ki.apply(this,arguments)}function xs(P,U){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,se.Z)(function*(P,U){const de=da(P),pt=(yield Xs()).transaction(Zi,"readwrite");return yield pt.objectStore(Zi).put(U,de),yield pt.done,U})).apply(this,arguments)}function Fa(){return(Fa=(0,se.Z)(function*(P){const U=da(P),Ue=(yield Xs()).transaction(Zi,"readwrite");yield Ue.objectStore(Zi).delete(U),yield Ue.done})).apply(this,arguments)}function da({appConfig:P}){return P.appId}const mo=new Ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function il(P,U){return Al.apply(this,arguments)}function Al(){return(Al=(0,se.Z)(function*(P,U){const de=yield Qo(P),Ue=al(U),pt={method:"POST",headers:de,body:JSON.stringify(Ue)};let Dt;try{Dt=yield(yield fetch(Ri(P.appConfig),pt)).json()}catch(zt){throw mo.create("token-subscribe-failed",{errorInfo:zt?.toString()})}if(Dt.error)throw mo.create("token-subscribe-failed",{errorInfo:Dt.error.message});if(!Dt.token)throw mo.create("token-subscribe-no-token");return Dt.token})).apply(this,arguments)}function sl(){return(sl=(0,se.Z)(function*(P,U){const de=yield Qo(P),Ue=al(U.subscriptionOptions),pt={method:"PATCH",headers:de,body:JSON.stringify(Ue)};let Dt;try{Dt=yield(yield fetch(`${Ri(P.appConfig)}/${U.token}`,pt)).json()}catch(zt){throw mo.create("token-update-failed",{errorInfo:zt?.toString()})}if(Dt.error)throw mo.create("token-update-failed",{errorInfo:Dt.error.message});if(!Dt.token)throw mo.create("token-update-no-token");return Dt.token})).apply(this,arguments)}function zo(P,U){return Za.apply(this,arguments)}function Za(){return(Za=(0,se.Z)(function*(P,U){const Ue={method:"DELETE",headers:yield Qo(P)};try{const Dt=yield(yield fetch(`${Ri(P.appConfig)}/${U}`,Ue)).json();if(Dt.error)throw mo.create("token-unsubscribe-failed",{errorInfo:Dt.error.message})}catch(pt){throw mo.create("token-unsubscribe-failed",{errorInfo:pt?.toString()})}})).apply(this,arguments)}function Ri({projectId:P}){return`${ke}/projects/${P}/registrations`}function Qo(P){return ol.apply(this,arguments)}function ol(){return(ol=(0,se.Z)(function*({appConfig:P,installations:U}){const de=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${de}`})})).apply(this,arguments)}function al({p256dh:P,auth:U,endpoint:de,vapidKey:Ue}){const pt={web:{endpoint:de,auth:U,p256dh:P}};return Ue!==G&&(pt.web.applicationPubKey=Ue),pt}const Uu=6048e5;function hu(){return hu=(0,se.Z)(function*(P){const U=yield function ra(P,U){return N.apply(this,arguments)}(P.swRegistration,P.vapidKey),de={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:U.endpoint,auth:Mt(U.getKey("auth")),p256dh:Mt(U.getKey("p256dh"))},Ue=yield so(P.firebaseDependencies);if(Ue){if(function ae(P,U){return U.vapidKey===P.vapidKey&&U.endpoint===P.endpoint&&U.auth===P.auth&&U.p256dh===P.p256dh}(Ue.subscriptionOptions,de))return Date.now()>=Ue.createTime+Uu?function Lo(P,U){return oo.apply(this,arguments)}(P,{token:Ue.token,createTime:Date.now(),subscriptionOptions:de}):Ue.token;try{yield zo(P.firebaseDependencies,Ue.token)}catch(pt){console.warn(pt)}return ul(P.firebaseDependencies,de)}return ul(P.firebaseDependencies,de)}),hu.apply(this,arguments)}function fu(){return fu=(0,se.Z)(function*(P){const U=yield so(P.firebaseDependencies);U&&(yield zo(P.firebaseDependencies,U.token),yield function hs(P){return Fa.apply(this,arguments)}(P.firebaseDependencies));const de=yield P.swRegistration.pushManager.getSubscription();return!de||de.unsubscribe()}),fu.apply(this,arguments)}function oo(){return oo=(0,se.Z)(function*(P,U){try{const de=yield function Ka(P,U){return sl.apply(this,arguments)}(P.firebaseDependencies,U),Ue=Object.assign(Object.assign({},U),{token:de,createTime:Date.now()});return yield xs(P.firebaseDependencies,Ue),de}catch(de){throw yield function No(P){return fu.apply(this,arguments)}(P),de}}),oo.apply(this,arguments)}function ul(P,U){return Br.apply(this,arguments)}function Br(){return(Br=(0,se.Z)(function*(P,U){const Ue={token:yield il(P,U),createTime:Date.now(),subscriptionOptions:U};return yield xs(P,Ue),Ue.token})).apply(this,arguments)}function N(){return(N=(0,se.Z)(function*(P,U){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hn(U)})})).apply(this,arguments)}function z(P){const U={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function Te(P,U){if(!U.notification)return;P.notification={};const de=U.notification.title;de&&(P.notification.title=de);const Ue=U.notification.body;Ue&&(P.notification.body=Ue);const pt=U.notification.image;pt&&(P.notification.image=pt);const Dt=U.notification.icon;Dt&&(P.notification.icon=Dt)}(U,P),function Ke(P,U){U.data&&(P.data=U.data)}(U,P),function Nt(P,U){var de,Ue,pt,Dt,zt;if(!(U.fcmOptions||null!==(de=U.notification)&&void 0!==de&&de.click_action))return;P.fcmOptions={};const Un=null!==(pt=null===(Ue=U.fcmOptions)||void 0===Ue?void 0:Ue.link)&&void 0!==pt?pt:null===(Dt=U.notification)||void 0===Dt?void 0:Dt.click_action;Un&&(P.fcmOptions.link=Un);const Vn=null===(zt=U.fcmOptions)||void 0===zt?void 0:zt.analytics_label;Vn&&(P.fcmOptions.analyticsLabel=Vn)}(U,P),U}function Jn(P,U){const de=[];for(let Ue=0;Ue<P.length;Ue++)de.push(P.charAt(Ue)),Ue<U.length&&de.push(U.charAt(Ue));return de.join("")}function Gr(P){return mo.create("missing-app-config-values",{valueName:P})}Jn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Jn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zr{constructor(U,de,Ue){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const pt=function es(P){if(!P||!P.options)throw Gr("App Configuration Object");if(!P.name)throw Gr("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:de}=P;for(const Ue of U)if(!de[Ue])throw Gr(Ue);return{appName:P.name,projectId:de.projectId,apiKey:de.apiKey,appId:de.appId,senderId:de.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:pt,installations:de,analyticsProvider:Ue}}_delete(){return Promise.resolve()}}function ji(){return(ji=(0,se.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(ee,{scope:K}),P.swRegistration.update().catch(()=>{})}catch(U){throw mo.create("failed-service-worker-registration",{browserErrorMessage:U?.message})}})).apply(this,arguments)}function Yi(){return(Yi=(0,se.Z)(function*(P,U){if(!U&&!P.swRegistration&&(yield function hr(P){return ji.apply(this,arguments)}(P)),U||!P.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw mo.create("invalid-sw-registration");P.swRegistration=U}})).apply(this,arguments)}function Qn(){return(Qn=(0,se.Z)(function*(P,U){U?P.vapidKey=U:P.vapidKey||(P.vapidKey=G)})).apply(this,arguments)}function Fo(){return Fo=(0,se.Z)(function*(P,U){if(!navigator)throw mo.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mo.create("permission-blocked");return yield function vr(P,U){return Qn.apply(this,arguments)}(P,U?.vapidKey),yield function Jr(P,U){return Yi.apply(this,arguments)}(P,U?.serviceWorkerRegistration),function Sa(P){return hu.apply(this,arguments)}(P)}),Fo.apply(this,arguments)}function ia(){return(ia=(0,se.Z)(function*(P,U,de){const Ue=function ja(P){switch(P){case ht.NOTIFICATION_CLICKED:return"notification_open";case ht.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(U);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(Ue,{message_id:de[Wt],message_name:de[Q],message_time:de[X],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function jo(){return jo=(0,se.Z)(function*(P,U){const de=U.data;if(!de.isFirebaseMessaging)return;P.onMessageHandler&&de.messageType===ht.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(z(de)):P.onMessageHandler.next(z(de)));const Ue=de.data;(function Zt(P){return"object"==typeof P&&!!P&&Wt in P})(Ue)&&"1"===Ue["google.c.a.e"]&&(yield function bs(P,U,de){return ia.apply(this,arguments)}(P,de.messageType,Ue))}),jo.apply(this,arguments)}const kl="@firebase/messaging",Ml=P=>{const U=new zr(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",de=>function Nc(P,U){return jo.apply(this,arguments)}(U,de)),U},sd=P=>{const U=P.getProvider("messaging").getImmediate();return{getToken:Ue=>function qo(P,U){return Fo.apply(this,arguments)}(U,Ue)}};function pn(){return Er.apply(this,arguments)}function Er(){return(Er=(0,se.Z)(function*(){try{yield(0,Ce.eu)()}catch{return!1}return typeof window<"u"&&(0,Ce.hl)()&&(0,Ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Cu(){(0,V._registerComponent)(new De.wA("messaging",Ml,"PUBLIC")),(0,V._registerComponent)(new De.wA("messaging-internal",sd,"PRIVATE")),(0,V.registerVersion)(kl,"0.12.4"),(0,V.registerVersion)(kl,"0.12.4","esm2017")}();const In="analytics",or="firebase_id",nc="origin",kn=6e4,Vt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",gn="https://www.googletagmanager.com/gtag/js",ui=new $e.Yd("@firebase/analytics"),sa=new Ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Pl(P){if(!P.startsWith(gn)){const U=sa.create("invalid-gtag-resource",{gtagURL:P});return ui.warn(U.message),""}return P}function Xo(P){return Promise.all(P.map(U=>U.catch(de=>de)))}function ll(){return(ll=(0,se.Z)(function*(P,U,de,Ue,pt,Dt){const zt=Ue[pt];try{if(zt)yield U[zt];else{const Vn=(yield Xo(de)).find(dr=>dr.measurementId===pt);Vn&&(yield U[Vn.appId])}}catch(Un){ui.error(Un)}P("config",pt,Dt)})).apply(this,arguments)}function $u(){return($u=(0,se.Z)(function*(P,U,de,Ue,pt){try{let Dt=[];if(pt&&pt.send_to){let zt=pt.send_to;Array.isArray(zt)||(zt=[zt]);const Un=yield Xo(de);for(const Vn of zt){const dr=Un.find(ei=>ei.measurementId===Vn),Wr=dr&&U[dr.appId];if(!Wr){Dt=[];break}Dt.push(Wr)}}0===Dt.length&&(Dt=Object.values(U)),yield Promise.all(Dt),P("event",Ue,pt||{})}catch(Dt){ui.error(Dt)}})).apply(this,arguments)}const gi=30,Di=new class ha{constructor(U={},de=1e3){this.throttleMetadata=U,this.intervalMillis=de}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,de){this.throttleMetadata[U]=de}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function Ef(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function yn(){return(yn=(0,se.Z)(function*(P){var U;const{appId:de,apiKey:Ue}=P,pt={method:"GET",headers:Ef(Ue)},Dt=Vt.replace("{app-id}",de),zt=yield fetch(Dt,pt);if(200!==zt.status&&304!==zt.status){let Un="";try{const Vn=yield zt.json();null!==(U=Vn.error)&&void 0!==U&&U.message&&(Un=Vn.error.message)}catch{}throw sa.create("config-fetch-failed",{httpStatus:zt.status,responseMessage:Un})}return zt.json()})).apply(this,arguments)}function R(){return(R=(0,se.Z)(function*(P,U=Di,de){const{appId:Ue,apiKey:pt,measurementId:Dt}=P.options;if(!Ue)throw sa.create("no-app-id");if(!pt){if(Dt)return{measurementId:Dt,appId:Ue};throw sa.create("no-api-key")}const zt=U.getThrottleMetadata(Ue)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Un=new Oe;return setTimeout((0,se.Z)(function*(){Un.abort()}),void 0!==de?de:kn),D({appId:Ue,apiKey:pt,measurementId:Dt},zt,Un,U)})).apply(this,arguments)}function D(P,U,de){return B.apply(this,arguments)}function B(){return B=(0,se.Z)(function*(P,{throttleEndTimeMillis:U,backoffCount:de},Ue,pt=Di){var Dt;const{appId:zt,measurementId:Un}=P;try{yield function oe(P,U){return new Promise((de,Ue)=>{const pt=Math.max(U-Date.now(),0),Dt=setTimeout(de,pt);P.addEventListener(()=>{clearTimeout(Dt),Ue(sa.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(Ue,U)}catch(Vn){if(Un)return ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Un} provided in the "measurementId" field in the local Firebase config. [${Vn?.message}]`),{appId:zt,measurementId:Un};throw Vn}try{const Vn=yield function qr(P){return yn.apply(this,arguments)}(P);return pt.deleteThrottleMetadata(zt),Vn}catch(Vn){const dr=Vn;if(!function Me(P){if(!(P instanceof Ce.ZR&&P.customData))return!1;const U=Number(P.customData.httpStatus);return 429===U||500===U||503===U||504===U}(dr)){if(pt.deleteThrottleMetadata(zt),Un)return ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Un} provided in the "measurementId" field in the local Firebase config. [${dr?.message}]`),{appId:zt,measurementId:Un};throw Vn}const Wr=503===Number(null===(Dt=dr?.customData)||void 0===Dt?void 0:Dt.httpStatus)?(0,Ce.$s)(de,pt.intervalMillis,gi):(0,Ce.$s)(de,pt.intervalMillis),ei={throttleEndTimeMillis:Date.now()+Wr,backoffCount:de+1};return pt.setThrottleMetadata(zt,ei),ui.debug(`Calling attemptFetch again in ${Wr} millis`),D(P,ei,Ue,pt)}}),B.apply(this,arguments)}class Oe{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let St,zu;function Hn(){return(Hn=(0,se.Z)(function*(P,U,de,Ue,pt){if(pt&&pt.global)P("event",de,Ue);else{const Dt=yield U;P("event",de,Object.assign(Object.assign({},Ue),{send_to:Dt}))}})).apply(this,arguments)}function Fc(){return(Fc=(0,se.Z)(function*(){if(!(0,Ce.hl)())return ui.warn(sa.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ce.eu)()}catch(P){return ui.warn(sa.create("indexeddb-unavailable",{errorInfo:P?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ia(){return Ia=(0,se.Z)(function*(P,U,de,Ue,pt,Dt,zt){var Un;const Vn=function A(P){return R.apply(this,arguments)}(P);Vn.then(Ur=>{de[Ur.measurementId]=Ur.appId,P.options.measurementId&&Ur.measurementId!==P.options.measurementId&&ui.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${Ur.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ur=>ui.error(Ur)),U.push(Vn);const dr=function Ld(){return Fc.apply(this,arguments)}().then(Ur=>{if(Ur)return Ue.getId()}),[Wr,ei]=yield Promise.all([Vn,dr]);(function Jo(P){const U=window.document.getElementsByTagName("script");for(const de of Object.values(U))if(de.src&&de.src.includes(gn)&&de.src.includes(P))return de;return null})(Dt)||function Ol(P,U){const de=function rc(P,U){let de;return window.trustedTypes&&(de=window.trustedTypes.createPolicy(P,U)),de}("firebase-js-sdk-policy",{createScriptURL:Pl}),Ue=document.createElement("script"),pt=`${gn}?l=${P}&id=${U}`;Ue.src=de?de?.createScriptURL(pt):pt,Ue.async=!0,document.head.appendChild(Ue)}(Dt,Wr.measurementId),zu&&(pt("consent","default",zu),function Lc(P){zu=P}(void 0)),pt("js",new Date);const xa=null!==(Un=zt?.config)&&void 0!==Un?Un:{};return xa[nc]="firebase",xa.update=!0,null!=ei&&(xa[or]=ei),pt("config",Wr.measurementId,xa),St&&(pt("set",St),function un(P){St=P}(void 0)),Wr.measurementId}),Ia.apply(this,arguments)}class Co{constructor(U){this.app=U}_delete(){return delete So[this.app.options.appId],Promise.resolve()}}let So={},sc=[];const oc={};let jd,Vi,Ms="dataLayer",dl=!1;function wf(P,U,de){!function Ya(){const P=[];if((0,Ce.ru)()&&P.push("This is a browser extension environment."),(0,Ce.zI)()||P.push("Cookies are not available."),P.length>0){const U=P.map((Ue,pt)=>`(${pt+1}) ${Ue}`).join(" "),de=sa.create("invalid-analytics-context",{errorInfo:U});ui.warn(de.message)}}();const Ue=P.options.appId;if(!Ue)throw sa.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw sa.create("no-api-key");ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=So[Ue])throw sa.create("already-exists",{id:Ue});if(!dl){!function Da(P){let U=[];Array.isArray(window[P])?U=window[P]:window[P]=U}(Ms);const{wrappedGtag:Dt,gtagCore:zt}=function Hu(P,U,de,Ue,pt){let Dt=function(...zt){window[Ue].push(arguments)};return window[pt]&&"function"==typeof window[pt]&&(Dt=window[pt]),window[pt]=function Nr(P,U,de,Ue){function Dt(){return Dt=(0,se.Z)(function*(zt,...Un){try{if("event"===zt){const[Vn,dr]=Un;yield function Rl(P,U,de,Ue,pt){return $u.apply(this,arguments)}(P,U,de,Vn,dr)}else if("config"===zt){const[Vn,dr]=Un;yield function ic(P,U,de,Ue,pt,Dt){return ll.apply(this,arguments)}(P,U,de,Ue,Vn,dr)}else if("consent"===zt){const[Vn]=Un;P("consent","update",Vn)}else if("get"===zt){const[Vn,dr,Wr]=Un;P("get",Vn,dr,Wr)}else if("set"===zt){const[Vn]=Un;P("set",Vn)}else P(zt,...Un)}catch(Vn){ui.error(Vn)}}),Dt.apply(this,arguments)}return function pt(zt){return Dt.apply(this,arguments)}}(Dt,P,U,de),{gtagCore:Dt,wrappedGtag:window[pt]}}(So,sc,oc,Ms,"gtag");Vi=Dt,jd=zt,dl=!0}return So[Ue]=function Fd(P,U,de,Ue,pt,Dt,zt){return Ia.apply(this,arguments)}(P,sc,oc,U,jd,Ms,de),new Co(P)}function Bc(){return qu.apply(this,arguments)}function qu(){return(qu=(0,se.Z)(function*(){if((0,Ce.ru)()||!(0,Ce.zI)()||!(0,Ce.hl)())return!1;try{return yield(0,Ce.eu)()}catch{return!1}})).apply(this,arguments)}const Ih="@firebase/analytics";!function xh(){(0,V._registerComponent)(new De.wA(In,(U,{options:de})=>wf(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),de),"PUBLIC")),(0,V._registerComponent)(new De.wA("analytics-internal",function P(U){try{const de=U.getProvider(In).getImmediate();return{logEvent:(Ue,pt,Dt)=>function hl(P,U,de,Ue){P=(0,Ce.m9)(P),function _n(P,U,de,Ue,pt){return Hn.apply(this,arguments)}(Vi,So[P.app.options.appId],U,de,Ue).catch(pt=>ui.error(pt))}(de,Ue,pt,Dt)}}catch(de){throw sa.create("interop-component-reg-failed",{reason:de})}},"PRIVATE")),(0,V.registerVersion)(Ih,"0.10.0"),(0,V.registerVersion)(Ih,"0.10.0","esm2017")}();var Du=H(1954),Ah=H(2631);const Do=new class fl extends Ah.v{}(class $d extends Du.o{constructor(U,de){super(U,de),this.scheduler=U,this.work=de}schedule(U,de=0){return de>0?super.schedule(U,de):(this.delay=de,this.state=U,this.scheduler.flush(this),this)}execute(U,de){return de>0||this.closed?super.execute(U,de):this._execute(U,de)}requestAsyncId(U,de,Ue=0){return null!=Ue&&Ue>0||null==Ue&&this.delay>0?super.requestAsyncId(U,de,Ue):(U.flush(this),0)}});var Qa=H(6321),Ll=H(9397),Ii=H(3093),Xa=H(5137);const Io=new y.GfV("7.6.1"),xi="__angularfire_symbol__analyticsIsSupportedValue",yo="__angularfire_symbol__analyticsIsSupported",gu="__angularfire_symbol__remoteConfigIsSupportedValue",ss="__angularfire_symbol__remoteConfigIsSupported",Hd="__angularfire_symbol__messagingIsSupportedValue",ri="__angularfire_symbol__messagingIsSupported";function Ja(P,U,de){if(U){if(1===U.length)return U[0];const Dt=U.filter(zt=>zt.app===de);if(1===Dt.length)return Dt[0]}return de.container.getProvider(P).getImmediate({optional:!0})}globalThis[yo]||(globalThis[yo]=Bc().then(P=>globalThis[xi]=P).catch(()=>globalThis[xi]=!1)),globalThis[ri]||(globalThis[ri]=pn().then(P=>globalThis[Hd]=P).catch(()=>globalThis[Hd]=!1)),globalThis[ss]||(globalThis[ss]=Ea().then(P=>globalThis[gu]=P).catch(()=>globalThis[gu]=!1));const kh=(P,U)=>{const de=U?[U]:(0,fe.C6)(),Ue=[];return de.forEach(pt=>{pt.container.getProvider(P).instances.forEach(zt=>{Ue.includes(zt)||Ue.push(zt)})}),Ue};function Wu(){}class eo{constructor(U,de=Do){this.zone=U,this.delegate=de}now(){return this.delegate.now()}schedule(U,de,Ue){const pt=this.zone;return this.delegate.schedule(function(zt){pt.runGuarded(()=>{U.apply(this,[zt])})},de,Ue)}}class xf{constructor(U){this.zone=U,this.task=null}call(U,de){const Ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wu,{},Wu,Wu)),de.pipe((0,Ll.b)({next:Ue,complete:Ue,error:Ue})).subscribe(U).add(Ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let eu=(()=>{class P{constructor(de){this.ngZone=de,this.outsideAngular=de.runOutsideAngular(()=>new eo(Zone.current)),this.insideAngular=de.run(()=>new eo(Zone.current,Qa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(de){return new(de||P)(y.LFG(y.R0b))},P.\u0275prov=y.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function $a(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function xu(P){return P.pipe((0,Ii.Q)($a().outsideAngular))}function tu(P){return $a(),function Fl(P){return function(de){return(de=de.lift(new xf(P.ngZone))).pipe((0,Xa.R)(P.outsideAngular),(0,Ii.Q)(P.insideAngular))}}($a())(P)}},9058:(nn,st,H)=>{"use strict";H.d(st,{$s:()=>os,BH:()=>_e,G6:()=>rt,L:()=>et,LL:()=>jt,Pz:()=>Ee,Sg:()=>Fe,UG:()=>ne,US:()=>De,ZB:()=>Le,ZR:()=>qt,aH:()=>Y,b$:()=>Bt,eu:()=>dt,hl:()=>Qe,jU:()=>Pe,m9:()=>Rn,ne:()=>xr,pd:()=>Bn,r3:()=>wr,ru:()=>bt,tV:()=>Se,uI:()=>W,vZ:()=>Mr,w1:()=>Xt,xO:()=>Ir,xb:()=>Cr,z$:()=>ut,zI:()=>at,zd:()=>dn});const V=function(tt){const ve=[];let be=0;for(let ye=0;ye<tt.length;ye++){let Ae=tt.charCodeAt(ye);Ae<128?ve[be++]=Ae:Ae<2048?(ve[be++]=Ae>>6|192,ve[be++]=63&Ae|128):55296==(64512&Ae)&&ye+1<tt.length&&56320==(64512&tt.charCodeAt(ye+1))?(Ae=65536+((1023&Ae)<<10)+(1023&tt.charCodeAt(++ye)),ve[be++]=Ae>>18|240,ve[be++]=Ae>>12&63|128,ve[be++]=Ae>>6&63|128,ve[be++]=63&Ae|128):(ve[be++]=Ae>>12|224,ve[be++]=Ae>>6&63|128,ve[be++]=63&Ae|128)}return ve},De={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(tt,ve){if(!Array.isArray(tt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const be=ve?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let Ae=0;Ae<tt.length;Ae+=3){const yt=tt[Ae],Yt=Ae+1<tt.length,Tn=Yt?tt[Ae+1]:0,he=Ae+2<tt.length,pe=he?tt[Ae+2]:0;let cn=(15&Tn)<<2|pe>>6,Zn=63&pe;he||(Zn=64,Yt||(cn=64)),ye.push(be[yt>>2],be[(3&yt)<<4|Tn>>4],be[cn],be[Zn])}return ye.join("")},encodeString(tt,ve){return this.HAS_NATIVE_SUPPORT&&!ve?btoa(tt):this.encodeByteArray(V(tt),ve)},decodeString(tt,ve){return this.HAS_NATIVE_SUPPORT&&!ve?atob(tt):function(tt){const ve=[];let be=0,ye=0;for(;be<tt.length;){const Ae=tt[be++];if(Ae<128)ve[ye++]=String.fromCharCode(Ae);else if(Ae>191&&Ae<224){const yt=tt[be++];ve[ye++]=String.fromCharCode((31&Ae)<<6|63&yt)}else if(Ae>239&&Ae<365){const he=((7&Ae)<<18|(63&tt[be++])<<12|(63&tt[be++])<<6|63&tt[be++])-65536;ve[ye++]=String.fromCharCode(55296+(he>>10)),ve[ye++]=String.fromCharCode(56320+(1023&he))}else{const yt=tt[be++],Yt=tt[be++];ve[ye++]=String.fromCharCode((15&Ae)<<12|(63&yt)<<6|63&Yt)}}return ve.join("")}(this.decodeStringToByteArray(tt,ve))},decodeStringToByteArray(tt,ve){this.init_();const be=ve?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let Ae=0;Ae<tt.length;){const yt=be[tt.charAt(Ae++)],Tn=Ae<tt.length?be[tt.charAt(Ae)]:0;++Ae;const pe=Ae<tt.length?be[tt.charAt(Ae)]:64;++Ae;const ct=Ae<tt.length?be[tt.charAt(Ae)]:64;if(++Ae,null==yt||null==Tn||null==pe||null==ct)throw new $e;ye.push(yt<<2|Tn>>4),64!==pe&&(ye.push(Tn<<4&240|pe>>2),64!==ct&&ye.push(pe<<6&192|ct))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let tt=0;tt<this.ENCODED_VALS.length;tt++)this.byteToCharMap_[tt]=this.ENCODED_VALS.charAt(tt),this.charToByteMap_[this.byteToCharMap_[tt]]=tt,this.byteToCharMapWebSafe_[tt]=this.ENCODED_VALS_WEBSAFE.charAt(tt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[tt]]=tt,tt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(tt)]=tt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(tt)]=tt)}}};class $e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const et=function(tt){return function(tt){const ve=V(tt);return De.encodeByteArray(ve,!0)}(tt).replace(/\./g,"")},Se=function(tt){try{return De.decodeString(tt,!0)}catch(ve){console.error("base64Decode failed: ",ve)}return null};function Le(tt,ve){if(!(ve instanceof Object))return ve;switch(ve.constructor){case Date:return new Date(ve.getTime());case Object:void 0===tt&&(tt={});break;case Array:tt=[];break;default:return ve}for(const be in ve)!ve.hasOwnProperty(be)||!wt(be)||(tt[be]=Le(tt[be],ve[be]));return tt}function wt(tt){return"__proto__"!==tt}const je=()=>{try{return function le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const tt=process.env.__FIREBASE_DEFAULTS__;return tt?JSON.parse(tt):void 0})()||(()=>{if(typeof document>"u")return;let tt;try{tt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ve=tt&&Se(tt[1]);return ve&&JSON.parse(ve)})()}catch(tt){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${tt}`)}},Y=()=>{var tt;return null===(tt=je())||void 0===tt?void 0:tt.config},Ee=tt=>{var ve;return null===(ve=je())||void 0===ve?void 0:ve[`_${tt}`]};class _e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ve,be)=>{this.resolve=ve,this.reject=be})}wrapCallback(ve){return(be,ye)=>{be?this.reject(be):this.resolve(ye),"function"==typeof ve&&(this.promise.catch(()=>{}),1===ve.length?ve(be):ve(be,ye))}}}function Fe(tt,ve){if(tt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=ve||"demo-project",Ae=tt.iat||0,yt=tt.sub||tt.user_id;if(!yt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Yt=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:Ae,exp:Ae+3600,auth_time:Ae,sub:yt,user_id:yt,firebase:{sign_in_provider:"custom",identities:{}}},tt);return[et(JSON.stringify({alg:"none",type:"JWT"})),et(JSON.stringify(Yt)),""].join(".")}function ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function W(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function ne(){var tt;const ve=null===(tt=je())||void 0===tt?void 0:tt.forceEnvironment;if("node"===ve)return!0;if("browser"===ve)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Pe(){return"object"==typeof self&&self.self===self}function bt(){const tt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof tt&&void 0!==tt.id}function Bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xt(){const tt=ut();return tt.indexOf("MSIE ")>=0||tt.indexOf("Trident/")>=0}function rt(){return!ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){try{return"object"==typeof indexedDB}catch{return!1}}function dt(){return new Promise((tt,ve)=>{try{let be=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",Ae=self.indexedDB.open(ye);Ae.onsuccess=()=>{Ae.result.close(),be||self.indexedDB.deleteDatabase(ye),tt(!0)},Ae.onupgradeneeded=()=>{be=!1},Ae.onerror=()=>{var yt;ve((null===(yt=Ae.error)||void 0===yt?void 0:yt.message)||"")}}catch(be){ve(be)}})}function at(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class qt extends Error{constructor(ve,be,ye){super(be),this.code=ve,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jt.prototype.create)}}class jt{constructor(ve,be,ye){this.service=ve,this.serviceName=be,this.errors=ye}create(ve,...be){const ye=be[0]||{},Ae=`${this.service}/${ve}`,yt=this.errors[ve],Yt=yt?function Lt(tt,ve){return tt.replace(Kt,(be,ye)=>{const Ae=ve[ye];return null!=Ae?String(Ae):`<${ye}?>`})}(yt,ye):"Error";return new qt(Ae,`${this.serviceName}: ${Yt} (${Ae}).`,ye)}}const Kt=/\{\$([^}]+)}/g;function wr(tt,ve){return Object.prototype.hasOwnProperty.call(tt,ve)}function Cr(tt){for(const ve in tt)if(Object.prototype.hasOwnProperty.call(tt,ve))return!1;return!0}function Mr(tt,ve){if(tt===ve)return!0;const be=Object.keys(tt),ye=Object.keys(ve);for(const Ae of be){if(!ye.includes(Ae))return!1;const yt=tt[Ae],Yt=ve[Ae];if(Pr(yt)&&Pr(Yt)){if(!Mr(yt,Yt))return!1}else if(yt!==Yt)return!1}for(const Ae of ye)if(!be.includes(Ae))return!1;return!0}function Pr(tt){return null!==tt&&"object"==typeof tt}function Ir(tt){const ve=[];for(const[be,ye]of Object.entries(tt))Array.isArray(ye)?ye.forEach(Ae=>{ve.push(encodeURIComponent(be)+"="+encodeURIComponent(Ae))}):ve.push(encodeURIComponent(be)+"="+encodeURIComponent(ye));return ve.length?"&"+ve.join("&"):""}function dn(tt){const ve={};return tt.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[Ae,yt]=ye.split("=");ve[decodeURIComponent(Ae)]=decodeURIComponent(yt)}}),ve}function Bn(tt){const ve=tt.indexOf("?");if(!ve)return"";const be=tt.indexOf("#",ve);return tt.substring(ve,be>0?be:void 0)}function xr(tt,ve){const be=new sr(tt,ve);return be.subscribe.bind(be)}class sr{constructor(ve,be){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=be,this.task.then(()=>{ve(this)}).catch(ye=>{this.error(ye)})}next(ve){this.forEachObserver(be=>{be.next(ve)})}error(ve){this.forEachObserver(be=>{be.error(ve)}),this.close(ve)}complete(){this.forEachObserver(ve=>{ve.complete()}),this.close()}subscribe(ve,be,ye){let Ae;if(void 0===ve&&void 0===be&&void 0===ye)throw new Error("Missing Observer.");Ae=function Zr(tt,ve){if("object"!=typeof tt||null===tt)return!1;for(const be of ve)if(be in tt&&"function"==typeof tt[be])return!0;return!1}(ve,["next","error","complete"])?ve:{next:ve,error:be,complete:ye},void 0===Ae.next&&(Ae.next=_i),void 0===Ae.error&&(Ae.error=_i),void 0===Ae.complete&&(Ae.complete=_i);const yt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ae.error(this.finalError):Ae.complete()}catch{}}),this.observers.push(Ae),yt}unsubscribeOne(ve){void 0===this.observers||void 0===this.observers[ve]||(delete this.observers[ve],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ve){if(!this.finalized)for(let be=0;be<this.observers.length;be++)this.sendOne(be,ve)}sendOne(ve,be){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ve])try{be(this.observers[ve])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(ve){this.finalized||(this.finalized=!0,void 0!==ve&&(this.finalError=ve),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _i(){}const Xi=1e3,bi=2,wi=144e5,Vr=.5;function os(tt,ve=Xi,be=bi){const ye=ve*Math.pow(be,tt),Ae=Math.round(Vr*ye*(Math.random()-.5)*2);return Math.min(wi,ye+Ae)}function Rn(tt){return tt&&tt._delegate?tt._delegate:tt}},6200:(nn,st,H)=>{"use strict";H.d(st,{Y:()=>Re});var y=H(5861),fe=H(4664),se=H(7398),V=H(2572),Ce=H(2096),De=H(5879),$e=H(8330),Xe=H(6796),et=H(6240),Se=H(8076);let Re=(()=>{class Le{constructor(le,vt,qe,Tt){this.db=le,this.auth=vt,this.storage=qe,this.router=Tt,this.pageClips=[],this.pendingReq=!1,this.clipsCollection=le.collection("clips")}createClip(le){return this.clipsCollection.add(le)}getUserClips(le){return(0,V.a)([this.auth.user,le]).pipe((0,fe.w)(vt=>{const[qe,Tt]=vt;return qe?this.clipsCollection.ref.where("uid","==",qe.uid).orderBy("timestamp","1"===Tt?"desc":"asc").get():(0,Ce.of)([])}),(0,se.U)(vt=>vt.docs))}updateClip(le,vt){return this.clipsCollection.doc(le).update({title:vt})}deleteClip(le){var vt=this;return(0,y.Z)(function*(){const qe=vt.storage.ref(`clips/${le.fileName}`),Tt=vt.storage.ref(`screenshots/${le.screenshotFileName}`);yield qe.delete(),yield Tt.delete(),yield vt.clipsCollection.doc(le.docID).delete()})()}getClips(){var le=this;return(0,y.Z)(function*(){if(le.pendingReq)return;le.pendingReq=!0;let vt=le.clipsCollection.ref.orderBy("timestamp","desc").limit(6);const{length:qe}=le.pageClips;if(qe){const je=le.pageClips[qe-1].docID,Ve=yield le.clipsCollection.doc(je).get().toPromise();vt=vt.startAfter(Ve)}(yield vt.get()).forEach(je=>{le.pageClips.push({docID:je.id,...je.data()})}),le.pendingReq=!1})()}resolve(le,vt){return this.clipsCollection.doc(le.params.id).get().pipe((0,se.U)(qe=>qe.data()||(this.router.navigate(["/"]),null)))}}return Le.\u0275fac=function(le){return new(le||Le)(De.LFG($e.ST),De.LFG(Xe.zQ),De.LFG(et.Q1),De.LFG(Se.F0))},Le.\u0275prov=De.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})()},2855:(nn,st,H)=>{"use strict";H.d(st,{Z:()=>fe});var y=H(5879);let fe=(()=>{class se{constructor(){this.modals=[]}register(Ce){this.modals.push({id:Ce,visible:!1})}unregister(Ce){this.modals=this.modals.filter(De=>De.id!==Ce)}isModalOpen(Ce){return!!this.modals.find(De=>De.id===Ce)?.visible}toggleModal(Ce){const De=this.modals.find($e=>$e.id===Ce);De&&(De.visible=!De.visible)}}return se.\u0275fac=function(Ce){return new(Ce||se)},se.\u0275prov=y.Yz7({token:se,factory:se.\u0275fac,providedIn:"root"}),se})()},5193:(nn,st,H)=>{"use strict";H.d(st,{w:()=>V});var y=H(5879),fe=H(6814);const se=["*"];let V=(()=>{class Ce{get bgColor(){return`bg-${this.color}-400`}constructor(){this.color="blue"}ngOnInit(){}}return Ce.\u0275fac=function($e){return new($e||Ce)},Ce.\u0275cmp=y.Xpm({type:Ce,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:se,decls:2,vars:1,consts:[[1,"text-white","text-center","bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function($e,Xe){1&$e&&(y.F$t(),y.TgZ(0,"div",0),y.Hsn(1),y.qZA()),2&$e&&y.Q6J("ngClass",Xe.bgColor)},dependencies:[fe.mk]}),Ce})()},1060:(nn,st,H)=>{"use strict";H.d(st,{a:()=>le});var y=H(6223),fe=H(5879),se=H(6814),V=H(3735);function Ce(vt,qe){1&vt&&(fe.TgZ(0,"p",3),fe._uU(1," Passwords must be at least 8 characters long, have 1 uppercase letter, 1 lowercase letter and 1 number. "),fe.qZA())}function De(vt,qe){1&vt&&(fe.TgZ(0,"p",3),fe._uU(1,"Field is required"),fe.qZA())}function $e(vt,qe){if(1&vt&&(fe.TgZ(0,"p",3),fe._uU(1),fe.qZA()),2&vt){const Tt=fe.oxw(2);fe.xp6(1),fe.AsE(" The value you inputted is ",null==Tt.control.errors?null:Tt.control.errors.minlength.actualLength," characters long. It must be at least ",null==Tt.control.errors?null:Tt.control.errors.minlength.requiredLength," characters long. ")}}function Xe(vt,qe){1&vt&&(fe.TgZ(0,"p",3),fe._uU(1," You must enter a valid email. "),fe.qZA())}function et(vt,qe){1&vt&&(fe.TgZ(0,"p",3),fe._uU(1,"Value too low."),fe.qZA())}function Se(vt,qe){1&vt&&(fe.TgZ(0,"p",3),fe._uU(1,"Value too high."),fe.qZA())}function Re(vt,qe){1&vt&&(fe.TgZ(0,"p",3),fe._uU(1," Passwords do not match. "),fe.qZA())}function Le(vt,qe){1&vt&&(fe.TgZ(0,"p",3),fe._uU(1," Email taken. Please try another email. "),fe.qZA())}function wt(vt,qe){if(1&vt&&(fe.ynx(0),fe.YNc(1,Ce,2,0,"p",2),fe.YNc(2,De,2,0,"p",2),fe.YNc(3,$e,2,2,"p",2),fe.YNc(4,Xe,2,0,"p",2),fe.YNc(5,et,2,0,"p",2),fe.YNc(6,Se,2,0,"p",2),fe.YNc(7,Re,2,0,"p",2),fe.YNc(8,Le,2,0,"p",2),fe.BQk()),2&vt){const Tt=fe.oxw();fe.xp6(1),fe.Q6J("ngIf",null==Tt.control.errors?null:Tt.control.errors.pattern),fe.xp6(1),fe.Q6J("ngIf",null==Tt.control.errors?null:Tt.control.errors.required),fe.xp6(1),fe.Q6J("ngIf",null==Tt.control.errors?null:Tt.control.errors.minlength),fe.xp6(1),fe.Q6J("ngIf",null==Tt.control.errors?null:Tt.control.errors.email),fe.xp6(1),fe.Q6J("ngIf",null==Tt.control.errors?null:Tt.control.errors.min),fe.xp6(1),fe.Q6J("ngIf",null==Tt.control.errors?null:Tt.control.errors.max),fe.xp6(1),fe.Q6J("ngIf",null==Tt.control.errors?null:Tt.control.errors.noMatch),fe.xp6(1),fe.Q6J("ngIf",null==Tt.control.errors?null:Tt.control.errors.emailTaken)}}let le=(()=>{class vt{constructor(){this.control=new y.NI,this.type="text",this.placeholder="",this.format=""}ngOnInit(){}}return vt.\u0275fac=function(Tt){return new(Tt||vt)},vt.\u0275cmp=fe.Xpm({type:vt,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(Tt,je){1&Tt&&(fe._UZ(0,"input",0),fe.YNc(1,wt,9,8,"ng-container",1)),2&Tt&&(fe.Q6J("formControl",je.control)("type",je.type)("placeholder",je.placeholder)("mask",je.format)("dropSpecialCharacters",!1),fe.xp6(1),fe.Q6J("ngIf",je.control.touched&&je.control.dirty))},dependencies:[se.O5,y.Fj,y.JJ,y.oH,V.Z6]}),vt})()},8105:(nn,st,H)=>{"use strict";H.d(st,{z:()=>$e});var y=H(5879),fe=H(2855),se=H(6814);const V=[[["","heading",""]],"*"],Ce=function(Xe){return{hidden:Xe}},De=["[heading]","*"];let $e=(()=>{class Xe{constructor(Se,Re){this.modal=Se,this.el=Re,this.modalID=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(){this.modal.toggleModal(this.modalID)}}return Xe.\u0275fac=function(Se){return new(Se||Xe)(y.Y36(fe.Z),y.Y36(y.SBq))},Xe.\u0275cmp=y.Xpm({type:Xe,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:De,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(Se,Re){1&Se&&(y.F$t(V),y.TgZ(0,"div",0)(1,"div",1)(2,"div",2),y.NdJ("click",function(){return Re.closeModal()}),y._UZ(3,"div",3),y.qZA(),y.TgZ(4,"span",4),y._uU(5,"\u200b"),y.qZA(),y.TgZ(6,"div",5)(7,"div",6)(8,"div",7),y.Hsn(9),y.TgZ(10,"div",8),y.NdJ("click",function(){return Re.closeModal()}),y._uU(11," \u2715 "),y.qZA()(),y.Hsn(12,1),y.qZA()()()()),2&Se&&y.Q6J("ngClass",y.VKq(1,Ce,!Re.modal.isModalOpen(Re.modalID)))},dependencies:[se.mk]}),Xe})()},6208:(nn,st,H)=>{"use strict";H.d(st,{m:()=>Ce});var y=H(6814),fe=H(3735),se=H(6223),V=H(5879);let Ce=(()=>{class De{}return De.\u0275fac=function(Xe){return new(Xe||De)},De.\u0275mod=V.oAB({type:De}),De.\u0275inj=V.cJS({providers:[(0,fe.np)()],imports:[y.ez,se.UX]}),De})()},8150:(nn,st,H)=>{"use strict";var y=H(6593),fe=H(5861),se=H(8076),V=H(5879),Ce=H(6814),De=H(6200);let $e=(()=>{class c{constructor(i){this.datePipe=i}transform(i){if(!i)return"";const l=i.toDate();return this.datePipe.transform(l,"mediumDate")}}return c.\u0275fac=function(i){return new(i||c)(V.Y36(Ce.uU,16))},c.\u0275pipe=V.Yjl({name:"fbTimestamp",type:c,pure:!0}),c})();const Xe=function(c){return["/","clip",c]};function et(c,t){if(1&c&&(V.TgZ(0,"a",2),V._UZ(1,"img",3),V.TgZ(2,"div",4)(3,"div",5)(4,"div",6),V.O4$(),V.TgZ(5,"svg",7),V._UZ(6,"path",8),V.qZA()()()(),V.kcU(),V.TgZ(7,"div",9)(8,"h2",10),V._uU(9),V.qZA(),V.TgZ(10,"p",11),V._uU(11),V.TgZ(12,"span",12),V._uU(13),V.ALo(14,"fbTimestamp"),V.qZA()()()()),2&c){const i=t.$implicit;V.Q6J("routerLink",V.VKq(7,Xe,i.docID)),V.xp6(1),V.Q6J("src",i.screenshotURL,V.LSH),V.xp6(8),V.Oqu(i.title),V.xp6(2),V.hij(" ",i.displayName," \xb7 "),V.xp6(2),V.Oqu(V.lcZ(14,5,i.timestamp))}}let Se=(()=>{class c{constructor(i){this.clipService=i,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:l,offsetHeight:f}=document.documentElement,{innerHeight:v}=window;Math.round(l)+v===f&&this.clipService.getClips()},this.clipService.getClips()}ngOnInit(){this.scrollable&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollable&&window.removeEventListener("scroll",this.handleScroll),this.clipService.pageClips=[]}}return c.\u0275fac=function(i){return new(i||c)(V.Y36(De.Y))},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-clipslist"]],inputs:{scrollable:"scrollable"},features:[V._Bn([Ce.uU])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","","alt","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(i,l){1&i&&(V.TgZ(0,"div",0),V.YNc(1,et,15,9,"a",1),V.qZA()),2&i&&(V.xp6(1),V.Q6J("ngForOf",l.clipService.pageClips))},dependencies:[Ce.sg,se.rH,$e]}),c})(),Re=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(i,l){1&i&&(V.TgZ(0,"section",0)(1,"video",1),V._UZ(2,"source",2),V.qZA(),V._UZ(3,"div",3),V.TgZ(4,"div",4),V._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),V.qZA(),V.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),V._uU(13,"Record and share it!"),V.qZA(),V.TgZ(14,"p"),V._uU(15," Watch, clip, and share your awesome (or not!) gaming moments with your friends and the world! Twatch makes it incredibly easy to share your videos. Twatch it today! "),V.qZA()()()(),V.TgZ(16,"section",9)(17,"h1",10),V._uU(18," Latest "),V.qZA(),V._UZ(19,"app-clipslist"),V.qZA())},dependencies:[Se]}),c})(),Le=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4"]],template:function(i,l){1&i&&(V.TgZ(0,"p",0),V._uU(1," Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem tenetur, animi doloremque culpa ex, sed impedit esse quia illum officia cupiditate rerum. Tempora vitae aperiam, assumenda quisquam nesciunt ducimus qui ullam. In inventore soluta voluptate nisi, distinctio vero consequuntur commodi cupiditate nobis minus, dolores fuga reiciendis corporis dignissimos iste? Deleniti eveniet earum pariatur sit ad maiores, repellendus odio voluptate voluptates nesciunt modi eos, omnis explicabo eius nihil recusandae obcaecati! Eveniet, iure ea. Quisquam beatae esse mollitia nisi quos ipsam quo temporibus corrupti vero eaque maxime, perferendis accusamus nesciunt quod earum dolores alias nihil totam quae assumenda vel, consequuntur ipsum doloribus. Ut maiores modi unde at quaerat quasi ullam assumenda, rerum odio fuga, animi commodi velit dolor eius debitis. Dolores aliquid, necessitatibus dolore provident amet aspernatur voluptatibus reiciendis, at consequuntur, totam numquam mollitia minus ipsum tenetur nam et ea doloribus eius qui vel! Fugit eum itaque nemo exercitationem. Reiciendis, veniam provident. Pariatur, voluptatum, eaque quisquam reiciendis quibusdam sequi quas expedita tenetur, nostrum distinctio praesentium incidunt ea nam! Praesentium doloribus iste accusantium voluptates ipsa dolorum aliquid tempora quis expedita eius doloremque sit consequatur dolorem eum blanditiis suscipit enim ratione, iure porro odio nihil harum corrupti sint fugit. Cum nulla consequuntur hic officia corrupti architecto, molestias, temporibus magni aspernatur veritatis neque dolorem ratione asperiores aliquam earum. Laudantium laboriosam minima maxime numquam molestias deserunt error id voluptate maiores culpa alias esse veniam iure, quisquam impedit minus soluta ipsam! Commodi, ducimus quae nihil dolor minus doloribus illo delectus quia quos exercitationem officia modi porro et suscipit vel incidunt sit veritatis ut asperiores. Libero pariatur odit aliquid error eveniet possimus aut perspiciatis qui eos, culpa officiis, soluta quas distinctio ipsam. Sequi aliquid voluptas a nostrum animi placeat quis architecto consequuntur, cupiditate est, modi quibusdam temporibus repellendus eum ex dolore? Minus obcaecati distinctio eligendi sit eos atque!\n"),V.qZA())}}),c})();var wt=H(6382),le=H.n(wt),vt=H(7598),qe=H.n(vt),Tt=H(8317),je=H.n(Tt),Ve=H(4135),J=H.n(Ve),Y=H(3817),Ee=H.n(Y),_e=H(5506),Fe=H.n(_e),ut=H(6367),W=H.n(ut);function Bt(){return Bt=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(c[l]=i[l])}return c},Bt.apply(this,arguments)}var $t=function(){function c(){this.listeners={}}var t=c.prototype;return t.on=function(l,f){this.listeners[l]||(this.listeners[l]=[]),this.listeners[l].push(f)},t.off=function(l,f){if(!this.listeners[l])return!1;var v=this.listeners[l].indexOf(f);return this.listeners[l]=this.listeners[l].slice(0),this.listeners[l].splice(v,1),v>-1},t.trigger=function(l){var f=this.listeners[l];if(f)if(2===arguments.length)for(var v=f.length,E=0;E<v;++E)f[E].call(this,arguments[1]);else for(var I=Array.prototype.slice.call(arguments,1),$=f.length,ce=0;ce<$;++ce)f[ce].apply(this,I)},t.dispose=function(){this.listeners={}},t.pipe=function(l){this.on("data",function(f){l.push(f)})},c}();function ot(c){for(var t=function(t){return le().atob?le().atob(t):Buffer.from(t,"base64").toString("binary")}(c),i=new Uint8Array(t.length),l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i}class Ye extends $t{constructor(){super(),this.buffer=""}push(t){let i;for(this.buffer+=t,i=this.buffer.indexOf("\n");i>-1;i=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,i)),this.buffer=this.buffer.substring(i+1)}}const rt=String.fromCharCode(9),Qe=function(c){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(c||""),i={};return t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),i},at=function(c){const t={};if(!c)return t;const i=c.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let f,l=i.length;for(;l--;)""!==i[l]&&(f=/([^=]*)=(.*)/.exec(i[l]).slice(1),f[0]=f[0].replace(/^\s+|\s+$/g,""),f[1]=f[1].replace(/^\s+|\s+$/g,""),f[1]=f[1].replace(/^['"](.*)['"]$/g,"$1"),t[f[0]]=f[1]);return t};class Ot extends $t{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let i,l;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((v,E)=>{const I=E(t);return I===t?v:v.concat([I])},[t]).forEach(v=>{for(let E=0;E<this.customParsers.length;E++)if(this.customParsers[E].call(this,v))return;if(0===v.indexOf("#EXT"))if(v=v.replace("\r",""),i=/^#EXTM3U/.exec(v),i)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(i=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(v),i)return l={type:"tag",tagType:"inf"},i[1]&&(l.duration=parseFloat(i[1])),i[2]&&(l.title=i[2]),void this.trigger("data",l);if(i=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(v),i)return l={type:"tag",tagType:"targetduration"},i[1]&&(l.duration=parseInt(i[1],10)),void this.trigger("data",l);if(i=/^#EXT-X-VERSION:([0-9.]*)?/.exec(v),i)return l={type:"tag",tagType:"version"},i[1]&&(l.version=parseInt(i[1],10)),void this.trigger("data",l);if(i=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(v),i)return l={type:"tag",tagType:"media-sequence"},i[1]&&(l.number=parseInt(i[1],10)),void this.trigger("data",l);if(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(v),i)return l={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(l.number=parseInt(i[1],10)),void this.trigger("data",l);if(i=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(v),i)return l={type:"tag",tagType:"playlist-type"},i[1]&&(l.playlistType=i[1]),void this.trigger("data",l);if(i=/^#EXT-X-BYTERANGE:(.*)?$/.exec(v),i)return l=Bt(Qe(i[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",l);if(i=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(v),i)return l={type:"tag",tagType:"allow-cache"},i[1]&&(l.allowed=!/NO/.test(i[1])),void this.trigger("data",l);if(i=/^#EXT-X-MAP:(.*)$/.exec(v),i){if(l={type:"tag",tagType:"map"},i[1]){const E=at(i[1]);E.URI&&(l.uri=E.URI),E.BYTERANGE&&(l.byterange=Qe(E.BYTERANGE))}this.trigger("data",l)}else if(i=/^#EXT-X-STREAM-INF:(.*)$/.exec(v),i){if(l={type:"tag",tagType:"stream-inf"},i[1]){if(l.attributes=at(i[1]),l.attributes.RESOLUTION){const E=l.attributes.RESOLUTION.split("x"),I={};E[0]&&(I.width=parseInt(E[0],10)),E[1]&&(I.height=parseInt(E[1],10)),l.attributes.RESOLUTION=I}l.attributes.BANDWIDTH&&(l.attributes.BANDWIDTH=parseInt(l.attributes.BANDWIDTH,10)),l.attributes["FRAME-RATE"]&&(l.attributes["FRAME-RATE"]=parseFloat(l.attributes["FRAME-RATE"])),l.attributes["PROGRAM-ID"]&&(l.attributes["PROGRAM-ID"]=parseInt(l.attributes["PROGRAM-ID"],10))}this.trigger("data",l)}else{if(i=/^#EXT-X-MEDIA:(.*)$/.exec(v),i)return l={type:"tag",tagType:"media"},i[1]&&(l.attributes=at(i[1])),void this.trigger("data",l);if(i=/^#EXT-X-ENDLIST/.exec(v),i)this.trigger("data",{type:"tag",tagType:"endlist"});else if(i=/^#EXT-X-DISCONTINUITY/.exec(v),i)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(i=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(v),i)return l={type:"tag",tagType:"program-date-time"},i[1]&&(l.dateTimeString=i[1],l.dateTimeObject=new Date(i[1])),void this.trigger("data",l);if(i=/^#EXT-X-KEY:(.*)$/.exec(v),i)return l={type:"tag",tagType:"key"},i[1]&&(l.attributes=at(i[1]),l.attributes.IV&&("0x"===l.attributes.IV.substring(0,2).toLowerCase()&&(l.attributes.IV=l.attributes.IV.substring(2)),l.attributes.IV=l.attributes.IV.match(/.{8}/g),l.attributes.IV[0]=parseInt(l.attributes.IV[0],16),l.attributes.IV[1]=parseInt(l.attributes.IV[1],16),l.attributes.IV[2]=parseInt(l.attributes.IV[2],16),l.attributes.IV[3]=parseInt(l.attributes.IV[3],16),l.attributes.IV=new Uint32Array(l.attributes.IV))),void this.trigger("data",l);if(i=/^#EXT-X-START:(.*)$/.exec(v),i)return l={type:"tag",tagType:"start"},i[1]&&(l.attributes=at(i[1]),l.attributes["TIME-OFFSET"]=parseFloat(l.attributes["TIME-OFFSET"]),l.attributes.PRECISE=/YES/.test(l.attributes.PRECISE)),void this.trigger("data",l);if(i=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(v),i)return l={type:"tag",tagType:"cue-out-cont"},l.data=i[1]?i[1]:"",void this.trigger("data",l);if(i=/^#EXT-X-CUE-OUT:(.*)?$/.exec(v),i)return l={type:"tag",tagType:"cue-out"},l.data=i[1]?i[1]:"",void this.trigger("data",l);if(i=/^#EXT-X-CUE-IN:(.*)?$/.exec(v),i)return l={type:"tag",tagType:"cue-in"},l.data=i[1]?i[1]:"",void this.trigger("data",l);if(i=/^#EXT-X-SKIP:(.*)$/.exec(v),i&&i[1])return l={type:"tag",tagType:"skip"},l.attributes=at(i[1]),l.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(l.attributes["SKIPPED-SEGMENTS"]=parseInt(l.attributes["SKIPPED-SEGMENTS"],10)),l.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(l.attributes["RECENTLY-REMOVED-DATERANGES"]=l.attributes["RECENTLY-REMOVED-DATERANGES"].split(rt)),void this.trigger("data",l);if(i=/^#EXT-X-PART:(.*)$/.exec(v),i&&i[1])return l={type:"tag",tagType:"part"},l.attributes=at(i[1]),["DURATION"].forEach(function(E){l.attributes.hasOwnProperty(E)&&(l.attributes[E]=parseFloat(l.attributes[E]))}),["INDEPENDENT","GAP"].forEach(function(E){l.attributes.hasOwnProperty(E)&&(l.attributes[E]=/YES/.test(l.attributes[E]))}),l.attributes.hasOwnProperty("BYTERANGE")&&(l.attributes.byterange=Qe(l.attributes.BYTERANGE)),void this.trigger("data",l);if(i=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(v),i&&i[1])return l={type:"tag",tagType:"server-control"},l.attributes=at(i[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(E){l.attributes.hasOwnProperty(E)&&(l.attributes[E]=parseFloat(l.attributes[E]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(E){l.attributes.hasOwnProperty(E)&&(l.attributes[E]=/YES/.test(l.attributes[E]))}),void this.trigger("data",l);if(i=/^#EXT-X-PART-INF:(.*)$/.exec(v),i&&i[1])return l={type:"tag",tagType:"part-inf"},l.attributes=at(i[1]),["PART-TARGET"].forEach(function(E){l.attributes.hasOwnProperty(E)&&(l.attributes[E]=parseFloat(l.attributes[E]))}),void this.trigger("data",l);if(i=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(v),i&&i[1])return l={type:"tag",tagType:"preload-hint"},l.attributes=at(i[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(E){if(l.attributes.hasOwnProperty(E)){l.attributes[E]=parseInt(l.attributes[E],10);const I="BYTERANGE-LENGTH"===E?"length":"offset";l.attributes.byterange=l.attributes.byterange||{},l.attributes.byterange[I]=l.attributes[E],delete l.attributes[E]}}),void this.trigger("data",l);if(i=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(v),i&&i[1])return l={type:"tag",tagType:"rendition-report"},l.attributes=at(i[1]),["LAST-MSN","LAST-PART"].forEach(function(E){l.attributes.hasOwnProperty(E)&&(l.attributes[E]=parseInt(l.attributes[E],10))}),void this.trigger("data",l);if(i=/^#EXT-X-DATERANGE:(.*)$/.exec(v),i&&i[1]){l={type:"tag",tagType:"daterange"},l.attributes=at(i[1]),["ID","CLASS"].forEach(function(I){l.attributes.hasOwnProperty(I)&&(l.attributes[I]=String(l.attributes[I]))}),["START-DATE","END-DATE"].forEach(function(I){l.attributes.hasOwnProperty(I)&&(l.attributes[I]=new Date(l.attributes[I]))}),["DURATION","PLANNED-DURATION"].forEach(function(I){l.attributes.hasOwnProperty(I)&&(l.attributes[I]=parseFloat(l.attributes[I]))}),["END-ON-NEXT"].forEach(function(I){l.attributes.hasOwnProperty(I)&&(l.attributes[I]=/YES/i.test(l.attributes[I]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(I){l.attributes.hasOwnProperty(I)&&(l.attributes[I]=l.attributes[I].toString(16))});const E=/^X-([A-Z]+-)+[A-Z]+$/;for(const I in l.attributes){if(!E.test(I))continue;const $=/[0-9A-Fa-f]{6}/g.test(l.attributes[I]),ce=/^\d+(\.\d+)?$/.test(l.attributes[I]);l.attributes[I]=$?l.attributes[I].toString(16):ce?parseFloat(l.attributes[I]):String(l.attributes[I])}this.trigger("data",l)}else i=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(v),this.trigger("data",i?{type:"tag",tagType:"independent-segments"}:{type:"tag",data:v.slice(4)})}}}else this.trigger("data",{type:"comment",text:v.slice(1)})}):this.trigger("data",{type:"uri",uri:t}))}addParser({expression:t,customType:i,dataParser:l,segment:f}){"function"!=typeof l&&(l=v=>v),this.customParsers.push(v=>{if(t.exec(v))return this.trigger("data",{type:"custom",data:l(v),customType:i,segment:f}),!0})}addTagMapper({expression:t,map:i}){this.tagMappers.push(f=>t.test(f)?i(f):f)}}const jt=function(c){const t={};return Object.keys(c).forEach(function(i){t[(c=>c.toLowerCase().replace(/-(\w)/g,t=>t[1].toUpperCase()))(i)]=c[i]}),t},Lt=function(c){const{serverControl:t,targetDuration:i,partTargetDuration:l}=c;if(!t)return;const f="#EXT-X-SERVER-CONTROL",v="holdBack",E="partHoldBack",I=i&&3*i,$=l&&2*l;i&&!t.hasOwnProperty(v)&&(t[v]=I,this.trigger("info",{message:`${f} defaulting HOLD-BACK to targetDuration * 3 (${I}).`})),I&&t[v]<I&&(this.trigger("warn",{message:`${f} clamping HOLD-BACK (${t[v]}) to targetDuration * 3 (${I})`}),t[v]=I),l&&!t.hasOwnProperty(E)&&(t[E]=3*l,this.trigger("info",{message:`${f} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[E]}).`})),l&&t[E]<$&&(this.trigger("warn",{message:`${f} clamping PART-HOLD-BACK (${t[E]}) to partTargetDuration * 2 (${$}).`}),t[E]=$)};class Kt extends $t{constructor(){super(),this.lineStream=new Ye,this.parseStream=new Ot,this.lineStream.pipe(this.parseStream);const t=this,i=[];let f,v,l={},E=!1;const I=function(){},$={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let me=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let ze=0,It=0;const xt={};this.on("end",()=>{l.uri||!l.parts&&!l.preloadHints||(!l.map&&f&&(l.map=f),!l.key&&v&&(l.key=v),!l.timeline&&"number"==typeof me&&(l.timeline=me),this.manifest.preloadSegment=l)}),this.parseStream.on("data",function(it){let Gt,en;({tag(){({version(){it.version&&(this.manifest.version=it.version)},"allow-cache"(){this.manifest.allowCache=it.allowed,"allowed"in it||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const an={};"length"in it&&(l.byterange=an,an.length=it.length,"offset"in it||(it.offset=ze)),"offset"in it&&(l.byterange=an,an.offset=it.offset),ze=an.offset+an.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),it.duration>0&&(l.duration=it.duration),0===it.duration&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(it.attributes)if("NONE"!==it.attributes.METHOD){if(it.attributes.URI)return"com.apple.streamingkeydelivery"===it.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:it.attributes})):"com.microsoft.playready"===it.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:it.attributes.URI})):"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===it.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(it.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===it.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==it.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):it.attributes.KEYID&&"0x"===it.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:it.attributes.KEYFORMAT,keyId:it.attributes.KEYID.substring(2)},pssh:ot(it.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(it.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),v={method:it.attributes.METHOD||"AES-128",uri:it.attributes.URI},void(typeof it.attributes.IV<"u"&&(v.iv=it.attributes.IV)));this.trigger("warn",{message:"ignoring key declaration without URI"})}else v=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(it.number)?this.manifest.mediaSequence=it.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+it.number})},"discontinuity-sequence"(){isFinite(it.number)?(this.manifest.discontinuitySequence=it.number,me=it.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+it.number})},"playlist-type"(){/VOD|EVENT/.test(it.playlistType)?this.manifest.playlistType=it.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+it.playlist})},map(){f={},it.uri&&(f.uri=it.uri),it.byterange&&(f.byterange=it.byterange),v&&(f.key=v)},"stream-inf"(){this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||$,it.attributes?(l.attributes||(l.attributes={}),Bt(l.attributes,it.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||$,!(it.attributes&&it.attributes.TYPE&&it.attributes["GROUP-ID"]&&it.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const an=this.manifest.mediaGroups[it.attributes.TYPE];an[it.attributes["GROUP-ID"]]=an[it.attributes["GROUP-ID"]]||{},Gt=an[it.attributes["GROUP-ID"]],en={default:/yes/i.test(it.attributes.DEFAULT)},en.autoselect=!!en.default||/yes/i.test(it.attributes.AUTOSELECT),it.attributes.LANGUAGE&&(en.language=it.attributes.LANGUAGE),it.attributes.URI&&(en.uri=it.attributes.URI),it.attributes["INSTREAM-ID"]&&(en.instreamId=it.attributes["INSTREAM-ID"]),it.attributes.CHARACTERISTICS&&(en.characteristics=it.attributes.CHARACTERISTICS),it.attributes.FORCED&&(en.forced=/yes/i.test(it.attributes.FORCED)),Gt[it.attributes.NAME]=en},discontinuity(){me+=1,l.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=it.dateTimeString,this.manifest.dateTimeObject=it.dateTimeObject),l.dateTimeString=it.dateTimeString,l.dateTimeObject=it.dateTimeObject},targetduration(){!isFinite(it.duration)||it.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+it.duration}):(this.manifest.targetDuration=it.duration,Lt.call(this,this.manifest))},start(){it.attributes&&!isNaN(it.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:it.attributes["TIME-OFFSET"],precise:it.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){l.cueOut=it.data},"cue-out-cont"(){l.cueOutCont=it.data},"cue-in"(){l.cueIn=it.data},skip(){this.manifest.skip=jt(it.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",it.attributes,["SKIPPED-SEGMENTS"])},part(){E=!0;const an=this.manifest.segments.length,Qt=jt(it.attributes);l.parts=l.parts||[],l.parts.push(Qt),Qt.byterange&&(Qt.byterange.hasOwnProperty("offset")||(Qt.byterange.offset=It),It=Qt.byterange.offset+Qt.byterange.length),this.warnOnMissingAttributes_(`#EXT-X-PART #${l.parts.length-1} for segment #${an}`,it.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((fn,Ht)=>{fn.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${Ht} lacks required attribute(s): LAST-PART`})})},"server-control"(){const an=this.manifest.serverControl=jt(it.attributes);an.hasOwnProperty("canBlockReload")||(an.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Lt.call(this,this.manifest),an.canSkipDateranges&&!an.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const an=this.manifest.segments.length,Qt=jt(it.attributes),Sn=Qt.type&&"PART"===Qt.type;l.preloadHints=l.preloadHints||[],l.preloadHints.push(Qt),Qt.byterange&&(Qt.byterange.hasOwnProperty("offset")||(Qt.byterange.offset=Sn?It:0,Sn&&(It=Qt.byterange.offset+Qt.byterange.length)));const fn=l.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${fn} for segment #${an}`,it.attributes,["TYPE","URI"]),Qt.type)for(let Ht=0;Ht<l.preloadHints.length-1;Ht++){const Gn=l.preloadHints[Ht];Gn.type&&Gn.type===Qt.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${fn} for segment #${an} has the same TYPE ${Qt.type} as preload hint #${Ht}`})}},"rendition-report"(){const an=jt(it.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(an);const Qt=this.manifest.renditionReports.length-1,Sn=["LAST-MSN","URI"];E&&Sn.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${Qt}`,it.attributes,Sn)},"part-inf"(){this.manifest.partInf=jt(it.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",it.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Lt.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[],this.manifest.daterange.push(jt(it.attributes));const an=this.manifest.daterange.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${an}`,it.attributes,["ID","START-DATE"]);const Qt=this.manifest.daterange[an];Qt.endDate&&Qt.startDate&&new Date(Qt.endDate)<new Date(Qt.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),Qt.duration&&Qt.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),Qt.plannedDuration&&Qt.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const Sn=!!Qt.endOnNext;if(Sn&&!Qt.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),Sn&&(Qt.duration||Qt.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),Qt.duration&&Qt.endDate){const fn=Qt.startDate,Ht=fn.setSeconds(fn.getSeconds()+Qt.duration);this.manifest.daterange[an].endDate=new Date(Ht)}if(Qt&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),xt[Qt.id]){for(const fn in xt[Qt.id])if(xt[Qt.id][fn]!==Qt[fn]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}}else xt[Qt.id]=Qt},"independent-segments"(){this.manifest.independentSegments=!0}}[it.tagType]||I).call(t)},uri(){l.uri=it.uri,i.push(l),this.manifest.targetDuration&&!("duration"in l)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration),v&&(l.key=v),l.timeline=me,f&&(l.map=f),It=0,l={}},comment(){},custom(){it.segment?(l.custom=l.custom||{},l.custom[it.customType]=it.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[it.customType]=it.data)}})[it.type].call(t)})}warnOnMissingAttributes_(t,i,l){const f=[];l.forEach(function(v){i.hasOwnProperty(v)||f.push(v)}),f.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${f.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}var c,wn={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Fn=["video","audio","text"],jn=["Video","Audio","Text"],zn=function(t){return t&&t.replace(/avc1\.(\d+)\.(\d+)/i,function(i,l,f){return"avc1."+("00"+Number(l).toString(16)).slice(-2)+"00"+("00"+Number(f).toString(16)).slice(-2)})},$n=function(t){void 0===t&&(t="");var i=t.split(","),l=[];return i.forEach(function(f){var v;f=f.trim(),Fn.forEach(function(E){var I=wn[E].exec(f.toLowerCase());if(I&&!(I.length<=1)){v=E;var $=f.substring(0,I[1].length),ce=f.replace($,"");l.push({type:$,details:ce,mediaType:E})}}),v||l.push({type:f,details:"",mediaType:"unknown"})}),l},Cr=function(t){return void 0===t&&(t=""),wn.audio.test(t.trim().toLowerCase())},Mr=function(t){if(t&&"string"==typeof t){var i=t.toLowerCase().split(",").map(function(v){return zn(v.trim())}),l="video";1===i.length&&Cr(i[0])?l="audio":1===i.length&&function(t){return void 0===t&&(t=""),wn.text.test(t.trim().toLowerCase())}(i[0])&&(l="application");var f="mp4";return i.every(function(v){return wn.mp4.test(v)})?f="mp4":i.every(function(v){return wn.webm.test(v)})?f="webm":i.every(function(v){return wn.ogg.test(v)})&&(f="ogg"),l+"/"+f+';codecs="'+t+'"'}},Pr=function(t){return void 0===t&&(t=""),le().MediaSource&&le().MediaSource.isTypeSupported&&le().MediaSource.isTypeSupported(Mr(t))||!1},yi=function(t){return void 0===t&&(t=""),t.toLowerCase().split(",").every(function(i){i=i.trim();for(var l=0;l<jn.length;l++)if(wn["muxer"+jn[l]].test(i))return!0;return!1})},Ir="mp4a.40.2",Bn=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Nn=/^application\/dash\+xml/i,xr=function(t){return Bn.test(t)?"hls":Nn.test(t)?"dash":"application/vnd.videojs.vhs+json"===t?"vhs-json":null},Ws=function(t){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},On=function(t){return t instanceof Uint8Array?t:(!Array.isArray(t)&&!function(t){return Ws(t)}(t)&&!(t instanceof ArrayBuffer)&&(t="number"!=typeof t||"number"==typeof t&&t!=t?0:[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))},gr=le().BigInt||Number,zi=[gr("0x1"),gr("0x100"),gr("0x10000"),gr("0x1000000"),gr("0x100000000"),gr("0x10000000000"),gr("0x1000000000000"),gr("0x100000000000000"),gr("0x10000000000000000")],wi=(c=new Uint16Array([65484]),new Uint8Array(c.buffer,c.byteOffset,c.byteLength),function(t,i){var l=void 0===i?{}:i,f=l.signed,v=void 0!==f&&f,E=l.le,I=void 0!==E&&E;t=On(t);var $=I?"reduce":"reduceRight",me=(t[$]?t[$]:Array.prototype[$]).call(t,function(It,xt,it){var Gt=I?it:Math.abs(it+1-t.length);return It+gr(xt)*zi[Gt]},gr(0));if(v){var ze=zi[t.length]/gr(2)-gr(1);(me=gr(me))>ze&&(me-=ze,me-=ze,me-=gr(2))}return Number(me)}),Ar=function(t,i){if("string"!=typeof t&&t&&"function"==typeof t.toString&&(t=t.toString()),"string"!=typeof t)return new Uint8Array;i||(t=unescape(encodeURIComponent(t)));for(var l=new Uint8Array(t.length),f=0;f<t.length;f++)l[f]=t.charCodeAt(f);return l},Rn=function(t,i,l){var f=void 0===l?{}:l,v=f.offset,E=void 0===v?0:v,I=f.mask,$=void 0===I?[]:I;return t=On(t),(i=On(i)).length&&t.length-E>=i.length&&(i.every?i.every:Array.prototype.every).call(i,function(me,ze){return me===($[ze]?$[ze]&t[E+ze]:t[E+ze])})};const Ae=function(t,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(t)&&(t=le().location&&le().location.href||"");var l="function"==typeof le().URL,f=/^\/\//.test(t),v=!le().location&&!/\/\//i.test(t);if(l?t=new(le().URL)(t,le().location||"http://example.com"):/\/\//i.test(t)||(t=W().buildAbsoluteURL(le().location&&le().location.href||"",t)),l){var E=new URL(i,t);return v?E.href.slice(18):f?E.href.slice(E.protocol.length):E.href}return W().buildAbsoluteURL(t,i)};var he=H(3862);const Ne=c=>!!c&&"object"==typeof c,ct=(...c)=>c.reduce((t,i)=>("object"!=typeof i||Object.keys(i).forEach(l=>{t[l]=Array.isArray(t[l])&&Array.isArray(i[l])?t[l].concat(i[l]):Ne(t[l])&&Ne(i[l])?ct(t[l],i[l]):i[l]}),t),{}),cn=c=>Object.keys(c).map(t=>c[t]),kr=c=>c.reduce((t,i)=>t.concat(i),[]),ti=c=>{if(!c.length)return[];const t=[];for(let i=0;i<c.length;i++)t.push(c[i]);return t};const An=({baseUrl:c="",source:t="",range:i="",indexRange:l=""})=>{const f={uri:t,resolvedUri:Ae(c||"",t)};if(i||l){const E=(i||l).split("-");let ce,I=le().BigInt?le().BigInt(E[0]):parseInt(E[0],10),$=le().BigInt?le().BigInt(E[1]):parseInt(E[1],10);I<Number.MAX_SAFE_INTEGER&&"bigint"==typeof I&&(I=Number(I)),$<Number.MAX_SAFE_INTEGER&&"bigint"==typeof $&&($=Number($)),ce="bigint"==typeof $||"bigint"==typeof I?le().BigInt($)-le().BigInt(I)+le().BigInt(1):$-I+1,"bigint"==typeof ce&&ce<Number.MAX_SAFE_INTEGER&&(ce=Number(ce)),f.byterange={length:ce,offset:I}}return f},ir=c=>(c&&"number"!=typeof c&&(c=parseInt(c,10)),isNaN(c)?null:c),yr={static(c){const{duration:t,timescale:i=1,sourceDuration:l,periodDuration:f}=c,v=ir(c.endNumber),E=t/i;return"number"==typeof v?{start:0,end:v}:"number"==typeof f?{start:0,end:f/E}:{start:0,end:l/E}},dynamic(c){const{NOW:t,clientOffset:i,availabilityStartTime:l,timescale:f=1,duration:v,periodStart:E=0,minimumUpdatePeriod:I=0,timeShiftBufferDepth:$=1/0}=c,ce=ir(c.endNumber),me=(t+i)/1e3,ze=l+E,it=Math.ceil((me+I-ze)*f/v),Gt=Math.floor((me-ze-$)*f/v),en=Math.floor((me-ze)*f/v);return{start:Math.max(0,Gt),end:"number"==typeof ce?ce:Math.min(it,en)}}},fi=c=>{const{type:t,duration:i,timescale:l=1,periodDuration:f,sourceDuration:v}=c,{start:E,end:I}=yr[t](c),$=((c,t)=>{const i=[];for(let l=c;l<t;l++)i.push(l);return i})(E,I).map((c=>t=>{const{duration:i,timescale:l=1,periodStart:f,startNumber:v=1}=c;return{number:v+t,duration:i/l,timeline:f,time:t*i}})(c));if("static"===t){const ce=$.length-1;$[ce].duration=("number"==typeof f?f:v)-i/l*ce}return $},pi=c=>{const{baseUrl:t,initialization:i={},sourceDuration:l,indexRange:f="",periodStart:v,presentationTime:E,number:I=0,duration:$}=c;if(!t)throw new Error("NO_BASE_URL");const ce=An({baseUrl:t,source:i.sourceURL,range:i.range}),me=An({baseUrl:t,source:t,indexRange:f});if(me.map=ce,$){const ze=fi(c);ze.length&&(me.duration=ze[0].duration,me.timeline=ze[0].timeline)}else l&&(me.duration=l,me.timeline=v);return me.presentationTime=E||v,me.number=I,[me]},rs=(c,t,i)=>{const l=c.sidx.map?c.sidx.map:null,f=c.sidx.duration,v=c.timeline||0,E=c.sidx.byterange,I=E.offset+E.length,$=t.timescale,ce=t.references.filter(en=>1!==en.referenceType),me=[],ze=c.endList?"static":"dynamic",It=c.sidx.timeline;let Gt,xt=It,it=c.mediaSequence||0;Gt="bigint"==typeof t.firstOffset?le().BigInt(I)+t.firstOffset:I+t.firstOffset;for(let en=0;en<ce.length;en++){const an=t.references[en],Qt=an.referencedSize,Sn=an.subsegmentDuration;let fn;fn="bigint"==typeof Gt?Gt+le().BigInt(Qt)-le().BigInt(1):Gt+Qt-1;const Dr=pi({baseUrl:i,timescale:$,timeline:v,periodStart:It,presentationTime:xt,number:it,duration:Sn,sourceDuration:f,indexRange:`${Gt}-${fn}`,type:ze})[0];l&&(Dr.map=l),me.push(Dr),Gt+="bigint"==typeof Gt?le().BigInt(Qt):Qt,xt+=Sn/$,it++}return c.segments=me,c},Ks=["AUDIO","SUBTITLES"],Ns=c=>((c,t)=>cn(c.reduce((i,l)=>(l.forEach(f=>{i[(({timeline:t})=>t)(f)]=f}),i),{})))(c).sort((t,i)=>t.timeline>i.timeline?1:-1),Ls=c=>{let t=[];return function(t,i,l){i.forEach(function(f){for(var v in t.mediaGroups[f])for(var E in t.mediaGroups[f][v])l(t.mediaGroups[f][v][E])})}(c,Ks,(i,l,f,v)=>{t=t.concat(i.playlists||[])}),t},Ho=({playlist:c,mediaSequence:t})=>{c.mediaSequence=t,c.segments.forEach((i,l)=>{i.number=c.mediaSequence+l})},oi=c=>c&&c.uri+"-"+(c=>{let t;return t="bigint"==typeof c.offset||"bigint"==typeof c.length?le().BigInt(c.offset)+le().BigInt(c.length)-le().BigInt(1):c.offset+c.length-1,`${c.offset}-${t}`})(c.byterange),fo=c=>cn(c.reduce((i,l)=>{const f=l.attributes.id+(l.attributes.lang||"");return i[f]?(l.segments&&(l.segments[0]&&(l.segments[0].discontinuity=!0),i[f].segments.push(...l.segments)),l.attributes.contentProtection&&(i[f].attributes.contentProtection=l.attributes.contentProtection)):(i[f]=l,i[f].attributes.timelineStarts=[]),i[f].attributes.timelineStarts.push({start:l.attributes.periodStart,timeline:l.attributes.periodStart}),i},{})).map(i=>(i.discontinuityStarts=((c,t)=>c.reduce((i,l,f)=>(l.discontinuity&&i.push(f),i),[]))(i.segments||[]),i)),Zs=(c,t)=>{const i=oi(c.sidx),l=i&&t[i]&&t[i].sidx;return l&&rs(c,l,c.sidx.resolvedUri),c},ya=(c,t={})=>{if(!Object.keys(t).length)return c;for(const i in c)c[i]=Zs(c[i],t);return c},Fs=({attributes:c,segments:t,sidx:i,discontinuityStarts:l})=>{const f={attributes:{NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===c.type,timeline:c.periodStart,resolvedUri:"",targetDuration:c.duration,discontinuityStarts:l,timelineStarts:c.timelineStarts,segments:t};return c.frameRate&&(f.attributes["FRAME-RATE"]=c.frameRate),c.contentProtection&&(f.contentProtection=c.contentProtection),i&&(f.sidx=i),f},za=({attributes:c})=>"video/mp4"===c.mimeType||"video/webm"===c.mimeType||"video"===c.contentType,as=({attributes:c})=>"audio/mp4"===c.mimeType||"audio/webm"===c.mimeType||"audio"===c.contentType,qa=({attributes:c})=>"text/vtt"===c.mimeType||"text"===c.contentType,_r=c=>c?Object.keys(c).reduce((t,i)=>t.concat(c[i].playlists),[]):[],us=({dashPlaylists:c,locations:t,sidxMapping:i={},previousManifest:l,eventStream:f})=>{if(!c.length)return{};const{sourceDuration:v,type:E,suggestedPresentationDelay:I,minimumUpdatePeriod:$}=c[0].attributes,ce=fo(c.filter(za)).map(Fs),me=fo(c.filter(as)),ze=fo(c.filter(qa)),It=c.map(Sn=>Sn.attributes.captionServices).filter(Boolean),xt={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:v,playlists:ya(ce,i)};$>=0&&(xt.minimumUpdatePeriod=1e3*$),t&&(xt.locations=t),"dynamic"===E&&(xt.suggestedPresentationDelay=I),f&&f.length>0&&(xt.eventStream=f);const Gt=me.length?((c,t={},i=!1)=>{let l;const f=c.reduce((v,E)=>{const I=E.attributes.role&&E.attributes.role.value||"",$=E.attributes.lang||"";let ce=E.attributes.label||"main";$&&!E.attributes.label&&(ce=`${E.attributes.lang}${I?` (${I})`:""}`),v[ce]||(v[ce]={language:$,autoselect:!0,default:"main"===I,playlists:[],uri:""});const me=Zs((({attributes:c,segments:t,sidx:i,mediaSequence:l,discontinuitySequence:f,discontinuityStarts:v},E)=>{const I={attributes:{NAME:c.id,BANDWIDTH:c.bandwidth,CODECS:c.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===c.type,timeline:c.periodStart,resolvedUri:"",targetDuration:c.duration,discontinuitySequence:f,discontinuityStarts:v,timelineStarts:c.timelineStarts,mediaSequence:l,segments:t};return c.contentProtection&&(I.contentProtection=c.contentProtection),i&&(I.sidx=i),E&&(I.attributes.AUDIO="audio",I.attributes.SUBTITLES="subs"),I})(E,i),t);return v[ce].playlists.push(me),typeof l>"u"&&"main"===I&&(l=E,l.default=!0),v},{});return l||(f[Object.keys(f)[0]].default=!0),f})(me,i,0===xt.playlists.length):null,en=ze.length?((c,t={})=>c.reduce((i,l)=>{const f=l.attributes.label||l.attributes.lang||"text";return i[f]||(i[f]={language:f,default:!1,autoselect:!1,playlists:[],uri:""}),i[f].playlists.push(Zs((({attributes:c,segments:t,mediaSequence:i,discontinuityStarts:l,discontinuitySequence:f})=>{typeof t>"u"&&(t=[{uri:c.baseUrl,timeline:c.periodStart,resolvedUri:c.baseUrl||"",duration:c.sourceDuration,number:0}],c.duration=c.sourceDuration);const v={NAME:c.id,BANDWIDTH:c.bandwidth,"PROGRAM-ID":1};return c.codecs&&(v.CODECS=c.codecs),{attributes:v,uri:"",endList:"static"===c.type,timeline:c.periodStart,resolvedUri:c.baseUrl||"",targetDuration:c.duration,timelineStarts:c.timelineStarts,discontinuityStarts:l,discontinuitySequence:f,mediaSequence:i,segments:t}})(l),t)),i},{}))(ze,i):null,an=ce.concat(_r(Gt),_r(en)),Qt=an.map(({timelineStarts:Sn})=>Sn);return xt.timelineStarts=Ns(Qt),((c,t)=>{c.forEach(i=>{i.mediaSequence=0,i.discontinuitySequence=t.findIndex(function({timeline:l}){return l===i.timeline}),i.segments&&i.segments.forEach((l,f)=>{l.number=f})})})(an,xt.timelineStarts),Gt&&(xt.mediaGroups.AUDIO.audio=Gt),en&&(xt.mediaGroups.SUBTITLES.subs=en),It.length&&(xt.mediaGroups["CLOSED-CAPTIONS"].cc=(c=>c.reduce((t,i)=>(i&&i.forEach(l=>{const{channel:f,language:v}=l;t[v]={autoselect:!1,default:!1,instreamId:f,language:v},l.hasOwnProperty("aspectRatio")&&(t[v].aspectRatio=l.aspectRatio),l.hasOwnProperty("easyReader")&&(t[v].easyReader=l.easyReader),l.hasOwnProperty("3D")&&(t[v]["3D"]=l["3D"])}),t),{}))(It)),l?(({oldManifest:c,newManifest:t})=>{const i=c.playlists.concat(Ls(c)),l=t.playlists.concat(Ls(t));return t.timelineStarts=Ns([c.timelineStarts,t.timelineStarts]),(({oldPlaylists:c,newPlaylists:t,timelineStarts:i})=>{t.forEach(l=>{l.discontinuitySequence=i.findIndex(function({timeline:$}){return $===l.timeline});const f=((c,t)=>{for(let i=0;i<c.length;i++)if(c[i].attributes.NAME===t)return c[i];return null})(c,l.attributes.NAME);if(!f||l.sidx)return;const v=l.segments[0],E=f.segments.findIndex(function($){return Math.abs($.presentationTime-v.presentationTime)<.016666666666666666});if(-1===E)return Ho({playlist:l,mediaSequence:f.mediaSequence+f.segments.length}),l.segments[0].discontinuity=!0,l.discontinuityStarts.unshift(0),void((!f.segments.length&&l.timeline>f.timeline||f.segments.length&&l.timeline>f.segments[f.segments.length-1].timeline)&&l.discontinuitySequence--);f.segments[E].discontinuity&&!v.discontinuity&&(v.discontinuity=!0,l.discontinuityStarts.unshift(0),l.discontinuitySequence--),Ho({playlist:l,mediaSequence:f.segments[E].number})})})({oldPlaylists:i,newPlaylists:l,timelineStarts:t.timelineStarts}),t})({oldManifest:l,newManifest:xt}):xt},Ci=(c,t,i)=>{const{NOW:l,clientOffset:f,availabilityStartTime:v,timescale:E=1,periodStart:I=0,minimumUpdatePeriod:$=0}=c;return Math.ceil((((l+f)/1e3+$-(v+I))*E-t)/i)},Mo=(c,t)=>{const{type:i,minimumUpdatePeriod:l=0,media:f="",sourceDuration:v,timescale:E=1,startNumber:I=1,periodStart:$}=c,ce=[];let me=-1;for(let ze=0;ze<t.length;ze++){const It=t[ze],xt=It.d,it=It.r||0,Gt=It.t||0;let en;if(me<0&&(me=Gt),Gt&&Gt>me&&(me=Gt),it<0){const Sn=ze+1;en=Sn===t.length?"dynamic"===i&&l>0&&f.indexOf("$Number$")>0?Ci(c,me,xt):(v*E-me)/xt:(t[Sn].t-me)/xt}else en=it+1;const an=I+ce.length+en;let Qt=I+ce.length;for(;Qt<an;)ce.push({number:Qt,duration:xt/E,time:me,timeline:$}),me+=xt,Qt++}return ce},is=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,mt=(c,t)=>c.replace(is,(c=>(t,i,l,f)=>{if("$$"===t)return"$";if(typeof c[i]>"u")return t;const v=""+c[i];return"RepresentationID"===i||(f=l?parseInt(f,10):1,v.length>=f)?v:`${new Array(f-v.length+1).join("0")}${v}`})(t)),Ct=(c,t)=>{const i={RepresentationID:c.id,Bandwidth:c.bandwidth||0},{initialization:l={sourceURL:"",range:""}}=c,f=An({baseUrl:c.baseUrl,source:mt(l.sourceURL,i),range:l.range});return((c,t)=>c.duration||t?c.duration?fi(c):Mo(c,t):[{number:c.startNumber||1,duration:c.sourceDuration,time:0,timeline:c.periodStart}])(c,t).map(E=>{i.Number=E.number,i.Time=E.time;const I=mt(c.media||"",i),me=c.periodStart+(E.time-(c.presentationTimeOffset||0))/(c.timescale||1);return{uri:I,timeline:E.timeline,duration:E.duration,resolvedUri:Ae(c.baseUrl||"",I),map:f,number:E.number,presentationTime:me}})},ln=(c,t)=>{const{duration:i,segmentUrls:l=[],periodStart:f}=c;if(!i&&!t||i&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");const v=l.map($=>((c,t)=>{const{baseUrl:i,initialization:l={}}=c,f=An({baseUrl:i,source:l.sourceURL,range:l.range}),v=An({baseUrl:i,source:t.media,range:t.mediaRange});return v.map=f,v})(c,$));let E;return i&&(E=fi(c)),t&&(E=Mo(c,t)),E.map(($,ce)=>{if(v[ce]){const me=v[ce],ze=c.timescale||1,It=c.presentationTimeOffset||0;return me.timeline=$.timeline,me.duration=$.duration,me.number=$.number,me.presentationTime=f+($.time-It)/ze,me}}).filter($=>$)},rn=({attributes:c,segmentInfo:t})=>{let i,l;t.template?(l=Ct,i=ct(c,t.template)):t.base?(l=pi,i=ct(c,t.base)):t.list&&(l=ln,i=ct(c,t.list));const f={attributes:c};if(!l)return f;const v=l(i,t.segmentTimeline);if(i.duration){const{duration:E,timescale:I=1}=i;i.duration=E/I}else i.duration=v.length?v.reduce((E,I)=>Math.max(E,Math.ceil(I.duration)),0):0;return f.attributes=i,f.segments=v,t.base&&i.indexRange&&(f.sidx=v[0],f.segments=[]),f},Dn=(c,t)=>ti(c.childNodes).filter(({tagName:i})=>i===t),Sr=c=>c.textContent.trim(),Ni=c=>{const I=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(c);if(!I)return 0;const[$,ce,me,ze,It,xt]=I.slice(1);return 31536e3*parseFloat($||0)+2592e3*parseFloat(ce||0)+86400*parseFloat(me||0)+3600*parseFloat(ze||0)+60*parseFloat(It||0)+parseFloat(xt||0)},Li={mediaPresentationDuration:c=>Ni(c),availabilityStartTime:c=>(c=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(c)&&(c+="Z"),Date.parse(c)))(c)/1e3,minimumUpdatePeriod:c=>Ni(c),suggestedPresentationDelay:c=>Ni(c),type:c=>c,timeShiftBufferDepth:c=>Ni(c),start:c=>Ni(c),width:c=>parseInt(c,10),height:c=>parseInt(c,10),bandwidth:c=>parseInt(c,10),frameRate:c=>(c=>parseFloat(c.split("/").reduce((t,i)=>t/i)))(c),startNumber:c=>parseInt(c,10),timescale:c=>parseInt(c,10),presentationTimeOffset:c=>parseInt(c,10),duration(c){const t=parseInt(c,10);return isNaN(t)?Ni(c):t},d:c=>parseInt(c,10),t:c=>parseInt(c,10),r:c=>parseInt(c,10),presentationTime:c=>parseInt(c,10),DEFAULT:c=>c},Xr=c=>c&&c.attributes?ti(c.attributes).reduce((t,i)=>(t[i.name]=(Li[i.name]||Li.DEFAULT)(i.value),t),{}):{},Qs={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},br=(c,t)=>t.length?kr(c.map(function(i){return t.map(function(l){return Ae(i,Sr(l))})})):c,Ji=c=>{const t=Dn(c,"SegmentTemplate")[0],i=Dn(c,"SegmentList")[0],l=i&&Dn(i,"SegmentURL").map(ze=>ct({tag:"SegmentURL"},Xr(ze))),f=Dn(c,"SegmentBase")[0],v=i||t,E=v&&Dn(v,"SegmentTimeline")[0],I=i||f||t,$=I&&Dn(I,"Initialization")[0],ce=t&&Xr(t);ce&&$?ce.initialization=$&&Xr($):ce&&ce.initialization&&(ce.initialization={sourceURL:ce.initialization});const me={template:ce,segmentTimeline:E&&Dn(E,"S").map(ze=>Xr(ze)),list:i&&ct(Xr(i),{segmentUrls:l,initialization:Xr($)}),base:f&&ct(Xr(f),{initialization:Xr($)})};return Object.keys(me).forEach(ze=>{me[ze]||delete me[ze]}),me},Yo=c=>kr(Dn(c.node,"EventStream").map(t=>{const i=Xr(t),l=i.schemeIdUri;return Dn(t,"Event").map(f=>{const v=Xr(f),I=i.timescale||1,ce=(v.presentationTime||0)/I+c.attributes.start;return{schemeIdUri:l,value:i.value,id:v.id,start:ce,end:ce+(v.duration||0)/I,messageData:Sr(f)||v.messageData,contentEncoding:i.contentEncoding,presentationTimeOffset:i.presentationTimeOffset||0}})})),Go=(c,t,i)=>l=>{const f=Xr(l),v=br(t,Dn(l,"BaseURL")),E=Dn(l,"Role")[0],I={role:Xr(E)};let $=ct(c,f,I);const ce=Dn(l,"Accessibility")[0],me=(c=>"urn:scte:dash:cc:cea-608:2015"===c.schemeIdUri?("string"!=typeof c.value?[]:c.value.split(";")).map(i=>{let l,f;return f=i,/^CC\d=/.test(i)?[l,f]=i.split("="):/^CC\d$/.test(i)&&(l=i),{channel:l,language:f}}):"urn:scte:dash:cc:cea-708:2015"===c.schemeIdUri?("string"!=typeof c.value?[]:c.value.split(";")).map(i=>{const l={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){const[f,v=""]=i.split("=");l.channel=f,l.language=i,v.split(",").forEach(E=>{const[I,$]=E.split(":");"lang"===I?l.language=$:"er"===I?l.easyReader=Number($):"war"===I?l.aspectRatio=Number($):"3D"===I&&(l["3D"]=Number($))})}else l.language=i;return l.channel&&(l.channel="SERVICE"+l.channel),l}):void 0)(Xr(ce));me&&($=ct($,{captionServices:me}));const ze=Dn(l,"Label")[0];if(ze&&ze.childNodes.length){const en=ze.childNodes[0].nodeValue.trim();$=ct($,{label:en})}const It=(c=>c.reduce((t,i)=>{const l=Xr(i);l.schemeIdUri&&(l.schemeIdUri=l.schemeIdUri.toLowerCase());const f=Qs[l.schemeIdUri];if(f){t[f]={attributes:l};const v=Dn(i,"cenc:pssh")[0];if(v){const E=Sr(v);t[f].pssh=E&&function Tn(c){for(var t=function(t){return le().atob?le().atob(t):Buffer.from(t,"base64").toString("binary")}(c),i=new Uint8Array(t.length),l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i}(E)}}return t},{}))(Dn(l,"ContentProtection"));Object.keys(It).length&&($=ct($,{contentProtection:It}));const xt=Ji(l),it=Dn(l,"Representation"),Gt=ct(i,xt);return kr(it.map(((c,t,i)=>l=>{const f=Dn(l,"BaseURL"),v=br(t,f),E=ct(c,Xr(l)),I=Ji(l);return v.map($=>({segmentInfo:ct(i,I),attributes:ct(E,{baseUrl:$})}))})($,v,Gt)))},po=(c,t)=>(i,l)=>{const f=br(t,Dn(i.node,"BaseURL")),v=ct(c,{periodStart:i.attributes.start});"number"==typeof i.attributes.duration&&(v.periodDuration=i.attributes.duration);const E=Dn(i.node,"AdaptationSet"),I=Ji(i.node);return kr(E.map(Go(v,f,I)))},ks=c=>{if(""===c)throw new Error("DASH_EMPTY_MANIFEST");const t=new he.DOMParser;let i,l;try{i=t.parseFromString(c,"application/xml"),l=i&&"MPD"===i.documentElement.tagName?i.documentElement:null}catch{}if(!l||l&&l.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return l};var Po,Pi=H(5035),Na=H.n(Pi),go=On([73,68,51]),Gs=function c(t,i){return void 0===i&&(i=0),(t=On(t)).length-i<10||!Rn(t,go,{offset:i})?i:(i+=function(t,i){void 0===i&&(i=0);var f=(t=On(t))[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9];return(16&t[i+5])>>4?f+20:f+10}(t,i),c(t,i))},io=(new Uint8Array([79,112,117,115,72,101,97,100]),function(t){return"string"==typeof t?Ar(t):t}),cs=function(t){t=On(t);for(var i=[],l=0;t.length>l;){var f=t[l],v=0,E=0,I=t[++E];for(E++;128&I;)v=(127&I)<<7,I=t[E],E++;v+=127&I;for(var $=0;$<Po.length;$++){var ce=Po[$];if(f===ce.id){i.push((0,ce.parser)(t.subarray(E,E+v)));break}}l+=v+E}return i};Po=[{id:3,parser:function(t){var i={tag:3,id:t[0]<<8|t[1],flags:t[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&i.flags&&(i.dependsOnEsId=t[i.size]<<8|t[i.size+1],i.size+=2),64&i.flags){var l=t[i.size];i.url=function(t){if(!t)return"";t=Array.prototype.slice.call(t);var i=String.fromCharCode.apply(null,On(t));try{return decodeURIComponent(escape(i))}catch{}return i}(t.subarray(i.size+1,i.size+1+l)),i.size+=l}return 32&i.flags&&(i.ocrEsId=t[i.size]<<8|t[i.size+1],i.size+=2),i.descriptors=cs(t.subarray(i.size))||[],i}},{id:4,parser:function(t){return{tag:4,oti:t[0],streamType:t[1],bufferSize:t[2]<<16|t[3]<<8|t[4],maxBitrate:t[5]<<24|t[6]<<16|t[7]<<8|t[8],avgBitrate:t[9]<<24|t[10]<<16|t[11]<<8|t[12],descriptors:cs(t.subarray(13))}}},{id:5,parser:function(t){return{tag:5,bytes:t}}},{id:6,parser:function(t){return{tag:6,bytes:t}}}];var jr=function c(t,i,l){void 0===l&&(l=!1),i=function(t){return Array.isArray(t)?t.map(function(i){return io(i)}):[io(t)]}(i),t=On(t);var f=[];if(!i.length)return f;for(var v=0;v<t.length;){var E=(t[v]<<24|t[v+1]<<16|t[v+2]<<8|t[v+3])>>>0,I=t.subarray(v+4,v+8);if(0===E)break;var $=v+E;if($>t.length){if(l)break;$=t.length}var ce=t.subarray(v+8,$);Rn(I,i[0])&&(1===i.length?f.push(ce):f.push.apply(f,c(ce,i.slice(1),l))),v=$}return f},Wi={EBML:On([26,69,223,163]),DocType:On([66,130]),Segment:On([24,83,128,103]),SegmentInfo:On([21,73,169,102]),Tracks:On([22,84,174,107]),Track:On([174]),TrackNumber:On([215]),DefaultDuration:On([35,227,131]),TrackEntry:On([174]),TrackType:On([131]),FlagDefault:On([136]),CodecID:On([134]),CodecPrivate:On([99,162]),VideoTrack:On([224]),AudioTrack:On([225]),Cluster:On([31,67,182,117]),Timestamp:On([231]),TimestampScale:On([42,215,177]),BlockGroup:On([160]),BlockDuration:On([155]),Block:On([161]),SimpleBlock:On([163])},To=[128,64,32,16,8,4,2,1],Ro=function(t,i,l,f){void 0===l&&(l=!0),void 0===f&&(f=!1);var v=function(t){for(var i=1,l=0;l<To.length&&!(t&To[l]);l++)i++;return i}(t[i]),E=t.subarray(i,i+v);return l&&((E=Array.prototype.slice.call(t,i,i+v))[0]^=To[v-1]),{length:v,value:wi(E,{signed:f}),bytes:E}},La=function c(t){return"string"==typeof t?t.match(/.{1,2}/g).map(function(i){return c(i)}):"number"==typeof t?function(t,i){var f=(void 0===i?{}:i).le,v=void 0!==f&&f;("bigint"!=typeof t&&"number"!=typeof t||"number"==typeof t&&t!=t)&&(t=0);for(var E=function(t){return Math.ceil(function(t){return t.toString(2).length}(t)/8)}(t=gr(t)),I=new Uint8Array(new ArrayBuffer(E)),$=0;$<E;$++){var ce=v?$:Math.abs($+1-I.length);I[ce]=Number(t/zi[$]&gr(255)),t<0&&(I[ce]=Math.abs(~I[ce]),I[ce]-=0===$?1:2)}return I}(t):t},xl=function c(t,i,l){if(l>=i.length)return i.length;var f=Ro(i,l,!1);if(Rn(t.bytes,f.bytes))return l;var v=Ro(i,l+f.length);return c(t,i,l+v.length+v.value+f.length)},Ki=function c(t,i){i=function(t){return Array.isArray(t)?t.map(function(i){return La(i)}):[La(t)]}(i),t=On(t);var l=[];if(!i.length)return l;for(var f=0;f<t.length;){var v=Ro(t,f,!1),E=Ro(t,f+v.length),I=f+v.length+E.length;127===E.value&&(E.value=xl(v,t,I),E.value!==t.length&&(E.value-=I));var ce=t.subarray(I,I+E.value>t.length?t.length:I+E.value);Rn(i[0],v.bytes)&&(1===i.length?l.push(ce):l=l.concat(c(ce,i.slice(1)))),f+=v.length+E.length+ce.length}return l},ke=On([0,0,0,1]),Wt=On([0,0,1]),Q=On([0,0,3]),X=function(t){for(var i=[],l=1;l<t.length-2;)Rn(t.subarray(l,l+3),Q)&&(i.push(l+2),l++),l++;if(0===i.length)return t;var f=t.length-i.length,v=new Uint8Array(f),E=0;for(l=0;l<f;E++,l++)E===i[0]&&(E++,i.shift()),v[l]=t[E];return v},xe=function(t,i,l,f){void 0===f&&(f=1/0),t=On(t),l=[].concat(l);for(var E,v=0,I=0;v<t.length&&(I<f||E);){var $=void 0;if(Rn(t.subarray(v),ke)?$=4:Rn(t.subarray(v),Wt)&&($=3),$){if(I++,E)return X(t.subarray(E,v));var ce=void 0;"h264"===i?ce=31&t[v+$]:"h265"===i&&(ce=t[v+$]>>1&63),-1!==l.indexOf(ce)&&(E=v+$),v+=$+("h264"===i?1:2)}else v++}return t.subarray(0,0)},Mt={webm:On([119,101,98,109]),matroska:On([109,97,116,114,111,115,107,97]),flac:On([102,76,97,67]),ogg:On([79,103,103,83]),ac3:On([11,119]),riff:On([82,73,70,70]),avi:On([65,86,73]),wav:On([87,65,86,69]),"3gp":On([102,116,121,112,51,103]),mp4:On([102,116,121,112]),fmp4:On([115,116,121,112]),mov:On([102,116,121,112,113,116]),moov:On([109,111,111,118]),moof:On([109,111,111,102])},hn={aac:function(t){var i=Gs(t);return Rn(t,[255,16],{offset:i,mask:[255,22]})},mp3:function(t){var i=Gs(t);return Rn(t,[255,2],{offset:i,mask:[255,6]})},webm:function(t){var i=Ki(t,[Wi.EBML,Wi.DocType])[0];return Rn(i,Mt.webm)},mkv:function(t){var i=Ki(t,[Wi.EBML,Wi.DocType])[0];return Rn(i,Mt.matroska)},mp4:function(t){return!hn["3gp"](t)&&!hn.mov(t)&&(!!(Rn(t,Mt.mp4,{offset:4})||Rn(t,Mt.fmp4,{offset:4})||Rn(t,Mt.moof,{offset:4})||Rn(t,Mt.moov,{offset:4}))||void 0)},mov:function(t){return Rn(t,Mt.mov,{offset:4})},"3gp":function(t){return Rn(t,Mt["3gp"],{offset:4})},ac3:function(t){var i=Gs(t);return Rn(t,Mt.ac3,{offset:i})},ts:function(t){if(t.length<189&&t.length>=1)return 71===t[0];for(var i=0;i+188<t.length&&i<188;){if(71===t[i]&&71===t[i+188])return!0;i+=1}return!1},flac:function(t){var i=Gs(t);return Rn(t,Mt.flac,{offset:i})},ogg:function(t){return Rn(t,Mt.ogg)},avi:function(t){return Rn(t,Mt.riff)&&Rn(t,Mt.avi,{offset:8})},wav:function(t){return Rn(t,Mt.riff)&&Rn(t,Mt.wav,{offset:8})},h264:function(t){return function(t,i,l){return xe(t,"h264",7,3)}(t).length},h265:function(t){return function(t,i,l){return xe(t,"h265",[32,33],3)}(t).length}},qn=Object.keys(hn).filter(function(c){return"ts"!==c&&"h264"!==c&&"h265"!==c}).concat(["ts","h264","h265"]);qn.forEach(function(c){var t=hn[c];hn[c]=function(i){return t(On(i))}});var Kn=hn,lr=function(t){t=On(t);for(var i=0;i<qn.length;i++){var l=qn[i];if(Kn[l](t))return l}return""},Oi=H(5562);const ai={},Tr=function(c,t){return ai[c]=ai[c]||[],t&&(ai[c]=ai[c].concat(t)),ai[c]},ds=function(c,t){const i=Tr(c).indexOf(t);return!(i<=-1||(ai[c]=ai[c].slice(),ai[c].splice(i,1),0))},so={prefixed:!0},ki=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],xs=ki[0];let Eo;for(let c=0;c<ki.length;c++)if(ki[c][1]in qe()){Eo=ki[c];break}if(Eo){for(let c=0;c<Eo.length;c++)so[xs[c]]=Eo[c];so.prefixed=Eo[0]!==xs[0]}let hs=[];const $r=function da(c){let i,t="info";const l=function(...f){i("log",t,f)};return i=((c,t)=>(i,l,f)=>{const v=t.levels[l],E=new RegExp(`^(${v})$`);if("log"!==i&&f.unshift(i.toUpperCase()+":"),f.unshift(c+":"),hs){hs.push([].concat(f));const $=hs.length-1e3;hs.splice(0,$>0?$:0)}if(!le().console)return;let I=le().console[i];!I&&"debug"===i&&(I=le().console.info||le().console.log),I&&v&&E.test(i)&&I[Array.isArray(f)?"apply":"call"](le().console,f)})(c,l),l.createLogger=f=>da(c+": "+f),l.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t},l.level=f=>{if("string"==typeof f){if(!l.levels.hasOwnProperty(f))throw new Error(`"${f}" in not a valid log level`);t=f}return t},(l.history=()=>hs?[].concat(hs):[]).filter=f=>(hs||[]).filter(v=>new RegExp(`.*${f}.*`).test(v[0])),l.history.clear=()=>{hs&&(hs.length=0)},l.history.disable=()=>{null!==hs&&(hs.length=0,hs=null)},l.history.enable=()=>{null===hs&&(hs=[])},l.error=(...f)=>i("error",t,f),l.warn=(...f)=>i("warn",t,f),l.debug=(...f)=>i("debug",t,f),l}("VIDEOJS"),mo=$r.createLogger,il=Object.prototype.toString,Al=function(c){return zo(c)?Object.keys(c):[]};function Ka(c,t){Al(c).forEach(i=>t(c[i],i))}function sl(c,t,i=0){return Al(c).reduce((l,f)=>t(l,c[f],f),i)}function zo(c){return!!c&&"object"==typeof c}function Za(c){return zo(c)&&"[object Object]"===il.call(c)&&c.constructor===Object}function Ri(...c){const t={};return c.forEach(i=>{i&&Ka(i,(l,f)=>{Za(l)?(Za(t[f])||(t[f]={}),t[f]=Ri(t[f],l)):t[f]=l})}),t}function Qo(c,t,i,l=!0){const f=E=>Object.defineProperty(c,t,{value:E,enumerable:!0,writable:!0}),v={configurable:!0,enumerable:!0,get(){const E=i();return f(E),E}};return l&&(v.set=f),Object.defineProperty(c,t,v)}var ol=Object.freeze({__proto__:null,each:Ka,reduce:sl,isObject:zo,isPlain:Za,merge:Ri,defineLazyProperty:Qo});let hu,al=!1,Uu=null,Sa=!1,No=!1,fu=!1,Lo=!1,oo=!1,ul=null,Br=null,ra=null,N=!1,ae=!1,z=!1,Te=!1;const Ke=!(!hr()||!("ontouchstart"in le()||le().navigator.maxTouchPoints||le().DocumentTouch&&le().document instanceof le().DocumentTouch)),Nt=le().navigator&&le().navigator.userAgentData;if(Nt&&(Sa="Android"===Nt.platform,fu=!!Nt.brands.find(c=>"Microsoft Edge"===c.brand),Lo=!!Nt.brands.find(c=>"Chromium"===c.brand),oo=!fu&&Lo,ul=Br=(Nt.brands.find(c=>"Chromium"===c.brand)||{}).version||null,ae="Windows"===Nt.platform),!Lo){const c=le().navigator&&le().navigator.userAgent||"";al=/iPod/i.test(c),Uu=function(){const t=c.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Sa=/Android/i.test(c),hu=function(){const t=c.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const i=t[1]&&parseFloat(t[1]),l=t[2]&&parseFloat(t[2]);return i&&l?parseFloat(t[1]+"."+t[2]):i||null}(),No=/Firefox/i.test(c),fu=/Edg/i.test(c),Lo=/Chrome/i.test(c)||/CriOS/i.test(c),oo=!fu&&Lo,ul=Br=function(){const t=c.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),ra=function(){const t=/MSIE\s(\d+)\.\d/.exec(c);let i=t&&parseFloat(t[1]);return!i&&/Trident\/7.0/i.test(c)&&/rv:11.0/.test(c)&&(i=11),i}(),N=/Safari/i.test(c)&&!oo&&!Sa&&!fu,ae=/Windows/i.test(c),z=/iPad/i.test(c)||N&&Ke&&!/iPhone/i.test(c),Te=/iPhone/i.test(c)&&!z}const Zt=Te||z||al,Jn=(N||Zt)&&!oo;var es=Object.freeze({__proto__:null,get IS_IPOD(){return al},get IOS_VERSION(){return Uu},get IS_ANDROID(){return Sa},get ANDROID_VERSION(){return hu},get IS_FIREFOX(){return No},get IS_EDGE(){return fu},get IS_CHROMIUM(){return Lo},get IS_CHROME(){return oo},get CHROMIUM_VERSION(){return ul},get CHROME_VERSION(){return Br},get IE_VERSION(){return ra},get IS_SAFARI(){return N},get IS_WINDOWS(){return ae},get IS_IPAD(){return z},get IS_IPHONE(){return Te},TOUCH_ENABLED:Ke,IS_IOS:Zt,IS_ANY_SAFARI:Jn});function Gr(c){return"string"==typeof c&&!!c.trim()}function hr(){return qe()===le().document}function ji(c){return zo(c)&&1===c.nodeType}function Jr(){try{return le().parent!==le().self}catch{return!0}}function Yi(c){return function(t,i){if(!Gr(t))return qe()[c](null);Gr(i)&&(i=qe().querySelector(i));const l=ji(i)?i:qe();return l[c]&&l[c](t)}}function vr(c="div",t={},i={},l){const f=qe().createElement(c);return Object.getOwnPropertyNames(t).forEach(function(v){const E=t[v];"textContent"===v?Qn(f,E):(f[v]!==E||"tabIndex"===v)&&(f[v]=E)}),Object.getOwnPropertyNames(i).forEach(function(v){f.setAttribute(v,i[v])}),l&&En(f,l),f}function Qn(c,t){return typeof c.textContent>"u"?c.innerText=t:c.textContent=t,c}function qo(c,t){t.firstChild?t.insertBefore(c,t.firstChild):t.appendChild(c)}function Fo(c,t){return function zr(c){if(c.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(t),c.classList.contains(t)}function bs(c,...t){return c.classList.add(...t.reduce((i,l)=>i.concat(l.split(/\s+/)),[])),c}function ia(c,...t){return c?(c.classList.remove(...t.reduce((i,l)=>i.concat(l.split(/\s+/)),[])),c):($r.warn("removeClass was called with an element that doesn't exist"),null)}function ja(c,t,i){return"function"==typeof i&&(i=i(c,t)),"boolean"!=typeof i&&(i=void 0),t.split(/\s+/).forEach(l=>c.classList.toggle(l,i)),c}function Nc(c,t){Object.getOwnPropertyNames(t).forEach(function(i){const l=t[i];null===l||typeof l>"u"||!1===l?c.removeAttribute(i):c.setAttribute(i,!0===l?"":l)})}function jo(c){const t={};if(c&&c.attributes&&c.attributes.length>0){const l=c.attributes;for(let f=l.length-1;f>=0;f--){const v=l[f].name;let E=l[f].value;("boolean"==typeof c[v]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+v+","))&&(E=null!==E),t[v]=E}}return t}function kl(c,t){return c.getAttribute(t)}function wu(c,t,i){c.setAttribute(t,i)}function Ml(c,t){c.removeAttribute(t)}function sd(){qe().body.focus(),qe().onselectstart=function(){return!1}}function Cu(){qe().onselectstart=function(){return!0}}function pn(c){if(c&&c.getBoundingClientRect&&c.parentNode){const t=c.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(l=>{void 0!==t[l]&&(i[l]=t[l])}),i.height||(i.height=parseFloat(or(c,"height"))),i.width||(i.width=parseFloat(or(c,"width"))),i}}function Er(c){if(!c||c&&!c.offsetParent)return{left:0,top:0,width:0,height:0};const t=c.offsetWidth,i=c.offsetHeight;let l=0,f=0;for(;c.offsetParent&&c!==qe()[so.fullscreenElement];)l+=c.offsetLeft,f+=c.offsetTop,c=c.offsetParent;return{left:l,top:f,width:t,height:i}}function pu(c,t){const i={x:0,y:0};if(Zt){let me=c;for(;me&&"html"!==me.nodeName.toLowerCase();){const ze=or(me,"transform");if(/^matrix/.test(ze)){const It=ze.slice(7,-1).split(/,\s/).map(Number);i.x+=It[4],i.y+=It[5]}else if(/^matrix3d/.test(ze)){const It=ze.slice(9,-1).split(/,\s/).map(Number);i.x+=It[12],i.y+=It[13]}me=me.parentNode}}const l={},f=Er(t.target),v=Er(c),E=v.width;let $=t.offsetY-(v.top-f.top),ce=t.offsetX-(v.left-f.left);return t.changedTouches&&(ce=t.changedTouches[0].pageX-v.left,$=t.changedTouches[0].pageY+v.top,Zt&&(ce-=i.x,$-=i.y)),l.y=1-Math.max(0,Math.min(1,$/v.height)),l.x=Math.max(0,Math.min(1,ce/E)),l}function zs(c){return zo(c)&&3===c.nodeType}function ao(c){for(;c.firstChild;)c.removeChild(c.firstChild);return c}function Vu(c){return"function"==typeof c&&(c=c()),(Array.isArray(c)?c:[c]).map(t=>("function"==typeof t&&(t=t()),ji(t)||zs(t)?t:"string"==typeof t&&/\S/.test(t)?qe().createTextNode(t):void 0)).filter(t=>t)}function En(c,t){return Vu(t).forEach(i=>c.appendChild(i)),c}function Ui(c,t){return En(ao(c),t)}function Js(c){return void 0===c.button&&void 0===c.buttons||0===c.button&&void 0===c.buttons||"mouseup"===c.type&&0===c.button&&0===c.buttons||!(0!==c.button||1!==c.buttons)}const Ba=Yi("querySelector"),In=Yi("querySelectorAll");function or(c,t){if(!c||!t)return"";if("function"==typeof le().getComputedStyle){let i;try{i=le().getComputedStyle(c)}catch{return""}return i?i.getPropertyValue(t)||i[t]:""}return""}var nc=Object.freeze({__proto__:null,isReal:hr,isEl:ji,isInFrame:Jr,createEl:vr,textContent:Qn,prependTo:qo,hasClass:Fo,addClass:bs,removeClass:ia,toggleClass:ja,setAttributes:Nc,getAttributes:jo,getAttribute:kl,setAttribute:wu,removeAttribute:Ml,blockTextSelection:sd,unblockTextSelection:Cu,getBoundingClientRect:pn,findPosition:Er,getPointerPosition:pu,isTextNode:zs,emptyEl:ao,normalizeContent:Vu,appendContent:En,insertContent:Ui,isSingleLeftClick:Js,$:Ba,$$:In,computedStyle:or});let Vt,kn=!1;const gn=function(){if(!1===Vt.options.autoSetup)return;const c=Array.prototype.slice.call(qe().getElementsByTagName("video")),t=Array.prototype.slice.call(qe().getElementsByTagName("audio")),i=Array.prototype.slice.call(qe().getElementsByTagName("video-js")),l=c.concat(t,i);if(l&&l.length>0)for(let f=0,v=l.length;f<v;f++){const E=l[f];if(!E||!E.getAttribute){ui(1);break}void 0===E.player&&null!==E.getAttribute("data-setup")&&Vt(E)}else kn||ui(1)};function ui(c,t){hr()&&(t&&(Vt=t),le().setTimeout(gn,c))}function Ua(){kn=!0,le().removeEventListener("load",Ua)}hr()&&("complete"===qe().readyState?Ua():le().addEventListener("load",Ua));const sa=function(c){const t=qe().createElement("style");return t.className=c,t},Pl=function(c,t){c.styleSheet?c.styleSheet.cssText=t:c.textContent=t};var Xo=new WeakMap;let $u,Ol=3;function Da(){return Ol++}function ic(c,t){if(!Xo.has(c))return;const i=Xo.get(c);0===i.handlers[t].length&&(delete i.handlers[t],c.removeEventListener?c.removeEventListener(t,i.dispatcher,!1):c.detachEvent&&c.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&Xo.delete(c)}function ll(c,t,i,l){i.forEach(function(f){c(t,f,l)})}function Rl(c){if(c.fixed_)return c;function t(){return!0}function i(){return!1}if(!c||!c.isPropagationStopped||!c.isImmediatePropagationStopped){const l=c||le().event;c={};for(const f in l)"layerX"!==f&&"layerY"!==f&&"keyLocation"!==f&&"webkitMovementX"!==f&&"webkitMovementY"!==f&&"path"!==f&&("returnValue"===f&&l.preventDefault||(c[f]=l[f]));if(c.target||(c.target=c.srcElement||qe()),c.relatedTarget||(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement),c.preventDefault=function(){l.preventDefault&&l.preventDefault(),c.returnValue=!1,l.returnValue=!1,c.defaultPrevented=!0},c.defaultPrevented=!1,c.stopPropagation=function(){l.stopPropagation&&l.stopPropagation(),c.cancelBubble=!0,l.cancelBubble=!0,c.isPropagationStopped=t},c.isPropagationStopped=i,c.stopImmediatePropagation=function(){l.stopImmediatePropagation&&l.stopImmediatePropagation(),c.isImmediatePropagationStopped=t,c.stopPropagation()},c.isImmediatePropagationStopped=i,null!=c.clientX){const f=qe().documentElement,v=qe().body;c.pageX=c.clientX+(f&&f.scrollLeft||v&&v.scrollLeft||0)-(f&&f.clientLeft||v&&v.clientLeft||0),c.pageY=c.clientY+(f&&f.scrollTop||v&&v.scrollTop||0)-(f&&f.clientTop||v&&v.clientTop||0)}c.which=c.charCode||c.keyCode,null!=c.button&&(c.button=1&c.button?0:4&c.button?1:2&c.button?2:0)}return c.fixed_=!0,c}const Nr=function(){if("boolean"!=typeof $u){$u=!1;try{const c=Object.defineProperty({},"passive",{get(){$u=!0}});le().addEventListener("test",null,c),le().removeEventListener("test",null,c)}catch{}}return $u},Hu=["touchstart","touchmove"];function Jo(c,t,i){if(Array.isArray(t))return ll(Jo,c,t,i);Xo.has(c)||Xo.set(c,{});const l=Xo.get(c);if(l.handlers||(l.handlers={}),l.handlers[t]||(l.handlers[t]=[]),i.guid||(i.guid=Da()),l.handlers[t].push(i),l.dispatcher||(l.disabled=!1,l.dispatcher=function(f,v){if(l.disabled)return;f=Rl(f);const E=l.handlers[f.type];if(E){const I=E.slice(0);for(let $=0,ce=I.length;$<ce&&!f.isImmediatePropagationStopped();$++)try{I[$].call(c,f,v)}catch(me){$r.error(me)}}}),1===l.handlers[t].length)if(c.addEventListener){let f=!1;Nr()&&Hu.indexOf(t)>-1&&(f={passive:!0}),c.addEventListener(t,l.dispatcher,f)}else c.attachEvent&&c.attachEvent("on"+t,l.dispatcher)}function gi(c,t,i){if(!Xo.has(c))return;const l=Xo.get(c);if(!l.handlers)return;if(Array.isArray(t))return ll(gi,c,t,i);const f=function(E,I){l.handlers[I]=[],ic(E,I)};if(void 0===t){for(const E in l.handlers)Object.prototype.hasOwnProperty.call(l.handlers||{},E)&&f(c,E);return}const v=l.handlers[t];if(v){if(!i)return void f(c,t);if(i.guid)for(let E=0;E<v.length;E++)v[E].guid===i.guid&&v.splice(E--,1);ic(c,t)}}function cr(c,t,i){const l=Xo.has(c)?Xo.get(c):{},f=c.parentNode||c.ownerDocument;if("string"==typeof t?t={type:t,target:c}:t.target||(t.target=c),t=Rl(t),l.dispatcher&&l.dispatcher.call(c,t,i),f&&!t.isPropagationStopped()&&!0===t.bubbles)cr.call(null,f,t,i);else if(!f&&!t.defaultPrevented&&t.target&&t.target[t.type]){Xo.has(t.target)||Xo.set(t.target,{});const v=Xo.get(t.target);t.target[t.type]&&(v.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),v.disabled=!1)}return!t.defaultPrevented}function ha(c,t,i){if(Array.isArray(t))return ll(ha,c,t,i);const l=function(){gi(c,t,l),i.apply(this,arguments)};l.guid=i.guid=i.guid||Da(),Jo(c,t,l)}function Di(c,t,i){const l=function(){gi(c,t,l),i.apply(this,arguments)};l.guid=i.guid=i.guid||Da(),Jo(c,t,l)}var Ef=Object.freeze({__proto__:null,fixEvent:Rl,on:Jo,off:gi,trigger:cr,one:ha,any:Di});const yn=function(c,t,i){t.guid||(t.guid=Da());const l=t.bind(c);return l.guid=i?i+"_"+t.guid:t.guid,l},A=function(c,t){let i=le().performance.now();return function(...f){const v=le().performance.now();v-i>=t&&(c(...f),i=v)}},R=function(c,t,i,l=le()){let f;const E=function(){const I=this,$=arguments;let ce=function(){f=null,ce=null,i||c.apply(I,$)};!f&&i&&c.apply(I,$),l.clearTimeout(f),f=l.setTimeout(ce,t)};return E.cancel=()=>{l.clearTimeout(f),f=null},E};var D=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:yn,throttle:A,debounce:R});let B;class oe{on(t,i){const l=this.addEventListener;this.addEventListener=()=>{},Jo(this,t,i),this.addEventListener=l}off(t,i){gi(this,t,i)}one(t,i){const l=this.addEventListener;this.addEventListener=()=>{},ha(this,t,i),this.addEventListener=l}any(t,i){const l=this.addEventListener;this.addEventListener=()=>{},Di(this,t,i),this.addEventListener=l}trigger(t){const i=t.type||t;"string"==typeof t&&(t={type:i}),t=Rl(t),this.allowedEvents_[i]&&this["on"+i]&&this["on"+i](t),cr(this,t)}queueTrigger(t){B||(B=new Map);const i=t.type||t;let l=B.get(this);l||(l=new Map,B.set(this,l));const f=l.get(i);l.delete(i),le().clearTimeout(f);const v=le().setTimeout(()=>{l.delete(i),0===l.size&&(l=null,B.delete(this)),this.trigger(t)},0);l.set(i,v)}}oe.prototype.allowedEvents_={},oe.prototype.addEventListener=oe.prototype.on,oe.prototype.removeEventListener=oe.prototype.off,oe.prototype.dispatchEvent=oe.prototype.trigger;const Me=c=>"function"==typeof c.name?c.name():"string"==typeof c.name?c.name:c.name_?c.name_:c.constructor&&c.constructor.name?c.constructor.name:typeof c,Oe=c=>c instanceof oe||!!c.eventBusEl_&&["on","one","off","trigger"].every(t=>"function"==typeof c[t]),_n=c=>"string"==typeof c&&/\S/.test(c)||Array.isArray(c)&&!!c.length,Hn=(c,t,i)=>{if(!c||!c.nodeName&&!Oe(c))throw new Error(`Invalid target for ${Me(t)}#${i}; must be a DOM node or evented object.`)},fr=(c,t,i)=>{if(!_n(c))throw new Error(`Invalid event type for ${Me(t)}#${i}; must be a non-empty string or array.`)},Mi=(c,t,i)=>{if("function"!=typeof c)throw new Error(`Invalid listener for ${Me(t)}#${i}; must be a function.`)},wo=(c,t,i)=>{const l=t.length<3||t[0]===c||t[0]===c.eventBusEl_;let f,v,E;return l?(f=c.eventBusEl_,t.length>=3&&t.shift(),[v,E]=t):[f,v,E]=t,Hn(f,c,i),fr(v,c,i),Mi(E,c,i),E=yn(c,E),{isTargetingSelf:l,target:f,type:v,listener:E}},vo=(c,t,i,l)=>{Hn(c,c,t),c.nodeName?Ef[t](c,i,l):c[t](i,l)},Gu={on(...c){const{isTargetingSelf:t,target:i,type:l,listener:f}=wo(this,c,"on");if(vo(i,"on",l,f),!t){const v=()=>this.off(i,l,f);v.guid=f.guid;const E=()=>this.off("dispose",v);E.guid=f.guid,vo(this,"on","dispose",v),vo(i,"on","dispose",E)}},one(...c){const{isTargetingSelf:t,target:i,type:l,listener:f}=wo(this,c,"one");if(t)vo(i,"one",l,f);else{const v=(...E)=>{this.off(i,l,v),f.apply(null,E)};v.guid=f.guid,vo(i,"one",l,v)}},any(...c){const{isTargetingSelf:t,target:i,type:l,listener:f}=wo(this,c,"any");if(t)vo(i,"any",l,f);else{const v=(...E)=>{this.off(i,l,v),f.apply(null,E)};v.guid=f.guid,vo(i,"any",l,v)}},off(c,t,i){if(!c||_n(c))gi(this.eventBusEl_,c,t);else{const l=c,f=t;Hn(l,this,"off"),fr(f,this,"off"),Mi(i,this,"off"),i=yn(this,i),this.off("dispose",i),l.nodeName?(gi(l,f,i),gi(l,"dispose",i)):Oe(l)&&(l.off(f,i),l.off("dispose",i))}},trigger(c,t){if(Hn(this.eventBusEl_,this,"trigger"),!_n(c&&"string"!=typeof c?c.type:c))throw new Error(`Invalid event type for ${Me(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return cr(this.eventBusEl_,c,t)}};function Pt(c,t={}){const{eventBusKey:i}=t;if(i){if(!c[i].nodeName)throw new Error(`The eventBusKey "${i}" does not refer to an element.`);c.eventBusEl_=c[i]}else c.eventBusEl_=vr("span",{className:"vjs-event-bus"});return Object.assign(c,Gu),c.eventedCallbacks&&c.eventedCallbacks.forEach(l=>{l()}),c.on("dispose",()=>{c.off(),[c,c.el_,c.eventBusEl_].forEach(function(l){l&&Xo.has(l)&&Xo.delete(l)}),le().setTimeout(()=>{c.eventBusEl_=null},0)}),c}const Nl={state:{},setState(c){let t;return"function"==typeof c&&(c=c()),Ka(c,(i,l)=>{this.state[l]!==i&&(t=t||{},t[l]={from:this.state[l],to:i}),this.state[l]=i}),t&&Oe(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Bs(c,t){return Object.assign(c,Nl),c.state=Object.assign({},c.state,t),"function"==typeof c.handleStateChanged&&Oe(c)&&c.on("statechanged",c.handleStateChanged),c}const cl=function(c){return"string"!=typeof c?c:c.replace(/./,t=>t.toLowerCase())},fs=function(c){return"string"!=typeof c?c:c.replace(/./,t=>t.toUpperCase())},zu=function(c,t){return fs(c)===fs(t)};var Lc=Object.freeze({__proto__:null,toLowerCase:cl,toTitleCase:fs,titleCaseEquals:zu});class un{constructor(t,i,l){if(this.player_=!t&&this.play?t=this:t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Ri({},this.options_),i=this.options_=Ri(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){const f=t&&t.id&&t.id()||"no_player";this.id_=`${f}_component_${Da()}`}this.name_=i.name||null,i.el?this.el_=i.el:!1!==i.createEl&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(f=>this.addClass(f)),["on","off","one","any","trigger"].forEach(f=>{this[f]=void 0}),!1!==i.evented&&(Pt(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Bs(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==i.initChildren&&this.initChildren(),this.ready(l),!1!==i.reportTouchActivity&&this.enableTouchActivity()}on(t,i){}off(t,i){}one(t,i){}any(t,i){}trigger(t){}dispose(t={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(t.restoreEl?this.el_.parentNode.replaceChild(t.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(t){return t?(this.options_=Ri(this.options_,t),this.options_):this.options_}el(){return this.el_}createEl(t,i,l){return vr(t,i,l)}localize(t,i,l=t){const f=this.player_.language&&this.player_.language(),v=this.player_.languages&&this.player_.languages(),E=v&&v[f],I=f&&f.split("-")[0],$=v&&v[I];let ce=l;return E&&E[t]?ce=E[t]:$&&$[t]&&(ce=$[t]),i&&(ce=ce.replace(/\{(\d+)\}/g,function(me,ze){const It=i[ze-1];let xt=It;return typeof It>"u"&&(xt=me),xt})),ce}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(t){return this.childIndex_[t]}getChild(t){if(t)return this.childNameIndex_[t]}getDescendant(...t){t=t.reduce((l,f)=>l.concat(f),[]);let i=this;for(let l=0;l<t.length;l++)if(i=i.getChild(t[l]),!i||!i.getChild)return;return i}addChild(t,i={},l=this.children_.length){let f,v;if("string"==typeof t){v=fs(t);const E=i.componentClass||v;i.name=v;const I=un.getComponent(E);if(!I)throw new Error(`Component ${E} does not exist`);if("function"!=typeof I)return null;f=new I(this.player_||this,i)}else f=t;if(f.parentComponent_&&f.parentComponent_.removeChild(f),this.children_.splice(l,0,f),f.parentComponent_=this,"function"==typeof f.id&&(this.childIndex_[f.id()]=f),v=v||f.name&&fs(f.name()),v&&(this.childNameIndex_[v]=f,this.childNameIndex_[cl(v)]=f),"function"==typeof f.el&&f.el()){let E=null;this.children_[l+1]&&(this.children_[l+1].el_?E=this.children_[l+1].el_:ji(this.children_[l+1])&&(E=this.children_[l+1])),this.contentEl().insertBefore(f.el(),E)}return f}removeChild(t){if("string"==typeof t&&(t=this.getChild(t)),!t||!this.children_)return;let i=!1;for(let f=this.children_.length-1;f>=0;f--)if(this.children_[f]===t){i=!0,this.children_.splice(f,1);break}if(!i)return;t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[fs(t.name())]=null,this.childNameIndex_[cl(t.name())]=null;const l=t.el();l&&l.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}initChildren(){const t=this.options_.children;if(t){const i=this.options_,l=E=>{const I=E.name;let $=E.opts;if(void 0!==i[I]&&($=i[I]),!1===$)return;!0===$&&($={}),$.playerOptions=this.options_.playerOptions;const ce=this.addChild(I,$);ce&&(this[I]=ce)};let f;const v=un.getComponent("Tech");f=Array.isArray(t)?t:Object.keys(t),f.concat(Object.keys(this.options_).filter(function(E){return!f.some(function(I){return"string"==typeof I?E===I:E===I.name})})).map(E=>{let I,$;return"string"==typeof E?(I=E,$=t[I]||this.options_[I]||{}):(I=E.name,$=E),{name:I,opts:$}}).filter(E=>{const I=un.getComponent(E.opts.componentClass||fs(E.name));return I&&!v.isTech(I)}).forEach(l)}}buildCSSClass(){return""}ready(t,i=!1){if(t){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t);i?t.call(this):this.setTimeout(t,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)}$(t,i){return Ba(t,i||this.contentEl())}$$(t,i){return In(t,i||this.contentEl())}hasClass(t){return Fo(this.el_,t)}addClass(...t){bs(this.el_,...t)}removeClass(...t){ia(this.el_,...t)}toggleClass(t,i){ja(this.el_,t,i)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(t){return kl(this.el_,t)}setAttribute(t,i){wu(this.el_,t,i)}removeAttribute(t){Ml(this.el_,t)}width(t,i){return this.dimension("width",t,i)}height(t,i){return this.dimension("height",t,i)}dimensions(t,i){this.width(t,!0),this.height(i)}dimension(t,i,l){if(void 0!==i)return(null===i||i!=i)&&(i=0),this.el_.style[t]=-1!==(""+i).indexOf("%")||-1!==(""+i).indexOf("px")?i:"auto"===i?"":i+"px",void(l||this.trigger("componentresize"));if(!this.el_)return 0;const f=this.el_.style[t],v=f.indexOf("px");return parseInt(-1!==v?f.slice(0,v):this.el_["offset"+fs(t)],10)}currentDimension(t){let i=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if(i=or(this.el_,t),i=parseFloat(i),0===i||isNaN(i)){const l=`offset${fs(t)}`;i=this.el_[l]}return i}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(t){this.player_&&(je().isEventKey(t,"Tab")||t.stopPropagation(),this.player_.handleKeyDown(t))}handleKeyPress(t){this.handleKeyDown(t)}emitTapEvents(){let v,t=0,i=null;this.on("touchstart",function(I){1===I.touches.length&&(i={pageX:I.touches[0].pageX,pageY:I.touches[0].pageY},t=le().performance.now(),v=!0)}),this.on("touchmove",function(I){if(I.touches.length>1)v=!1;else if(i){const $=I.touches[0].pageX-i.pageX,ce=I.touches[0].pageY-i.pageY;Math.sqrt($*$+ce*ce)>10&&(v=!1)}});const E=function(){v=!1};this.on("touchleave",E),this.on("touchcancel",E),this.on("touchend",function(I){i=null,!0===v&&le().performance.now()-t<200&&(I.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const t=yn(this.player(),this.player().reportUserActivity);let i;this.on("touchstart",function(){t(),this.clearInterval(i),i=this.setInterval(t,250)});const l=function(f){t(),this.clearInterval(i)};this.on("touchmove",t),this.on("touchend",l),this.on("touchcancel",l)}setTimeout(t,i){var l;return t=yn(this,t),this.clearTimersOnDispose_(),l=le().setTimeout(()=>{this.setTimeoutIds_.has(l)&&this.setTimeoutIds_.delete(l),t()},i),this.setTimeoutIds_.add(l),l}clearTimeout(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),le().clearTimeout(t)),t}setInterval(t,i){t=yn(this,t),this.clearTimersOnDispose_();const l=le().setInterval(t,i);return this.setIntervalIds_.add(l),l}clearInterval(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),le().clearInterval(t)),t}requestAnimationFrame(t){var i;return this.clearTimersOnDispose_(),t=yn(this,t),i=le().requestAnimationFrame(()=>{this.rafIds_.has(i)&&this.rafIds_.delete(i),t()}),this.rafIds_.add(i),i}requestNamedAnimationFrame(t,i){if(this.namedRafs_.has(t))return;this.clearTimersOnDispose_(),i=yn(this,i);const l=this.requestAnimationFrame(()=>{i(),this.namedRafs_.has(t)&&this.namedRafs_.delete(t)});return this.namedRafs_.set(t,l),t}cancelNamedAnimationFrame(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))}cancelAnimationFrame(t){return this.rafIds_.has(t)&&(this.rafIds_.delete(t),le().cancelAnimationFrame(t)),t}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([t,i])=>{this[t].forEach((l,f)=>this[i](f))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(t,i){if("string"!=typeof t||!t)throw new Error(`Illegal component name, "${t}"; must be a non-empty string.`);const l=un.getComponent("Tech"),f=l&&l.isTech(i),v=un===i||un.prototype.isPrototypeOf(i.prototype);if(f||!v){let I;throw I=f?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${t}"; ${I}.`)}t=fs(t),un.components_||(un.components_={});const E=un.getComponent("Player");if("Player"===t&&E&&E.players){const I=E.players,$=Object.keys(I);if(I&&$.length>0&&$.map(ce=>I[ce]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return un.components_[t]=i,un.components_[cl(t)]=i,i}static getComponent(t){if(t&&un.components_)return un.components_[t]}}function Fc(c,t,i,l){return function Ld(c,t,i){if("number"!=typeof t||t<0||t>i)throw new Error(`Failed to execute '${c}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${i}).`)}(c,l,i.length-1),i[l][t]}function Fd(c){let t;return t=void 0===c||0===c.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:c.length,start:Fc.bind(null,"start",0,c),end:Fc.bind(null,"end",1,c)},le().Symbol&&le().Symbol.iterator&&(t[le().Symbol.iterator]=()=>(c||[]).values()),t}function Ia(c,t){return Array.isArray(c)?Fd(c):void 0===c||void 0===t?Fd():Fd([[c,t]])}un.registerComponent("Component",un);const Co=function(c,t){c=c<0?0:c;let i=Math.floor(c%60),l=Math.floor(c/60%60),f=Math.floor(c/3600);const v=Math.floor(t/60%60),E=Math.floor(t/3600);return(isNaN(c)||c===1/0)&&(f=l=i="-"),f=f>0||E>0?f+":":"",l=((f||v>=10)&&l<10?"0"+l:l)+":",i=i<10?"0"+i:i,f+l+i};let So=Co;function sc(c){So=c}function oc(){So=Co}function Ms(c,t=c){return So(c,t)}var ac=Object.freeze({__proto__:null,createTimeRanges:Ia,createTimeRange:Ia,setFormatTime:sc,resetFormatTime:oc,formatTime:Ms});function jd(c,t){let l,f,i=0;if(!t)return 0;(!c||!c.length)&&(c=Ia(0,0));for(let v=0;v<c.length;v++)l=c.start(v),f=c.end(v),f>t&&(f=t),i+=f-l;return i/t}function Vi(c){if(c instanceof Vi)return c;"number"==typeof c?this.code=c:"string"==typeof c?this.message=c:zo(c)&&("number"==typeof c.code&&(this.code=c.code),Object.assign(this,c)),this.message||(this.message=Vi.defaultMessages[this.code]||"")}Vi.prototype.code=0,Vi.prototype.message="",Vi.prototype.status=null,Vi.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Vi.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let c=0;c<Vi.errorTypes.length;c++)Vi[Vi.errorTypes[c]]=c,Vi.prototype[Vi.errorTypes[c]]=c;function dl(c){return null!=c&&"function"==typeof c.then}function Va(c){dl(c)&&c.then(null,t=>{})}const Ya=function(c){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((i,l,f)=>(c[l]&&(i[l]=c[l]),i),{cues:c.cues&&Array.prototype.map.call(c.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})})};const Bc="vjs-modal-dialog";class qu extends un{constructor(t,i){super(t,i),this.handleKeyDown_=l=>this.handleKeyDown(l),this.close_=l=>this.close(l),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=vr("div",{className:`${Bc}-content`},{role:"document"}),this.descEl_=vr("p",{className:`${Bc}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Qn(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Bc} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t}open(){if(!this.opened_){const t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(t){if("boolean"==typeof t){const i=this.closeable_=!!t;let l=this.getChild("closeButton");if(i&&!l){const f=this.contentEl_;this.contentEl_=this.el_,l=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=f,this.on(l,"close",this.close_)}!i&&l&&(this.off(l,"close",this.close_),this.removeChild(l),l.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(t){const i=this.contentEl(),l=i.parentNode,f=i.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,l.removeChild(i),this.empty(),Ui(i,t),this.trigger("modalfill"),f?l.insertBefore(i,f):l.appendChild(i);const v=this.getChild("closeButton");v&&l.appendChild(v.el_)}empty(){this.trigger("beforemodalempty"),ao(this.contentEl()),this.trigger("modalempty")}content(t){return typeof t<"u"&&(this.content_=t),this.content_}conditionalFocus_(){const t=qe().activeElement,i=this.player_.el_;this.previouslyActiveEl_=null,(i.contains(t)||i===t)&&(this.previouslyActiveEl_=t,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(t){if(t.stopPropagation(),je().isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(!je().isEventKey(t,"Tab"))return;const i=this.focusableEls_(),l=this.el_.querySelector(":focus");let f;for(let v=0;v<i.length;v++)if(l===i[v]){f=v;break}qe().activeElement===this.el_&&(f=0),t.shiftKey&&0===f?(i[i.length-1].focus(),t.preventDefault()):!t.shiftKey&&f===i.length-1&&(i[0].focus(),t.preventDefault())}focusableEls_(){const t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,i=>(i instanceof le().HTMLAnchorElement||i instanceof le().HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof le().HTMLInputElement||i instanceof le().HTMLSelectElement||i instanceof le().HTMLTextAreaElement||i instanceof le().HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof le().HTMLIFrameElement||i instanceof le().HTMLObjectElement||i instanceof le().HTMLEmbedElement||i.hasAttribute("tabindex")&&-1!==i.getAttribute("tabindex")||i.hasAttribute("contenteditable"))}}qu.prototype.options_={pauseOnOpen:!0,temporary:!0},un.registerComponent("ModalDialog",qu);class Su extends oe{constructor(t=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let i=0;i<t.length;i++)this.addTrack(t[i])}addTrack(t){const i=this.tracks_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.tracks_[i]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=()=>{this.trigger({track:t,type:"labelchange",target:this})},Oe(t)&&t.addEventListener("labelchange",t.labelchange_)}removeTrack(t){let i;for(let l=0,f=this.length;l<f;l++)if(this[l]===t){i=this[l],i.off&&i.off(),this.tracks_.splice(l,1);break}i&&this.trigger({track:i,type:"removetrack",target:this})}getTrackById(t){let i=null;for(let l=0,f=this.length;l<f;l++){const v=this[l];if(v.id===t){i=v;break}}return i}}Su.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const c in Su.prototype.allowedEvents_)Su.prototype["on"+c]=null;const Sf=function(c,t){for(let i=0;i<c.length;i++)!Object.keys(c[i]).length||t.id===c[i].id||(c[i].enabled=!1)},od=function(c,t){for(let i=0;i<c.length;i++)!Object.keys(c[i]).length||t.id===c[i].id||(c[i].selected=!1)};class Ud extends Su{addTrack(t){super.addTrack(t),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(t){super.removeTrack(t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class hl{constructor(t){hl.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(t){const i=this.length||0;let l=0;const f=t.length;this.cues_=t,this.length_=t.length;const v=function(E){""+E in this||Object.defineProperty(this,""+E,{get(){return this.cues_[E]}})};if(i<f)for(l=i;l<f;l++)v.call(this,l)}getCueById(t){let i=null;for(let l=0,f=this.length;l<f;l++){const v=this[l];if(v.id===t){i=v;break}}return i}}const uc={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Ih={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Vd={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},xh={disabled:"disabled",hidden:"hidden",showing:"showing"};class Du extends oe{constructor(t={}){super();const i={id:t.id||"vjs_track_"+Da(),kind:t.kind||"",language:t.language||""};let l=t.label||"";for(const f in i)Object.defineProperty(this,f,{get:()=>i[f],set(){}});Object.defineProperty(this,"label",{get:()=>l,set(f){f!==l&&(l=f,this.trigger("labelchange"))}})}}const $d=function(c){const t=["protocol","hostname","port","pathname","search","hash","host"],i=qe().createElement("a");i.href=c;const l={};for(let f=0;f<t.length;f++)l[t[f]]=i[t[f]];return"http:"===l.protocol&&(l.host=l.host.replace(/:80$/,"")),"https:"===l.protocol&&(l.host=l.host.replace(/:443$/,"")),l.protocol||(l.protocol=le().location.protocol),l.host||(l.host=le().location.host),l},Ah=function(c){if(!c.match(/^https?:\/\//)){const t=qe().createElement("a");t.href=c,c=t.href}return c},fl=function(c){if("string"==typeof c){const i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(c);if(i)return i.pop().toLowerCase()}return""},Do=function(c,t=le().location){const i=$d(c);return(":"===i.protocol?t.protocol:i.protocol)+i.host!==t.protocol+t.host};var Df=Object.freeze({__proto__:null,parseUrl:$d,getAbsoluteURL:Ah,getFileExtension:fl,isCrossOrigin:Do});const Qa=function(c,t){const i=new(le().WebVTT.Parser)(le(),le().vttjs,le().WebVTT.StringDecoder()),l=[];i.oncue=function(f){t.addCue(f)},i.onparsingerror=function(f){l.push(f)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(c),l.length>0&&(le().console&&le().console.groupCollapsed&&le().console.groupCollapsed(`Text Track parsing errors for ${t.src}`),l.forEach(f=>$r.error(f)),le().console&&le().console.groupEnd&&le().console.groupEnd()),i.flush()},Ll=function(c,t){const i={uri:c},l=Do(c);l&&(i.cors=l);const f="use-credentials"===t.tech_.crossOrigin();f&&(i.withCredentials=f),Ee()(i,yn(this,function(v,E,I){if(v)return $r.error(v,E);t.loaded_=!0,"function"!=typeof le().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],$=>{if("vttjserror"!==$.type)return Qa(I,t);$r.error(`vttjs failed to load, stopping trying to process ${t.src}`)}):Qa(I,t)}))};class Ii extends Du{constructor(t={}){if(!t.tech)throw new Error("A tech was not provided.");const i=Ri(t,{kind:Vd[t.kind]||"subtitles",language:t.language||t.srclang||""});let l=xh[i.mode]||"disabled";const f=i.default;("metadata"===i.kind||"chapters"===i.kind)&&(l="hidden"),super(i),this.tech_=i.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const v=new hl(this.cues_),E=new hl(this.activeCues_);let I=!1;this.timeupdateHandler=yn(this,function(ce={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==ce.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,I&&(this.trigger("cuechange"),I=!1),"timeupdate"!==ce.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),this.tech_.one("dispose",()=>{this.stopTracking()}),"disabled"!==l&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>f,set(){}},mode:{get:()=>l,set(ce){xh[ce]&&l!==ce&&(l=ce,!this.preload_&&"disabled"!==l&&0===this.cues.length&&Ll(this.src,this),this.stopTracking(),"disabled"!==l&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?v:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return E;const ce=this.tech_.currentTime(),me=[];for(let ze=0,It=this.cues.length;ze<It;ze++){const xt=this.cues[ze];xt.startTime<=ce&&xt.endTime>=ce&&me.push(xt)}if(I=!1,me.length!==this.activeCues_.length)I=!0;else for(let ze=0;ze<me.length;ze++)-1===this.activeCues_.indexOf(me[ze])&&(I=!0);return this.activeCues_=me,E.setCues_(this.activeCues_),E},set(){}}}),i.src?(this.src=i.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==i.kind&&"captions"!==i.kind)&&Ll(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(t){let i=t;if(le().vttjs&&!(t instanceof le().vttjs.VTTCue)){i=new(le().vttjs.VTTCue)(t.startTime,t.endTime,t.text);for(const f in t)f in i||(i[f]=t[f]);i.id=t.id,i.originalCue_=t}const l=this.tech_.textTracks();for(let f=0;f<l.length;f++)l[f]!==this&&l[f].removeCue(i);this.cues_.push(i),this.cues.setCues_(this.cues_)}removeCue(t){let i=this.cues_.length;for(;i--;){const l=this.cues_[i];if(l===t||l.originalCue_&&l.originalCue_===t){this.cues_.splice(i,1),this.cues.setCues_(this.cues_);break}}}}Ii.prototype.allowedEvents_={cuechange:"cuechange"};class Xa extends Du{constructor(t={}){const i=Ri(t,{kind:Ih[t.kind]||""});super(i);let l=!1;Object.defineProperty(this,"enabled",{get:()=>l,set(f){"boolean"!=typeof f||f===l||(l=f,this.trigger("enabledchange"))}}),i.enabled&&(this.enabled=i.enabled),this.loaded_=!0}}class Io extends Du{constructor(t={}){const i=Ri(t,{kind:uc[t.kind]||""});super(i);let l=!1;Object.defineProperty(this,"selected",{get:()=>l,set(f){"boolean"!=typeof f||f===l||(l=f,this.trigger("selectedchange"))}}),i.selected&&(this.selected=i.selected)}}class xi extends oe{constructor(t={}){let i;super();const l=new Ii(t);this.kind=l.kind,this.src=l.src,this.srclang=l.language,this.label=l.label,this.default=l.default,Object.defineProperties(this,{readyState:{get:()=>i},track:{get:()=>l}}),i=xi.NONE,l.addEventListener("loadeddata",()=>{i=xi.LOADED,this.trigger({type:"load",target:this})})}}xi.prototype.allowedEvents_={load:"load"},xi.NONE=0,xi.LOADING=1,xi.LOADED=2,xi.ERROR=3;const yo={audio:{ListClass:class Bd extends Su{constructor(t=[]){for(let i=t.length-1;i>=0;i--)if(t[i].enabled){Sf(t,t[i]);break}super(t),this.changing_=!1}addTrack(t){t.enabled&&Sf(this,t),super.addTrack(t),t.addEventListener&&(t.enabledChange_=()=>{this.changing_||(this.changing_=!0,Sf(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)}},TrackClass:Xa,capitalName:"Audio"},video:{ListClass:class Dh extends Su{constructor(t=[]){for(let i=t.length-1;i>=0;i--)if(t[i].selected){od(t,t[i]);break}super(t),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set(){}})}addTrack(t){t.selected&&od(this,t),super.addTrack(t),t.addEventListener&&(t.selectedChange_=()=>{this.changing_||(this.changing_=!0,od(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)}},TrackClass:Io,capitalName:"Video"},text:{ListClass:Ud,TrackClass:Ii,capitalName:"Text"}};Object.keys(yo).forEach(function(c){yo[c].getterName=`${c}Tracks`,yo[c].privateName=`${c}Tracks_`});const gu={remoteText:{ListClass:Ud,TrackClass:Ii,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class Ag{constructor(t=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let i=0,l=t.length;i<l;i++)this.addTrackElement_(t[i])}addTrackElement_(t){const i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get(){return this.trackElements_[i]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)}getTrackElementByTrack_(t){let i;for(let l=0,f=this.trackElements_.length;l<f;l++)if(t===this.trackElements_[l].track){i=this.trackElements_[l];break}return i}removeTrackElement_(t){for(let i=0,l=this.trackElements_.length;i<l;i++)if(t===this.trackElements_[i]){this.trackElements_[i].track&&"function"==typeof this.trackElements_[i].track.off&&this.trackElements_[i].track.off(),"function"==typeof this.trackElements_[i].off&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}}},TrackClass:xi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ss=Object.assign({},yo,gu);gu.names=Object.keys(gu),yo.names=Object.keys(yo),ss.names=[].concat(gu.names).concat(yo.names);class ri extends un{constructor(t={},i=function(){}){t.reportTouchActivity=!1,super(null,t,i),this.onDurationChange_=l=>this.onDurationChange(l),this.trackProgress_=l=>this.trackProgress(l),this.trackCurrentTime_=l=>this.trackCurrentTime(l),this.stopTrackingCurrentTime_=l=>this.stopTrackingCurrentTime(l),this.disposeSourceHandler_=l=>this.disposeSourceHandler(l),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ss.names.forEach(l=>{const f=ss[l];t&&t[f.getterName]&&(this[f.privateName]=t[f.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(l=>{!1===t[`native${l}Tracks`]&&(this[`featuresNative${l}Tracks`]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?this.featuresNativeTextTracks=!1:(!0===t.nativeCaptions||!0===t.nativeTextTracks)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==t.preloadTextTracks,this.autoRemoteTextTracks_=new ss.text.ListClass,this.initTrackListeners(),t.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(t){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(t),1)),this.trigger({src:t,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(yn(this,function(){const i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,1===i&&this.stopTrackingProgress()}),500)}onDurationChange(t){this.duration_=this.duration()}buffered(){return Ia(0,0)}bufferedPercent(){return jd(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(yo.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(t){(t=[].concat(t)).forEach(i=>{const l=this[`${i}Tracks`]()||[];let f=l.length;for(;f--;){const v=l[f];"text"===i&&this.removeRemoteTextTrack(v),l.removeTrack(v)}})}cleanupAutoTextTracks(){const t=this.autoRemoteTextTracks_||[];let i=t.length;for(;i--;)this.removeRemoteTextTrack(t[i])}reset(){}crossOrigin(){}setCrossOrigin(){}error(t){return void 0!==t&&(this.error_=new Vi(t),this.trigger("error")),this.error_}played(){return this.hasStarted_?Ia(0,0):Ia()}play(){}setScrubbing(t){}scrubbing(){}setCurrentTime(t){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){yo.names.forEach(t=>{const l=()=>{this.trigger(`${t}trackchange`)},f=this[yo[t].getterName]();f.addEventListener("removetrack",l),f.addEventListener("addtrack",l),this.on("dispose",()=>{f.removeEventListener("removetrack",l),f.removeEventListener("addtrack",l)})})}addWebVttScript_(){if(!le().WebVTT)if(qe().body.contains(this.el())){if(!this.options_["vtt.js"]&&Za(Fe())&&Object.keys(Fe()).length>0)return void this.trigger("vttjsloaded");const t=qe().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=()=>{this.trigger("vttjsloaded")},t.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{t.onload=null,t.onerror=null}),le().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const t=this.textTracks(),i=this.remoteTextTracks(),l=I=>t.addTrack(I.track),f=I=>t.removeTrack(I.track);i.on("addtrack",l),i.on("removetrack",f),this.addWebVttScript_();const v=()=>this.trigger("texttrackchange"),E=()=>{v();for(let I=0;I<t.length;I++){const $=t[I];$.removeEventListener("cuechange",v),"showing"===$.mode&&$.addEventListener("cuechange",v)}};E(),t.addEventListener("change",E),t.addEventListener("addtrack",E),t.addEventListener("removetrack",E),this.on("dispose",function(){i.off("addtrack",l),i.off("removetrack",f),t.removeEventListener("change",E),t.removeEventListener("addtrack",E),t.removeEventListener("removetrack",E);for(let I=0;I<t.length;I++)t[I].removeEventListener("cuechange",v)})}addTextTrack(t,i,l){if(!t)throw new Error("TextTrack kind is required but was not provided");return function Hd(c,t,i,l,f={}){const v=c.textTracks();f.kind=t,i&&(f.label=i),l&&(f.language=l),f.tech=c;const E=new ss.text.TrackClass(f);return v.addTrack(E),E}(this,t,i,l)}createRemoteTextTrack(t){const i=Ri(t,{tech:this});return new gu.remoteTextEl.TrackClass(i)}addRemoteTextTrack(t={},i){const l=this.createRemoteTextTrack(t);return"boolean"!=typeof i&&(i=!1),this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),!1===i&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(l.track)),l}removeRemoteTextTrack(t){const i=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(t){const i=Da();return!this.isReady_||this.paused()?(this.queuedHanders_.add(i),this.one("playing",()=>{this.queuedHanders_.has(i)&&(this.queuedHanders_.delete(i),t())})):this.requestNamedAnimationFrame(i,t),i}cancelVideoFrameCallback(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(t){}overrideNativeVideoTracks(t){}canPlayType(t){return""}static canPlayType(t){return""}static canPlaySource(t,i){return ri.canPlayType(t.type)}static isTech(t){return t.prototype instanceof ri||t instanceof ri||t===ri}static registerTech(t,i){if(ri.techs_||(ri.techs_={}),!ri.isTech(i))throw new Error(`Tech ${t} must be a Tech`);if(!ri.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!ri.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=fs(t),ri.techs_[t]=i,ri.techs_[cl(t)]=i,"Tech"!==t&&ri.defaultTechOrder_.push(t),i}static getTech(t){if(t){if(ri.techs_&&ri.techs_[t])return ri.techs_[t];if(t=fs(t),le()&&le().videojs&&le().videojs[t])return $r.warn(`The ${t} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),le().videojs[t]}}}ss.names.forEach(function(c){const t=ss[c];ri.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),ri.prototype.featuresVolumeControl=!0,ri.prototype.featuresMuteControl=!0,ri.prototype.featuresFullscreenResize=!1,ri.prototype.featuresPlaybackRate=!1,ri.prototype.featuresProgressEvents=!1,ri.prototype.featuresSourceset=!1,ri.prototype.featuresTimeupdateEvents=!1,ri.prototype.featuresNativeTextTracks=!1,ri.prototype.featuresVideoFrameCallback=!1,ri.withSourceHandlers=function(c){c.registerSourceHandler=function(i,l){let f=c.sourceHandlers;f||(f=c.sourceHandlers=[]),void 0===l&&(l=f.length),f.splice(l,0,i)},c.canPlayType=function(i){const l=c.sourceHandlers||[];let f;for(let v=0;v<l.length;v++)if(f=l[v].canPlayType(i),f)return f;return""},c.selectSourceHandler=function(i,l){const f=c.sourceHandlers||[];let v;for(let E=0;E<f.length;E++)if(v=f[E].canHandleSource(i,l),v)return f[E];return null},c.canPlaySource=function(i,l){const f=c.selectSourceHandler(i,l);return f?f.canHandleSource(i,l):""},["seekable","seeking","duration"].forEach(function(i){const l=this[i];"function"==typeof l&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):l.apply(this,arguments)})},c.prototype),c.prototype.setSource=function(i){let l=c.selectSourceHandler(i,this.options_);l||(c.nativeSourceHandler?l=c.nativeSourceHandler:$r.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),l!==c.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=l.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},c.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},un.registerComponent("Tech",ri),ri.registerTech("Tech",ri),ri.defaultTechOrder_=[];const Us={},If={},Iu={};function Ja(c,t,i){c.setTimeout(()=>Fl(t,Us[t.type],i,c),1)}function xf(c,t,i,l=null){const f="call"+fs(i),v=c.reduce(Uo(f),l),E=v===Iu,I=E?null:t[i](v);return function xu(c,t,i,l){for(let f=c.length-1;f>=0;f--){const v=c[f];v[t]&&v[t](l,i)}}(c,i,I,E),I}const eu={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},$a={setCurrentTime:1,setMuted:1,setVolume:1},Wo={play:1,pause:1};function Uo(c){return(t,i)=>t===Iu?Iu:i[c]?i[c](t):t}function Fl(c={},t=[],i,l,f=[],v=!1){const[E,...I]=t;if("string"==typeof E)Fl(c,Us[E],i,l,f,v);else if(E){const $=function tu(c,t){const i=If[c.id()];let l=null;if(null==i)return l=t(c),If[c.id()]=[[t,l]],l;for(let f=0;f<i.length;f++){const[v,E]=i[f];v===t&&(l=E)}return null===l&&(l=t(c),i.push([t,l])),l}(l,E);if(!$.setSource)return f.push($),Fl(c,I,i,l,f,v);$.setSource(Object.assign({},c),function(ce,me){if(ce)return Fl(c,I,i,l,f,v);f.push($),Fl(me,c.type===me.type?I:Us[me.type],i,l,f,v)})}else I.length?Fl(c,I,i,l,f,v):v?i(c,f):Fl(c,Us["*"],i,l,f,!0)}const ad={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ud=function(c=""){const t=fl(c);return ad[t.toLowerCase()]||""},U=function(c){if(Array.isArray(c)){let t=[];c.forEach(function(i){i=U(i),Array.isArray(i)?t=t.concat(i):zo(i)&&t.push(i)}),c=t}else c="string"==typeof c&&c.trim()?[de({src:c})]:zo(c)&&"string"==typeof c.src&&c.src&&c.src.trim()?[de(c)]:[];return c};function de(c){if(!c.type){const t=ud(c.src);t&&(c.type=t)}return c}un.registerComponent("MediaLoader",class Ue extends un{constructor(t,i,l){if(super(t,Ri({createEl:!1},i),l),i.playerOptions.sources&&0!==i.playerOptions.sources.length)t.src(i.playerOptions.sources);else for(let v=0,E=i.playerOptions.techOrder;v<E.length;v++){const I=fs(E[v]);let $=ri.getTech(I);if(I||($=un.getComponent(I)),$&&$.isSupported()){t.loadTech_(I);break}}}});class pt extends un{constructor(t,i){super(t,i),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=l=>this.handleMouseOver(l),this.handleMouseOut_=l=>this.handleMouseOut(l),this.handleClick_=l=>this.handleClick(l),this.handleKeyDown_=l=>this.handleKeyDown(l),this.emitTapEvents(),this.enable()}createEl(t="div",i={},l={}){i=Object.assign({className:this.buildCSSClass(),tabIndex:0},i),"button"===t&&$r.error(`Creating a ClickableComponent with an HTML element of ${t} is not supported; use a Button instead.`),l=Object.assign({role:"button"},l),this.tabIndex_=i.tabIndex;const f=vr(t,i,l);return f.appendChild(vr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(f),f}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(t){return this.controlTextEl_=vr("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_}controlText(t,i=this.el()){if(void 0===t)return this.controlText_||"Need Text";const l=this.localize(t);this.controlText_=t,Qn(this.controlTextEl_,l),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&i.setAttribute("title",l)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(t){je().isEventKey(t,"Space")||je().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}}un.registerComponent("ClickableComponent",pt);class Dt extends pt{constructor(t,i){super(t,i),this.update(),this.update_=l=>this.update(l),t.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return vr("div",{className:"vjs-poster"})}crossOrigin(t){if(typeof t>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===t||"anonymous"===t||"use-credentials"===t?this.$("img")&&(this.$("img").crossOrigin=t):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`)}update(t){const i=this.player().poster();this.setSrc(i),i?this.show():this.hide()}setSrc(t){t?(this.$("img")||this.el_.appendChild(vr("picture",{className:"vjs-poster",tabIndex:-1},{},vr("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=t):this.el_.textContent=""}handleClick(t){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Va(this.player_.play()):this.player_.pause())}}Dt.prototype.crossorigin=Dt.prototype.crossOrigin,un.registerComponent("PosterImage",Dt);const zt="#222",Vn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function dr(c,t){let i;if(4===c.length)i=c[1]+c[1]+c[2]+c[2]+c[3]+c[3];else{if(7!==c.length)throw new Error("Invalid color code provided, "+c+"; must be formatted as e.g. #f0e or #f604e2.");i=c.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function Wr(c,t,i){try{c.style[t]=i}catch{return}}un.registerComponent("TextTrackDisplay",class ei extends un{constructor(t,i,l){super(t,i,l);const f=v=>this.updateDisplay(v);t.on("loadstart",v=>this.toggleDisplay(v)),t.on("texttrackchange",f),t.on("loadedmetadata",v=>this.preselectTrack(v)),t.ready(yn(this,function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)return void this.hide();t.on("fullscreenchange",f),t.on("playerresize",f);const v=le().screen.orientation||le(),E=le().screen.orientation?"change":"orientationchange";v.addEventListener(E,f),t.on("dispose",()=>v.removeEventListener(E,f));const I=this.options_.playerOptions.tracks||[];for(let $=0;$<I.length;$++)this.player_.addRemoteTextTrack(I[$],!0);this.preselectTrack()}))}preselectTrack(){const t={captions:1,subtitles:1},i=this.player_.textTracks(),l=this.player_.cache_.selectedLanguage;let f,v,E;for(let I=0;I<i.length;I++){const $=i[I];l&&l.enabled&&l.language&&l.language===$.language&&$.kind in t?$.kind===l.kind?E=$:E||(E=$):l&&!l.enabled?(E=null,f=null,v=null):$.default&&("descriptions"!==$.kind||f?$.kind in t&&!v&&(v=$):f=$)}E?E.mode="showing":v?v.mode="showing":f&&(f.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof le().WebVTT&&le().WebVTT.processCues(le(),[],this.el_)}updateDisplay(){const t=this.player_.textTracks(),i=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),i){const E=[];for(let I=0;I<t.length;++I){const $=t[I];"showing"===$.mode&&E.push($)}return void this.updateForTrack(E)}let l=null,f=null,v=t.length;for(;v--;){const E=t[v];"showing"===E.mode&&("descriptions"===E.kind?l=E:f=E)}f?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(f)):l&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(l))}updateDisplayState(t){const i=this.player_.textTrackSettings.getValues(),l=t.activeCues;let f=l.length;for(;f--;){const v=l[f];if(!v)continue;const E=v.displayState;if(i.color&&(E.firstChild.style.color=i.color),i.textOpacity&&Wr(E.firstChild,"color",dr(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(E.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&Wr(E.firstChild,"backgroundColor",dr(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?Wr(E,"backgroundColor",dr(i.windowColor,i.windowOpacity)):E.style.backgroundColor=i.windowColor),i.edgeStyle&&("dropshadow"===i.edgeStyle?E.firstChild.style.textShadow=`2px 2px 3px ${zt}, 2px 2px 4px ${zt}, 2px 2px 5px ${zt}`:"raised"===i.edgeStyle?E.firstChild.style.textShadow=`1px 1px ${zt}, 2px 2px ${zt}, 3px 3px ${zt}`:"depressed"===i.edgeStyle?E.firstChild.style.textShadow=`1px 1px #ccc, 0 1px #ccc, -1px -1px ${zt}, 0 -1px ${zt}`:"uniform"===i.edgeStyle&&(E.firstChild.style.textShadow=`0 0 4px ${zt}, 0 0 4px ${zt}, 0 0 4px ${zt}, 0 0 4px ${zt}`)),i.fontPercent&&1!==i.fontPercent){const I=le().parseFloat(E.style.fontSize);E.style.fontSize=I*i.fontPercent+"px",E.style.height="auto",E.style.top="auto"}i.fontFamily&&"default"!==i.fontFamily&&("small-caps"===i.fontFamily?E.firstChild.style.fontVariant="small-caps":E.firstChild.style.fontFamily=Vn[i.fontFamily])}}updateForTrack(t){if(Array.isArray(t)||(t=[t]),"function"!=typeof le().WebVTT||t.every(l=>!l.activeCues))return;const i=[];for(let l=0;l<t.length;++l){const f=t[l];for(let v=0;v<f.activeCues.length;++v)i.push(f.activeCues[v])}le().WebVTT.processCues(le(),i,this.el_);for(let l=0;l<t.length;++l){const f=t[l];for(let v=0;v<f.activeCues.length;++v){const E=f.activeCues[v].displayState;bs(E,"vjs-text-track-cue","vjs-text-track-cue-"+(f.language?f.language:l)),f.language&&wu(E,"lang",f.language)}this.player_.textTrackSettings&&this.updateDisplayState(f)}}}),un.registerComponent("LoadingSpinner",class xa extends un{createEl(){const t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),l=vr("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[i])}),f=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return f.appendChild(l),f}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class Ur extends pt{createEl(t,i={},l={}){const f=vr("button",i=Object.assign({className:this.buildCSSClass()},i),l=Object.assign({type:"button"},l));return f.appendChild(vr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(f),f}addChild(t,i={}){return $r.warn(`Adding an actionable (user controllable) child to a Button (${this.constructor.name}) is not supported; use a ClickableComponent instead.`),un.prototype.addChild.call(this,t,i)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(t){je().isEventKey(t,"Space")||je().isEventKey(t,"Enter")?t.stopPropagation():super.handleKeyDown(t)}}un.registerComponent("Button",Ur);class jl extends Ur{constructor(t,i){super(t,i),this.mouseused_=!1,this.on("mousedown",l=>this.handleMouseDown(l))}buildCSSClass(){return"vjs-big-play-button"}handleClick(t){const i=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY)return Va(i),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const l=this.player_.getChild("controlBar"),f=l&&l.getChild("playToggle");if(!f)return void this.player_.tech(!0).focus();const v=()=>f.focus();dl(i)?i.then(v,()=>{}):this.setTimeout(v,1)}handleKeyDown(t){this.mouseused_=!1,super.handleKeyDown(t)}handleMouseDown(t){this.mouseused_=!0}}jl.prototype.controlText_="Play Video",un.registerComponent("BigPlayButton",jl),un.registerComponent("CloseButton",class ps extends Ur{constructor(t,i){super(t,i),this.controlText(i&&i.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(t){this.trigger({type:"close",bubbles:!1})}handleKeyDown(t){je().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}});class Aa extends Ur{constructor(t,i={}){super(t,i),i.replay=void 0===i.replay||i.replay,this.on(t,"play",l=>this.handlePlay(l)),this.on(t,"pause",l=>this.handlePause(l)),i.replay&&this.on(t,"ended",l=>this.handleEnded(l))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(t){this.player_.paused()?Va(this.player_.play()):this.player_.pause()}handleSeeked(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)}handlePlay(t){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",i=>this.handleSeeked(i))}}Aa.prototype.controlText_="Play",un.registerComponent("PlayToggle",Aa);class Vo extends un{constructor(t,i){super(t,i),this.on(t,["timeupdate","ended"],l=>this.updateContent(l)),this.updateTextNode_()}createEl(){const t=this.buildCSSClass(),i=super.createEl("div",{className:`${t} vjs-time-control vjs-control`}),l=vr("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xa0`},{role:"presentation"});return i.appendChild(l),this.contentEl_=vr("span",{className:`${t}-display`},{role:"presentation"}),i.appendChild(this.contentEl_),i}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(t=0){t=Ms(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let i=this.textNode_;i&&this.contentEl_.firstChild!==i&&(i=null,$r.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=qe().createTextNode(this.formattedTime_),this.textNode_&&(i?this.contentEl_.replaceChild(this.textNode_,i):this.contentEl_.appendChild(this.textNode_))}))}updateContent(t){}}Vo.prototype.labelText_="Time",Vo.prototype.controlText_="Time",un.registerComponent("TimeDisplay",Vo);class mu extends Vo{buildCSSClass(){return"vjs-current-time"}updateContent(t){let i;i=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(i)}}mu.prototype.labelText_="Current Time",mu.prototype.controlText_="Current Time",un.registerComponent("CurrentTimeDisplay",mu);class Ku extends Vo{constructor(t,i){super(t,i);const l=f=>this.updateContent(f);this.on(t,"durationchange",l),this.on(t,"loadstart",l),this.on(t,"loadedmetadata",l)}buildCSSClass(){return"vjs-duration"}updateContent(t){const i=this.player_.duration();this.updateTextNode_(i)}}Ku.prototype.labelText_="Duration",Ku.prototype.controlText_="Duration",un.registerComponent("DurationDisplay",Ku),un.registerComponent("TimeDivider",class Mh extends un{createEl(){const t=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),i=super.createEl("div"),l=super.createEl("span",{textContent:"/"});return i.appendChild(l),t.appendChild(i),t}});class ld extends Vo{constructor(t,i){super(t,i),this.on(t,"durationchange",l=>this.updateContent(l))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const t=super.createEl();return!1!==this.options_.displayNegative&&t.insertBefore(vr("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t}updateContent(t){if("number"!=typeof this.player_.duration())return;let i;i=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(i)}}ld.prototype.labelText_="Remaining Time",ld.prototype.controlText_="Remaining Time",un.registerComponent("RemainingTimeDisplay",ld),un.registerComponent("LiveDisplay",class $i extends un{constructor(t,i){super(t,i),this.updateShowing(),this.on(this.player(),"durationchange",l=>this.updateShowing(l))}createEl(){const t=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=vr("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(vr("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xa0`})),this.contentEl_.appendChild(qe().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,super.dispose()}updateShowing(t){this.player().duration()===1/0?this.show():this.hide()}});class gs extends Ur{constructor(t,i){super(t,i),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=l=>this.updateLiveEdgeStatus(l),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const t=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=vr("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function pl(c,t,i){return c=Number(c),Math.min(i,Math.max(t,isNaN(c)?t:c))}gs.prototype.controlText_="Seek to live, currently playing live",un.registerComponent("SeekToLive",gs);var gl=Object.freeze({__proto__:null,clamp:pl});class Bl extends un{constructor(t,i){super(t,i),this.handleMouseDown_=l=>this.handleMouseDown(l),this.handleMouseUp_=l=>this.handleMouseUp(l),this.handleKeyDown_=l=>this.handleKeyDown(l),this.handleClick_=l=>this.handleClick(l),this.handleMouseMove_=l=>this.handleMouseMove(l),this.update_=l=>this.update(l),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(t,i={},l={}){return i.className=i.className+" vjs-slider",i=Object.assign({tabIndex:0},i),l=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},l),super.createEl(t,i,l)}handleMouseDown(t){const i=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"===t.type&&!oo&&t.preventDefault(),sd(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(i,"mousemove",this.handleMouseMove_),this.on(i,"mouseup",this.handleMouseUp_),this.on(i,"touchmove",this.handleMouseMove_),this.on(i,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)}handleMouseMove(t){}handleMouseUp(t){const i=this.bar.el_.ownerDocument;Cu(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",()=>{const i=this.vertical()?"height":"width";this.bar.el().style[i]=(100*t).toFixed(2)+"%"})),t}getProgress(){return Number(pl(this.getPercent(),0,1).toFixed(4))}calculateDistance(t){const i=pu(this.el_,t);return this.vertical()?i.y:i.x}handleKeyDown(t){je().isEventKey(t,"Left")||je().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):je().isEventKey(t,"Right")||je().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t)}handleClick(t){t.stopPropagation(),t.preventDefault()}vertical(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")}}un.registerComponent("Slider",Bl);const Ph=(c,t)=>pl(c/t*100,0,100).toFixed(2)+"%";un.registerComponent("LoadProgressBar",class kg extends un{constructor(t,i){super(t,i),this.partEls_=[],this.on(t,"progress",l=>this.update(l))}createEl(){const t=super.createEl("div",{className:"vjs-load-progress"}),i=vr("span",{className:"vjs-control-text"}),l=vr("span",{textContent:this.localize("Loaded")}),f=qe().createTextNode(": ");return this.percentageEl_=vr("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(i),i.appendChild(l),i.appendChild(f),i.appendChild(this.percentageEl_),t}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(t){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const i=this.player_.liveTracker,l=this.player_.buffered(),f=i&&i.isLive()?i.seekableEnd():this.player_.duration(),v=this.player_.bufferedEnd(),E=this.partEls_,I=Ph(v,f);this.percent_!==I&&(this.el_.style.width=I,Qn(this.percentageEl_,I),this.percent_=I);for(let $=0;$<l.length;$++){const ce=l.start($),me=l.end($);let ze=E[$];ze||(ze=this.el_.appendChild(vr()),E[$]=ze),(ze.dataset.start!==ce||ze.dataset.end!==me)&&(ze.dataset.start=ce,ze.dataset.end=me,ze.style.left=Ph(ce,v),ze.style.width=Ph(me-ce,v))}for(let $=E.length;$>l.length;$--)this.el_.removeChild(E[$-1]);E.length=l.length})}}),un.registerComponent("TimeTooltip",class Ep extends un{constructor(t,i){super(t,i),this.update=A(yn(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(t,i,l){const f=Er(this.el_),v=pn(this.player_.el()),E=t.width*i;if(!v||!f)return;const I=t.left-v.left+E,$=t.width-E+(v.right-t.right);let ce=f.width/2;I<ce?ce+=ce-I:$<ce&&(ce=$),ce<0?ce=0:ce>f.width&&(ce=f.width),ce=Math.round(ce),this.el_.style.right=`-${ce}px`,this.write(l)}write(t){Qn(this.el_,t)}updateTime(t,i,l,f){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let v;const E=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const I=this.player_.liveTracker.liveWindow(),$=I-i*I;v=($<1?"":"-")+Ms($,I)}else v=Ms(l,E);this.update(t,i,v),f&&f()})}});class Af extends un{constructor(t,i){super(t,i),this.update=A(yn(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(t,i){const l=this.getChild("timeTooltip");if(!l)return;const f=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();l.updateTime(t,i,f)}}Af.prototype.options_={children:[]},!Zt&&!Sa&&Af.prototype.options_.children.push("timeTooltip"),un.registerComponent("PlayProgressBar",Af);class Mg extends un{constructor(t,i){super(t,i),this.update=A(yn(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,i){const l=i*this.player_.duration();this.getChild("timeTooltip").updateTime(t,i,l,()=>{this.el_.style.left=t.width*i+"px"})}}Mg.prototype.options_={children:["timeTooltip"]},un.registerComponent("MouseTimeDisplay",Mg);class Cp extends Bl{constructor(t,i){super(t,i),this.setEventHandlers_()}setEventHandlers_(){this.update_=yn(this,this.update),this.update=A(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=t=>this.enableInterval_(t),this.disableIntervalHandler_=t=>this.disableInterval_(t),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in qe()&&"visibilityState"in qe()&&this.on(qe(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(t){"hidden"===qe().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(t){if("hidden"===qe().visibilityState)return;const i=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const l=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),f=this.player_.liveTracker;let v=this.player_.duration();f&&f.isLive()&&(v=this.player_.liveTracker.liveCurrentTime()),this.percent_!==i&&(this.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),this.percent_=i),(this.currentTime_!==l||this.duration_!==v)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ms(l,v),Ms(v,v)],"{1} of {2}")),this.currentTime_=l,this.duration_=v),this.bar&&this.bar.update(pn(this.el()),this.getProgress())}),i}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const t=this.getCurrentTime_();let i;const l=this.player_.liveTracker;return l&&l.isLive()?(i=(t-l.seekableStart())/l.liveWindow(),l.atLiveEdge()&&(i=1)):i=t/this.player_.duration(),i}handleMouseDown(t){Js(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(t))}handleMouseMove(t,i=!1){if(!Js(t))return;let l;!i&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);const f=this.calculateDistance(t),v=this.player_.liveTracker;if(v&&v.isLive()){if(f>=.99)return void v.seekToLiveEdge();const E=v.seekableStart(),I=v.liveCurrentTime();if(l=E+f*v.liveWindow(),l>=I&&(l=I),l<=E&&(l=E+.1),l===1/0)return}else l=f*this.player_.duration(),l===this.player_.duration()&&(l-=.1);this.userSeek_(l)}enable(){super.enable();const t=this.getChild("mouseTimeDisplay");t&&t.show()}disable(){super.disable();const t=this.getChild("mouseTimeDisplay");t&&t.hide()}handleMouseUp(t){super.handleMouseUp(t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Va(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(t){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(t){const i=this.player_.liveTracker;if(je().isEventKey(t,"Space")||je().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(je().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(je().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(je()(t))){t.preventDefault(),t.stopPropagation();const l=10*(je().codes[je()(t)]-je().codes[0])/100;i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*l):this.userSeek_(this.player_.duration()*l)}else je().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):je().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(t)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in qe()&&"visibilityState"in qe()&&this.off(qe(),"visibilitychange",this.toggleVisibility_),super.dispose()}}Cp.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!Zt&&!Sa&&Cp.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),un.registerComponent("SeekBar",Cp);class Oh extends un{constructor(t,i){super(t,i),this.handleMouseMove=A(yn(this,this.handleMouseMove),30),this.throttledHandleMouseSeek=A(yn(this,this.handleMouseSeek),30),this.handleMouseUpHandler_=l=>this.handleMouseUp(l),this.handleMouseDownHandler_=l=>this.handleMouseDown(l),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(t){const i=this.getChild("seekBar");if(!i)return;const l=i.getChild("playProgressBar"),f=i.getChild("mouseTimeDisplay");if(!l&&!f)return;const v=i.el(),E=Er(v);let I=pu(v,t).x;I=pl(I,0,1),f&&f.update(E,I),l&&l.update(E,i.getProgress())}handleMouseSeek(t){const i=this.getChild("seekBar");i&&i.handleMouseMove(t)}enabled(){return this.enabled_}disable(){if(this.children().forEach(t=>t.disable&&t.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&Va(this.player_.play())}}enable(){this.children().forEach(t=>t.enable&&t.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseDown(t){const i=this.el_.ownerDocument,l=this.getChild("seekBar");l&&l.handleMouseDown(t),this.on(i,"mousemove",this.throttledHandleMouseSeek),this.on(i,"touchmove",this.throttledHandleMouseSeek),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const i=this.getChild("seekBar");i&&i.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()}}Oh.prototype.options_={children:["seekBar"]},un.registerComponent("ProgressControl",Oh);class cc extends Ur{constructor(t,i){super(t,i),this.on(t,["enterpictureinpicture","leavepictureinpicture"],l=>this.handlePictureInPictureChange(l)),this.on(t,["disablepictureinpicturechanged","loadedmetadata"],l=>this.handlePictureInPictureEnabledChange(l)),this.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>{"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),this.hide()):this.show()}),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){qe().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in le()?this.enable():this.disable()}handlePictureInPictureChange(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}cc.prototype.controlText_="Picture-in-Picture",un.registerComponent("PictureInPictureToggle",cc);class Sp extends Ur{constructor(t,i){super(t,i),this.on(t,"fullscreenchange",l=>this.handleFullscreenChange(l)),!1===qe()[t.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(t){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Sp.prototype.controlText_="Fullscreen",un.registerComponent("FullscreenToggle",Sp),un.registerComponent("VolumeLevel",class Og extends un{createEl(){const t=super.createEl("div",{className:"vjs-volume-level"});return t.appendChild(super.createEl("span",{className:"vjs-control-text"})),t}}),un.registerComponent("VolumeLevelTooltip",class Rg extends un{constructor(t,i){super(t,i),this.update=A(yn(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(t,i,l,f){if(!l){const v=pn(this.el_),E=pn(this.player_.el()),I=t.width*i;if(!E||!v)return;const $=t.left-E.left+I,ce=t.width-I+(E.right-t.right);let me=v.width/2;$<me?me+=me-$:ce<me&&(me=ce),me<0?me=0:me>v.width&&(me=v.width),this.el_.style.right=`-${me}px`}this.write(`${f}%`)}write(t){Qn(this.el_,t)}updateVolume(t,i,l,f,v){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(t,i,l,f.toFixed(0)),v&&v()})}});class Rh extends un{constructor(t,i){super(t,i),this.update=A(yn(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,i,l){const f=100*i;this.getChild("volumeLevelTooltip").updateVolume(t,i,l,f,()=>{l?this.el_.style.bottom=t.height*i+"px":this.el_.style.left=t.width*i+"px"})}}Rh.prototype.options_={children:["volumeLevelTooltip"]},un.registerComponent("MouseVolumeLevelDisplay",Rh);class Ul extends Bl{constructor(t,i){super(t,i),this.on("slideractive",l=>this.updateLastVolume_(l)),this.on(t,"volumechange",l=>this.updateARIAAttributes(l)),t.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(t){Js(t)&&super.handleMouseDown(t)}handleMouseMove(t){const i=this.getChild("mouseVolumeLevelDisplay");if(i){const l=this.el(),f=pn(l),v=this.vertical();let E=pu(l,t);E=v?E.y:E.x,E=pl(E,0,1),i.update(f,E,v)}Js(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(t){const i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i),this.el_.setAttribute("aria-valuetext",i+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const t=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(t)})}}Ul.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!Zt&&!Sa&&Ul.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Ul.prototype.playerEvent="volumechange",un.registerComponent("VolumeBar",Ul);class Gd extends un{constructor(t,i={}){i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||Za(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),super(t,i),function(c,t){t.tech_&&!t.tech_.featuresVolumeControl&&c.addClass("vjs-hidden"),c.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?c.removeClass("vjs-hidden"):c.addClass("vjs-hidden")})}(this,t),this.throttledHandleMouseMove=A(yn(this,this.handleMouseMove),30),this.handleMouseUpHandler_=l=>this.handleMouseUp(l),this.on("mousedown",l=>this.handleMouseDown(l)),this.on("touchstart",l=>this.handleMouseDown(l)),this.on("mousemove",l=>this.handleMouseMove(l)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${t}`})}handleMouseDown(t){const i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove),this.on(i,"touchmove",this.throttledHandleMouseMove),this.on(i,"mouseup",this.handleMouseUpHandler_),this.on(i,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove),this.off(i,"touchmove",this.throttledHandleMouseMove),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)}handleMouseMove(t){this.volumeBar.handleMouseMove(t)}}Gd.prototype.options_={children:["volumeBar"]},un.registerComponent("VolumeControl",Gd);class Mf extends Ur{constructor(t,i){super(t,i),function(c,t){t.tech_&&!t.tech_.featuresMuteControl&&c.addClass("vjs-hidden"),c.on(t,"loadstart",function(){t.tech_.featuresMuteControl?c.removeClass("vjs-hidden"):c.addClass("vjs-hidden")})}(this,t),this.on(t,["loadstart","volumechange"],l=>this.update(l))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(t){const i=this.player_.volume(),l=this.player_.lastVolume_();0===i?(this.player_.volume(l<.1?.1:l),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())}update(t){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const t=this.player_.volume();let i=3;Zt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?i=0:t<.33?i=1:t<.67&&(i=2),ia(this.el_,[0,1,2,3].reduce((l,f)=>l+`${f?" ":""}vjs-vol-${f}`,"")),bs(this.el_,`vjs-vol-${i}`)}updateControlText_(){const i=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)}}Mf.prototype.controlText_="Mute",un.registerComponent("MuteToggle",Mf);class Ng extends un{constructor(t,i={}){i.inline=!(typeof i.inline<"u")||i.inline,(typeof i.volumeControl>"u"||Za(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),super(t,i),this.handleKeyPressHandler_=l=>this.handleKeyPress(l),this.on(t,["loadstart"],l=>this.volumePanelState_(l)),this.on(this.muteToggle,"keyup",l=>this.handleKeyPress(l)),this.on(this.volumeControl,"keyup",l=>this.handleVolumeControlKeyUp(l)),this.on("keydown",l=>this.handleKeyPress(l)),this.on("mouseover",l=>this.handleMouseOver(l)),this.on("mouseout",l=>this.handleMouseOut(l)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${t}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(t){je().isEventKey(t,"Esc")&&this.muteToggle.focus()}handleMouseOver(t){this.addClass("vjs-hover"),Jo(qe(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(t){this.removeClass("vjs-hover"),gi(qe(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(t){je().isEventKey(t,"Esc")&&this.handleMouseOut()}}Ng.prototype.options_={children:["muteToggle","volumeControl"]},un.registerComponent("VolumePanel",Ng),un.registerComponent("SkipForward",class zd extends Ur{constructor(t,i){super(t,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(t){const i=this.player_.currentTime(),l=this.player_.liveTracker,f=l&&l.isLive()?l.seekableEnd():this.player_.duration();let v;v=i+this.skipTime<=f?i+this.skipTime:f,this.player_.currentTime(v)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}});class dc extends Ur{constructor(t,i){super(t,i),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(t){const i=this.player_.currentTime(),l=this.player_.liveTracker,f=l&&l.isLive()&&l.seekableStart();let v;v=f&&i-this.skipTime<=f?f:i>=this.skipTime?i-this.skipTime:0,this.player_.currentTime(v)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}dc.prototype.controlText_="Skip Backward",un.registerComponent("SkipBackward",dc);class Lg extends un{constructor(t,i){super(t,i),i&&(this.menuButton_=i.menuButton),this.focusedChild_=-1,this.on("keydown",l=>this.handleKeyDown(l)),this.boundHandleBlur_=l=>this.handleBlur(l),this.boundHandleTapClick_=l=>this.handleTapClick(l)}addEventListenerForItem(t){t instanceof un&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(t){t instanceof un&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))}removeChild(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),super.removeChild(t)}addItem(t){const i=this.addChild(t);i&&this.addEventListenerForItem(i)}createEl(){this.contentEl_=vr(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const i=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),Jo(i,"click",function(l){l.preventDefault(),l.stopImmediatePropagation()}),i}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(t){const i=t.relatedTarget||qe().activeElement;if(!this.children().some(l=>l.el()===i)){const l=this.menuButton_;l&&l.buttonPressed_&&i!==l.el().firstChild&&l.unpressButton()}}handleTapClick(t){if(this.menuButton_){this.menuButton_.unpressButton();const i=this.children();if(!Array.isArray(i))return;const l=i.filter(f=>f.el()===t.target)[0];if(!l)return;"CaptionSettingsMenuItem"!==l.name()&&this.menuButton_.focus()}}handleKeyDown(t){je().isEventKey(t,"Left")||je().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(je().isEventKey(t,"Right")||je().isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())}stepForward(){let t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)}stepBack(){let t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)}focus(t=0){const i=this.children().slice();i.length&&i[0].hasClass("vjs-menu-title")&&i.shift(),i.length>0&&(t<0?t=0:t>=i.length&&(t=i.length-1),this.focusedChild_=t,i[t].el_.focus())}}un.registerComponent("Menu",Lg);class cd extends un{constructor(t,i={}){super(t,i),this.menuButton_=new Ur(t,i),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const l=Ur.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+l,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const f=v=>this.handleClick(v);this.handleMenuKeyUp_=v=>this.handleMenuKeyUp(v),this.on(this.menuButton_,"tap",f),this.on(this.menuButton_,"click",f),this.on(this.menuButton_,"keydown",v=>this.handleKeyDown(v)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Jo(qe(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",v=>this.handleMouseLeave(v)),this.on("keydown",v=>this.handleSubmenuKeyDown(v))}update(){const t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const t=new Lg(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const i=vr("li",{className:"vjs-menu-title",textContent:fs(this.options_.title),tabIndex:-1}),l=new un(this.player_,{el:i});t.addItem(l)}if(this.items=this.createItems(),this.items)for(let i=0;i<this.items.length;i++)t.addItem(this.items[i]);return t}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let t="vjs-menu-button";return t+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${t} ${Ur.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let t="vjs-menu-button";return t+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${t} ${super.buildCSSClass()}`}controlText(t,i=this.menuButton_.el()){return this.menuButton_.controlText(t,i)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(t){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(t){this.removeClass("vjs-hover"),gi(qe(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(t){je().isEventKey(t,"Esc")||je().isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),je().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(je().isEventKey(t,"Up")||je().isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))}handleMenuKeyUp(t){(je().isEventKey(t,"Esc")||je().isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(t){this.handleSubmenuKeyDown(t)}handleSubmenuKeyDown(t){(je().isEventKey(t,"Esc")||je().isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),je().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Zt&&Jr())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}un.registerComponent("MenuButton",cd);class Dp extends cd{constructor(t,i){const l=i.tracks;if(super(t,i),this.items.length<=1&&this.hide(),!l)return;const f=yn(this,this.update);l.addEventListener("removetrack",f),l.addEventListener("addtrack",f),l.addEventListener("labelchange",f),this.player_.on("ready",f),this.player_.on("dispose",function(){l.removeEventListener("removetrack",f),l.removeEventListener("addtrack",f),l.removeEventListener("labelchange",f)})}}un.registerComponent("TrackButton",Dp);const Fg=["Tab","Esc","Up","Down","Right","Left"];class hc extends pt{constructor(t,i){super(t,i),this.selectable=i.selectable,this.isSelected_=i.selected||!1,this.multiSelectable=i.multiSelectable,this.selected(this.isSelected_),this.el_.setAttribute("role",this.selectable?this.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem")}createEl(t,i,l){this.nonIconControl=!0;const f=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},i),l);return f.replaceChild(vr("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),f.querySelector(".vjs-icon-placeholder")),f}handleKeyDown(t){Fg.some(i=>je().isEventKey(t,i))||super.handleKeyDown(t)}handleClick(t){this.selected(!0)}selected(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}un.registerComponent("MenuItem",hc);class Zu extends hc{constructor(t,i){const l=i.track,f=t.textTracks();i.label=l.label||l.language||"Unknown",i.selected="showing"===l.mode,super(t,i),this.track=l,this.kinds=(i.kinds||[i.kind||this.track.kind]).filter(Boolean);const v=(...I)=>{this.handleTracksChange.apply(this,I)},E=(...I)=>{this.handleSelectedLanguageChange.apply(this,I)};if(t.on(["loadstart","texttrackchange"],v),f.addEventListener("change",v),f.addEventListener("selectedlanguagechange",E),this.on("dispose",function(){t.off(["loadstart","texttrackchange"],v),f.removeEventListener("change",v),f.removeEventListener("selectedlanguagechange",E)}),void 0===f.onchange){let I;this.on(["tap","click"],function(){if("object"!=typeof le().Event)try{I=new(le().Event)("change")}catch{}I||(I=qe().createEvent("Event"),I.initEvent("change",!0,!0)),f.dispatchEvent(I)})}this.handleTracksChange()}handleClick(t){const i=this.track,l=this.player_.textTracks();if(super.handleClick(t),l)for(let f=0;f<l.length;f++){const v=l[f];-1!==this.kinds.indexOf(v.kind)&&(v===i?"showing"!==v.mode&&(v.mode="showing"):"disabled"!==v.mode&&(v.mode="disabled"))}}handleTracksChange(t){const i="showing"===this.track.mode;i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(t){if("showing"===this.track.mode){const i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}un.registerComponent("TextTrackMenuItem",Zu);class Vl extends Zu{constructor(t,i){i.track={player:t,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.track.label=i.label?i.label:i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,super(t,i)}handleTracksChange(t){const i=this.player().textTracks();let l=!0;for(let f=0,v=i.length;f<v;f++){const E=i[f];if(this.options_.kinds.indexOf(E.kind)>-1&&"showing"===E.mode){l=!1;break}}l!==this.isSelected_&&this.selected(l)}handleSelectedLanguageChange(t){const i=this.player().textTracks();let l=!0;for(let f=0,v=i.length;f<v;f++){const E=i[f];if(["captions","descriptions","subtitles"].indexOf(E.kind)>-1&&"showing"===E.mode){l=!1;break}}l&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}un.registerComponent("OffTextTrackMenuItem",Vl);class Ko extends Dp{constructor(t,i={}){i.tracks=t.textTracks(),super(t,i)}createItems(t=[],i=Zu){let l;this.label_&&(l=`${this.label_} off`),t.push(new Vl(this.player_,{kinds:this.kinds_,kind:this.kind_,label:l})),this.hideThreshold_+=1;const f=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let v=0;v<f.length;v++){const E=f[v];if(this.kinds_.indexOf(E.kind)>-1){const I=new i(this.player_,{track:E,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});I.addClass(`vjs-${E.kind}-menu-item`),t.push(I)}}return t}}un.registerComponent("TextTrackButton",Ko);class dd extends hc{constructor(t,i){const l=i.track,f=i.cue,v=t.currentTime();i.selectable=!0,i.multiSelectable=!1,i.label=f.text,i.selected=f.startTime<=v&&v<f.endTime,super(t,i),this.track=l,this.cue=f}handleClick(t){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}un.registerComponent("ChaptersTrackMenuItem",dd);class fc extends Ko{constructor(t,i,l){super(t,i,l),this.selectCurrentItem_=()=>{this.items.forEach(f=>{f.selected(this.track_.activeCues[0]===f.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(t){if(t&&t.track&&"chapters"!==t.track.kind)return;const i=this.findChaptersTrack();i!==this.track_?(this.setTrack(i),super.update()):(!this.items||i&&i.cues&&i.cues.length!==this.items.length)&&super.update()}setTrack(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const t=this.player_.textTracks()||[];for(let i=t.length-1;i>=0;i--){const l=t[i];if(l.kind===this.kind_)return l}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(fs(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const t=[];if(!this.track_)return t;const i=this.track_.cues;if(!i)return t;for(let l=0,f=i.length;l<f;l++){const E=new dd(this.player_,{track:this.track_,cue:i[l]});t.push(E)}return t}}fc.prototype.kind_="chapters",fc.prototype.controlText_="Chapters",un.registerComponent("ChaptersButton",fc);class Yu extends Ko{constructor(t,i,l){super(t,i,l);const f=t.textTracks(),v=yn(this,this.handleTracksChange);f.addEventListener("change",v),this.on("dispose",function(){f.removeEventListener("change",v)})}handleTracksChange(t){const i=this.player().textTracks();let l=!1;for(let f=0,v=i.length;f<v;f++){const E=i[f];if(E.kind!==this.kind_&&"showing"===E.mode){l=!0;break}}l?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Yu.prototype.kind_="descriptions",Yu.prototype.controlText_="Descriptions",un.registerComponent("DescriptionsButton",Yu);class Nh extends Ko{constructor(t,i,l){super(t,i,l)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}Nh.prototype.kind_="subtitles",Nh.prototype.controlText_="Subtitles",un.registerComponent("SubtitlesButton",Nh);class pc extends Zu{constructor(t,i){i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",super(t,i),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+i.kind+" settings dialog")}handleClick(t){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}un.registerComponent("CaptionSettingsMenuItem",pc);class $l extends Ko{constructor(t,i,l){super(t,i,l)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new pc(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(t)}}$l.prototype.kind_="captions",$l.prototype.controlText_="Captions",un.registerComponent("CaptionsButton",$l);class qd extends Zu{createEl(t,i,l){const f=super.createEl(t,i,l),v=f.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(v.appendChild(vr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),v.appendChild(vr("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),f}}un.registerComponent("SubsCapsMenuItem",qd);class Au extends Ko{constructor(t,i={}){super(t,i),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(fs(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new pc(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=super.createItems(t,qd),t}}Au.prototype.kinds_=["captions","subtitles"],Au.prototype.controlText_="Subtitles",un.registerComponent("SubsCapsButton",Au);class Ip extends hc{constructor(t,i){const l=i.track,f=t.audioTracks();i.label=l.label||l.language||"Unknown",i.selected=l.enabled,super(t,i),this.track=l,this.addClass(`vjs-${l.kind}-menu-item`);const v=(...E)=>{this.handleTracksChange.apply(this,E)};f.addEventListener("change",v),this.on("dispose",()=>{f.removeEventListener("change",v)})}createEl(t,i,l){const f=super.createEl(t,i,l),v=f.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(v.appendChild(vr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),v.appendChild(vr("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),f}handleClick(t){if(super.handleClick(t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const i=this.player_.audioTracks();for(let l=0;l<i.length;l++){const f=i[l];f!==this.track&&(f.enabled=f===this.track)}}}handleTracksChange(t){this.selected(this.track.enabled)}}un.registerComponent("AudioTrackMenuItem",Ip);class Hl extends Dp{constructor(t,i={}){i.tracks=t.audioTracks(),super(t,i)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(t=[]){this.hideThreshold_=1;const i=this.player_.audioTracks();for(let l=0;l<i.length;l++)t.push(new Ip(this.player_,{track:i[l],selectable:!0,multiSelectable:!1}));return t}}Hl.prototype.controlText_="Audio Track",un.registerComponent("AudioTrackButton",Hl);class xp extends hc{constructor(t,i){const l=i.rate,f=parseFloat(l,10);i.label=l,i.selected=f===t.playbackRate(),i.selectable=!0,i.multiSelectable=!1,super(t,i),this.label=l,this.rate=f,this.on(t,"ratechange",v=>this.update(v))}handleClick(t){super.handleClick(),this.player().playbackRate(this.rate)}update(t){this.selected(this.player().playbackRate()===this.rate)}}xp.prototype.contentElType="button",un.registerComponent("PlaybackRateMenuItem",xp);class Ha extends cd{constructor(t,i){super(t,i),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(t,"loadstart",l=>this.updateVisibility(l)),this.on(t,"ratechange",l=>this.updateLabel(l)),this.on(t,"playbackrateschange",l=>this.handlePlaybackRateschange(l))}createEl(){const t=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=vr("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const t=this.playbackRates(),i=[];for(let l=t.length-1;l>=0;l--)i.push(new xp(this.player(),{rate:t[l]+"x"}));return i}handlePlaybackRateschange(t){this.update()}playbackRates(){const t=this.player();return t.playbackRates&&t.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}Ha.prototype.controlText_="Playback Rate",un.registerComponent("PlaybackRateMenuButton",Ha);class Lh extends un{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(t="div",i={},l={}){return i.className||(i.className=this.buildCSSClass()),super.createEl(t,i,l)}}un.registerComponent("Spacer",Lh),un.registerComponent("CustomControlSpacer",class gc extends Lh{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xa0"})}});class Fh extends un{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}Fh.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in qe()&&Fh.prototype.options_.children.splice(Fh.prototype.options_.children.length-1,0,"pictureInPictureToggle"),un.registerComponent("ControlBar",Fh);class Qu extends qu{constructor(t,i){super(t,i),this.on(t,"error",l=>this.open(l))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const t=this.player().error();return t?this.localize(t.message):""}}Qu.prototype.options_=Object.assign({},qu.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),un.registerComponent("ErrorDisplay",Qu);const jh="vjs-text-track-settings",Wd=["#000","Black"],jg=["#00F","Blue"],nu=["#0FF","Cyan"],li=["#0F0","Green"],Bh=["#F0F","Magenta"],Vc=["#F00","Red"],oa=["#FFF","White"],hd=["#FF0","Yellow"],fd=["1","Opaque"],pd=["0.5","Semi-Transparent"],vu=["0","Transparent"],Xu={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Wd,oa,Vc,li,jg,hd,Bh,nu]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[fd,pd,vu]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[oa,Wd,Vc,li,jg,hd,Bh,nu]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:c=>"1.00"===c?null:Number(c)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[fd,pd]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[vu,pd,fd]}};function Pf(c,t){if(t&&(c=t(c)),c&&"none"!==c)return c}Xu.windowColor.options=Xu.backgroundColor.options,un.registerComponent("TextTrackSettings",class Uh extends qu{constructor(t,i){i.temporary=!1,super(t,i),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=vr("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===i.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),Ka(Xu,l=>{this.on(this.$(l.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(t,i="",l="label"){const f=Xu[t],v=f.id.replace("%s",this.id_),E=[i,v].join(" ").trim();return[`<${l} id="${v}" class="${"label"===l?"vjs-label":""}">`,this.localize(f.label),`</${l}>`,`<select aria-labelledby="${E}">`].concat(f.options.map(I=>{const $=v+"-"+I[1].replace(/\W+/g,"");return[`<option id="${$}" value="${I[0]}" `,`aria-labelledby="${E} ${$}">`,this.localize(I[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const t=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${t}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",t),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")}createElBgColor_(){const t=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${t}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",t),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")}createElWinColor_(){const t=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${t}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",t),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")}createElColors_(){return vr("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return vr("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const t=this.localize("restore all settings to the default values");return vr("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${t}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${t}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return sl(Xu,(t,i,l)=>{const f=function gd(c,t){return Pf(c.options[c.options.selectedIndex].value,t)}(this.$(i.selector),i.parser);return void 0!==f&&(t[l]=f),t},{})}setValues(t){Ka(Xu,(i,l)=>{!function mc(c,t,i){if(t)for(let l=0;l<c.options.length;l++)if(Pf(c.options[l].value,i)===t){c.selectedIndex=l;break}}(this.$(i.selector),t[l],i.parser)})}setDefaults(){Ka(Xu,t=>{const i=t.hasOwnProperty("default")?t.default:0;this.$(t.selector).selectedIndex=i})}restoreSettings(){let t;try{t=JSON.parse(le().localStorage.getItem(jh))}catch(i){$r.warn(i)}t&&this.setValues(t)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const t=this.getValues();try{Object.keys(t).length?le().localStorage.setItem(jh,JSON.stringify(t)):le().localStorage.removeItem(jh)}catch(i){$r.warn(i)}}updateDisplay(){const t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const t=this.player_.controlBar,i=t&&t.subsCapsButton,l=t&&t.captionsButton;i?i.focus():l&&l.focus()}handleLanguagechange(){this.fill()}}),un.registerComponent("ResizeManager",class md extends un{constructor(t,i){let l=i.ResizeObserver||le().ResizeObserver;null===i.ResizeObserver&&(l=!1),super(t,Ri({createEl:!l,reportTouchActivity:!1},i)),this.ResizeObserver=i.ResizeObserver||le().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=R(()=>{this.resizeHandler()},100,!1,this),l?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(t.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const v=this.debouncedHandler_;let E=this.unloadListener_=function(){gi(this,"resize",v),gi(this,"unload",E),E=null};Jo(this.el_.contentWindow,"unload",E),Jo(this.el_.contentWindow,"resize",v)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const Ap={trackingThreshold:20,liveTolerance:15};un.registerComponent("LiveTracker",class $c extends un{constructor(t,i){super(t,Ri(Ap,i,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=f=>this.handlePlay(f),this.handleFirstTimeupdate_=f=>this.handleFirstTimeupdate(f),this.handleSeeked_=f=>this.handleSeeked(f),this.seekToLiveEdge_=f=>this.seekToLiveEdge(f),this.reset_(),this.on(this.player_,"durationchange",f=>this.handleDurationchange(f)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const t=this.player_.seekable();if(!t||!t.length)return;const i=Number(le().performance.now().toFixed(4)),l=-1===this.lastTime_?0:(i-this.lastTime_)/1e3;this.lastTime_=i,this.pastSeekEnd_=this.pastSeekEnd()+l;const f=this.liveCurrentTime(),v=this.player_.currentTime();let E=this.player_.paused()||this.seekedBehindLive_||Math.abs(f-v)>this.options_.liveTolerance;(!this.timeupdateSeen_||f===1/0)&&(E=!1),E!==this.behindLiveEdge_&&(this.behindLiveEdge_=E,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const t=this.player_.seekable(),i=[];let l=t?t.length:0;for(;l--;)i.push(t.end(l));return i.length?i.sort()[i.length-1]:1/0}seekableStart(){const t=this.player_.seekable(),i=[];let l=t?t.length:0;for(;l--;)i.push(t.start(l));return i.length?i.sort()[0]:0}liveWindow(){const t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),un.registerComponent("TitleBar",class ml extends un{constructor(t,i){super(t,i),this.on("statechanged",l=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:vr("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Da()}`}),description:vr("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Da()}`})},vr("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){const t=this.player_.tech_,i=t&&t.el_,l={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(f=>{const v=this.state[f],E=this.els[f],I=l[f];ao(E),v&&Qn(E,v),i&&(i.removeAttribute(I),v&&i.setAttribute(I,E.id))}),this.state.title||this.state.description?this.show():this.hide()}update(t){this.setState(t)}dispose(){const t=this.player_.tech_,i=t&&t.el_;i&&(i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const Vh=c=>{const t=c.el();if(t.hasAttribute("src"))return c.triggerSourceset(t.src),!0;const i=c.$$("source"),l=[];let f="";if(!i.length)return!1;for(let v=0;v<i.length;v++){const E=i[v].src;E&&-1===l.indexOf(E)&&l.push(E)}return!!l.length&&(1===l.length&&(f=l[0]),c.triggerSourceset(f),!0)},vc=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(c){const t=qe().createElement(this.nodeName.toLowerCase());t.innerHTML=c;const i=qe().createDocumentFragment();for(;t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",le().Element.prototype.appendChild.call(this,i),this.innerHTML}}),Bg=(c,t)=>{let i={};for(let l=0;l<c.length&&(i=Object.getOwnPropertyDescriptor(c[l],t),!(i&&i.set&&i.get));l++);return i.enumerable=!0,i.configurable=!0,i},qs=function(c){const t=c.el();if(t.resetSourceWatch_)return;const i={},l=(c=>Bg([c.el(),le().HTMLMediaElement.prototype,le().Element.prototype,vc],"innerHTML"))(c),f=v=>(...E)=>{const I=v.apply(t,E);return Vh(c),I};["append","appendChild","insertAdjacentHTML"].forEach(v=>{t[v]&&(i[v]=t[v],t[v]=f(i[v]))}),Object.defineProperty(t,"innerHTML",Ri(l,{set:f(l.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(i).forEach(v=>{t[v]=i[v]}),Object.defineProperty(t,"innerHTML",l)},c.one("sourceset",t.resetSourceWatch_)},fa=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?Ah(le().Element.prototype.getAttribute.call(this,"src")):""},set(c){return le().Element.prototype.setAttribute.call(this,"src",c),c}});class Xn extends ri{constructor(t,i){super(t,i);const l=t.source;let f=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,l&&(this.el_.currentSrc!==l.src||t.tag&&3===t.tag.initNetworkState_)?this.setSource(l):this.handleLateInit_(this.el_),t.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const v=this.el_.childNodes;let E=v.length;const I=[];for(;E--;){const $=v[E];"track"===$.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_($),this.remoteTextTracks().addTrack($.track),this.textTracks().addTrack($.track),!f&&!this.el_.hasAttribute("crossorigin")&&Do($.src)&&(f=!0)):I.push($))}for(let $=0;$<I.length;$++)this.el_.removeChild(I[$])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&f&&$r.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(Ke||Te)&&!0===t.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Xn.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(c){if(!c.featuresSourceset)return;const t=c.el();if(t.resetSourceset_)return;const i=(c=>Bg([c.el(),le().HTMLMediaElement.prototype,fa],"src"))(c),l=t.setAttribute,f=t.load;Object.defineProperty(t,"src",Ri(i,{set:v=>{const E=i.set.call(t,v);return c.triggerSourceset(t.src),E}})),t.setAttribute=(v,E)=>{const I=l.call(t,v,E);return/src/i.test(v)&&c.triggerSourceset(t.src),I},t.load=()=>{const v=f.call(t);return Vh(c)||(c.triggerSourceset(""),qs(c)),v},t.currentSrc?c.triggerSourceset(t.currentSrc):Vh(c)||qs(c),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=f,t.setAttribute=l,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const t=this.textTracks();let i;const l=()=>{i=[];for(let v=0;v<t.length;v++){const E=t[v];"metadata"===E.kind&&i.push({track:E,storedMode:E.mode})}};l(),t.addEventListener("change",l),this.on("dispose",()=>t.removeEventListener("change",l));const f=()=>{for(let v=0;v<i.length;v++){const E=i[v];"disabled"===E.track.mode&&E.track.mode!==E.storedMode&&(E.track.mode=E.storedMode)}t.removeEventListener("change",f)};this.on("webkitbeginfullscreen",()=>{t.removeEventListener("change",l),t.removeEventListener("change",f),t.addEventListener("change",f)}),this.on("webkitendfullscreen",()=>{t.removeEventListener("change",l),t.addEventListener("change",l),t.removeEventListener("change",f)})}overrideNative_(t,i){if(i!==this[`featuresNative${t}Tracks`])return;const l=t.toLowerCase();this[`${l}TracksListeners_`]&&Object.keys(this[`${l}TracksListeners_`]).forEach(f=>{this.el()[`${l}Tracks`].removeEventListener(f,this[`${l}TracksListeners_`][f])}),this[`featuresNative${t}Tracks`]=!i,this[`${l}TracksListeners_`]=null,this.proxyNativeTracksForType_(l)}overrideNativeAudioTracks(t){this.overrideNative_("Audio",t)}overrideNativeVideoTracks(t){this.overrideNative_("Video",t)}proxyNativeTracksForType_(t){const i=yo[t],l=this.el()[i.getterName],f=this[i.getterName]();if(!this[`featuresNative${i.capitalName}Tracks`]||!l||!l.addEventListener)return;const v={change:I=>{const $={type:"change",target:f,currentTarget:f,srcElement:f};f.trigger($),"text"===t&&this[gu.remoteText.getterName]().trigger($)},addtrack(I){f.addTrack(I.track)},removetrack(I){f.removeTrack(I.track)}},E=function(){const I=[];for(let $=0;$<f.length;$++){let ce=!1;for(let me=0;me<l.length;me++)if(l[me]===f[$]){ce=!0;break}ce||I.push(f[$])}for(;I.length;)f.removeTrack(I.shift())};this[i.getterName+"Listeners_"]=v,Object.keys(v).forEach(I=>{const $=v[I];l.addEventListener(I,$),this.on("dispose",ce=>l.removeEventListener(I,$))}),this.on("loadstart",E),this.on("dispose",I=>this.off("loadstart",E))}proxyNativeTracks_(){yo.names.forEach(t=>{this.proxyNativeTracksForType_(t)})}createEl(){let t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){const l=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(l,t),Xn.disposeMediaElement(t),t=l}else{t=qe().createElement("video");const f=Ri({},this.options_.tag&&jo(this.options_.tag));(!Ke||!0!==this.options_.nativeControlsForTouch)&&delete f.controls,Nc(t,Object.assign(f,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&wu(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);const i=["loop","muted","playsinline","autoplay"];for(let l=0;l<i.length;l++){const f=i[l],v=this.options_[f];typeof v<"u"&&(v?wu(t,f,f):Ml(t,f),t[f]=v)}return t}handleLateInit_(t){if(0===t.networkState||3===t.networkState)return;if(0===t.readyState){let l=!1;const f=function(){l=!0};this.on("loadstart",f);const v=function(){l||this.trigger("loadstart")};return this.on("loadedmetadata",v),void this.ready(function(){this.off("loadstart",f),this.off("loadedmetadata",v),l||this.trigger("loadstart")})}const i=["loadstart"];i.push("loadedmetadata"),t.readyState>=2&&i.push("loadeddata"),t.readyState>=3&&i.push("canplay"),t.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(l){this.trigger(l)},this)})}setScrubbing(t){this.isScrubbing_=t}scrubbing(){return this.isScrubbing_}setCurrentTime(t){try{this.isScrubbing_&&this.el_.fastSeek&&Jn?this.el_.fastSeek(t):this.el_.currentTime=t}catch(i){$r(i,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Sa&&oo&&0===this.el_.currentTime){const t=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",()=>{this.off("webkitbeginfullscreen",i),this.off("webkitendfullscreen",t)})}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)Va(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}},0);else try{t.webkitEnterFullScreen()}catch(i){this.trigger("fullscreenerror",i)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):super.requestVideoFrameCallback(t)}cancelVideoFrameCallback(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):super.cancelVideoFrameCallback(t)}src(t){if(void 0===t)return this.el_.src;this.setSrc(t)}reset(){Xn.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(t){this.el_.controls=!!t}addTextTrack(t,i,l){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,l):super.addTextTrack(t,i,l)}createRemoteTextTrack(t){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(t);const i=qe().createElement("track");return t.kind&&(i.kind=t.kind),t.label&&(i.label=t.label),(t.language||t.srclang)&&(i.srclang=t.language||t.srclang),t.default&&(i.default=t.default),t.id&&(i.id=t.id),t.src&&(i.src=t.src),i}addRemoteTextTrack(t,i){const l=super.addRemoteTextTrack(t,i);return this.featuresNativeTextTracks&&this.el().appendChild(l),l}removeRemoteTextTrack(t){if(super.removeRemoteTextTrack(t),this.featuresNativeTextTracks){const i=this.$$("track");let l=i.length;for(;l--;)(t===i[l]||t===i[l].track)&&this.el().removeChild(i[l])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),le().performance&&(t.creationTime=le().performance.now()),t}}Qo(Xn,"TEST_VID",function(){if(!hr())return;const c=qe().createElement("video"),t=qe().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",c.appendChild(t),c}),Xn.isSupported=function(){try{Xn.TEST_VID.volume=.5}catch{return!1}return!(!Xn.TEST_VID||!Xn.TEST_VID.canPlayType)},Xn.canPlayType=function(c){return Xn.TEST_VID.canPlayType(c)},Xn.canPlaySource=function(c,t){return Xn.canPlayType(c.type)},Xn.canControlVolume=function(){try{const c=Xn.TEST_VID.volume;Xn.TEST_VID.volume=c/2+.1;const t=c!==Xn.TEST_VID.volume;return t&&Zt?(le().setTimeout(()=>{Xn&&Xn.prototype&&(Xn.prototype.featuresVolumeControl=c!==Xn.TEST_VID.volume)}),!1):t}catch{return!1}},Xn.canMuteVolume=function(){try{const c=Xn.TEST_VID.muted;return Xn.TEST_VID.muted=!c,Xn.TEST_VID.muted?wu(Xn.TEST_VID,"muted","muted"):Ml(Xn.TEST_VID,"muted"),c!==Xn.TEST_VID.muted}catch{return!1}},Xn.canControlPlaybackRate=function(){if(Sa&&oo&&Br<58)return!1;try{const c=Xn.TEST_VID.playbackRate;return Xn.TEST_VID.playbackRate=c/2+.1,c!==Xn.TEST_VID.playbackRate}catch{return!1}},Xn.canOverrideAttributes=function(){try{const c=()=>{};Object.defineProperty(qe().createElement("video"),"src",{get:c,set:c}),Object.defineProperty(qe().createElement("audio"),"src",{get:c,set:c}),Object.defineProperty(qe().createElement("video"),"innerHTML",{get:c,set:c}),Object.defineProperty(qe().createElement("audio"),"innerHTML",{get:c,set:c})}catch{return!1}return!0},Xn.supportsNativeTextTracks=function(){return Jn||Zt&&oo},Xn.supportsNativeVideoTracks=function(){return!(!Xn.TEST_VID||!Xn.TEST_VID.videoTracks)},Xn.supportsNativeAudioTracks=function(){return!(!Xn.TEST_VID||!Xn.TEST_VID.audioTracks)},Xn.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([c,t]){Qo(Xn.prototype,c,()=>Xn[t](),!0)}),Xn.prototype.featuresVolumeControl=Xn.canControlVolume(),Xn.prototype.movingMediaElementInDOM=!Zt,Xn.prototype.featuresFullscreenResize=!0,Xn.prototype.featuresProgressEvents=!0,Xn.prototype.featuresTimeupdateEvents=!0,Xn.prototype.featuresVideoFrameCallback=!(!Xn.TEST_VID||!Xn.TEST_VID.requestVideoFrameCallback),Xn.disposeMediaElement=function(c){if(c){for(c.parentNode&&c.parentNode.removeChild(c);c.hasChildNodes();)c.removeChild(c.firstChild);c.removeAttribute("src"),"function"==typeof c.load&&function(){try{c.load()}catch{}}()}},Xn.resetMediaElement=function(c){if(!c)return;const t=c.querySelectorAll("source");let i=t.length;for(;i--;)c.removeChild(t[i]);c.removeAttribute("src"),"function"==typeof c.load&&function(){try{c.load()}catch{}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(c){Xn.prototype[c]=function(){return this.el_[c]||this.el_.hasAttribute(c)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(c){Xn.prototype["set"+fs(c)]=function(t){this.el_[c]=t,t?this.el_.setAttribute(c,c):this.el_.removeAttribute(c)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(c){Xn.prototype[c]=function(){return this.el_[c]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(c){Xn.prototype["set"+fs(c)]=function(t){this.el_[c]=t}}),["pause","load","play"].forEach(function(c){Xn.prototype[c]=function(){return this.el_[c]()}}),ri.withSourceHandlers(Xn),Xn.nativeSourceHandler={},Xn.nativeSourceHandler.canPlayType=function(c){try{return Xn.TEST_VID.canPlayType(c)}catch{return""}},Xn.nativeSourceHandler.canHandleSource=function(c,t){if(c.type)return Xn.nativeSourceHandler.canPlayType(c.type);if(c.src){const i=fl(c.src);return Xn.nativeSourceHandler.canPlayType(`video/${i}`)}return""},Xn.nativeSourceHandler.handleSource=function(c,t,i){t.setSrc(c.src)},Xn.nativeSourceHandler.dispose=function(){},Xn.registerSourceHandler(Xn.nativeSourceHandler),ri.registerTech("Html5",Xn);const ru=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],_c={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Hc=["tiny","xsmall","small","medium","large","xlarge","huge"],Gl={};Hc.forEach(c=>{const t="x"===c.charAt(0)?`x-${c.substring(1)}`:c;Gl[c]=`vjs-layout-${t}`});const bc={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Ps extends un{constructor(t,i,l){if(t.id=t.id||i.id||`vjs_video_${Da()}`,(i=Object.assign(Ps.getTagSettings(t),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language){const E=t.closest("[lang]");E&&(i.language=E.getAttribute("lang"))}if(super(null,i,l),this.boundDocumentFullscreenChange_=E=>this.documentFullscreenChange_(E),this.boundFullWindowOnEscKey_=E=>this.fullWindowOnEscKey(E),this.boundUpdateStyleEl_=E=>this.updateStyleEl_(E),this.boundApplyInitTime_=E=>this.applyInitTime_(E),this.boundUpdateCurrentBreakpoint_=E=>this.updateCurrentBreakpoint_(E),this.boundHandleTechClick_=E=>this.handleTechClick_(E),this.boundHandleTechDoubleClick_=E=>this.handleTechDoubleClick_(E),this.boundHandleTechTouchStart_=E=>this.handleTechTouchStart_(E),this.boundHandleTechTouchMove_=E=>this.handleTechTouchMove_(E),this.boundHandleTechTouchEnd_=E=>this.handleTechTouchEnd_(E),this.boundHandleTechTap_=E=>this.handleTechTap_(E),this.isFullscreen_=!1,this.log=mo(this.id_),this.fsApi_=so,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=t,this.tagAttributes=t&&jo(t),this.language(this.options_.language),i.languages){const E={};Object.getOwnPropertyNames(i.languages).forEach(function(I){E[I.toLowerCase()]=i.languages[I]}),this.languages_=E}else this.languages_=Ps.prototype.options_.languages;this.resetCache_(),this.poster_=i.poster||"",this.controls_=!!i.controls,t.controls=!1,t.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],t.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(E=>{if("function"!=typeof this[E])throw new Error(`plugin "${E}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Pt(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Jo(qe(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const f=Ri(this.options_);i.plugins&&Object.keys(i.plugins).forEach(E=>{this[E](i.plugins[E])}),i.debug&&this.debug(!0),this.options_.playerOptions=f,this.middleware_=[],this.playbackRates(i.playbackRates),this.initChildren(),this.isAudio("audio"===t.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Ke&&this.addClass("vjs-touch-enabled"),Zt||this.addClass("vjs-workinghover"),Ps.players[this.id_]=this;const v="8.3.0".split(".")[0];this.addClass(`vjs-v${v}`),this.userActive(!0),this.reportUserActivity(),this.one("play",E=>this.listenForUserActivity_(E)),this.on("keydown",E=>this.handleKeyDown(E)),this.on("languagechange",E=>this.handleLanguagechange(E)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),gi(qe(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),gi(qe(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Ps.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function lc(c){If[c.id()]=null}(this),ss.names.forEach(t=>{const l=this[ss[t].getterName]();l&&l.off&&l.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let i,t=this.tag,l=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");const f="video-js"===this.tag.tagName.toLowerCase();l?i=this.el_=t.parentNode:f||(i=this.el_=super.createEl("div"));const v=jo(t);if(f){for(i=this.el_=t,t=this.tag=qe().createElement("video");i.children.length;)t.appendChild(i.firstChild);Fo(i,"video-js")||bs(i,"video-js"),i.appendChild(t),l=this.playerElIngest_=i,Object.keys(i).forEach(I=>{try{t[I]=i[I]}catch{}})}if(t.setAttribute("tabindex","-1"),v.tabindex="-1",oo&&ae&&(t.setAttribute("role","application"),v.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in v&&delete v.width,"height"in v&&delete v.height,Object.getOwnPropertyNames(v).forEach(function(I){f&&"class"===I||i.setAttribute(I,v[I]),f&&t.setAttribute(I,v[I])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=i.player=this,this.addClass("vjs-paused"),!0!==le().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=sa("vjs-styles-dimensions");const I=Ba(".vjs-styles-defaults"),$=Ba("head");$.insertBefore(this.styleEl_,I?I.nextSibling:$.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const E=t.getElementsByTagName("a");for(let I=0;I<E.length;I++){const $=E.item(I);bs($,"vjs-hidden"),$.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!l&&t.parentNode.insertBefore(i,t),qo(t,i),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i,i}crossOrigin(t){if(typeof t>"u")return this.techGet_("crossOrigin");null===t||"anonymous"===t||"use-credentials"===t?(this.techCall_("setCrossOrigin",t),this.posterImage&&this.posterImage.crossOrigin(t)):$r.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`)}width(t){return this.dimension("width",t)}height(t){return this.dimension("height",t)}dimension(t,i){const l=t+"_";if(void 0===i)return this[l]||0;if(""===i||"auto"===i)return this[l]=void 0,void this.updateStyleEl_();const f=parseFloat(i);isNaN(f)?$r.error(`Improper value "${i}" supplied for for ${t}`):(this[l]=f,this.updateStyleEl_())}fluid(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,Oe(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),((c,t)=>{Oe(c)?t():(c.eventedCallbacks||(c.eventedCallbacks=[]),c.eventedCallbacks.push(t))})(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===le().VIDEOJS_NO_DYNAMIC_STYLE){const I="number"==typeof this.width_?this.width_:this.options_.width,$="number"==typeof this.height_?this.height_:this.options_.height,ce=this.tech_&&this.tech_.el();return void(ce&&(I>=0&&(ce.width=I),$>=0&&(ce.height=$)))}let t,i,l,f;l=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const v=l.split(":"),E=v[1]/v[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/E:this.videoWidth()||300,i=void 0!==this.height_?this.height_:t*E,f=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(f),Pl(this.styleEl_,`\n      .${f} {\n        width: ${t}px;\n        height: ${i}px;\n      }\n\n      .${f}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*E}%;\n      }\n    `)}loadTech_(t,i){this.tech_&&this.unloadTech_();const l=fs(t),f=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==l&&this.tag&&(ri.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=l,this.isReady_=!1;let v=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(v=!1);const E={source:i,autoplay:v,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${f}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ss.names.forEach($=>{const ce=ss[$];E[ce.getterName]=this[ce.privateName]}),Object.assign(E,this.options_[l]),Object.assign(E,this.options_[f]),Object.assign(E,this.options_[t.toLowerCase()]),this.tag&&(E.tag=this.tag),i&&i.src===this.cache_.src&&this.cache_.currentTime>0&&(E.startTime=this.cache_.currentTime);const I=ri.getTech(t);if(!I)throw new Error(`No Tech named '${l}' exists! '${l}' should be registered using videojs.registerTech()'`);this.tech_=new I(E),this.tech_.ready(yn(this,this.handleTechReady_),!0),function(c,t){c.forEach(function(i){const l=t.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(f=>l.addCue(f))}),t.textTracks()}(this.textTracksJson_||[],this.tech_),ru.forEach($=>{this.on(this.tech_,$,ce=>this[`handleTech${fs($)}_`](ce))}),Object.keys(_c).forEach($=>{this.on(this.tech_,$,ce=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${_c[$]}_`].bind(this),event:ce}):this[`handleTech${_c[$]}_`](ce)})}),this.on(this.tech_,"loadstart",$=>this.handleTechLoadStart_($)),this.on(this.tech_,"sourceset",$=>this.handleTechSourceset_($)),this.on(this.tech_,"waiting",$=>this.handleTechWaiting_($)),this.on(this.tech_,"ended",$=>this.handleTechEnded_($)),this.on(this.tech_,"seeking",$=>this.handleTechSeeking_($)),this.on(this.tech_,"play",$=>this.handleTechPlay_($)),this.on(this.tech_,"pause",$=>this.handleTechPause_($)),this.on(this.tech_,"durationchange",$=>this.handleTechDurationChange_($)),this.on(this.tech_,"fullscreenchange",($,ce)=>this.handleTechFullscreenChange_($,ce)),this.on(this.tech_,"fullscreenerror",($,ce)=>this.handleTechFullscreenError_($,ce)),this.on(this.tech_,"enterpictureinpicture",$=>this.handleTechEnterPictureInPicture_($)),this.on(this.tech_,"leavepictureinpicture",$=>this.handleTechLeavePictureInPicture_($)),this.on(this.tech_,"error",$=>this.handleTechError_($)),this.on(this.tech_,"posterchange",$=>this.handleTechPosterChange_($)),this.on(this.tech_,"textdata",$=>this.handleTechTextData_($)),this.on(this.tech_,"ratechange",$=>this.handleTechRateChange_($)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==l||!this.tag)&&qo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ss.names.forEach(t=>{const i=ss[t];this[i.privateName]=this[i.getterName]()}),this.textTracksJson_=function(c){const t=c.$$("track"),i=Array.prototype.map.call(t,f=>f.track);return Array.prototype.map.call(t,function(f){const v=Ya(f.track);return f.src&&(v.src=f.src),v}).concat(Array.prototype.filter.call(c.textTracks(),function(f){return-1===i.indexOf(f)}).map(Ya))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(t){return void 0===t&&$r.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(t){if(!this.tech_||"string"!=typeof t)return;const i=()=>{const f=this.muted();this.muted(!0);const v=()=>{this.muted(f)};this.playTerminatedQueue_.push(v);const E=this.play();if(dl(E))return E.catch(I=>{throw v(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${I||""}`)})};let l;return"any"!==t||this.muted()?l="muted"!==t||this.muted()?this.play():i():(l=this.play(),dl(l)&&(l=l.catch(i))),dl(l)?l.then(()=>{this.trigger({type:"autoplay-success",autoplay:t})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:t})}):void 0}updateSourceCaches_(t=""){let i=t,l="";"string"!=typeof i&&(i=t.src,l=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],i&&!l&&(l=((c,t)=>{if(!t)return"";if(c.cache_.source.src===t&&c.cache_.source.type)return c.cache_.source.type;const i=c.cache_.sources.filter(f=>f.src===t);if(i.length)return i[0].type;const l=c.$$("source");for(let f=0;f<l.length;f++){const v=l[f];if(v.type&&v.src&&v.src===t)return v.type}return ud(t)})(this,i)),this.cache_.source=Ri({},t,{src:i,type:l});const f=this.cache_.sources.filter($=>$.src&&$.src===i),v=[],E=this.$$("source"),I=[];for(let $=0;$<E.length;$++){const ce=jo(E[$]);v.push(ce),ce.src&&ce.src===i&&I.push(ce.src)}I.length&&!f.length?this.cache_.sources=v:f.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=i}handleTechSourceset_(t){if(!this.changingSrc_){let i=v=>this.updateSourceCaches_(v);const l=this.currentSource().src,f=t.src;l&&!/^blob:/.test(l)&&/^blob:/.test(f)&&(!this.lastSource_||this.lastSource_.tech!==f&&this.lastSource_.player!==l)&&(i=()=>{}),i(f),t.src||this.tech_.any(["sourceset","loadstart"],v=>{if("sourceset"===v.type)return;const E=this.techGet("currentSrc");this.lastSource_.tech=E,this.updateSourceCaches_(E)})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})}hasStarted(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(t=>t.callback(t.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const t=this.currentTime(),i=()=>{t!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",i))};this.on("timeupdate",i)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(t){this.controls_&&(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,t):this.paused()?Va(this.play()):this.pause())}handleTechDoubleClick_(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),l=>l.contains(t.target))||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(t){t.cancelable&&t.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(t){const i=t.target.player;if(i&&i!==this)return;const l=this.el();let f=qe()[this.fsApi_.fullscreenElement]===l;!f&&l.matches?f=l.matches(":"+this.fsApi_.fullscreen):!f&&l.msMatchesSelector&&(f=l.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(f)}handleTechFullscreenChange_(t,i){i&&(i.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(i.isFullscreen))}handleTechFullscreenError_(t,i){this.trigger("fullscreenerror",i)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(t){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(t){this.isInPictureInPicture(!1)}handleTechError_(){const t=this.tech_.error();this.error(t)}handleTechTextData_(){let t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(t,i){this.ready(function(){if(t in $a)return function eo(c,t,i,l){return t[i](c.reduce(Uo(i),l))}(this.middleware_,this.tech_,t,i);if(t in Wo)return xf(this.middleware_,this.tech_,t,i);try{this.tech_&&this.tech_[t](i)}catch(l){throw $r(l),l}},!0)}techGet_(t){if(this.tech_&&this.tech_.isReady_){if(t in eu)return function Wu(c,t,i){return c.reduceRight(Uo(i),t[i]())}(this.middleware_,this.tech_,t);if(t in Wo)return xf(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(i){throw void 0===this.tech_[t]?($r(`Video.js: ${t} method not defined for ${this.techName_} playback technology.`,i),i):"TypeError"===i.name?($r(`Video.js: ${t} unavailable on ${this.techName_} playback technology element.`,i),this.tech_.isReady_=!1,i):($r(i),i)}}}play(){return new Promise(t=>{this.play_(t)})}play_(t=Va){this.playCallbacks_.push(t);const i=!(this.changingSrc_||!this.src()&&!this.currentSrc()),l=!(!Jn&&!Zt);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=E=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!i&&l&&this.load());const f=this.techGet_("play");l&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===f?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(f)}runPlayTerminatedQueue_(){const t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(i){i()})}runPlayCallbacks_(t){const i=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],i.forEach(function(l){l(t)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||Ia(0,0)}scrubbing(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(t){return typeof t<"u"?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let t=this.techGet_("buffered");return(!t||!t.length)&&(t=Ia(0,0)),t}bufferedPercent(){return jd(this.buffered(),this.duration())}bufferedEnd(){const t=this.buffered(),i=this.duration();let l=t.end(t.length-1);return l>i&&(l=i),l}volume(t){let i;return void 0!==t?(i=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=i,this.techCall_("setVolume",i),void(i>0&&this.lastVolume_(i))):(i=parseFloat(this.techGet_("volume")),isNaN(i)?1:i)}muted(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)}defaultMuted(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1}lastVolume_(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(t){if(void 0!==t){const i=this.isFullscreen_;return this.isFullscreen_=!!t,this.isFullscreen_!==i&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(t){this.isInPictureInPicture()&&this.exitPictureInPicture();const i=this;return new Promise((l,f)=>{function v(){i.off("fullscreenerror",I),i.off("fullscreenchange",E)}function E(){v(),l()}function I(ce,me){v(),f(me)}i.one("fullscreenchange",E),i.one("fullscreenerror",I);const $=i.requestFullscreenHelper_(t);$&&($.then(v,v),$.then(l,f))})}requestFullscreenHelper_(t){let i;if(this.fsApi_.prefixed||(i=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(i=t)),this.fsApi_.requestFullscreen){const l=this.el_[this.fsApi_.requestFullscreen](i);return l&&l.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),l}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const t=this;return new Promise((i,l)=>{function f(){t.off("fullscreenerror",E),t.off("fullscreenchange",v)}function v(){f(),i()}function E($,ce){f(),l(ce)}t.one("fullscreenchange",v),t.one("fullscreenerror",E);const I=t.exitFullscreenHelper_();I&&(I.then(f,f),I.then(i,l))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const t=qe()[this.fsApi_.exitFullscreen]();return t&&Va(t.then(()=>this.isFullscreen(!1))),t}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=qe().documentElement.style.overflow,Jo(qe(),"keydown",this.boundFullWindowOnEscKey_),qe().documentElement.style.overflow="hidden",bs(qe().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(t){je().isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,gi(qe(),"keydown",this.boundFullWindowOnEscKey_),qe().documentElement.style.overflow=this.docOrigOverflow,ia(qe().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&le().documentPictureInPicture){const t=qe().createElement(this.el().tagName);return t.classList=this.el().classList,t.classList.add("vjs-pip-container"),this.posterImage&&t.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&t.appendChild(this.titleBar.el().cloneNode(!0)),t.appendChild(vr("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),le().documentPictureInPicture.requestWindow({initialAspectRatio:this.videoWidth()/this.videoHeight(),copyStyleSheets:!0}).then(i=>(this.el_.parentNode.insertBefore(t,this.el_),i.document.body.append(this.el_),i.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),i.addEventListener("unload",l=>{const f=l.target.querySelector(".video-js");t.replaceWith(f),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),i))}return"pictureInPictureEnabled"in qe()&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return le().documentPictureInPicture&&le().documentPictureInPicture.window?(le().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in qe()?qe().exitPictureInPicture():void 0}handleKeyDown(t){const{userActions:i}=this.options_;!i||!i.hotkeys||(f=>{const v=f.tagName.toLowerCase();return!!f.isContentEditable||("input"===v?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(f.type):-1!==["textarea"].indexOf(v))})(this.el_.ownerDocument.activeElement)||("function"==typeof i.hotkeys?i.hotkeys.call(this,t):this.handleHotkeys(t))}handleHotkeys(t){const i=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:l=(E=>je().isEventKey(E,"f")),muteKey:f=(E=>je().isEventKey(E,"m")),playPauseKey:v=(E=>je().isEventKey(E,"k")||je().isEventKey(E,"Space"))}=i;if(l.call(this,t)){t.preventDefault(),t.stopPropagation();const E=un.getComponent("FullscreenToggle");!1!==qe()[this.fsApi_.fullscreenEnabled]&&E.prototype.handleClick.call(this,t)}else f.call(this,t)?(t.preventDefault(),t.stopPropagation(),un.getComponent("MuteToggle").prototype.handleClick.call(this,t)):v.call(this,t)&&(t.preventDefault(),t.stopPropagation(),un.getComponent("PlayToggle").prototype.handleClick.call(this,t))}canPlayType(t){let i;for(let l=0,f=this.options_.techOrder;l<f.length;l++){const v=f[l];let E=ri.getTech(v);if(E||(E=un.getComponent(v)),E){if(E.isSupported()&&(i=E.canPlayType(t),i))return i}else $r.error(`The "${v}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(t){const i=this.options_.techOrder.map(I=>[I,ri.getTech(I)]).filter(([I,$])=>$?$.isSupported():($r.error(`The "${I}" tech is undefined. Skipped browser support check for that tech.`),!1)),l=function(I,$,ce){let me;return I.some(ze=>$.some(It=>{if(me=ce(ze,It),me)return!0})),me};let f;const E=([I,$],ce)=>{if($.canPlaySource(ce,this.options_[I.toLowerCase()]))return{source:ce,tech:I}};return f=this.options_.sourceOrder?l(t,i,(I=E,($,ce)=>I(ce,$))):l(i,t,E),f||!1;var I}handleSrc_(t,i){if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const l=U(t);if(l.length){if(this.changingSrc_=!0,i||(this.cache_.sources=l),this.updateSourceCaches_(l[0]),Ja(this,l[0],(f,v)=>{if(this.middleware_=v,i||(this.cache_.sources=l),this.updateSourceCaches_(f),this.src_(f))return l.length>1?this.handleSrc_(l.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());!function kh(c,t){c.forEach(i=>i.setTech&&i.setTech(t))}(v,this.tech_)}),l.length>1){const f=()=>{this.error(null),this.handleSrc_(l.slice(1),!0)},v=()=>{this.off("error",f)};this.one("error",f),this.one("playing",v),this.resetRetryOnError_=()=>{this.off("error",f),this.off("playing",v)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(t){return this.handleSrc_(t,!1)}src_(t){const i=this.selectSource([t]);return!i||(zu(i.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}load(){this.techCall_("load")}reset(){this.paused()?this.doReset_():Va(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Oe(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:t,durationDisplay:i,progressControl:l,remainingTimeDisplay:f}=this.controlBar||{},{seekBar:v}=l||{};t&&t.updateContent(),i&&i.updateContent(),f&&f.updateContent(),v&&(v.update(),v.loadProgressBar&&v.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const t=this.currentSource(),i=[];return 0!==Object.keys(t).length&&i.push(t),this.cache_.sources||i}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")}autoplay(t){if(void 0===t)return this.options_.autoplay||!1;let i;"string"==typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"==typeof t?t:"play"),i=!1):this.options_.autoplay=!!t,i=typeof i>"u"?this.options_.autoplay:i,this.tech_&&this.techCall_("setAutoplay",i)}playsinline(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")}loop(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")}poster(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(t){if(void 0===t)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(t){if(void 0===t)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(t){if(void 0===t)return this.error_||null;if(Tr("beforeerror").forEach(i=>{const l=i(this,t);zo(l)&&!Array.isArray(l)||"string"==typeof l||"number"==typeof l||null===l?t=l:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&4===t.code){const i=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],i),void this.one("loadstart",function(){this.off(["click","touchstart"],i)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Vi(t),this.addClass("vjs-error"),$r.error(`(CODE:${this.error_.code} ${Vi.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Tr("error").forEach(i=>i(this,this.error_))}reportUserActivity(t){this.userActivity_=!0}userActive(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let t,i,l;const f=yn(this,this.reportUserActivity),I=function(me){f(),this.clearInterval(t)};this.on("mousedown",function(){f(),this.clearInterval(t),t=this.setInterval(f,250)}),this.on("mousemove",function(me){(me.screenX!==i||me.screenY!==l)&&(i=me.screenX,l=me.screenY,f())}),this.on("mouseup",I),this.on("mouseleave",I);const $=this.getChild("controlBar");let ce;$&&!Zt&&!Sa&&($.on("mouseenter",function(me){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),$.on("mouseleave",function(me){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",f),this.on("keyup",f),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(ce);const me=this.options_.inactivityTimeout;me<=0||(ce=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},me))},250)}playbackRate(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)}defaultPlaybackRate(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const t=this.children(),i=this.getChild("ControlBar"),l=i&&i.currentHeight();t.forEach(f=>{f!==i&&f.el_&&!f.hasClass("vjs-hidden")&&(f.hide(),this.audioOnlyCache_.hiddenChildren.push(f))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(l),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(t=>t.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(t){if("boolean"!=typeof t||t===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=t,t){const i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),Promise.all(i).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(t){return"boolean"!=typeof t||t===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=t,t?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(t,i,l){if(this.tech_)return this.tech_.addTextTrack(t,i,l)}addRemoteTextTrack(t,i){if(this.tech_)return this.tech_.addRemoteTextTrack(t,i)}removeRemoteTextTrack(t={}){let{track:i}=t;if(i||(i=t),this.tech_)return this.tech_.removeRemoteTextTrack(i)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),Oe(this)&&this.trigger("languagechange"))}languages(){return Ri(Ps.prototype.options_.languages,this.languages_)}toJSON(){const t=Ri(this.options_),i=t.tracks;t.tracks=[];for(let l=0;l<i.length;l++){let f=i[l];f=Ri(f),f.player=void 0,t.tracks[l]=f}return t}createModal(t,i){(i=i||{}).content=t||"";const l=new qu(this,i);return this.addChild(l),l.on("dispose",()=>{this.removeChild(l)}),l.open(),l}updateCurrentBreakpoint_(){if(!this.responsive())return;const t=this.currentBreakpoint(),i=this.currentWidth();for(let l=0;l<Hc.length;l++){const f=Hc[l];if(i<=this.breakpoints_[f]){if(t===f)return;t&&this.removeClass(Gl[t]),this.addClass(Gl[f]),this.breakpoint_=f;break}}}removeCurrentBreakpoint_(){const t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)}breakpoints(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=Object.assign({},bc,t),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(t){return void 0===t?this.responsive_:(t=!!t)!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Gl[this.breakpoint_]||""}loadMedia(t,i){if(!t||"object"!=typeof t)return;this.reset(),this.cache_.media=Ri(t);const{artist:l,artwork:f,description:v,poster:E,src:I,textTracks:$,title:ce}=this.cache_.media;!f&&E&&(this.cache_.media.artwork=[{src:E,type:ud(E)}]),I&&this.src(I),E&&this.poster(E),Array.isArray($)&&$.forEach(me=>this.addRemoteTextTrack(me,!1)),this.titleBar&&this.titleBar.update({title:ce,description:v||l||""}),this.ready(i)}getMedia(){if(!this.cache_.media){const t=this.poster(),f={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),v=>({kind:v.kind,label:v.label,language:v.language,src:v.src}))};return t&&(f.poster=t,f.artwork=[{src:f.poster,type:ud(f.poster)}]),f}return Ri(this.cache_.media)}static getTagSettings(t){const i={sources:[],tracks:[]},l=jo(t),f=l["data-setup"];if(Fo(t,"vjs-fill")&&(l.fill=!0),Fo(t,"vjs-fluid")&&(l.fluid=!0),null!==f){const[v,E]=J()(f||"{}");v&&$r.error(v),Object.assign(l,E)}if(Object.assign(i,l),t.hasChildNodes()){const v=t.childNodes;for(let E=0,I=v.length;E<I;E++){const $=v[E],ce=$.nodeName.toLowerCase();"source"===ce?i.sources.push(jo($)):"track"===ce&&i.tracks.push(jo($))}}return i}debug(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(t){if(void 0===t)return this.cache_.playbackRates;Array.isArray(t)&&t.every(i=>"number"==typeof i)&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))}}ss.names.forEach(function(c){const t=ss[c];Ps.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Ps.prototype.crossorigin=Ps.prototype.crossOrigin,Ps.players={};const Kd=le().navigator;Ps.prototype.options_={techOrder:ri.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Kd&&(Kd.languages&&Kd.languages[0]||Kd.userLanguage||Kd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(c){Ps.prototype[c]=function(){return this.techGet_(c)}}),ru.forEach(function(c){Ps.prototype[`handleTech${fs(c)}_`]=function(){return this.trigger(c)}}),un.registerComponent("Player",Ps);const $h="plugin",vl="activePlugins_",Tc={},S=c=>Tc.hasOwnProperty(c),m=c=>S(c)?Tc[c]:void 0,b=(c,t)=>{c[vl]=c[vl]||{},c[vl][t]=!0},x=(c,t,i)=>{const l=(i?"before":"")+"pluginsetup";c.trigger(l,t),c.trigger(l+":"+t.name,t)},ge=(c,t)=>(t.prototype.name=c,function(...i){x(this,{name:c,plugin:t,instance:null},!0);const l=new t(this,...i);return this[c]=()=>l,x(this,l.getEventHash()),l});let Ze=(()=>{class c{constructor(i){if(this.constructor===c)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=i,this.log||(this.log=this.player.log.createLogger(this.name)),Pt(this),delete this.trigger,Bs(this,this.constructor.defaultState),b(i,this.name),this.dispose=this.dispose.bind(this),i.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(i={}){return i.name=this.name,i.plugin=this.constructor,i.instance=this,i}trigger(i,l={}){return cr(this.eventBusEl_,i,this.getEventHash(l))}handleStateChanged(i){}dispose(){const{name:i,player:l}=this;this.trigger("dispose"),this.off(),l.off("dispose",this.dispose),l[vl][i]=!1,this.player=this.state=null,l[i]=ge(i,Tc[i])}static isBasic(i){const l="string"==typeof i?m(i):i;return"function"==typeof l&&!c.prototype.isPrototypeOf(l.prototype)}static registerPlugin(i,l){if("string"!=typeof i)throw new Error(`Illegal plugin name, "${i}", must be a string, was ${typeof i}.`);if(S(i))$r.warn(`A plugin named "${i}" already exists. You may want to avoid re-registering plugins!`);else if(Ps.prototype.hasOwnProperty(i))throw new Error(`Illegal plugin name, "${i}", cannot share a name with an existing player method!`);if("function"!=typeof l)throw new Error(`Illegal plugin for "${i}", must be a function, was ${typeof l}.`);return Tc[i]=l,i!==$h&&(Ps.prototype[i]=c.isBasic(l)?function(c,t){const i=function(){x(this,{name:c,plugin:t,instance:null},!0);const l=t.apply(this,arguments);return b(this,c),x(this,{name:c,plugin:t,instance:l}),l};return Object.keys(t).forEach(function(l){i[l]=t[l]}),i}(i,l):ge(i,l)),l}static deregisterPlugin(i){if(i===$h)throw new Error("Cannot de-register base plugin.");S(i)&&(delete Tc[i],delete Ps.prototype[i])}static getPlugins(i=Object.keys(Tc)){let l;return i.forEach(f=>{const v=m(f);v&&(l=l||{},l[f]=v)}),l}static getPluginVersion(i){const l=m(i);return l&&l.VERSION||""}}return c.getPlugin=m,c.BASE_PLUGIN_NAME=$h,c})();function mn(c,t,i,l){return function kt(c,t){let i=!1;return function(...l){return i||$r.warn(c),i=!0,t.apply(this,l)}}(`${t} is deprecated and will be removed in ${c}.0; please use ${i} instead.`,l)}Ze.registerPlugin($h,Ze),Ps.prototype.usingPlugin=function(c){return!!this[vl]&&!0===this[vl][c]},Ps.prototype.hasPlugin=function(c){return!!S(c)};const Pn=c=>0===c.indexOf("#")?c.slice(1):c;function gt(c,t,i){let l=gt.getPlayer(c);if(l)return t&&$r.warn(`Player "${c}" is already initialised. Options will not be applied.`),i&&l.ready(i),l;const f="string"==typeof c?Ba("#"+Pn(c)):c;if(!ji(f))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!f.ownerDocument.defaultView||!f.ownerDocument.body.contains(f))&&$r.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(f.parentNode&&f.parentNode.hasAttribute("data-vjs-player")?f.parentNode:f).cloneNode(!0)),Tr("beforesetup").forEach(E=>{const I=E(f,Ri(t));zo(I)&&!Array.isArray(I)?t=Ri(t,I):$r.error("please return an object in beforesetup hooks")});const v=un.getComponent("Player");return l=new v(f,t,i),Tr("setup").forEach(E=>E(l)),l}if(gt.hooks_=ai,gt.hooks=Tr,gt.hook=function(c,t){Tr(c,t)},gt.hookOnce=function(c,t){Tr(c,[].concat(t).map(i=>{const l=(...f)=>(ds(c,l),i(...f));return l}))},gt.removeHook=ds,!0!==le().VIDEOJS_NO_DYNAMIC_STYLE&&hr()){let c=Ba(".vjs-styles-defaults");if(!c){c=sa("vjs-styles-defaults");const t=Ba("head");t&&t.insertBefore(c,t.firstChild),Pl(c,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}ui(1,gt),gt.VERSION="8.3.0",gt.options=Ps.prototype.options_,gt.getPlayers=()=>Ps.players,gt.getPlayer=c=>{const t=Ps.players;let i;if("string"==typeof c){const l=Pn(c),f=t[l];if(f)return f;i=Ba("#"+l)}else i=c;if(ji(i)){const{player:l,playerId:f}=i;if(l||t[f])return l||t[f]}},gt.getAllPlayers=()=>Object.keys(Ps.players).map(c=>Ps.players[c]).filter(Boolean),gt.players=Ps.players,gt.getComponent=un.getComponent,gt.registerComponent=(c,t)=>{ri.isTech(t)&&$r.warn(`The ${c} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),un.registerComponent.call(un,c,t)},gt.getTech=ri.getTech,gt.registerTech=ri.registerTech,gt.use=function Bo(c,t){Us[c]=Us[c]||[],Us[c].push(t)},Object.defineProperty(gt,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(gt.middleware,"TERMINATOR",{value:Iu,writeable:!1,enumerable:!0}),gt.browser=es,gt.obj=ol,gt.mergeOptions=mn(9,"videojs.mergeOptions","videojs.obj.merge",Ri),gt.defineLazyProperty=mn(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Qo),gt.bind=mn(9,"videojs.bind","native Function.prototype.bind",yn),gt.registerPlugin=Ze.registerPlugin,gt.deregisterPlugin=Ze.deregisterPlugin,gt.plugin=(c,t)=>($r.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ze.registerPlugin(c,t)),gt.getPlugins=Ze.getPlugins,gt.getPlugin=Ze.getPlugin,gt.getPluginVersion=Ze.getPluginVersion,gt.addLanguage=function(c,t){return c=(""+c).toLowerCase(),(gt.options.languages=Ri(gt.options.languages,{[c]:t}))[c]},gt.log=$r,gt.createLogger=mo,gt.time=ac,gt.createTimeRange=mn(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Ia),gt.createTimeRanges=mn(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Ia),gt.formatTime=mn(9,"videojs.formatTime","videojs.time.formatTime",Ms),gt.setFormatTime=mn(9,"videojs.setFormatTime","videojs.time.setFormatTime",sc),gt.resetFormatTime=mn(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",oc),gt.parseUrl=mn(9,"videojs.parseUrl","videojs.url.parseUrl",$d),gt.isCrossOrigin=mn(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Do),gt.EventTarget=oe,gt.any=Di,gt.on=Jo,gt.one=ha,gt.off=gi,gt.trigger=cr,gt.xhr=Ee(),gt.TextTrack=Ii,gt.AudioTrack=Xa,gt.VideoTrack=Io,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(c=>{gt[c]=function(){return $r.warn(`videojs.${c}() is deprecated; use videojs.dom.${c}() instead`),nc[c].apply(null,arguments)}}),gt.computedStyle=mn(9,"videojs.computedStyle","videojs.dom.computedStyle",or),gt.dom=nc,gt.fn=D,gt.num=gl,gt.str=Lc,gt.url=Df;class ar{constructor(t){let i=this;return i.id=t.id,i.label=i.id,i.width=t.width,i.height=t.height,i.bitrate=t.bandwidth,i.frameRate=t.frameRate,i.enabled_=t.enabled,Object.defineProperty(i,"enabled",{get:()=>i.enabled_(),set(l){i.enabled_(l)}}),i}}class Os extends gt.EventTarget{constructor(){super();let t=this;return t.levels_=[],t.selectedIndex_=-1,Object.defineProperty(t,"selectedIndex",{get:()=>t.selectedIndex_}),Object.defineProperty(t,"length",{get:()=>t.levels_.length}),t}addQualityLevel(t){let i=this.getQualityLevelById(t.id);if(i)return i;const l=this.levels_.length;return i=new ar(t),""+l in this||Object.defineProperty(this,l,{get(){return this.levels_[l]}}),this.levels_.push(i),this.trigger({qualityLevel:i,type:"addqualitylevel"}),i}removeQualityLevel(t){let i=null;for(let l=0,f=this.length;l<f;l++)if(this[l]===t){i=this.levels_.splice(l,1)[0],this.selectedIndex_===l?this.selectedIndex_=-1:this.selectedIndex_>l&&this.selectedIndex_--;break}return i&&this.trigger({qualityLevel:t,type:"removequalitylevel"}),i}getQualityLevelById(t){for(let i=0,l=this.length;i<l;i++){const f=this[i];if(f.id===t)return f}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Os.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const c in Os.prototype.allowedEvents_)Os.prototype["on"+c]=null;const Ec=function(c){return function(c,t){const i=c.qualityLevels,l=new Os,f=function(){l.dispose(),c.qualityLevels=i,c.off("dispose",f)};return c.on("dispose",f),c.qualityLevels=()=>l,c.qualityLevels.VERSION="3.0.0",l}(this,gt.mergeOptions({},c))};(gt.registerPlugin||gt.plugin)("qualityLevels",Ec),Ec.VERSION="3.0.0";const pa=function(t,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(t)&&(t=le().location&&le().location.href||"");var l="function"==typeof le().URL,f=/^\/\//.test(t),v=!le().location&&!/\/\//i.test(t);if(l?t=new(le().URL)(t,le().location||"http://example.com"):/\/\//i.test(t)||(t=W().buildAbsoluteURL(le().location&&le().location.href||"",t)),l){var E=new URL(i,t);return v?E.href.slice(18):f?E.href.slice(E.protocol.length):E.href}return W().buildAbsoluteURL(t,i)},zl=(c,t)=>t&&t.responseURL&&c!==t.responseURL?t.responseURL:c,aa=c=>gt.log.debug?gt.log.debug.bind(gt,"VHS:",`${c} >`):function(){};function ms(...c){const t=gt.obj||gt;return(t.merge||t.mergeOptions).apply(t,c)}function ua(...c){const t=gt.time||gt;return(t.createTimeRanges||t.createTimeRanges).apply(t,c)}const Mu=1/30,yu=.1,Of=function(c,t){const i=[];let l;if(c&&c.length)for(l=0;l<c.length;l++)t(c.start(l),c.end(l))&&i.push([c.start(l),c.end(l)]);return ua(i)},yl=function(c,t){return Of(c,function(i,l){return i-yu<=t&&l+yu>=t})},Gc=function(c,t){return Of(c,function(i){return i-Mu>=t})},Fy=c=>{const t=[];if(!c||!c.length)return"";for(let i=0;i<c.length;i++)t.push(c.start(i)+" => "+c.end(i));return t.join(", ")},ql=c=>{const t=[];for(let i=0;i<c.length;i++)t.push({start:c.start(i),end:c.end(i)});return t},Hm=function(c){if(c&&c.length&&c.end)return c.end(c.length-1)},_o=function(c,t){let i=0;if(!c||!c.length)return i;for(let l=0;l<c.length;l++){const f=c.start(l),v=c.end(l);if(!(t>v)){if(t>f&&t<=v){i+=v-t;continue}i+=v-f}}return i},Gh=(c,t)=>{if(!t.preload)return t.duration;let i=0;return(t.parts||[]).forEach(function(l){i+=l.duration}),(t.preloadHints||[]).forEach(function(l){"PART"===l.type&&(i+=c.partTargetDuration)}),i},yd=c=>(c.segments||[]).reduce((t,i,l)=>(i.parts?i.parts.forEach(function(f,v){t.push({duration:f.duration,segmentIndex:l,partIndex:v,part:f,segment:i})}):t.push({duration:i.duration,segmentIndex:l,partIndex:null,segment:i,part:null}),t),[]),Rf=c=>{const t=c.segments&&c.segments.length&&c.segments[c.segments.length-1];return t&&t.parts||[]},wc=({preloadSegment:c})=>{if(!c)return;const{parts:t,preloadHints:i}=c;let l=(i||[]).reduce((f,v)=>f+("PART"===v.type?1:0),0);return l+=t&&t.length?t.length:0,l},Gm=(c,t)=>{if(t.endList)return 0;if(c&&c.suggestedPresentationDelay)return c.suggestedPresentationDelay;const i=Rf(t).length>0;return i&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:i&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},zm=function(c,t,i){if(typeof t>"u"&&(t=c.mediaSequence+c.segments.length),t<c.mediaSequence)return 0;const l=function(c,t){let i=0,l=t-c.mediaSequence,f=c.segments[l];if(f){if(typeof f.start<"u")return{result:f.start,precise:!0};if(typeof f.end<"u")return{result:f.end-f.duration,precise:!0}}for(;l--;){if(f=c.segments[l],typeof f.end<"u")return{result:i+f.end,precise:!0};if(i+=Gh(c,f),typeof f.start<"u")return{result:i+f.start,precise:!0}}return{result:i,precise:!1}}(c,t);if(l.precise)return l.result;const f=function(c,t){let l,i=0,f=t-c.mediaSequence;for(;f<c.segments.length;f++){if(l=c.segments[f],typeof l.start<"u")return{result:l.start-i,precise:!0};if(i+=Gh(c,l),typeof l.end<"u")return{result:l.end-i,precise:!0}}return{result:-1,precise:!1}}(c,t);return f.precise?f.result:l.result+i},qh=function(c,t,i){if(!c)return 0;if("number"!=typeof i&&(i=0),typeof t>"u"){if(c.totalDuration)return c.totalDuration;if(!c.endList)return le()[1/0]}return zm(c,t,i)},_d=function({defaultDuration:c,durationList:t,startIndex:i,endIndex:l}){let f=0;if(i>l&&([i,l]=[l,i]),i<0){for(let v=i;v<Math.min(0,l);v++)f+=c;i=0}for(let v=i;v<l;v++)f+=t[v].duration;return f},Ug=function(c,t,i,l){if(!c||!c.segments)return null;if(c.endList)return qh(c);if(null===t)return null;let f=zm(c,c.mediaSequence+c.segments.length,t=t||0);return i&&(f-=l="number"==typeof l?l:Gm(null,c)),Math.max(0,f)},kp=function(c){return c.excludeUntil&&c.excludeUntil>Date.now()},bd=function(c){return c.excludeUntil&&c.excludeUntil===1/0},Mp=function(c){const t=kp(c);return!c.disabled&&!t},Vy=function(c,t){return t.attributes&&t.attributes[c]},Cc=(c,t)=>{if(1===c.playlists.length)return!0;const i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===c.playlists.filter(l=>!!Mp(l)&&(l.attributes.BANDWIDTH||0)<i).length},Yd=(c,t)=>!(!c&&!t||!c&&t||c&&!t||!(c===t||c.id&&t.id&&c.id===t.id||c.resolvedUri&&t.resolvedUri&&c.resolvedUri===t.resolvedUri||c.uri&&t.uri&&c.uri===t.uri)),Hy=function(c,t){const i=c&&c.mediaGroups&&c.mediaGroups.AUDIO||{};let l=!1;for(const f in i){for(const v in i[f])if(l=t(i[f][v]),l)break;if(l)break}return!!l},Wl=c=>{if(!c||!c.playlists||!c.playlists.length)return Hy(c,i=>i.playlists&&i.playlists.length||i.uri);for(let t=0;t<c.playlists.length;t++){const i=c.playlists[t],l=i.attributes&&i.attributes.CODECS;if(!(l&&l.split(",").every(v=>Cr(v))||Hy(c,v=>Yd(i,v))))return!1}return!0};var ka={liveEdgeDelay:Gm,duration:qh,seekable:function(c,t,i){const f=t||0,v=Ug(c,t,!0,i);return null===v?ua():ua(f,v)},getMediaInfoForTime:function({playlist:c,currentTime:t,startingSegmentIndex:i,startingPartIndex:l,startTime:f,exactManifestTimings:v}){let E=t-f;const I=yd(c);let $=0;for(let ce=0;ce<I.length;ce++){const me=I[ce];if(i===me.segmentIndex&&("number"!=typeof l||"number"!=typeof me.partIndex||l===me.partIndex)){$=ce;break}}if(E<0){if($>0)for(let ce=$-1;ce>=0;ce--){const me=I[ce];if(E+=me.duration,v){if(E<0)continue}else if(E+Mu<=0)continue;return{partIndex:me.partIndex,segmentIndex:me.segmentIndex,startTime:f-_d({defaultDuration:c.targetDuration,durationList:I,startIndex:$,endIndex:ce})}}return{partIndex:I[0]&&I[0].partIndex||null,segmentIndex:I[0]&&I[0].segmentIndex||0,startTime:t}}if($<0){for(let ce=$;ce<0;ce++)if(E-=c.targetDuration,E<0)return{partIndex:I[0]&&I[0].partIndex||null,segmentIndex:I[0]&&I[0].segmentIndex||0,startTime:t};$=0}for(let ce=$;ce<I.length;ce++){const me=I[ce];if(E-=me.duration,v){if(E>0)continue}else if(E-Mu>=0)continue;return{partIndex:me.partIndex,segmentIndex:me.segmentIndex,startTime:f+_d({defaultDuration:c.targetDuration,durationList:I,startIndex:$,endIndex:ce})}}return{segmentIndex:I[I.length-1].segmentIndex,partIndex:I[I.length-1].partIndex,startTime:t}},isEnabled:Mp,isDisabled:function(c){return c.disabled},isExcluded:kp,isIncompatible:bd,playlistEnd:Ug,isAes:function(c){for(let t=0;t<c.segments.length;t++)if(c.segments[t].key)return!0;return!1},hasAttribute:Vy,estimateSegmentRequestTime:function(c,t,i,l=0){return Vy("BANDWIDTH",i)?(c*i.attributes.BANDWIDTH-8*l)/t:NaN},isLowestEnabledRendition:Cc,isAudioOnly:Wl,playlistMatch:Yd,segmentDurationWithParts:Gh};const{log:Wm}=gt,Km=(c,t)=>`${c}-${t}`,Gy=(c,t,i)=>`placeholder-uri-${c}-${t}-${i}`,Wh=(c,t)=>{c.mediaGroups&&["AUDIO","SUBTITLES"].forEach(i=>{if(c.mediaGroups[i])for(const l in c.mediaGroups[i])for(const f in c.mediaGroups[i][l])t(c.mediaGroups[i][l][f],i,l,f)})},zy=({playlist:c,uri:t,id:i})=>{c.id=i,c.playlistErrors_=0,t&&(c.uri=t),c.attributes=c.attributes||{}},_u=(c,t,i=Gy)=>{c.uri=t;for(let f=0;f<c.playlists.length;f++)c.playlists[f].uri||(c.playlists[f].uri=`placeholder-uri-${f}`);const l=Wl(c);Wh(c,(f,v,E,I)=>{if(!f.playlists||!f.playlists.length){if(l&&"AUDIO"===v&&!f.uri)for(let $=0;$<c.playlists.length;$++){const ce=c.playlists[$];if(ce.attributes&&ce.attributes.AUDIO&&ce.attributes.AUDIO===E)return}f.playlists=[Bt({},f)]}f.playlists.forEach(function($,ce){const me=i(v,E,I,$),ze=Km(ce,me);$.uri?$.resolvedUri=$.resolvedUri||pa(c.uri,$.uri):($.uri=0===ce?me:ze,$.resolvedUri=$.uri),$.id=$.id||ze,$.attributes=$.attributes||{},c.playlists[$.id]=$,c.playlists[$.uri]=$})}),(c=>{let t=c.playlists.length;for(;t--;){const i=c.playlists[t];zy({playlist:i,id:Km(t,i.uri)}),i.resolvedUri=pa(c.uri,i.uri),c.playlists[i.id]=i,c.playlists[i.uri]=i,i.attributes.BANDWIDTH||Wm.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(c),(c=>{Wh(c,t=>{t.uri&&(t.resolvedUri=pa(c.uri,t.uri))})})(c)},{EventTarget:Sc}=gt,Zm=(c,t)=>{if(!c)return t;const i=ms(c,t);if(c.preloadHints&&!t.preloadHints&&delete i.preloadHints,c.parts&&!t.parts)delete i.parts;else if(c.parts&&t.parts)for(let l=0;l<t.parts.length;l++)c.parts&&c.parts[l]&&(i.parts[l]=ms(c.parts[l],t.parts[l]));return!c.skipped&&t.skipped&&(i.skipped=!1),c.preload&&!t.preload&&(i.preload=!1),i},Ym=(c,t)=>{!c.resolvedUri&&c.uri&&(c.resolvedUri=pa(t,c.uri)),c.key&&!c.key.resolvedUri&&(c.key.resolvedUri=pa(t,c.key.uri)),c.map&&!c.map.resolvedUri&&(c.map.resolvedUri=pa(t,c.map.uri)),c.map&&c.map.key&&!c.map.key.resolvedUri&&(c.map.key.resolvedUri=pa(t,c.map.key.uri)),c.parts&&c.parts.length&&c.parts.forEach(i=>{i.resolvedUri||(i.resolvedUri=pa(t,i.uri))}),c.preloadHints&&c.preloadHints.length&&c.preloadHints.forEach(i=>{i.resolvedUri||(i.resolvedUri=pa(t,i.uri))})},Wy=function(c){const t=c.segments||[],i=c.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(let l=0;l<i.preloadHints.length;l++)if("MAP"===i.preloadHints[l].type)return t;i.duration=c.targetDuration,i.preload=!0,t.push(i)}return t},Ky=(c,t)=>c===t||c.segments&&t.segments&&c.segments.length===t.segments.length&&c.endList===t.endList&&c.mediaSequence===t.mediaSequence&&c.preloadSegment===t.preloadSegment,Pp=(c,t,i=Ky)=>{const l=ms(c,{}),f=l.playlists[t.id];if(!f||i(f,t))return null;t.segments=Wy(t);const v=ms(f,t);if(v.preloadSegment&&!t.preloadSegment&&delete v.preloadSegment,f.segments){if(t.skip){t.segments=t.segments||[];for(let E=0;E<t.skip.skippedSegments;E++)t.segments.unshift({skipped:!0})}v.segments=((c,t,i)=>{const l=c.slice(),f=t.slice();i=i||0;const v=[];let E;for(let I=0;I<f.length;I++){const $=l[I+i],ce=f[I];$?(E=$.map||E,v.push(Zm($,ce))):(E&&!ce.map&&(ce.map=E),v.push(ce))}return v})(f.segments,t.segments,t.mediaSequence-f.mediaSequence)}v.segments.forEach(E=>{Ym(E,v.resolvedUri)});for(let E=0;E<l.playlists.length;E++)l.playlists[E].id===t.id&&(l.playlists[E]=v);return l.playlists[t.id]=v,l.playlists[t.uri]=v,Wh(c,(E,I,$,ce)=>{if(E.playlists)for(let me=0;me<E.playlists.length;me++)t.id===E.playlists[me].id&&(E.playlists[me]=v)}),l},Ff=(c,t)=>{const i=c.segments||[],l=i[i.length-1],f=l&&l.parts&&l.parts[l.parts.length-1],v=f&&f.duration||l&&l.duration;return t&&v?1e3*v:500*(c.partTargetDuration||c.targetDuration||10)};class jf extends Sc{constructor(t,i,l={}){if(super(),!t)throw new Error("A non-empty playlist URL or object is required");this.logger_=aa("PlaylistLoader");const{withCredentials:f=!1}=l;this.src=t,this.vhs_=i,this.withCredentials=f;const v=i.options_;this.customTagParsers=v&&v.customTagParsers||[],this.customTagMappers=v&&v.customTagMappers||[],this.llhls=v&&v.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const t=this.media();let i=pa(this.main.uri,t.uri);this.llhls&&(i=((c,t)=>{if(t.endList||!t.serverControl)return c;const i={};if(t.serverControl.canBlockReload){const{preloadSegment:l}=t;let f=t.mediaSequence+t.segments.length;if(l){const v=l.parts||[],E=wc(t)-1;E>-1&&E!==v.length-1&&(i._HLS_part=E),(E>-1||v.length)&&f--}i._HLS_msn=f}if(t.serverControl&&t.serverControl.canSkipUntil&&(i._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){const l=new(le().URL)(c);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(f){i.hasOwnProperty(f)&&l.searchParams.set(f,i[f])}),c=l.toString()}return c})(i,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:i,withCredentials:this.withCredentials},(l,f)=>{if(this.request){if(l)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(t,i,l){const{uri:f,id:v}=i;this.request=null,l&&(this.state=l),this.error={playlist:this.main.playlists[v],status:t.status,message:`HLS playlist request error at URL: ${f}.`,responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")}parseManifest_({url:t,manifestString:i}){return(({onwarn:c,oninfo:t,manifestString:i,customTagParsers:l=[],customTagMappers:f=[],llhls:v})=>{const E=new Kt;c&&E.on("warn",c),t&&E.on("info",t),l.forEach(ce=>E.addParser(ce)),f.forEach(ce=>E.addTagMapper(ce)),E.push(i),E.end();const I=E.manifest;if(v||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(ce){I.hasOwnProperty(ce)&&delete I[ce]}),I.segments&&I.segments.forEach(function(ce){["parts","preloadHints"].forEach(function(me){ce.hasOwnProperty(me)&&delete ce[me]})})),!I.targetDuration){let ce=10;I.segments&&I.segments.length&&(ce=I.segments.reduce((me,ze)=>Math.max(me,ze.duration),0)),c&&c(`manifest has no targetDuration defaulting to ${ce}`),I.targetDuration=ce}const $=Rf(I);if($.length&&!I.partTargetDuration){const ce=$.reduce((me,ze)=>Math.max(me,ze.duration),0);c&&(c(`manifest has no partTargetDuration defaulting to ${ce}`),Wm.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),I.partTargetDuration=ce}return I})({onwarn:({message:l})=>this.logger_(`m3u8-parser warn for ${t}: ${l}`),oninfo:({message:l})=>this.logger_(`m3u8-parser info for ${t}: ${l}`),manifestString:i,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:t,playlistObject:i,url:l,id:f}){this.request=null,this.state="HAVE_METADATA";const v=i||this.parseManifest_({url:l,manifestString:t});v.lastRequest=Date.now(),zy({playlist:v,uri:l,id:f});const E=Pp(this.main,v);this.targetDuration=v.partTargetDuration||v.targetDuration,this.pendingMedia_=null,E?(this.main=E,this.media_=this.main.playlists[f]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Ff(this.media(),!!E)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),le().clearTimeout(this.mediaUpdateTimeout),le().clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t,i){if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.main.playlists[t]}if(le().clearTimeout(this.finalRenditionTimeout),i){const E=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=le().setTimeout(this.media.bind(this,t,!1),E))}const l=this.state,f=!this.media_||t.id!==this.media_.id,v=this.main.playlists[t.id];if(v&&v.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(f&&(this.trigger("mediachanging"),this.trigger("HAVE_MAIN_MANIFEST"===l?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(Ff(t,!0)),f){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},(E,I)=>{if(this.request){if(t.lastRequest=Date.now(),t.resolvedUri=zl(t.resolvedUri,I),E)return this.playlistRequestError(this.request,t,l);this.haveMetadata({playlistString:I.responseText,url:t.uri,id:t.id}),this.trigger("HAVE_MAIN_MANIFEST"===l?"loadedmetadata":"mediachange")}})}}pause(){this.mediaUpdateTimeout&&(le().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(t){this.mediaUpdateTimeout&&(le().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const i=this.media();if(t){const l=i?(i.partTargetDuration||i.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=le().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},l)}else this.started?this.trigger(i&&!i.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}updateMediaUpdateTimeout_(t){this.mediaUpdateTimeout&&(le().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=le().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(t)},t))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=le().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(t,i)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=zl(this.src,i);const l=this.parseManifest_({manifestString:i.responseText,url:this.src});this.setupInitialPlaylist(l)})}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(t){if(this.state="HAVE_MAIN_MANIFEST",t.playlists)return this.main=t,_u(this.main,this.srcUri()),t.playlists.forEach(l=>{l.segments=Wy(l),l.segments.forEach(f=>{Ym(f,l.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const i=this.srcUri()||le().location.href;this.main=((c,t)=>{const i=Km(0,t),l={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:le().location.href,resolvedUri:le().location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]};return l.playlists[i]=l.playlists[0],l.playlists[t]=l.playlists[0],l})(0,i),this.haveMetadata({playlistObject:t,url:i,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:Qm}=gt,Qd=function(c,t,i,l){const f="arraybuffer"===c.responseType?c.response:c.responseText;!t&&f&&(c.responseTime=Date.now(),c.roundTripTime=c.responseTime-c.requestTime,c.bytesReceived=f.byteLength||f.length,c.bandwidth||(c.bandwidth=Math.floor(c.bytesReceived/c.roundTripTime*8*1e3))),i.headers&&(c.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(c.timedout=!0),!t&&!c.aborted&&200!==i.statusCode&&206!==i.statusCode&&0!==i.statusCode&&(t=new Error("XHR Failed with a response of: "+(c&&(f||c.responseText)))),l(t,c)},Xd=function(){const c=function t(i,l){i=ms({timeout:45e3},i);const f=t.beforeRequest||gt.Vhs.xhr.beforeRequest;if(f&&"function"==typeof f){const $=f(i);$&&(i=$)}const E=(!0===gt.Vhs.xhr.original?Qm:gt.Vhs.xhr)(i,function($,ce){return Qd(E,$,ce,l)}),I=E.abort;return E.abort=function(){return E.aborted=!0,I.apply(E,arguments)},E.uri=i.uri,E.requestTime=Date.now(),E};return c.original=!0,c},Hg=function(c){const t={};return c.byterange&&(t.Range=function(c){let t;const i=c.offset;return t="bigint"==typeof c.offset||"bigint"==typeof c.length?le().BigInt(c.offset)+le().BigInt(c.length)-le().BigInt(1):c.offset+c.length-1,"bytes="+i+"-"+t}(c.byterange)),t},p_=function(c,t){return c.start(t)+"-"+c.end(t)},Zy=function(c,t){const i=c.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},Gg=function(c){return c>=32&&c<126?String.fromCharCode(c):"."},Kh=function(c){const t={};return Object.keys(c).forEach(i=>{const l=c[i];t[i]=Ws(l)?{bytes:l.buffer,byteOffset:l.byteOffset,byteLength:l.byteLength}:l}),t},Kl=function(c){const t=c.byterange||{length:1/0,offset:0};return[t.length,t.offset,c.resolvedUri].join(",")},Td=function(c){return c.resolvedUri},Zo=c=>{const t=Array.prototype.slice.call(c),i=16;let f,v,l="";for(let E=0;E<t.length/i;E++)f=t.slice(E*i,E*i+i).map(Zy).join(""),v=t.slice(E*i,E*i+i).map(Gg).join(""),l+=f+" "+v+"\n";return l};var Xm=Object.freeze({__proto__:null,createTransferableMessage:Kh,initSegmentId:Kl,segmentKeyId:Td,hexDump:Zo,tagDump:({bytes:c})=>Zo(c),textRanges:c=>{let i,t="";for(i=0;i<c.length;i++)t+=p_(c,i)+" ";return t}});const Jd=({programTime:c,playlist:t,retryCount:i=2,seekTo:l,pauseAfterSeek:f=!0,tech:v,callback:E})=>{if(!E)throw new Error("seekToProgramTime: callback must be provided");if(typeof c>"u"||!t||!l)return E({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!v.hasStarted_)return E({message:"player must be playing a live stream to start buffering"});if(!(c=>{if(!c.segments||0===c.segments.length)return!1;for(let t=0;t<c.segments.length;t++)if(!c.segments[t].dateTimeObject)return!1;return!0})(t))return E({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const I=((c,t)=>{let i;try{i=new Date(c)}catch{return null}if(!t||!t.segments||0===t.segments.length)return null;let l=t.segments[0];if(i<l.dateTimeObject)return null;for(let $=0;$<t.segments.length-1&&(l=t.segments[$],!(i<t.segments[$+1].dateTimeObject));$++);const f=t.segments[t.segments.length-1],v=f.dateTimeObject,E=f.videoTimingInfo?(c=>c.transmuxedPresentationEnd-c.transmuxedPresentationStart-c.transmuxerPrependedSeconds)(f.videoTimingInfo):f.duration+.25*f.duration;return i>new Date(v.getTime()+1e3*E)?null:(i>v&&(l=f),{segment:l,estimatedStart:l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationStart:ka.duration(t,t.mediaSequence+t.segments.indexOf(l)),type:l.videoTimingInfo?"accurate":"estimate"})})(c,t);if(!I)return E({message:`${c} was not found in the stream`});const $=I.segment,ce=((c,t)=>{let i,l;try{i=new Date(c),l=new Date(t)}catch{}const f=i.getTime();return(l.getTime()-f)/1e3})($.dateTimeObject,c);if("estimate"===I.type)return 0===i?E({message:`${c} is not buffered yet. Try again`}):(l(I.estimatedStart+ce),void v.one("seeked",()=>{Jd({programTime:c,playlist:t,retryCount:i-1,seekTo:l,pauseAfterSeek:f,tech:v,callback:E})}));const me=$.start+ce;v.one("seeked",()=>E(null,v.currentTime())),f&&v.pause(),l(me)},ts=(c,t)=>{if(4===c.readyState)return t()},{EventTarget:iv}=gt,Zh=function(c,t){if(!Ky(c,t)||c.sidx&&t.sidx&&(c.sidx.offset!==t.sidx.offset||c.sidx.length!==t.sidx.length))return!1;if(!c.sidx&&t.sidx||c.sidx&&!t.sidx||c.segments&&!t.segments||!c.segments&&t.segments)return!1;if(!c.segments&&!t.segments)return!0;for(let i=0;i<c.segments.length;i++){const l=c.segments[i],f=t.segments[i];if(l.uri!==f.uri)return!1;if(!l.byterange&&!f.byterange)continue;const v=l.byterange,E=f.byterange;if(v&&!E||!v&&E||v.offset!==E.offset||v.length!==E.length)return!1}return!0},Np=(c,t,i,l)=>`placeholder-uri-${c}-${t}-${l.attributes.NAME||i}`,iu=(c,t)=>(!c.map&&!t.map||!(!c.map||!t.map||c.map.byterange.offset!==t.map.byterange.offset||c.map.byterange.length!==t.map.byterange.length))&&c.uri===t.uri&&c.byterange.offset===t.byterange.offset&&c.byterange.length===t.byterange.length,Lp=(c,t)=>{const i={};for(const l in c){const v=c[l].sidx;if(v){const E=oi(v);if(!t[E])break;iu(t[E].sidxInfo,v)&&(i[E]=t[E])}}return i};class eh extends iv{constructor(t,i,l={},f){super(),this.mainPlaylistLoader_=f||this,f||(this.isMain_=!0);const{withCredentials:v=!1}=l;if(this.vhs_=i,this.withCredentials=v,!t)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=aa("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=t,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=t}requestErrored_(t,i,l){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:i.status,message:"DASH request error at URL: "+i.uri,response:i.response,code:2}:t,l&&(this.state=l),this.trigger("error"),!0):void 0)}addSidxSegments_(t,i,l){const f=t.sidx&&oi(t.sidx);if(!t.sidx||!f||this.mainPlaylistLoader_.sidxMapping_[f])return void(this.mediaRequest_=le().setTimeout(()=>l(!1),0));const v=zl(t.sidx.resolvedUri),E=(I,$)=>{if(this.requestErrored_(I,$,i))return;const ce=this.mainPlaylistLoader_.sidxMapping_;let me;try{me=Na()(On($.response).subarray(8))}catch(ze){return void this.requestErrored_(ze,$,i)}return ce[f]={sidxInfo:t.sidx,sidx:me},rs(t,me,t.sidx.resolvedUri),l(!0)};this.request=((c,t,i)=>{let f,l=[],v=!1;const E=function(me,ze,It,xt){return ze.abort(),v=!0,i(me,ze,It,xt)},I=function(me,ze){if(v)return;if(me)return E(me,ze,"",l);const It=ze.responseText.substring(l&&l.byteLength||0,ze.responseText.length);if(l=function(){for(var t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];if((i=i.filter(function(I){return I&&(I.byteLength||I.length)&&"string"!=typeof I})).length<=1)return On(i[0]);var f=i.reduce(function(I,$,ce){return I+($.byteLength||$.length)},0),v=new Uint8Array(f),E=0;return i.forEach(function(I){I=On(I),v.set(I,E),E+=I.byteLength}),v}(l,Ar(It,!0)),f=f||Gs(l),l.length<10||f&&l.length<f+2)return ts(ze,()=>E(me,ze,"",l));const xt=lr(l);return"ts"===xt&&l.length<188||!xt&&l.length<376?ts(ze,()=>E(me,ze,"",l)):E(null,ze,xt,l)},ce=t({uri:c,beforeSend(me){me.overrideMimeType("text/plain; charset=x-user-defined"),me.addEventListener("progress",function({}){return Qd(me,null,{statusCode:me.status},I)})}},function(me,ze){return Qd(ce,me,ze,I)});return ce})(v,this.vhs_.xhr,(I,$,ce,me)=>{if(I)return E(I,$);if(!ce||"mp4"!==ce)return E({status:$.status,message:`Unsupported ${ce||"unknown"} container type for sidx segment at URL: ${v}`,response:"",playlist:t,internal:!0,playlistExclusionDuration:1/0,code:2},$);const{offset:ze,length:It}=t.sidx.byterange;if(me.length>=It+ze)return E(I,{response:me.subarray(ze,ze+It),status:$.status,uri:$.uri});this.request=this.vhs_.xhr({uri:v,responseType:"arraybuffer",headers:Hg({byterange:t.sidx.byterange})},E)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},le().clearTimeout(this.minimumUpdatePeriodTimeout_),le().clearTimeout(this.mediaRequest_),le().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t){if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const i=this.state;if("string"==typeof t){if(!this.mainPlaylistLoader_.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.mainPlaylistLoader_.main.playlists[t]}const l=!this.media_||t.id!==this.media_.id;if(l&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(l&&(this.trigger("mediachanging"),this.trigger("mediachange")));l&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,i,f=>{this.haveMetadata({startingState:i,playlist:t})}))}haveMetadata({startingState:t,playlist:i}){this.state="HAVE_METADATA",this.loadedPlaylists_[i.id]=i,this.mediaRequest_=null,this.refreshMedia_(i.id),this.trigger("HAVE_MAIN_MANIFEST"===t?"loadedmetadata":"mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),le().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(le().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(t){le().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const i=this.media();if(t){const l=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=le().setTimeout(()=>this.load(),l)}else this.started?i&&!i.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_((t,i)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])}):this.mediaRequest_=le().setTimeout(()=>this.haveMain_(),0)}requestMain_(t){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(i,l)=>{if(this.requestErrored_(i,l))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const f=l.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=l.responseText,this.mainLoaded_=l.responseHeaders&&l.responseHeaders.date?Date.parse(l.responseHeaders.date):Date.now(),this.mainPlaylistLoader_.srcUrl=zl(this.mainPlaylistLoader_.srcUrl,l),f?(this.handleMain_(),void this.syncClientServerClock_(()=>t(l,f))):t(l,f)})}syncClientServerClock_(t){const i=(c=>(c=>{const t=Dn(c,"UTCTiming")[0];if(!t)return null;const i=Xr(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i})(ks(c)))(this.mainPlaylistLoader_.mainXml_);return null===i?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t()):"DIRECT"===i.method?(this.mainPlaylistLoader_.clientOffset_=i.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:pa(this.mainPlaylistLoader_.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},(l,f)=>{if(!this.request)return;if(l)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t();let v;v="HEAD"===i.method?f.responseHeaders&&f.responseHeaders.date?Date.parse(f.responseHeaders.date):this.mainLoaded_:Date.parse(f.responseText),this.mainPlaylistLoader_.clientOffset_=v-Date.now(),t()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const t=this.mainPlaylistLoader_.main;let i=(({mainXml:c,srcUrl:t,clientOffset:i,sidxMapping:l,previousManifest:f})=>{const v=((c,t={})=>{const i=((c,t={})=>{const{manifestUri:i="",NOW:l=Date.now(),clientOffset:f=0}=t,v=Dn(c,"Period");if(!v.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const E=Dn(c,"Location"),I=Xr(c),$=br([i],Dn(c,"BaseURL"));I.type=I.type||"static",I.sourceDuration=I.mediaPresentationDuration||0,I.NOW=l,I.clientOffset=f,E.length&&(I.locations=E.map(Sr));const ce=[];return v.forEach((me,ze)=>{const It=Xr(me),xt=ce[ze-1];It.start=(({attributes:c,priorPeriodAttributes:t,mpdType:i})=>"number"==typeof c.start?c.start:t&&"number"==typeof t.start&&"number"==typeof t.duration?t.start+t.duration:t||"static"!==i?null:0)({attributes:It,priorPeriodAttributes:xt?xt.attributes:null,mpdType:I.type}),ce.push({node:me,attributes:It})}),{locations:I.locations,representationInfo:kr(ce.map(po(I,$))),eventStream:kr(ce.map(Yo))}})(ks(c),t),l=(c=>c.map(rn))(i.representationInfo);return us({dashPlaylists:l,locations:i.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:i.eventStream})})(c,{manifestUri:t,clientOffset:i,sidxMapping:l,previousManifest:f});return _u(v,t,Np),v})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:t});t&&(i=((c,t,i)=>{let l=!0,f=ms(c,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let v=0;v<t.playlists.length;v++){const E=t.playlists[v];if(E.sidx){const $=oi(E.sidx);i&&i[$]&&i[$].sidx&&rs(E,i[$].sidx,E.sidx.resolvedUri)}const I=Pp(f,E,Zh);I&&(f=I,l=!1)}return Wh(t,(v,E,I,$)=>{if(v.playlists&&v.playlists.length){const ce=v.playlists[0].id,me=Pp(f,v.playlists[0],Zh);me&&(f=me,$ in f.mediaGroups[E][I]||(f.mediaGroups[E][I][$]=v),f.mediaGroups[E][I][$].playlists[0]=f.playlists[ce],l=!1)}}),((c,t)=>{Wh(c,(i,l,f,v)=>{v in t.mediaGroups[l][f]||delete c.mediaGroups[l][f][v]})})(f,t),t.minimumUpdatePeriod!==c.minimumUpdatePeriod&&(l=!1),l?null:f})(t,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||t;const l=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return l&&l!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=l),(!t||i&&i.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!i}updateMinimumUpdatePeriodTimeout_(){const t=this.mainPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(le().clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);let i=t.main&&t.main.minimumUpdatePeriod;0===i&&(t.media()?i=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!=typeof i||i<=0?i<0&&this.logger_(`found invalid minimumUpdatePeriod of ${i}, not setting a timeout`):this.createMUPTimeout_(i)}createMUPTimeout_(t){const i=this.mainPlaylistLoader_;i.minimumUpdatePeriodTimeout_=le().setTimeout(()=>{i.minimumUpdatePeriodTimeout_=null,i.trigger("minimumUpdatePeriod"),i.createMUPTimeout_(t)},t)}refreshXml_(){this.requestMain_((t,i)=>{i&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((c,t)=>{let l=Lp(c.playlists,t);return Wh(c,(f,v,E,I)=>{f.playlists&&f.playlists.length&&(l=ms(l,Lp(f.playlists,t)))}),l})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,l=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(t){if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const i=this.mainPlaylistLoader_.main.playlists,l=!this.media_||this.media_!==i[t];if(l?this.media_=i[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const f=()=>{this.media().endList||(this.mediaUpdateTimeout=le().setTimeout(()=>{this.trigger("mediaupdatetimeout"),f()},Ff(this.media(),!!l)))};f()}this.trigger("loadedplaylist")}}var Ma={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const th=function(c){return c.on=c.addEventListener,c.off=c.removeEventListener,c},Ju=function(c){return function(){const t=function(c){try{return URL.createObjectURL(new Blob([c],{type:"application/javascript"}))}catch{const i=new BlobBuilder;return i.append(c),URL.createObjectURL(i.getBlob())}}(c),i=th(new Worker(t));i.objURL=t;const l=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(t),l.call(this)},i}},Xy=function(c){return`var browserWorkerPolyFill = ${th.toString()};\nbrowserWorkerPolyFill(self);\n`+c},Ed=function(c){return c.toString().replace(/^function.+?{/,"").slice(0,-1)},Fp=Xy(Ed(function(){var c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=function(){this.init=function(){var w={};this.on=function(M,F){w[M]||(w[M]=[]),w[M]=w[M].concat(F)},this.off=function(M,F){var L;return!!w[M]&&(L=w[M].indexOf(F),w[M]=w[M].slice(),w[M].splice(L,1),L>-1)},this.trigger=function(M){var F,L,q,re;if(F=w[M])if(2===arguments.length)for(q=F.length,L=0;L<q;++L)F[L].call(this,arguments[1]);else{for(re=[],L=arguments.length,L=1;L<arguments.length;++L)re.push(arguments[L]);for(q=F.length,L=0;L<q;++L)F[L].apply(this,re)}},this.dispose=function(){w={}}}};t.prototype.pipe=function(w){return this.on("data",function(M){w.push(M)}),this.on("done",function(M){w.flush(M)}),this.on("partialdone",function(M){w.partialFlush(M)}),this.on("endedtimeline",function(M){w.endTimeline(M)}),this.on("reset",function(M){w.reset(M)}),w},t.prototype.push=function(w){this.trigger("data",w)},t.prototype.flush=function(w){this.trigger("done",w)},t.prototype.partialFlush=function(w){this.trigger("partialdone",w)},t.prototype.endTimeline=function(w){this.trigger("endedtimeline",w)},t.prototype.reset=function(w){this.trigger("reset",w)};var I,$,ce,me,ze,It,xt,it,Gt,en,an,Qt,Sn,fn,Ht,Gn,Dr,mi,Hi,Qi,ea,xo,pr,Vs,ou,Ru,tl,El,Nu,hi,wl,Cl,Sl,pm,uo,Pa,w,M,i=t,l=Math.pow(2,32),v={getUint64:function(w){var F,M=new DataView(w.buffer,w.byteOffset,w.byteLength);return M.getBigUint64?(F=M.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(F):F:M.getUint32(0)*l+M.getUint32(4)},MAX_UINT32:l},E=v.MAX_UINT32;(function(){var w;if(pr={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(w in pr)pr.hasOwnProperty(w)&&(pr[w]=[w.charCodeAt(0),w.charCodeAt(1),w.charCodeAt(2),w.charCodeAt(3)]);Vs=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Ru=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),ou=new Uint8Array([0,0,0,1]),tl=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),El=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Nu={video:tl,audio:El},Cl=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),wl=new Uint8Array([0,0,0,0,0,0,0,0]),Sl=new Uint8Array([0,0,0,0,0,0,0,0]),pm=Sl,uo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Pa=Sl,hi=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),I=function(w){var L,q,M=[],F=0;for(L=1;L<arguments.length;L++)M.push(arguments[L]);for(L=M.length;L--;)F+=M[L].byteLength;for(q=new Uint8Array(F+8),new DataView(q.buffer,q.byteOffset,q.byteLength).setUint32(0,q.byteLength),q.set(w,4),L=0,F=8;L<M.length;L++)q.set(M[L],F),F+=M[L].byteLength;return q},$=function(){return I(pr.dinf,I(pr.dref,Cl))},ce=function(w){return I(pr.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,w.audioobjecttype<<3|w.samplingfrequencyindex>>>1,w.samplingfrequencyindex<<7|w.channelcount<<3,6,1,2]))},me=function(){return I(pr.ftyp,Vs,ou,Vs,Ru)},Gn=function(w){return I(pr.hdlr,Nu[w])},ze=function(w){return I(pr.mdat,w)},Ht=function(w){var M=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,w.duration>>>24&255,w.duration>>>16&255,w.duration>>>8&255,255&w.duration,85,196,0,0]);return w.samplerate&&(M[12]=w.samplerate>>>24&255,M[13]=w.samplerate>>>16&255,M[14]=w.samplerate>>>8&255,M[15]=255&w.samplerate),I(pr.mdhd,M)},fn=function(w){return I(pr.mdia,Ht(w),Gn(w.type),xt(w))},It=function(w){return I(pr.mfhd,new Uint8Array([0,0,0,0,(4278190080&w)>>24,(16711680&w)>>16,(65280&w)>>8,255&w]))},xt=function(w){return I(pr.minf,"video"===w.type?I(pr.vmhd,hi):I(pr.smhd,wl),$(),mi(w))},it=function(w,M){for(var F=[],L=M.length;L--;)F[L]=Qi(M[L]);return I.apply(null,[pr.moof,It(w)].concat(F))},Gt=function(w){for(var M=w.length,F=[];M--;)F[M]=Qt(w[M]);return I.apply(null,[pr.moov,an(4294967295)].concat(F).concat(en(w)))},en=function(w){for(var M=w.length,F=[];M--;)F[M]=ea(w[M]);return I.apply(null,[pr.mvex].concat(F))},an=function(w){var M=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&w)>>24,(16711680&w)>>16,(65280&w)>>8,255&w,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return I(pr.mvhd,M)},Dr=function(w){var L,q,M=w.samples||[],F=new Uint8Array(4+M.length);for(q=0;q<M.length;q++)F[q+4]=(L=M[q].flags).dependsOn<<4|L.isDependedOn<<2|L.hasRedundancy;return I(pr.sdtp,F)},mi=function(w){return I(pr.stbl,Hi(w),I(pr.stts,Pa),I(pr.stsc,pm),I(pr.stsz,uo),I(pr.stco,Sl))},Hi=function(F){return I(pr.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===F.type?w(F):M(F))},w=function(F){var He,Je,L=F.sps||[],q=F.pps||[],re=[],Be=[];for(He=0;He<L.length;He++)re.push((65280&L[He].byteLength)>>>8),re.push(255&L[He].byteLength),re=re.concat(Array.prototype.slice.call(L[He]));for(He=0;He<q.length;He++)Be.push((65280&q[He].byteLength)>>>8),Be.push(255&q[He].byteLength),Be=Be.concat(Array.prototype.slice.call(q[He]));if(Je=[pr.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&F.width)>>8,255&F.width,(65280&F.height)>>8,255&F.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),I(pr.avcC,new Uint8Array([1,F.profileIdc,F.profileCompatibility,F.levelIdc,255].concat([L.length],re,[q.length],Be))),I(pr.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],F.sarRatio){var lt=F.sarRatio[0],At=F.sarRatio[1];Je.push(I(pr.pasp,new Uint8Array([(4278190080&lt)>>24,(16711680&lt)>>16,(65280&lt)>>8,255&lt,(4278190080&At)>>24,(16711680&At)>>16,(65280&At)>>8,255&At])))}return I.apply(null,Je)},M=function(F){return I(pr.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&F.channelcount)>>8,255&F.channelcount,(65280&F.samplesize)>>8,255&F.samplesize,0,0,0,0,(65280&F.samplerate)>>8,255&F.samplerate,0,0]),ce(F))},Sn=function(w){var M=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&w.id)>>24,(16711680&w.id)>>16,(65280&w.id)>>8,255&w.id,0,0,0,0,(4278190080&w.duration)>>24,(16711680&w.duration)>>16,(65280&w.duration)>>8,255&w.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&w.width)>>8,255&w.width,0,0,(65280&w.height)>>8,255&w.height,0,0]);return I(pr.tkhd,M)},Qi=function(w){var M,F,L,q,Be,He;return M=I(pr.tfhd,new Uint8Array([0,0,0,58,(4278190080&w.id)>>24,(16711680&w.id)>>16,(65280&w.id)>>8,255&w.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Be=Math.floor(w.baseMediaDecodeTime/E),He=Math.floor(w.baseMediaDecodeTime%E),F=I(pr.tfdt,new Uint8Array([1,0,0,0,Be>>>24&255,Be>>>16&255,Be>>>8&255,255&Be,He>>>24&255,He>>>16&255,He>>>8&255,255&He])),"audio"===w.type?(L=xo(w,92),I(pr.traf,M,F,L)):(q=Dr(w),L=xo(w,q.length+92),I(pr.traf,M,F,L,q))},Qt=function(w){return w.duration=w.duration||4294967295,I(pr.trak,Sn(w),fn(w))},ea=function(w){var M=new Uint8Array([0,0,0,0,(4278190080&w.id)>>24,(16711680&w.id)>>16,(65280&w.id)>>8,255&w.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==w.type&&(M[M.length-1]=0),I(pr.trex,M)},function(){var w,M,F;F=function(L,q){var re=0,Be=0,He=0,Je=0;return L.length&&(void 0!==L[0].duration&&(re=1),void 0!==L[0].size&&(Be=2),void 0!==L[0].flags&&(He=4),void 0!==L[0].compositionTimeOffset&&(Je=8)),[0,0,re|Be|He|Je,1,(4278190080&L.length)>>>24,(16711680&L.length)>>>16,(65280&L.length)>>>8,255&L.length,(4278190080&q)>>>24,(16711680&q)>>>16,(65280&q)>>>8,255&q]},M=function(L,q){var re,Be,He,Je,lt,At;for(He=F(Je=L.samples||[],q+=20+16*Je.length),(Be=new Uint8Array(He.length+16*Je.length)).set(He),re=He.length,At=0;At<Je.length;At++)Be[re++]=(4278190080&(lt=Je[At]).duration)>>>24,Be[re++]=(16711680&lt.duration)>>>16,Be[re++]=(65280&lt.duration)>>>8,Be[re++]=255&lt.duration,Be[re++]=(4278190080&lt.size)>>>24,Be[re++]=(16711680&lt.size)>>>16,Be[re++]=(65280&lt.size)>>>8,Be[re++]=255&lt.size,Be[re++]=lt.flags.isLeading<<2|lt.flags.dependsOn,Be[re++]=lt.flags.isDependedOn<<6|lt.flags.hasRedundancy<<4|lt.flags.paddingValue<<1|lt.flags.isNonSyncSample,Be[re++]=61440&lt.flags.degradationPriority,Be[re++]=15&lt.flags.degradationPriority,Be[re++]=(4278190080&lt.compositionTimeOffset)>>>24,Be[re++]=(16711680&lt.compositionTimeOffset)>>>16,Be[re++]=(65280&lt.compositionTimeOffset)>>>8,Be[re++]=255&lt.compositionTimeOffset;return I(pr.trun,Be)},w=function(L,q){var re,Be,He,Je,lt,At;for(He=F(Je=L.samples||[],q+=20+8*Je.length),(re=new Uint8Array(He.length+8*Je.length)).set(He),Be=He.length,At=0;At<Je.length;At++)re[Be++]=(4278190080&(lt=Je[At]).duration)>>>24,re[Be++]=(16711680&lt.duration)>>>16,re[Be++]=(65280&lt.duration)>>>8,re[Be++]=255&lt.duration,re[Be++]=(4278190080&lt.size)>>>24,re[Be++]=(16711680&lt.size)>>>16,re[Be++]=(65280&lt.size)>>>8,re[Be++]=255&lt.size;return I(pr.trun,re)},xo=function(L,q){return"audio"===L.type?w(L,q):M(L,q)}}();var uy,ug,df,sp,op,O0,ap,ly,xc={ftyp:me,mdat:ze,moof:it,moov:Gt,initSegment:function(w){var L,M=me(),F=Gt(w);return(L=new Uint8Array(M.byteLength+F.byteLength)).set(M),L.set(F,M.byteLength),L}},ag=function(w,M){var F={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return F.dataOffset=M,F.compositionTimeOffset=w.pts-w.dts,F.duration=w.duration,F.size=4*w.length,F.size+=w.byteLength,w.keyFrame&&(F.flags.dependsOn=2,F.flags.isNonSyncSample=0),F},Ao={groupNalsIntoFrames:function(w){var M,F,L=[],q=[];for(q.byteLength=0,q.nalCount=0,q.duration=0,L.byteLength=0,M=0;M<w.length;M++)"access_unit_delimiter_rbsp"===(F=w[M]).nalUnitType?(L.length&&(L.duration=F.dts-L.dts,q.byteLength+=L.byteLength,q.nalCount+=L.length,q.duration+=L.duration,q.push(L)),(L=[F]).byteLength=F.data.byteLength,L.pts=F.pts,L.dts=F.dts):("slice_layer_without_partitioning_rbsp_idr"===F.nalUnitType&&(L.keyFrame=!0),L.duration=F.dts-L.dts,L.byteLength+=F.data.byteLength,L.push(F));return q.length&&(!L.duration||L.duration<=0)&&(L.duration=q[q.length-1].duration),q.byteLength+=L.byteLength,q.nalCount+=L.length,q.duration+=L.duration,q.push(L),q},groupFramesIntoGops:function(w){var M,F,L=[],q=[];for(L.byteLength=0,L.nalCount=0,L.duration=0,L.pts=w[0].pts,L.dts=w[0].dts,q.byteLength=0,q.nalCount=0,q.duration=0,q.pts=w[0].pts,q.dts=w[0].dts,M=0;M<w.length;M++)(F=w[M]).keyFrame?(L.length&&(q.push(L),q.byteLength+=L.byteLength,q.nalCount+=L.nalCount,q.duration+=L.duration),(L=[F]).nalCount=F.length,L.byteLength=F.byteLength,L.pts=F.pts,L.dts=F.dts,L.duration=F.duration):(L.duration+=F.duration,L.nalCount+=F.length,L.byteLength+=F.byteLength,L.push(F));return q.length&&L.duration<=0&&(L.duration=q[q.length-1].duration),q.byteLength+=L.byteLength,q.nalCount+=L.nalCount,q.duration+=L.duration,q.push(L),q},extendFirstKeyFrame:function(w){var M;return!w[0][0].keyFrame&&w.length>1&&(M=w.shift(),w.byteLength-=M.byteLength,w.nalCount-=M.nalCount,w[0][0].dts=M.dts,w[0][0].pts=M.pts,w[0][0].duration+=M.duration),w},generateSampleTable:function(w,M){var F,L,q,re,He=M||0,Je=[];for(F=0;F<w.length;F++)for(re=w[F],L=0;L<re.length;L++)He+=(q=ag(re[L],He)).size,Je.push(q);return Je},concatenateNalData:function(w){var M,F,L,q,re,Be,He=0,sn=new Uint8Array(w.byteLength+4*w.nalCount),nr=new DataView(sn.buffer);for(M=0;M<w.length;M++)for(q=w[M],F=0;F<q.length;F++)for(re=q[F],L=0;L<re.length;L++)nr.setUint32(He,(Be=re[L]).data.byteLength),sn.set(Be.data,He+=4),He+=Be.data.byteLength;return sn},generateSampleTableForFrame:function(w,M){var F,q=[];return F=ag(w,M||0),q.push(F),q},concatenateNalDataForFrame:function(w){var M,F,L=0,He=new Uint8Array(w.byteLength+4*w.length),Je=new DataView(He.buffer);for(M=0;M<w.length;M++)Je.setUint32(L,(F=w[M]).data.byteLength),He.set(F.data,L+=4),L+=F.data.byteLength;return He}},cf=[33,16,5,32,164,27],k_=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ii=function(w){for(var M=[];w--;)M.push(0);return M};ug=function(w){return 9e4*w},df=function(w,M){return w*M},sp=function(w){return w/9e4},op=function(w,M){return w/M},O0=function(w,M){return ug(op(w,M))},ap=function(w,M){return df(sp(w),M)},ly=function(w,M,F){return sp(F?w:w-M)};var bo={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:ug,secondsToAudioTs:df,videoTsToSeconds:sp,audioTsToSeconds:op,audioTsToVideoTs:O0,videoTsToAudioTs:ap,metadataTsToSeconds:ly},mm=bo,vm={prefixWithSilence:function(w,M,F,L){var q,lt,At,sn,re=0,Be=0,He=0,Je=0;if(M.length&&(q=mm.audioTsToVideoTs(w.baseMediaDecodeTime,w.samplerate),re=Math.ceil(mm.ONE_SECOND_IN_TS/(w.samplerate/1024)),F&&L&&(Be=q-Math.max(F,L),Je=(He=Math.floor(Be/re))*re),!(He<1||Je>mm.ONE_SECOND_IN_TS/2))){for((lt=function(){if(!uy){var w={96e3:[cf,[227,64],ii(154),[56]],88200:[cf,[231],ii(170),[56]],64e3:[cf,[248,192],ii(240),[56]],48e3:[cf,[255,192],ii(268),[55,148,128],ii(54),[112]],44100:[cf,[255,192],ii(268),[55,163,128],ii(84),[112]],32e3:[cf,[255,192],ii(268),[55,234],ii(226),[112]],24e3:[cf,[255,192],ii(268),[55,255,128],ii(268),[111,112],ii(126),[224]],16e3:[cf,[255,192],ii(268),[55,255,128],ii(268),[111,255],ii(269),[223,108],ii(195),[1,192]],12e3:[k_,ii(268),[3,127,248],ii(268),[6,255,240],ii(268),[13,255,224],ii(268),[27,253,128],ii(259),[56]],11025:[k_,ii(268),[3,127,248],ii(268),[6,255,240],ii(268),[13,255,224],ii(268),[27,255,192],ii(268),[55,175,128],ii(108),[112]],8e3:[k_,ii(268),[3,121,16],ii(47),[7]]};uy=function(w){return Object.keys(w).reduce(function(M,F){return M[F]=new Uint8Array(w[F].reduce(function(L,q){return L.concat(q)},[])),M},{})}(w)}return uy}()[w.samplerate])||(lt=M[0].data),At=0;At<He;At++)M.splice(0,0,{data:lt,dts:(sn=M[0]).dts-re,pts:sn.pts-re});return w.baseMediaDecodeTime-=Math.floor(mm.videoTsToAudioTs(Je,w.samplerate)),Je}},trimAdtsFramesByEarliestDts:function(w,M,F){return M.minSegmentDts>=F?w:(M.minSegmentDts=1/0,w.filter(function(L){return L.dts>=F&&(M.minSegmentDts=Math.min(M.minSegmentDts,L.dts),M.minSegmentPts=M.minSegmentDts,!0)}))},generateSampleTable:function(w){var M,L=[];for(M=0;M<w.length;M++)L.push({size:w[M].data.byteLength,duration:1024});return L},concatenateFrameData:function(w){var M,F,L=0,q=new Uint8Array(function(w){var M,L=0;for(M=0;M<w.length;M++)L+=w[M].data.byteLength;return L}(w));for(M=0;M<w.length;M++)q.set((F=w[M]).data,L),L+=F.data.byteLength;return q}},fb=bo.ONE_SECOND_IN_TS,O_={clearDtsInfo:function(w){delete w.minSegmentDts,delete w.maxSegmentDts,delete w.minSegmentPts,delete w.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(w,M){var F,q=w.minSegmentDts;return M||(q-=w.timelineStartInfo.dts),F=w.timelineStartInfo.baseMediaDecodeTime,F+=q,F=Math.max(0,F),"audio"===w.type&&(F*=w.samplerate/fb,F=Math.floor(F)),F},collectDtsInfo:function(w,M){"number"==typeof M.pts&&(void 0===w.timelineStartInfo.pts&&(w.timelineStartInfo.pts=M.pts),w.minSegmentPts=void 0===w.minSegmentPts?M.pts:Math.min(w.minSegmentPts,M.pts),w.maxSegmentPts=void 0===w.maxSegmentPts?M.pts:Math.max(w.maxSegmentPts,M.pts)),"number"==typeof M.dts&&(void 0===w.timelineStartInfo.dts&&(w.timelineStartInfo.dts=M.dts),w.minSegmentDts=void 0===w.minSegmentDts?M.dts:Math.min(w.minSegmentDts,M.dts),w.maxSegmentDts=void 0===w.maxSegmentDts?M.dts:Math.max(w.maxSegmentDts,M.dts))}},F0={parseSei:function(w){for(var M=0,F={payloadType:-1,payloadSize:0},L=0,q=0;M<w.byteLength&&128!==w[M];){for(;255===w[M];)L+=255,M++;for(L+=w[M++];255===w[M];)q+=255,M++;if(q+=w[M++],!F.payload&&4===L){if("GA94"===String.fromCharCode(w[M+3],w[M+4],w[M+5],w[M+6])){F.payloadType=L,F.payloadSize=q,F.payload=w.subarray(M,M+q);break}F.payload=void 0}M+=q,L=0,q=0}return F},parseUserData:function(w){return 181!==w.payload[0]||49!=(w.payload[1]<<8|w.payload[2])||"GA94"!==String.fromCharCode(w.payload[3],w.payload[4],w.payload[5],w.payload[6])||3!==w.payload[7]?null:w.payload.subarray(8,w.payload.length-1)},parseCaptionPackets:function(w,M){var L,q,re,Be,F=[];if(!(64&M[0]))return F;for(q=31&M[0],L=0;L<q;L++)Be={type:3&M[2+(re=3*L)],pts:w},4&M[re+2]&&(Be.ccData=M[re+3]<<8|M[re+4],F.push(Be));return F},discardEmulationPreventionBytes:function(w){for(var q,re,M=w.byteLength,F=[],L=1;L<M-2;)0===w[L]&&0===w[L+1]&&3===w[L+2]?(F.push(L+2),L+=2):L++;if(0===F.length)return w;q=M-F.length,re=new Uint8Array(q);var Be=0;for(L=0;L<q;Be++,L++)Be===F[0]&&(Be++,F.shift()),re[L]=w[Be];return re},USER_DATA_REGISTERED_ITU_T_T35:4},dy=i,lp=F0,au=function(w){w=w||{},au.prototype.init.call(this),this.parse708captions_="boolean"!=typeof w.parse708captions||w.parse708captions,this.captionPackets_=[],this.ccStreams_=[new lo(0,0),new lo(0,1),new lo(1,0),new lo(1,1)],this.parse708captions_&&(this.cc708Stream_=new Es({captionServices:w.captionServices})),this.reset(),this.ccStreams_.forEach(function(M){M.on("data",this.trigger.bind(this,"data")),M.on("partialdone",this.trigger.bind(this,"partialdone")),M.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};au.prototype=new dy,au.prototype.push=function(w){var M,F,L;if("sei_rbsp"===w.nalUnitType&&(M=lp.parseSei(w.escapedRBSP)).payload&&M.payloadType===lp.USER_DATA_REGISTERED_ITU_T_T35&&(F=lp.parseUserData(M))){if(w.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(w.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));L=lp.parseCaptionPackets(w.pts,F),this.captionPackets_=this.captionPackets_.concat(L),this.latestDts_!==w.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=w.dts}},au.prototype.flushCCStreams=function(w){this.ccStreams_.forEach(function(M){return"flush"===w?M.flush():M.partialFlush()},this)},au.prototype.flushStream=function(w){this.captionPackets_.length?(this.captionPackets_.forEach(function(M,F){M.presortIndex=F}),this.captionPackets_.sort(function(M,F){return M.pts===F.pts?M.presortIndex-F.presortIndex:M.pts-F.pts}),this.captionPackets_.forEach(function(M){M.type<2?this.dispatchCea608Packet(M):this.dispatchCea708Packet(M)},this),this.captionPackets_.length=0,this.flushCCStreams(w)):this.flushCCStreams(w)},au.prototype.flush=function(){return this.flushStream("flush")},au.prototype.partialFlush=function(){return this.flushStream("partialFlush")},au.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(w){w.reset()})},au.prototype.dispatchCea608Packet=function(w){this.setsTextOrXDSActive(w)?this.activeCea608Channel_[w.type]=null:this.setsChannel1Active(w)?this.activeCea608Channel_[w.type]=0:this.setsChannel2Active(w)&&(this.activeCea608Channel_[w.type]=1),null!==this.activeCea608Channel_[w.type]&&this.ccStreams_[(w.type<<1)+this.activeCea608Channel_[w.type]].push(w)},au.prototype.setsChannel1Active=function(w){return 4096==(30720&w.ccData)},au.prototype.setsChannel2Active=function(w){return 6144==(30720&w.ccData)},au.prototype.setsTextOrXDSActive=function(w){return 256==(28928&w.ccData)||4138==(30974&w.ccData)||6186==(30974&w.ccData)},au.prototype.dispatchCea708Packet=function(w){this.parse708captions_&&this.cc708Stream_.push(w)};var bm={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},cg=function(w){return 32<=w&&w<=127||160<=w&&w<=255},Dl=function(w){this.windowNum=w,this.reset()};Dl.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Dl.prototype.getText=function(){return this.rows.join("\n")},Dl.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Dl.prototype.newLine=function(w){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(w),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Dl.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Dl.prototype.addText=function(w){this.rows[this.rowIdx]+=w},Dl.prototype.backspace=function(){if(!this.isEmpty()){var w=this.rows[this.rowIdx];this.rows[this.rowIdx]=w.substr(0,w.length-1)}};var Md=function(w,M,F){this.serviceNum=w,this.text="",this.currentWindow=new Dl(-1),this.windows=[],this.stream=F,"string"==typeof M&&this.createTextDecoder(M)};Md.prototype.init=function(w,M){this.startPts=w;for(var F=0;F<8;F++)this.windows[F]=new Dl(F),"function"==typeof M&&(this.windows[F].beforeRowOverflow=M)},Md.prototype.setCurrentWindow=function(w){this.currentWindow=this.windows[w]},Md.prototype.createTextDecoder=function(w){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(w)}catch(M){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+w+" encoding. "+M})}};var Es=function(w){w=w||{},Es.prototype.init.call(this);var q,M=this,F=w.captionServices||{},L={};Object.keys(F).forEach(re=>{q=F[re],/^SERVICE/.test(re)&&(L[re]=q.encoding)}),this.serviceEncodings=L,this.current708Packet=null,this.services={},this.push=function(re){3===re.type?(M.new708Packet(),M.add708Bytes(re)):(null===M.current708Packet&&M.new708Packet(),M.add708Bytes(re))}};Es.prototype=new dy,Es.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Es.prototype.add708Bytes=function(w){var M=w.ccData,F=M>>>8,L=255&M;this.current708Packet.ptsVals.push(w.pts),this.current708Packet.data.push(F),this.current708Packet.data.push(L)},Es.prototype.push708Packet=function(){var w=this.current708Packet,M=w.data,F=null,L=null,q=0,re=M[q++];for(w.seq=re>>6,w.sizeCode=63&re;q<M.length;q++)L=31&(re=M[q++]),7==(F=re>>5)&&L>0&&(F=re=M[q++]),this.pushServiceBlock(F,q,L),L>0&&(q+=L-1)},Es.prototype.pushServiceBlock=function(w,M,F){var L,q=M,re=this.current708Packet.data,Be=this.services[w];for(Be||(Be=this.initService(w,q));q<M+F&&q<re.length;q++)cg(L=re[q])?q=this.handleText(q,Be):24===L?q=this.multiByteCharacter(q,Be):16===L?q=this.extendedCommands(q,Be):128<=L&&L<=135?q=this.setCurrentWindow(q,Be):152<=L&&L<=159?q=this.defineWindow(q,Be):136===L?q=this.clearWindows(q,Be):140===L?q=this.deleteWindows(q,Be):137===L?q=this.displayWindows(q,Be):138===L?q=this.hideWindows(q,Be):139===L?q=this.toggleWindows(q,Be):151===L?q=this.setWindowAttributes(q,Be):144===L?q=this.setPenAttributes(q,Be):145===L?q=this.setPenColor(q,Be):146===L?q=this.setPenLocation(q,Be):143===L?Be=this.reset(q,Be):8===L?Be.currentWindow.backspace():12===L?Be.currentWindow.clearText():13===L?Be.currentWindow.pendingNewLine=!0:14===L?Be.currentWindow.clearText():141===L&&q++},Es.prototype.extendedCommands=function(w,M){var L=this.current708Packet.data[++w];return cg(L)&&(w=this.handleText(w,M,{isExtended:!0})),w},Es.prototype.getPts=function(w){return this.current708Packet.ptsVals[Math.floor(w/2)]},Es.prototype.initService=function(w,M){var L,q,F=this;return(L="SERVICE"+w)in this.serviceEncodings&&(q=this.serviceEncodings[L]),this.services[w]=new Md(w,q,F),this.services[w].init(this.getPts(M),function(re){F.flushDisplayed(re,F.services[w])}),this.services[w]},Es.prototype.handleText=function(w,M,F){var At,sn,L=F&&F.isExtended,re=this.current708Packet.data,Be=L?4096:0,He=re[w],lt=M.currentWindow;return M.textDecoder_&&!L?(F&&F.isMultiByte?(sn=[He,re[w+1]],w++):sn=[He],At=M.textDecoder_.decode(new Uint8Array(sn))):At=function(w){var M=bm[w]||w;return 4096&w&&w===M?"":String.fromCharCode(M)}(Be|He),lt.pendingNewLine&&!lt.isEmpty()&&lt.newLine(this.getPts(w)),lt.pendingNewLine=!1,lt.addText(At),w},Es.prototype.multiByteCharacter=function(w,M){var F=this.current708Packet.data,q=F[w+2];return cg(F[w+1])&&cg(q)&&(w=this.handleText(++w,M,{isMultiByte:!0})),w},Es.prototype.setCurrentWindow=function(w,M){return M.setCurrentWindow(7&this.current708Packet.data[w]),w},Es.prototype.defineWindow=function(w,M){var F=this.current708Packet.data,L=F[w];M.setCurrentWindow(7&L);var re=M.currentWindow;return L=F[++w],re.visible=(32&L)>>5,re.rowLock=(16&L)>>4,re.columnLock=(8&L)>>3,re.priority=7&L,L=F[++w],re.relativePositioning=(128&L)>>7,re.anchorVertical=127&L,L=F[++w],re.anchorHorizontal=L,L=F[++w],re.anchorPoint=(240&L)>>4,re.rowCount=15&L,L=F[++w],re.columnCount=63&L,L=F[++w],re.windowStyle=(56&L)>>3,re.penStyle=7&L,re.virtualRowCount=re.rowCount+1,w},Es.prototype.setWindowAttributes=function(w,M){var F=this.current708Packet.data,L=F[w],q=M.currentWindow.winAttr;return L=F[++w],q.fillOpacity=(192&L)>>6,q.fillRed=(48&L)>>4,q.fillGreen=(12&L)>>2,q.fillBlue=3&L,L=F[++w],q.borderType=(192&L)>>6,q.borderRed=(48&L)>>4,q.borderGreen=(12&L)>>2,q.borderBlue=3&L,L=F[++w],q.borderType+=(128&L)>>5,q.wordWrap=(64&L)>>6,q.printDirection=(48&L)>>4,q.scrollDirection=(12&L)>>2,q.justify=3&L,L=F[++w],q.effectSpeed=(240&L)>>4,q.effectDirection=(12&L)>>2,q.displayEffect=3&L,w},Es.prototype.flushDisplayed=function(w,M){for(var F=[],L=0;L<8;L++)M.windows[L].visible&&!M.windows[L].isEmpty()&&F.push(M.windows[L].getText());M.endPts=w,M.text=F.join("\n\n"),this.pushCaption(M),M.startPts=w},Es.prototype.pushCaption=function(w){""!==w.text&&(this.trigger("data",{startPts:w.startPts,endPts:w.endPts,text:w.text,stream:"cc708_"+w.serviceNum}),w.text="",w.startPts=w.endPts)},Es.prototype.displayWindows=function(w,M){var L=this.current708Packet.data[++w],q=this.getPts(w);this.flushDisplayed(q,M);for(var re=0;re<8;re++)L&1<<re&&(M.windows[re].visible=1);return w},Es.prototype.hideWindows=function(w,M){var L=this.current708Packet.data[++w],q=this.getPts(w);this.flushDisplayed(q,M);for(var re=0;re<8;re++)L&1<<re&&(M.windows[re].visible=0);return w},Es.prototype.toggleWindows=function(w,M){var L=this.current708Packet.data[++w],q=this.getPts(w);this.flushDisplayed(q,M);for(var re=0;re<8;re++)L&1<<re&&(M.windows[re].visible^=1);return w},Es.prototype.clearWindows=function(w,M){var L=this.current708Packet.data[++w],q=this.getPts(w);this.flushDisplayed(q,M);for(var re=0;re<8;re++)L&1<<re&&M.windows[re].clearText();return w},Es.prototype.deleteWindows=function(w,M){var L=this.current708Packet.data[++w],q=this.getPts(w);this.flushDisplayed(q,M);for(var re=0;re<8;re++)L&1<<re&&M.windows[re].reset();return w},Es.prototype.setPenAttributes=function(w,M){var F=this.current708Packet.data,L=F[w],q=M.currentWindow.penAttr;return L=F[++w],q.textTag=(240&L)>>4,q.offset=(12&L)>>2,q.penSize=3&L,L=F[++w],q.italics=(128&L)>>7,q.underline=(64&L)>>6,q.edgeType=(56&L)>>3,q.fontStyle=7&L,w},Es.prototype.setPenColor=function(w,M){var F=this.current708Packet.data,L=F[w],q=M.currentWindow.penColor;return L=F[++w],q.fgOpacity=(192&L)>>6,q.fgRed=(48&L)>>4,q.fgGreen=(12&L)>>2,q.fgBlue=3&L,L=F[++w],q.bgOpacity=(192&L)>>6,q.bgRed=(48&L)>>4,q.bgGreen=(12&L)>>2,q.bgBlue=3&L,L=F[++w],q.edgeRed=(48&L)>>4,q.edgeGreen=(12&L)>>2,q.edgeBlue=3&L,w},Es.prototype.setPenLocation=function(w,M){var F=this.current708Packet.data,L=F[w],q=M.currentWindow.penLoc;return M.currentWindow.pendingNewLine=!0,L=F[++w],q.row=15&L,L=F[++w],q.column=63&L,w},Es.prototype.reset=function(w,M){var F=this.getPts(w);return this.flushDisplayed(F,M),this.initService(M.serviceNum,w)};var j0={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ff=function(w){return null===w?"":(w=j0[w]||w,String.fromCharCode(w))},B0=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],nl=function(){for(var w=[],M=15;M--;)w.push("");return w},lo=function(w,M){lo.prototype.init.call(this),this.field_=w||0,this.dataChannel_=M||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(F){var L,q,re,Be,He;if((L=32639&F.ccData)!==this.lastControlCode_){if(4096==(61440&L)?this.lastControlCode_=L:L!==this.PADDING_&&(this.lastControlCode_=null),re=L>>>8,Be=255&L,L!==this.PADDING_)if(L===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(L===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(F.pts),this.flushDisplayed(F.pts),q=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=q,this.startPts_=F.pts;else if(L===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(F.pts);else if(L===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(F.pts);else if(L===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(F.pts);else if(L===this.CARRIAGE_RETURN_)this.clearFormatting(F.pts),this.flushDisplayed(F.pts),this.shiftRowsUp_(),this.startPts_=F.pts;else if(L===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(L===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(F.pts),this.displayed_=nl();else if(L===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=nl();else if(L===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(F.pts),this.displayed_=nl()),this.mode_="paintOn",this.startPts_=F.pts;else if(this.isSpecialCharacter(re,Be))He=ff((re=(3&re)<<8)|Be),this[this.mode_](F.pts,He),this.column_++;else if(this.isExtCharacter(re,Be))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),He=ff((re=(3&re)<<8)|Be),this[this.mode_](F.pts,He),this.column_++;else if(this.isMidRowCode(re,Be))this.clearFormatting(F.pts),this[this.mode_](F.pts," "),this.column_++,14==(14&Be)&&this.addFormatting(F.pts,["i"]),1==(1&Be)&&this.addFormatting(F.pts,["u"]);else if(this.isOffsetControlCode(re,Be))this.column_+=3&Be;else if(this.isPAC(re,Be)){var Je=B0.indexOf(7968&L);"rollUp"===this.mode_&&(Je-this.rollUpRows_+1<0&&(Je=this.rollUpRows_-1),this.setRollUp(F.pts,Je)),Je!==this.row_&&(this.clearFormatting(F.pts),this.row_=Je),1&Be&&-1===this.formatting_.indexOf("u")&&this.addFormatting(F.pts,["u"]),16==(16&L)&&(this.column_=4*((14&L)>>1)),this.isColorPAC(Be)&&14==(14&Be)&&this.addFormatting(F.pts,["i"])}else this.isNormalChar(re)&&(0===Be&&(Be=null),He=ff(re),He+=ff(Be),this[this.mode_](F.pts,He),this.column_+=He.length)}else this.lastControlCode_=null}};lo.prototype=new dy,lo.prototype.flushDisplayed=function(w){var M=this.displayed_.map(function(F,L){try{return F.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+L+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");M.length&&this.trigger("data",{startPts:this.startPts_,endPts:w,text:M,stream:this.name_})},lo.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=nl(),this.nonDisplayed_=nl(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},lo.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},lo.prototype.isSpecialCharacter=function(w,M){return w===this.EXT_&&M>=48&&M<=63},lo.prototype.isExtCharacter=function(w,M){return(w===this.EXT_+1||w===this.EXT_+2)&&M>=32&&M<=63},lo.prototype.isMidRowCode=function(w,M){return w===this.EXT_&&M>=32&&M<=47},lo.prototype.isOffsetControlCode=function(w,M){return w===this.OFFSET_&&M>=33&&M<=35},lo.prototype.isPAC=function(w,M){return w>=this.BASE_&&w<this.BASE_+8&&M>=64&&M<=127},lo.prototype.isColorPAC=function(w){return w>=64&&w<=79||w>=96&&w<=127},lo.prototype.isNormalChar=function(w){return w>=32&&w<=127},lo.prototype.setRollUp=function(w,M){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(w),this.nonDisplayed_=nl(),this.displayed_=nl()),void 0!==M&&M!==this.row_)for(var F=0;F<this.rollUpRows_;F++)this.displayed_[M-F]=this.displayed_[this.row_-F],this.displayed_[this.row_-F]="";void 0===M&&(M=this.row_),this.topRow_=M-this.rollUpRows_+1},lo.prototype.addFormatting=function(w,M){this.formatting_=this.formatting_.concat(M);var F=M.reduce(function(L,q){return L+"<"+q+">"},"");this[this.mode_](w,F)},lo.prototype.clearFormatting=function(w){if(this.formatting_.length){var M=this.formatting_.reverse().reduce(function(F,L){return F+"</"+L+">"},"");this.formatting_=[],this[this.mode_](w,M)}},lo.prototype.popOn=function(w,M){var F=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=F+=M},lo.prototype.rollUp=function(w,M){var F=this.displayed_[this.row_];this.displayed_[this.row_]=F+=M},lo.prototype.shiftRowsUp_=function(){var w;for(w=0;w<this.topRow_;w++)this.displayed_[w]="";for(w=this.row_+1;w<15;w++)this.displayed_[w]="";for(w=this.topRow_;w<this.row_;w++)this.displayed_[w]=this.displayed_[w+1];this.displayed_[this.row_]=""},lo.prototype.paintOn=function(w,M){var F=this.displayed_[this.row_];this.displayed_[this.row_]=F+=M};var cp={CaptionStream:au,Cea608Stream:lo,Cea708Stream:Es},dp={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Tm=function(w,M){var F=1;for(w>M&&(F=-1);Math.abs(M-w)>4294967296;)w+=8589934592*F;return w},ed=function(w){var M,F;ed.prototype.init.call(this),this.type_=w||"shared",this.push=function(L){"shared"!==this.type_&&L.type!==this.type_||(void 0===F&&(F=L.dts),L.dts=Tm(L.dts,F),L.pts=Tm(L.pts,F),M=L.dts,this.trigger("data",L))},this.flush=function(){F=M,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){F=void 0,M=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};ed.prototype=new i;var gp,U0={TimestampRolloverStream:ed,handleRollover:Tm},hg=(w,M,F)=>{if(!w)return-1;for(var L=F;L<w.length;L++)if(w[L]===M)return L;return-1},fy=function(w,M,F){var L,q="";for(L=M;L<F;L++)q+="%"+("00"+w[L].toString(16)).slice(-2);return q},fg=function(w,M,F){return decodeURIComponent(fy(w,M,F))},Od=function(w,M,F){return unescape(fy(w,M,F))},hp=function(w){return w[0]<<21|w[1]<<14|w[2]<<7|w[3]},fp={APIC:function(w){var F,L,M=1;3===w.data[0]&&!((F=hg(w.data,0,M))<0)&&(w.mimeType=Od(w.data,M,F),w.pictureType=w.data[M=F+1],M++,!((L=hg(w.data,0,M))<0)&&(w.description=fg(w.data,M,L),M=L+1,"--\x3e"===w.mimeType?w.url=Od(w.data,M,w.data.length):w.pictureData=w.data.subarray(M,w.data.length)))},"T*":function(w){3===w.data[0]&&(w.value=fg(w.data,1,w.data.length).replace(/\0*$/,""),w.values=w.value.split("\0"))},TXXX:function(w){var M;3===w.data[0]&&-1!==(M=hg(w.data,0,1))&&(w.description=fg(w.data,1,M),w.value=fg(w.data,M+1,w.data.length).replace(/\0*$/,""),w.data=w.value)},"W*":function(w){w.url=Od(w.data,0,w.data.length).replace(/\0.*$/,"")},WXXX:function(w){var M;3===w.data[0]&&-1!==(M=hg(w.data,0,1))&&(w.description=fg(w.data,1,M),w.url=Od(w.data,M+1,w.data.length).replace(/\0.*$/,""))},PRIV:function(w){var M;for(M=0;M<w.data.length;M++)if(0===w.data[M]){w.owner=Od(w.data,0,M);break}w.privateData=w.data.subarray(M+1),w.data=w.privateData}},py={parseId3Frames:function(w){var M,L=10,q=0,re=[];if(!(w.length<10||w[0]!=="I".charCodeAt(0)||w[1]!=="D".charCodeAt(0)||w[2]!=="3".charCodeAt(0))){q=hp(w.subarray(6,10)),q+=10,64&w[5]&&(L+=4,L+=hp(w.subarray(10,14)),q-=hp(w.subarray(16,20)));do{if((M=hp(w.subarray(L+4,L+8)))<1)break;var He={id:String.fromCharCode(w[L],w[L+1],w[L+2],w[L+3]),data:w.subarray(L+10,L+M+10)};He.key=He.id,fp[He.id]?fp[He.id](He):"T"===He.id[0]?fp["T*"](He):"W"===He.id[0]&&fp["W*"](He),re.push(He),L+=10,L+=M}while(L<q);return re}},parseSyncSafeInteger:hp,frameParsers:fp},gy=dp,td=py;gp=function(w){var re,M={descriptor:w&&w.descriptor},F=0,L=[],q=0;if(gp.prototype.init.call(this),this.dispatchType=gy.METADATA_STREAM_TYPE.toString(16),M.descriptor)for(re=0;re<M.descriptor.length;re++)this.dispatchType+=("00"+M.descriptor[re].toString(16)).slice(-2);this.push=function(Be){var He,Je,lt,At,sn;if("timed-metadata"===Be.type){if(Be.dataAlignmentIndicator&&(q=0,L.length=0),0===L.length&&(Be.data.length<10||Be.data[0]!=="I".charCodeAt(0)||Be.data[1]!=="D".charCodeAt(0)||Be.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(L.push(Be),q+=Be.data.byteLength,1===L.length&&(F=td.parseSyncSafeInteger(Be.data.subarray(6,10)),F+=10),!(q<F)){for(He={data:new Uint8Array(F),frames:[],pts:L[0].pts,dts:L[0].dts},sn=0;sn<F;)He.data.set(L[0].data.subarray(0,F-sn),sn),sn+=L[0].data.byteLength,q-=L[0].data.byteLength,L.shift();Je=10,64&He.data[5]&&(Je+=4,Je+=td.parseSyncSafeInteger(He.data.subarray(10,14)),F-=td.parseSyncSafeInteger(He.data.subarray(16,20)));do{if((lt=td.parseSyncSafeInteger(He.data.subarray(Je+4,Je+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((At={id:String.fromCharCode(He.data[Je],He.data[Je+1],He.data[Je+2],He.data[Je+3]),data:He.data.subarray(Je+10,Je+lt+10)}).key=At.id,td.frameParsers[At.id]?td.frameParsers[At.id](At):"T"===At.id[0]?td.frameParsers["T*"](At):"W"===At.id[0]&&td.frameParsers["W*"](At),"com.apple.streaming.transportStreamTimestamp"===At.owner){var Cn=At.data,si=(1&Cn[3])<<30|Cn[4]<<22|Cn[5]<<14|Cn[6]<<6|Cn[7]>>>2;si*=4,At.timeStamp=si+=3&Cn[7],void 0===He.pts&&void 0===He.dts&&(He.pts=At.timeStamp,He.dts=At.timeStamp),this.trigger("timestamp",At)}He.frames.push(At),Je+=10,Je+=lt}while(Je<F);this.trigger("data",He)}}}},gp.prototype=new i;var wm,Cm,mg,my=gp,pg=i,gg=cp,bu=dp,Ac=U0.TimestampRolloverStream;wm=function(){var w=new Uint8Array(188),M=0;wm.prototype.init.call(this),this.push=function(F){var re,L=0,q=188;for(M?((re=new Uint8Array(F.byteLength+M)).set(w.subarray(0,M)),re.set(F,M),M=0):re=F;q<re.byteLength;)71!==re[L]||71!==re[q]?(L++,q++):(this.trigger("data",re.subarray(L,q)),L+=188,q+=188);L<re.byteLength&&(w.set(re.subarray(L),0),M=re.byteLength-L)},this.flush=function(){188===M&&71===w[0]&&(this.trigger("data",w),M=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){M=0,this.trigger("reset")}},wm.prototype=new pg,Cm=function(){var w,M,F,L;Cm.prototype.init.call(this),L=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,w=function(q,re){var Be=0;re.payloadUnitStartIndicator&&(Be+=q[Be]+1),"pat"===re.type?M(q.subarray(Be),re):F(q.subarray(Be),re)},M=function(q,re){re.section_number=q[7],re.last_section_number=q[8],L.pmtPid=(31&q[10])<<8|q[11],re.pmtPid=L.pmtPid},F=function(q,re){var He,lt;if(1&q[5]){for(L.programMapTable={video:null,audio:null,"timed-metadata":{}},He=3+((15&q[1])<<8|q[2])-4,lt=12+((15&q[10])<<8|q[11]);lt<He;){var At=q[lt],sn=(31&q[lt+1])<<8|q[lt+2];At===bu.H264_STREAM_TYPE&&null===L.programMapTable.video?L.programMapTable.video=sn:At===bu.ADTS_STREAM_TYPE&&null===L.programMapTable.audio?L.programMapTable.audio=sn:At===bu.METADATA_STREAM_TYPE&&(L.programMapTable["timed-metadata"][sn]=At),lt+=5+((15&q[lt+3])<<8|q[lt+4])}re.programMapTable=L.programMapTable}},this.push=function(q){var re={},Be=4;if(re.payloadUnitStartIndicator=!!(64&q[1]),re.pid=31&q[1],re.pid<<=8,re.pid|=q[2],(48&q[3])>>>4>1&&(Be+=q[Be]+1),0===re.pid)re.type="pat",w(q.subarray(Be),re),this.trigger("data",re);else if(re.pid===this.pmtPid)for(re.type="pmt",w(q.subarray(Be),re),this.trigger("data",re);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([q,Be,re]):this.processPes_(q,Be,re)},this.processPes_=function(q,re,Be){Be.streamType=Be.pid===this.programMapTable.video?bu.H264_STREAM_TYPE:Be.pid===this.programMapTable.audio?bu.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][Be.pid],Be.type="pes",Be.data=q.subarray(re),this.trigger("data",Be)}},Cm.prototype=new pg,Cm.STREAM_TYPES={h264:27,adts:15},mg=function(){var re,w=this,M=!1,F={data:[],size:0},L={data:[],size:0},q={data:[],size:0},He=function(Je,lt,At){var Ga,sn=new Uint8Array(Je.size),nr={type:lt},Cn=0,si=0,Ei=!1;if(Je.data.length&&!(Je.size<9)){for(nr.trackId=Je.data[0].pid,Cn=0;Cn<Je.data.length;Cn++)sn.set((Ga=Je.data[Cn]).data,si),si+=Ga.data.byteLength;(function(Je,lt){var At;const sn=Je[0]<<16|Je[1]<<8|Je[2];lt.data=new Uint8Array,1===sn&&(lt.packetLength=6+(Je[4]<<8|Je[5]),lt.dataAlignmentIndicator=0!=(4&Je[6]),192&(At=Je[7])&&(lt.pts=(14&Je[9])<<27|(255&Je[10])<<20|(254&Je[11])<<12|(255&Je[12])<<5|(254&Je[13])>>>3,lt.pts*=4,lt.pts+=(6&Je[13])>>>1,lt.dts=lt.pts,64&At&&(lt.dts=(14&Je[14])<<27|(255&Je[15])<<20|(254&Je[16])<<12|(255&Je[17])<<5|(254&Je[18])>>>3,lt.dts*=4,lt.dts+=(6&Je[18])>>>1)),lt.data=Je.subarray(9+Je[8]))})(sn,nr),Ei="video"===lt||nr.packetLength<=Je.size,(At||Ei)&&(Je.size=0,Je.data.length=0),Ei&&w.trigger("data",nr)}};mg.prototype.init.call(this),this.push=function(Je){({pat:function(){},pes:function(){var lt,At;switch(Je.streamType){case bu.H264_STREAM_TYPE:lt=F,At="video";break;case bu.ADTS_STREAM_TYPE:lt=L,At="audio";break;case bu.METADATA_STREAM_TYPE:lt=q,At="timed-metadata";break;default:return}Je.payloadUnitStartIndicator&&He(lt,At,!0),lt.data.push(Je),lt.size+=Je.data.byteLength},pmt:function(){var lt={type:"metadata",tracks:[]};null!==(re=Je.programMapTable).video&&lt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+re.video,codec:"avc",type:"video"}),null!==re.audio&&lt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+re.audio,codec:"adts",type:"audio"}),M=!0,w.trigger("data",lt)}})[Je.type]()},this.reset=function(){F.size=0,F.data.length=0,L.size=0,L.data.length=0,this.trigger("reset")},this.flushStreams_=function(){He(F,"video"),He(L,"audio"),He(q,"timed-metadata")},this.flush=function(){if(!M&&re){var Je={type:"metadata",tracks:[]};null!==re.video&&Je.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+re.video,codec:"avc",type:"video"}),null!==re.audio&&Je.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+re.audio,codec:"adts",type:"audio"}),w.trigger("data",Je)}M=!1,this.flushStreams_(),this.trigger("done")}},mg.prototype=new pg;var R_={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:wm,TransportParseStream:Cm,ElementaryStream:mg,TimestampRolloverStream:Ac,CaptionStream:gg.CaptionStream,Cea608Stream:gg.Cea608Stream,Cea708Stream:gg.Cea708Stream,MetadataStream:my};for(var kc in bu)bu.hasOwnProperty(kc)&&(R_[kc]=bu[kc]);var Im,vh=R_,yh=bo.ONE_SECOND_IN_TS,xm=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Im=function(w){var M,F=0;Im.prototype.init.call(this),this.skipWarn_=function(L,q){this.trigger("log",{level:"warn",message:`adts skiping bytes ${L} to ${q} in frame ${F} outside syncword`})},this.push=function(L){var re,Be,He,Je,lt,q=0;if(w||(F=0),"audio"===L.type){M&&M.length?(He=M,(M=new Uint8Array(He.byteLength+L.data.byteLength)).set(He),M.set(L.data,He.byteLength)):M=L.data;for(var At;q+7<M.length;)if(255===M[q]&&240==(246&M[q+1])){if("number"==typeof At&&(this.skipWarn_(At,q),At=null),Be=2*(1&~M[q+1]),lt=(Je=1024*(1+(3&M[q+6])))*yh/xm[(60&M[q+2])>>>2],M.byteLength-q<(re=(3&M[q+3])<<11|M[q+4]<<3|(224&M[q+5])>>5))break;this.trigger("data",{pts:L.pts+F*lt,dts:L.dts+F*lt,sampleCount:Je,audioobjecttype:1+(M[q+2]>>>6&3),channelcount:(1&M[q+2])<<2|(192&M[q+3])>>>6,samplerate:xm[(60&M[q+2])>>>2],samplingfrequencyindex:(60&M[q+2])>>>2,samplesize:16,data:M.subarray(q+7+Be,q+re)}),F++,q+=re}else"number"!=typeof At&&(At=q),q++;"number"==typeof At&&(this.skipWarn_(At,q),At=null),M=M.subarray(q)}},this.flush=function(){F=0,this.trigger("done")},this.reset=function(){M=void 0,this.trigger("reset")},this.endTimeline=function(){M=void 0,this.trigger("endedtimeline")}},Im.prototype=new i;var co,N_=Im;co=function(w){var M=w.byteLength,F=0,L=0;this.length=function(){return 8*M},this.bitsAvailable=function(){return 8*M+L},this.loadWord=function(){var q=w.byteLength-M,re=new Uint8Array(4),Be=Math.min(4,M);if(0===Be)throw new Error("no bytes available");re.set(w.subarray(q,q+Be)),F=new DataView(re.buffer).getUint32(0),L=8*Be,M-=Be},this.skipBits=function(q){var re;L>q?(F<<=q,L-=q):(q-=L,q-=8*(re=Math.floor(q/8)),M-=re,this.loadWord(),F<<=q,L-=q)},this.readBits=function(q){var re=Math.min(L,q),Be=F>>>32-re;return(L-=re)>0?F<<=re:M>0&&this.loadWord(),(re=q-re)>0?Be<<re|this.readBits(re):Be},this.skipLeadingZeros=function(){var q;for(q=0;q<L;++q)if(F&2147483648>>>q)return F<<=q,L-=q,q;return this.loadWord(),q+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var q=this.skipLeadingZeros();return this.readBits(q+1)-1},this.readExpGolomb=function(){var q=this.readUnsignedExpGolomb();return 1&q?1+q>>>1:-1*(q>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var vg,yg,Am,H0=i,L_=co;yg=function(){var M,F,w=0;yg.prototype.init.call(this),this.push=function(L){var q;F?((q=new Uint8Array(F.byteLength+L.data.byteLength)).set(F),q.set(L.data,F.byteLength),F=q):F=L.data;for(var re=F.byteLength;w<re-3;w++)if(1===F[w+2]){M=w+5;break}for(;M<re;)switch(F[M]){case 0:if(0!==F[M-1]){M+=2;break}if(0!==F[M-2]){M++;break}w+3!==M-2&&this.trigger("data",F.subarray(w+3,M-2));do{M++}while(1!==F[M]&&M<re);w=M-2,M+=3;break;case 1:if(0!==F[M-1]||0!==F[M-2]){M+=3;break}this.trigger("data",F.subarray(w+3,M-2)),w=M-2,M+=3;break;default:M+=3}F=F.subarray(w),M-=w,w=0},this.reset=function(){F=null,w=0,this.trigger("reset")},this.flush=function(){F&&F.byteLength>3&&this.trigger("data",F.subarray(w+3)),F=null,w=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},yg.prototype=new H0,Am={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},vg=function(){var M,F,L,q,re,Be,He,w=new yg;vg.prototype.init.call(this),M=this,this.push=function(Je){"video"===Je.type&&(F=Je.trackId,L=Je.pts,q=Je.dts,w.push(Je))},w.on("data",function(Je){var lt={trackId:F,pts:L,dts:q,data:Je,nalUnitTypeCode:31&Je[0]};switch(lt.nalUnitTypeCode){case 5:lt.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:lt.nalUnitType="sei_rbsp",lt.escapedRBSP=re(Je.subarray(1));break;case 7:lt.nalUnitType="seq_parameter_set_rbsp",lt.escapedRBSP=re(Je.subarray(1)),lt.config=Be(lt.escapedRBSP);break;case 8:lt.nalUnitType="pic_parameter_set_rbsp";break;case 9:lt.nalUnitType="access_unit_delimiter_rbsp"}M.trigger("data",lt)}),w.on("done",function(){M.trigger("done")}),w.on("partialdone",function(){M.trigger("partialdone")}),w.on("reset",function(){M.trigger("reset")}),w.on("endedtimeline",function(){M.trigger("endedtimeline")}),this.flush=function(){w.flush()},this.partialFlush=function(){w.partialFlush()},this.reset=function(){w.reset()},this.endTimeline=function(){w.endTimeline()},He=function(Je,lt){var nr,At=8,sn=8;for(nr=0;nr<Je;nr++)0!==sn&&(sn=(At+lt.readExpGolomb()+256)%256),At=0===sn?At:sn},re=function(Je){for(var nr,Cn,lt=Je.byteLength,At=[],sn=1;sn<lt-2;)0===Je[sn]&&0===Je[sn+1]&&3===Je[sn+2]?(At.push(sn+2),sn+=2):sn++;if(0===At.length)return Je;nr=lt-At.length,Cn=new Uint8Array(nr);var si=0;for(sn=0;sn<nr;si++,sn++)si===At[0]&&(si++,At.shift()),Cn[sn]=Je[si];return Cn},Be=function(Je){var Cn,si,Ei,Ga,id,bf,_b,Z_,Y_,Q_,bb,xg,lt=0,At=0,sn=0,nr=0,Oa=[1,1];if(si=(Cn=new L_(Je)).readUnsignedByte(),Ga=Cn.readUnsignedByte(),Ei=Cn.readUnsignedByte(),Cn.skipUnsignedExpGolomb(),Am[si]&&(3===(id=Cn.readUnsignedExpGolomb())&&Cn.skipBits(1),Cn.skipUnsignedExpGolomb(),Cn.skipUnsignedExpGolomb(),Cn.skipBits(1),Cn.readBoolean()))for(bb=3!==id?8:12,xg=0;xg<bb;xg++)Cn.readBoolean()&&He(xg<6?16:64,Cn);if(Cn.skipUnsignedExpGolomb(),0===(bf=Cn.readUnsignedExpGolomb()))Cn.readUnsignedExpGolomb();else if(1===bf)for(Cn.skipBits(1),Cn.skipExpGolomb(),Cn.skipExpGolomb(),_b=Cn.readUnsignedExpGolomb(),xg=0;xg<_b;xg++)Cn.skipExpGolomb();if(Cn.skipUnsignedExpGolomb(),Cn.skipBits(1),Z_=Cn.readUnsignedExpGolomb(),Y_=Cn.readUnsignedExpGolomb(),0===(Q_=Cn.readBits(1))&&Cn.skipBits(1),Cn.skipBits(1),Cn.readBoolean()&&(lt=Cn.readUnsignedExpGolomb(),At=Cn.readUnsignedExpGolomb(),sn=Cn.readUnsignedExpGolomb(),nr=Cn.readUnsignedExpGolomb()),Cn.readBoolean()&&Cn.readBoolean())switch(Cn.readUnsignedByte()){case 1:Oa=[1,1];break;case 2:Oa=[12,11];break;case 3:Oa=[10,11];break;case 4:Oa=[16,11];break;case 5:Oa=[40,33];break;case 6:Oa=[24,11];break;case 7:Oa=[20,11];break;case 8:Oa=[32,11];break;case 9:Oa=[80,33];break;case 10:Oa=[18,11];break;case 11:Oa=[15,11];break;case 12:Oa=[64,33];break;case 13:Oa=[160,99];break;case 14:Oa=[4,3];break;case 15:Oa=[3,2];break;case 16:Oa=[2,1];break;case 255:Oa=[Cn.readUnsignedByte()<<8|Cn.readUnsignedByte(),Cn.readUnsignedByte()<<8|Cn.readUnsignedByte()]}return{profileIdc:si,levelIdc:Ei,profileCompatibility:Ga,width:16*(Z_+1)-2*lt-2*At,height:(2-Q_)*(Y_+1)*16-2*sn-2*nr,sarRatio:Oa}}},vg.prototype=new H0;var Il,vy={H264Stream:vg,NalByteStream:yg},mp=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],G0=function(w,M){var F=w[M+6]<<21|w[M+7]<<14|w[M+8]<<7|w[M+9];return F=F>=0?F:0,(16&w[M+5])>>4?F+20:F+10},yy=function(w,M){return w.length-M<10||w[M]!=="I".charCodeAt(0)||w[M+1]!=="D".charCodeAt(0)||w[M+2]!=="3".charCodeAt(0)?M:(M+=G0(w,M),yy(w,M))},gf=function(w){return w[0]<<21|w[1]<<14|w[2]<<7|w[3]},Mb=function(w,M,F){return unescape(function(w,M,F){var L,q="";for(L=M;L<F;L++)q+="%"+("00"+w[L].toString(16)).slice(-2);return q}(w,M,F))},by={isLikelyAacData:function(w){var M=yy(w,0);return w.length>=M+2&&255==(255&w[M])&&240==(240&w[M+1])&&16==(22&w[M+1])},parseId3TagSize:G0,parseAdtsSize:function(w,M){return 6144&w[M+3]|w[M+4]<<3|(224&w[M+5])>>5},parseType:function(w,M){return w[M]==="I".charCodeAt(0)&&w[M+1]==="D".charCodeAt(0)&&w[M+2]==="3".charCodeAt(0)?"timed-metadata":!0&w[M]&&240==(240&w[M+1])?"audio":null},parseSampleRate:function(w){for(var M=0;M+5<w.length;){if(255===w[M]&&240==(246&w[M+1]))return mp[(60&w[M+2])>>>2];M++}return null},parseAacTimestamp:function(w){var M,F,L;M=10,64&w[5]&&(M+=4,M+=gf(w.subarray(10,14)));do{if((F=gf(w.subarray(M+4,M+8)))<1)return null;if("PRIV"===String.fromCharCode(w[M],w[M+1],w[M+2],w[M+3])){L=w.subarray(M+10,M+F+10);for(var re=0;re<L.byteLength;re++)if(0===L[re]){if("com.apple.streaming.transportStreamTimestamp"===Mb(L,0,re)){var He=L.subarray(re+1),Je=(1&He[3])<<30|He[4]<<22|He[5]<<14|He[6]<<6|He[7]>>>2;return(Je*=4)+(3&He[7])}break}}M+=10,M+=F}while(M<w.byteLength);return null}},Mc=by;Il=function(){var w=new Uint8Array,M=0;Il.prototype.init.call(this),this.setTimestamp=function(F){M=F},this.push=function(F){var Be,He,Je,L=0,q=0;for(w.length?(Je=w.length,(w=new Uint8Array(F.byteLength+Je)).set(w.subarray(0,Je)),w.set(F,Je)):w=F;w.length-q>=3;)if(w[q]!=="I".charCodeAt(0)||w[q+1]!=="D".charCodeAt(0)||w[q+2]!=="3".charCodeAt(0))if(255!=(255&w[q])||240!=(240&w[q+1]))q++;else{if(w.length-q<7||q+(L=Mc.parseAdtsSize(w,q))>w.length)break;He={type:"audio",data:w.subarray(q,q+L),pts:M,dts:M},this.trigger("data",He),q+=L}else{if(w.length-q<10||q+(L=Mc.parseId3TagSize(w,q))>w.length)break;Be={type:"timed-metadata",data:w.subarray(q,q+L)},this.trigger("data",Be),q+=L}w=w.length-q>0?w.subarray(q):new Uint8Array},this.reset=function(){w=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){w=new Uint8Array,this.trigger("endedtimeline")}},Il.prototype=new i;var bg,bh,mf,Pc,Mm=i,_h=xc,Tu=Ao,Pm=vm,Xl=O_,Nd=vh,Om=bo,Ty=N_,K0=vy.H264Stream,Rm=Il,mb=by.isLikelyAacData,V_=bo.ONE_SECOND_IN_TS,_g=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Nm=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],vf=function(w,M){M.stream=w,this.trigger("log",M)},Tg=function(w,M){for(var F=Object.keys(M),L=0;L<F.length;L++){var q=F[L];"headOfPipeline"===q||!M[q].on||M[q].on("log",vf.bind(w,q))}},Ey=function(w,M){var F;if(w.length!==M.length)return!1;for(F=0;F<w.length;F++)if(w[F]!==M[F])return!1;return!0},Lm=function(w,M,F,L,q,re){return{start:{dts:w,pts:w+(F-M)},end:{dts:w+(L-M),pts:w+(q-F)},prependedContentDuration:re,baseMediaDecodeTime:w}};bh=function(w,M){var L,F=[],q=0,re=0,Be=1/0;L=(M=M||{}).firstSequenceNumber||0,bh.prototype.init.call(this),this.push=function(He){Xl.collectDtsInfo(w,He),w&&_g.forEach(function(Je){w[Je]=He[Je]}),F.push(He)},this.setEarliestDts=function(He){q=He},this.setVideoBaseMediaDecodeTime=function(He){Be=He},this.setAudioAppendStart=function(He){re=He},this.flush=function(){var He,Je,lt,At,sn,nr,Cn;0!==F.length?(He=Pm.trimAdtsFramesByEarliestDts(F,w,q),w.baseMediaDecodeTime=Xl.calculateTrackBaseMediaDecodeTime(w,M.keepOriginalTimestamps),Cn=Pm.prefixWithSilence(w,He,re,Be),w.samples=Pm.generateSampleTable(He),lt=_h.mdat(Pm.concatenateFrameData(He)),F=[],Je=_h.moof(L,[w]),At=new Uint8Array(Je.byteLength+lt.byteLength),L++,At.set(Je),At.set(lt,Je.byteLength),Xl.clearDtsInfo(w),sn=Math.ceil(1024*V_/w.samplerate),He.length&&(nr=He.length*sn,this.trigger("segmentTimingInfo",Lm(Om.audioTsToVideoTs(w.baseMediaDecodeTime,w.samplerate),He[0].dts,He[0].pts,He[0].dts+nr,He[0].pts+nr,Cn||0)),this.trigger("timingInfo",{start:He[0].pts,end:He[0].pts+nr})),this.trigger("data",{track:w,boxes:At}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Xl.clearDtsInfo(w),F=[],this.trigger("reset")}},bh.prototype=new Mm,bg=function(w,M){var F,re,Be,L=[],q=[];F=(M=M||{}).firstSequenceNumber||0,bg.prototype.init.call(this),delete w.minPTS,this.gopCache_=[],this.push=function(He){Xl.collectDtsInfo(w,He),"seq_parameter_set_rbsp"===He.nalUnitType&&!re&&(re=He.config,w.sps=[He.data],Nm.forEach(function(Je){w[Je]=re[Je]},this)),"pic_parameter_set_rbsp"===He.nalUnitType&&!Be&&(Be=He.data,w.pps=[He.data]),L.push(He)},this.flush=function(){for(var He,Je,lt,At,sn,nr,si,Ei,Cn=0;L.length&&"access_unit_delimiter_rbsp"!==L[0].nalUnitType;)L.shift();if(0===L.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(He=Tu.groupNalsIntoFrames(L),(lt=Tu.groupFramesIntoGops(He))[0][0].keyFrame||((Je=this.getGopForFusion_(L[0],w))?(Cn=Je.duration,lt.unshift(Je),lt.byteLength+=Je.byteLength,lt.nalCount+=Je.nalCount,lt.pts=Je.pts,lt.dts=Je.dts,lt.duration+=Je.duration):lt=Tu.extendFirstKeyFrame(lt)),q.length){var Ga;if(!(Ga=M.alignGopsAtEnd?this.alignGopsAtEnd_(lt):this.alignGopsAtStart_(lt)))return this.gopCache_.unshift({gop:lt.pop(),pps:w.pps,sps:w.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),L=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Xl.clearDtsInfo(w),lt=Ga}Xl.collectDtsInfo(w,lt),w.samples=Tu.generateSampleTable(lt),sn=_h.mdat(Tu.concatenateNalData(lt)),w.baseMediaDecodeTime=Xl.calculateTrackBaseMediaDecodeTime(w,M.keepOriginalTimestamps),this.trigger("processedGopsInfo",lt.map(function(id){return{pts:id.pts,dts:id.dts,byteLength:id.byteLength}})),this.trigger("segmentTimingInfo",Lm(w.baseMediaDecodeTime,(si=lt[0]).dts,si.pts,(Ei=lt[lt.length-1]).dts+Ei.duration,Ei.pts+Ei.duration,Cn)),this.trigger("timingInfo",{start:lt[0].pts,end:lt[lt.length-1].pts+lt[lt.length-1].duration}),this.gopCache_.unshift({gop:lt.pop(),pps:w.pps,sps:w.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),L=[],this.trigger("baseMediaDecodeTime",w.baseMediaDecodeTime),this.trigger("timelineStartInfo",w.timelineStartInfo),At=_h.moof(F,[w]),nr=new Uint8Array(At.byteLength+sn.byteLength),F++,nr.set(At),nr.set(sn,At.byteLength),this.trigger("data",{track:w,boxes:nr}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),L=[],this.gopCache_.length=0,q.length=0,this.trigger("reset")},this.resetStream_=function(){Xl.clearDtsInfo(w),re=void 0,Be=void 0},this.getGopForFusion_=function(He){var sn,nr,Cn,si,Ei,At=1/0;for(Ei=0;Ei<this.gopCache_.length;Ei++)Cn=(si=this.gopCache_[Ei]).gop,w.pps&&Ey(w.pps[0],si.pps[0])&&w.sps&&Ey(w.sps[0],si.sps[0])&&(Cn.dts<w.timelineStartInfo.dts||(sn=He.dts-Cn.dts-Cn.duration)>=-1e4&&sn<=45e3&&(!nr||At>sn)&&(nr=si,At=sn));return nr?nr.gop:null},this.alignGopsAtStart_=function(He){var Je,lt,At,sn,nr,Cn,si,Ei;for(nr=He.byteLength,Cn=He.nalCount,si=He.duration,Je=lt=0;Je<q.length&&lt<He.length&&(At=q[Je]).pts!==(sn=He[lt]).pts;)sn.pts>At.pts?Je++:(lt++,nr-=sn.byteLength,Cn-=sn.nalCount,si-=sn.duration);return 0===lt?He:lt===He.length?null:((Ei=He.slice(lt)).byteLength=nr,Ei.duration=si,Ei.nalCount=Cn,Ei.pts=Ei[0].pts,Ei.dts=Ei[0].dts,Ei)},this.alignGopsAtEnd_=function(He){var Je,lt,At,sn,nr,Cn,si;for(Je=q.length-1,lt=He.length-1,nr=null,Cn=!1;Je>=0&&lt>=0;){if((At=q[Je]).pts===(sn=He[lt]).pts){Cn=!0;break}At.pts>sn.pts?Je--:(Je===q.length-1&&(nr=lt),lt--)}if(!Cn&&null===nr)return null;if(0===(si=Cn?lt:nr))return He;var Ei=He.slice(si),Ga=Ei.reduce(function(id,bf){return id.byteLength+=bf.byteLength,id.duration+=bf.duration,id.nalCount+=bf.nalCount,id},{byteLength:0,duration:0,nalCount:0});return Ei.byteLength=Ga.byteLength,Ei.duration=Ga.duration,Ei.nalCount=Ga.nalCount,Ei.pts=Ei[0].pts,Ei.dts=Ei[0].dts,Ei},this.alignGopsWith=function(He){q=He}},bg.prototype=new Mm,Pc=function(w,M){this.numberOfTracks=0,this.metadataStream=M,this.remuxTracks=!(typeof(w=w||{}).remux<"u"&&!w.remux),this.keepOriginalTimestamps="boolean"==typeof w.keepOriginalTimestamps&&w.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Pc.prototype.init.call(this),this.push=function(F){return F.text?this.pendingCaptions.push(F):F.frames?this.pendingMetadata.push(F):(this.pendingTracks.push(F.track),this.pendingBytes+=F.boxes.byteLength,"video"===F.track.type&&(this.videoTrack=F.track,this.pendingBoxes.push(F.boxes)),void("audio"===F.track.type&&(this.audioTrack=F.track,this.pendingBoxes.unshift(F.boxes))))}},Pc.prototype=new Mm,Pc.prototype.flush=function(w){var L,q,re,He,M=0,F={captions:[],captionStreams:{},metadata:[],info:{}},Be=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==w&&"AudioSegmentStream"!==w)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(Be=this.videoTrack.timelineStartInfo.pts,Nm.forEach(function(Je){F.info[Je]=this.videoTrack[Je]},this)):this.audioTrack&&(Be=this.audioTrack.timelineStartInfo.pts,_g.forEach(function(Je){F.info[Je]=this.audioTrack[Je]},this)),this.videoTrack||this.audioTrack){for(F.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,re=_h.initSegment(this.pendingTracks),F.initSegment=new Uint8Array(re.byteLength),F.initSegment.set(re),F.data=new Uint8Array(this.pendingBytes),He=0;He<this.pendingBoxes.length;He++)F.data.set(this.pendingBoxes[He],M),M+=this.pendingBoxes[He].byteLength;for(He=0;He<this.pendingCaptions.length;He++)(L=this.pendingCaptions[He]).startTime=Om.metadataTsToSeconds(L.startPts,Be,this.keepOriginalTimestamps),L.endTime=Om.metadataTsToSeconds(L.endPts,Be,this.keepOriginalTimestamps),F.captionStreams[L.stream]=!0,F.captions.push(L);for(He=0;He<this.pendingMetadata.length;He++)(q=this.pendingMetadata[He]).cueTime=Om.metadataTsToSeconds(q.pts,Be,this.keepOriginalTimestamps),F.metadata.push(q);for(F.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",F),He=0;He<F.captions.length;He++)this.trigger("caption",L=F.captions[He]);for(He=0;He<F.metadata.length;He++)this.trigger("id3Frame",q=F.metadata[He])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Pc.prototype.setRemux=function(w){this.remuxTracks=w},mf=function(w){var L,q,M=this,F=!0;mf.prototype.init.call(this),this.baseMediaDecodeTime=(w=w||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var re={};this.transmuxPipeline_=re,re.type="aac",re.metadataStream=new Nd.MetadataStream,re.aacStream=new Rm,re.audioTimestampRolloverStream=new Nd.TimestampRolloverStream("audio"),re.timedMetadataTimestampRolloverStream=new Nd.TimestampRolloverStream("timed-metadata"),re.adtsStream=new Ty,re.coalesceStream=new Pc(w,re.metadataStream),re.headOfPipeline=re.aacStream,re.aacStream.pipe(re.audioTimestampRolloverStream).pipe(re.adtsStream),re.aacStream.pipe(re.timedMetadataTimestampRolloverStream).pipe(re.metadataStream).pipe(re.coalesceStream),re.metadataStream.on("timestamp",function(Be){re.aacStream.setTimestamp(Be.timeStamp)}),re.aacStream.on("data",function(Be){"timed-metadata"!==Be.type&&"audio"!==Be.type||re.audioSegmentStream||(q=q||{timelineStartInfo:{baseMediaDecodeTime:M.baseMediaDecodeTime},codec:"adts",type:"audio"},re.coalesceStream.numberOfTracks++,re.audioSegmentStream=new bh(q,w),re.audioSegmentStream.on("log",M.getLogTrigger_("audioSegmentStream")),re.audioSegmentStream.on("timingInfo",M.trigger.bind(M,"audioTimingInfo")),re.adtsStream.pipe(re.audioSegmentStream).pipe(re.coalesceStream),M.trigger("trackinfo",{hasAudio:!!q,hasVideo:!!L}))}),re.coalesceStream.on("data",this.trigger.bind(this,"data")),re.coalesceStream.on("done",this.trigger.bind(this,"done")),Tg(this,re)},this.setupTsPipeline=function(){var re={};this.transmuxPipeline_=re,re.type="ts",re.metadataStream=new Nd.MetadataStream,re.packetStream=new Nd.TransportPacketStream,re.parseStream=new Nd.TransportParseStream,re.elementaryStream=new Nd.ElementaryStream,re.timestampRolloverStream=new Nd.TimestampRolloverStream,re.adtsStream=new Ty,re.h264Stream=new K0,re.captionStream=new Nd.CaptionStream(w),re.coalesceStream=new Pc(w,re.metadataStream),re.headOfPipeline=re.packetStream,re.packetStream.pipe(re.parseStream).pipe(re.elementaryStream).pipe(re.timestampRolloverStream),re.timestampRolloverStream.pipe(re.h264Stream),re.timestampRolloverStream.pipe(re.adtsStream),re.timestampRolloverStream.pipe(re.metadataStream).pipe(re.coalesceStream),re.h264Stream.pipe(re.captionStream).pipe(re.coalesceStream),re.elementaryStream.on("data",function(Be){var He;if("metadata"===Be.type){for(He=Be.tracks.length;He--;)L||"video"!==Be.tracks[He].type?!q&&"audio"===Be.tracks[He].type&&((q=Be.tracks[He]).timelineStartInfo.baseMediaDecodeTime=M.baseMediaDecodeTime):(L=Be.tracks[He]).timelineStartInfo.baseMediaDecodeTime=M.baseMediaDecodeTime;L&&!re.videoSegmentStream&&(re.coalesceStream.numberOfTracks++,re.videoSegmentStream=new bg(L,w),re.videoSegmentStream.on("log",M.getLogTrigger_("videoSegmentStream")),re.videoSegmentStream.on("timelineStartInfo",function(Je){q&&!w.keepOriginalTimestamps&&(q.timelineStartInfo=Je,re.audioSegmentStream.setEarliestDts(Je.dts-M.baseMediaDecodeTime))}),re.videoSegmentStream.on("processedGopsInfo",M.trigger.bind(M,"gopInfo")),re.videoSegmentStream.on("segmentTimingInfo",M.trigger.bind(M,"videoSegmentTimingInfo")),re.videoSegmentStream.on("baseMediaDecodeTime",function(Je){q&&re.audioSegmentStream.setVideoBaseMediaDecodeTime(Je)}),re.videoSegmentStream.on("timingInfo",M.trigger.bind(M,"videoTimingInfo")),re.h264Stream.pipe(re.videoSegmentStream).pipe(re.coalesceStream)),q&&!re.audioSegmentStream&&(re.coalesceStream.numberOfTracks++,re.audioSegmentStream=new bh(q,w),re.audioSegmentStream.on("log",M.getLogTrigger_("audioSegmentStream")),re.audioSegmentStream.on("timingInfo",M.trigger.bind(M,"audioTimingInfo")),re.audioSegmentStream.on("segmentTimingInfo",M.trigger.bind(M,"audioSegmentTimingInfo")),re.adtsStream.pipe(re.audioSegmentStream).pipe(re.coalesceStream)),M.trigger("trackinfo",{hasAudio:!!q,hasVideo:!!L})}}),re.coalesceStream.on("data",this.trigger.bind(this,"data")),re.coalesceStream.on("id3Frame",function(Be){Be.dispatchType=re.metadataStream.dispatchType,M.trigger("id3Frame",Be)}),re.coalesceStream.on("caption",this.trigger.bind(this,"caption")),re.coalesceStream.on("done",this.trigger.bind(this,"done")),Tg(this,re)},this.setBaseMediaDecodeTime=function(re){var Be=this.transmuxPipeline_;w.keepOriginalTimestamps||(this.baseMediaDecodeTime=re),q&&(q.timelineStartInfo.dts=void 0,q.timelineStartInfo.pts=void 0,Xl.clearDtsInfo(q),Be.audioTimestampRolloverStream&&Be.audioTimestampRolloverStream.discontinuity()),L&&(Be.videoSegmentStream&&(Be.videoSegmentStream.gopCache_=[]),L.timelineStartInfo.dts=void 0,L.timelineStartInfo.pts=void 0,Xl.clearDtsInfo(L),Be.captionStream.reset()),Be.timestampRolloverStream&&Be.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(re){q&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(re)},this.setRemux=function(re){var Be=this.transmuxPipeline_;w.remux=re,Be&&Be.coalesceStream&&Be.coalesceStream.setRemux(re)},this.alignGopsWith=function(re){L&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(re)},this.getLogTrigger_=function(re){var Be=this;return function(He){He.stream=re,Be.trigger("log",He)}},this.push=function(re){if(F){var Be=mb(re);Be&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!Be&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),F=!1}this.transmuxPipeline_.headOfPipeline.push(re)},this.flush=function(){F=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},mf.prototype=new Mm;var Sg,nt,xn,Wn,wy={Transmuxer:mf,VideoSegmentStream:bg,AudioSegmentStream:bh,AUDIO_PROPERTIES:_g,VIDEO_PROPERTIES:Nm,generateSegmentTimingInfo:Lm},vp_toUnsigned=function(w){return w>>>0},Th=function(w){var M="";return M+=String.fromCharCode(w[0]),M+=String.fromCharCode(w[1]),(M+=String.fromCharCode(w[2]))+String.fromCharCode(w[3])},Jl=vp_toUnsigned,Lu=Th,Cy=function(w,M){var L,q,re,Be,He,F=[];if(!M.length)return null;for(L=0;L<w.byteLength;)q=Jl(w[L]<<24|w[L+1]<<16|w[L+2]<<8|w[L+3]),re=Lu(w.subarray(L+4,L+8)),Be=q>1?L+q:w.byteLength,re===M[0]&&(1===M.length?F.push(w.subarray(L+8,Be)):(He=Cy(w.subarray(L+8,Be),M.slice(1))).length&&(F=F.concat(He))),L=Be;return F},wg=vp_toUnsigned,Cg=v.getUint64,Q0=function(w){var M={version:w[0],flags:new Uint8Array(w.subarray(1,4))};return M.baseMediaDecodeTime=1===M.version?Cg(w.subarray(4)):wg(w[4]<<24|w[5]<<16|w[6]<<8|w[7]),M},Eh=function(w){return{isLeading:(12&w[0])>>>2,dependsOn:3&w[0],isDependedOn:(192&w[1])>>>6,hasRedundancy:(48&w[1])>>>4,paddingValue:(14&w[1])>>>1,isNonSyncSample:1&w[1],degradationPriority:w[2]<<8|w[3]}},wh=function(w){var sn,M={version:w[0],flags:new Uint8Array(w.subarray(1,4)),samples:[]},F=new DataView(w.buffer,w.byteOffset,w.byteLength),L=1&M.flags[2],q=4&M.flags[2],re=1&M.flags[1],Be=2&M.flags[1],He=4&M.flags[1],Je=8&M.flags[1],lt=F.getUint32(4),At=8;for(L&&(M.dataOffset=F.getInt32(At),At+=4),q&&lt&&(sn={flags:Eh(w.subarray(At,At+4))},At+=4,re&&(sn.duration=F.getUint32(At),At+=4),Be&&(sn.size=F.getUint32(At),At+=4),Je&&(sn.compositionTimeOffset=1===M.version?F.getInt32(At):F.getUint32(At),At+=4),M.samples.push(sn),lt--);lt--;)sn={},re&&(sn.duration=F.getUint32(At),At+=4),Be&&(sn.size=F.getUint32(At),At+=4),He&&(sn.flags=Eh(w.subarray(At,At+4)),At+=4),Je&&(sn.compositionTimeOffset=1===M.version?F.getInt32(At):F.getUint32(At),At+=4),M.samples.push(sn);return M},X0=function(w){var At,M=new DataView(w.buffer,w.byteOffset,w.byteLength),F={version:w[0],flags:new Uint8Array(w.subarray(1,4)),trackId:M.getUint32(4)},L=1&F.flags[2],q=2&F.flags[2],re=8&F.flags[2],Be=16&F.flags[2],He=32&F.flags[2],Je=65536&F.flags[0],lt=131072&F.flags[0];return At=8,L&&(At+=4,F.baseDataOffset=M.getUint32(12),At+=4),q&&(F.sampleDescriptionIndex=M.getUint32(At),At+=4),re&&(F.defaultSampleDuration=M.getUint32(At),At+=4),Be&&(F.defaultSampleSize=M.getUint32(At),At+=4),He&&(F.defaultSampleFlags=M.getUint32(At)),Je&&(F.durationIsEmpty=!0),!L&&lt&&(F.baseDataOffsetIsMoof=!0),F},J0=(Sg=typeof window<"u"?window:typeof c<"u"?c:typeof self<"u"?self:{},F0.discardEmulationPreventionBytes),H_=cp.CaptionStream,_p=Cy,xy=Q0,e_=wh,Fm=X0,bp=Sg,Ay=function(w,M){for(var F=w,L=0;L<M.length;L++){var q=M[L];if(F<q.size)return q;F-=q.size}return null},_f=function(){var M,F,L,q,re,Be,w=!1;this.isInitialized=function(){return w},this.init=function(He){M=new H_,w=!0,Be=!!He&&He.isPartial,M.on("data",function(Je){Je.startTime=Je.startPts/q,Je.endTime=Je.endPts/q,re.captions.push(Je),re.captionStreams[Je.stream]=!0}),M.on("log",function(Je){re.logs.push(Je)})},this.isNewInit=function(He,Je){return!(He&&0===He.length||Je&&"object"==typeof Je&&0===Object.keys(Je).length||L===He[0]&&q===Je[L])},this.parse=function(He,Je,lt){var At;if(!this.isInitialized())return null;if(!Je||!lt)return null;if(this.isNewInit(Je,lt))q=lt[L=Je[0]];else if(null===L||!q)return F.push(He),null;for(;F.length>0;){var sn=F.shift();this.parse(sn,Je,lt)}return At=function(w,M,F){if(null===M)return null;var q=function(w,M){var F=_p(w,["moof","traf"]),L=_p(w,["mdat"]),q={},re=[];return L.forEach(function(Be,He){re.push({mdat:Be,traf:F[He]})}),re.forEach(function(Be){var Ei,Ga,He=Be.mdat,Je=Be.traf,lt=_p(Je,["tfhd"]),At=Fm(lt[0]),sn=At.trackId,nr=_p(Je,["tfdt"]),Cn=nr.length>0?xy(nr[0]).baseMediaDecodeTime:0,si=_p(Je,["trun"]);M===sn&&si.length>0&&(Ei=function(w,M,F){var L=M,q=F.defaultSampleDuration||0,re=F.defaultSampleSize||0,Be=F.trackId,He=[];return w.forEach(function(Je){var At=e_(Je).samples;At.forEach(function(sn){void 0===sn.duration&&(sn.duration=q),void 0===sn.size&&(sn.size=re),sn.trackId=Be,sn.dts=L,void 0===sn.compositionTimeOffset&&(sn.compositionTimeOffset=0),"bigint"==typeof L?(sn.pts=L+bp.BigInt(sn.compositionTimeOffset),L+=bp.BigInt(sn.duration)):(sn.pts=L+sn.compositionTimeOffset,L+=sn.duration)}),He=He.concat(At)}),He}(si,Cn,At),Ga=function(w,M,F){var re,Be,He,Je,L=new DataView(w.buffer,w.byteOffset,w.byteLength),q={logs:[],seiNals:[]};for(Be=0;Be+4<w.length;Be+=He)if(He=L.getUint32(Be),Be+=4,!(He<=0))switch(31&w[Be]){case 6:var lt=w.subarray(Be+1,Be+1+He),At=Ay(Be,M);if(re={nalUnitType:"sei_rbsp",size:He,data:lt,escapedRBSP:J0(lt),trackId:F},At)re.pts=At.pts,re.dts=At.dts,Je=At;else{if(!Je){q.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Be+" for trackId "+F+". See mux.js#223."});break}re.pts=Je.pts,re.dts=Je.dts}q.seiNals.push(re)}return q}(He,Ei,sn),q[sn]||(q[sn]={seiNals:[],logs:[]}),q[sn].seiNals=q[sn].seiNals.concat(Ga.seiNals),q[sn].logs=q[sn].logs.concat(Ga.logs))}),q}(w,M)[M]||{};return{seiNals:q.seiNals,logs:q.logs,timescale:F}}(He,L,q),At&&At.logs&&(re.logs=re.logs.concat(At.logs)),null!==At&&At.seiNals?(this.pushNals(At.seiNals),this.flushStream(),re):re.logs.length?{logs:re.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(He){if(!this.isInitialized()||!He||0===He.length)return null;He.forEach(function(Je){M.push(Je)})},this.flushStream=function(){if(!this.isInitialized())return null;Be?M.partialFlush():M.flush()},this.clearParsedCaptions=function(){re.captions=[],re.captionStreams={},re.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;M.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){F=[],L=null,q=null,re?this.clearParsedCaptions():re={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},e=vp_toUnsigned,n=function(w){return("00"+w.toString(16)).slice(-2)},a=Cy,d=Th,ue=v.getUint64,vi=Sg;nt=function(w,M){var L=a(M,["moof","traf"]).reduce(function(q,re){var sn,Be=a(re,["tfhd"])[0],He=e(Be[4]<<24|Be[5]<<16|Be[6]<<8|Be[7]),Je=w[He]||9e4,lt=a(re,["tfdt"])[0],At=new DataView(lt.buffer,lt.byteOffset,lt.byteLength);let nr;return"bigint"==typeof(sn=1===lt[0]?ue(lt.subarray(4,12)):At.getUint32(4))?nr=sn/vi.BigInt(Je):"number"==typeof sn&&!isNaN(sn)&&(nr=sn/Je),nr<Number.MAX_SAFE_INTEGER&&(nr=Number(nr)),nr<q&&(q=nr),q},1/0);return"bigint"==typeof L||isFinite(L)?L:0},Wn=function(w){var F=0===w[0]?12:20;return e(w[F]<<24|w[F+1]<<16|w[F+2]<<8|w[F+3])},xn=function(w){var M=a(w,["moov","trak"]),F=[];return M.forEach(function(L){var Be,He,q={},re=a(L,["tkhd"])[0];re&&(He=(Be=new DataView(re.buffer,re.byteOffset,re.byteLength)).getUint8(0),q.id=Be.getUint32(0===He?12:20));var Je=a(L,["mdia","hdlr"])[0];if(Je){var lt=d(Je.subarray(8,12));q.type="vide"===lt?"video":"soun"===lt?"audio":lt}var At=a(L,["mdia","minf","stbl","stsd"])[0];if(At){var sn=At.subarray(8);q.codec=d(sn.subarray(4,8));var Cn,nr=a(sn,[q.codec])[0];nr&&(/^[asm]vc[1-9]$/i.test(q.codec)?(Cn=nr.subarray(78),"avcC"===d(Cn.subarray(4,8))&&Cn.length>11?(q.codec+=".",q.codec+=n(Cn[9]),q.codec+=n(Cn[10]),q.codec+=n(Cn[11])):q.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(q.codec)?(Cn=nr.subarray(28),"esds"===d(Cn.subarray(4,8))&&Cn.length>20&&0!==Cn[19]?(q.codec+="."+n(Cn[19]),q.codec+="."+n(Cn[20]>>>2&63).replace(/^0/,"")):q.codec="mp4a.40.2"):q.codec=q.codec.toLowerCase())}var Ei=a(L,["mdia","mdhd"])[0];Ei&&(q.timescale=Wn(Ei)),F.push(q)}),F};var Ti_startTime=nt,Ti_tracks=xn,ko=dp,ho=function(w){var M=31&w[1];return(M<<=8)|w[2]},ws=function(w){return!!(64&w[1])},va=function(w){var M=0;return(48&w[3])>>>4>1&&(M+=w[4]+1),M},q_=function(w){switch(w){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Rb={parseType:function(w,M){var F=ho(w);return 0===F?"pat":F===M?"pmt":M?"pes":null},parsePat:function(w){var M=ws(w),F=4+va(w);return M&&(F+=w[F]+1),(31&w[F+10])<<8|w[F+11]},parsePmt:function(w){var M={},F=ws(w),L=4+va(w);if(F&&(L+=w[L]+1),1&w[L+5]){var re;re=3+((15&w[L+1])<<8|w[L+2])-4;for(var He=12+((15&w[L+10])<<8|w[L+11]);He<re;){var Je=L+He;M[(31&w[Je+1])<<8|w[Je+2]]=w[Je],He+=5+((15&w[Je+3])<<8|w[Je+4])}return M}},parsePayloadUnitStartIndicator:ws,parsePesType:function(w,M){switch(M[ho(w)]){case ko.H264_STREAM_TYPE:return"video";case ko.ADTS_STREAM_TYPE:return"audio";case ko.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(w){if(!ws(w))return null;var F=4+va(w);if(F>=w.byteLength)return null;var q,L=null;return 192&(q=w[F+7])&&((L={}).pts=(14&w[F+9])<<27|(255&w[F+10])<<20|(254&w[F+11])<<12|(255&w[F+12])<<5|(254&w[F+13])>>>3,L.pts*=4,L.pts+=(6&w[F+13])>>>1,L.dts=L.pts,64&q&&(L.dts=(14&w[F+14])<<27|(255&w[F+15])<<20|(254&w[F+16])<<12|(255&w[F+17])<<5|(254&w[F+18])>>>3,L.dts*=4,L.dts+=(6&w[F+18])>>>1)),L},videoPacketContainsKeyFrame:function(w){for(var M=4+va(w),F=w.subarray(M),L=0,q=0,re=!1;q<F.byteLength-3;q++)if(1===F[q+2]){L=q+5;break}for(;L<F.byteLength;)switch(F[L]){case 0:if(0!==F[L-1]){L+=2;break}if(0!==F[L-2]){L++;break}q+3!==L-2&&"slice_layer_without_partitioning_rbsp_idr"===q_(31&F[q+3])&&(re=!0);do{L++}while(1!==F[L]&&L<F.length);q=L-2,L+=3;break;case 1:if(0!==F[L-1]||0!==F[L-2]){L+=3;break}"slice_layer_without_partitioning_rbsp_idr"===q_(31&F[q+3])&&(re=!0),q=L-2,L+=3;break;default:L+=3}return F=F.subarray(q),L-=q,q=0,F&&F.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===q_(31&F[q+3])&&(re=!0),re}},W_=dp,Dg=U0.handleRollover,to={};to.ts=Rb,to.aac=by;var Ig=bo.ONE_SECOND_IN_TS,rl=188,Lb=function(w,M,F){for(var re,He,Je,lt,L=0,q=rl,At=!1;q<=w.byteLength;)if(71!==w[L]||71!==w[q]&&q!==w.byteLength)L++,q++;else{if("pes"===(re=w.subarray(L,q),to.ts.parseType(re,M.pid))&&(He=to.ts.parsePesType(re,M.table),Je=to.ts.parsePayloadUnitStartIndicator(re),"audio"===He&&Je&&(lt=to.ts.parsePesTime(re))&&(lt.type="audio",F.audio.push(lt),At=!0)),At)break;L+=rl,q+=rl}for(L=(q=w.byteLength)-rl,At=!1;L>=0;)if(71!==w[L]||71!==w[q]&&q!==w.byteLength)L--,q--;else{if("pes"===(re=w.subarray(L,q),to.ts.parseType(re,M.pid))&&(He=to.ts.parsePesType(re,M.table),Je=to.ts.parsePayloadUnitStartIndicator(re),"audio"===He&&Je&&(lt=to.ts.parsePesTime(re))&&(lt.type="audio",F.audio.push(lt),At=!0)),At)break;L-=rl,q-=rl}},TT=function(w,M,F){for(var re,He,Je,lt,At,sn,nr,L=0,q=rl,Cn=!1,si={data:[],size:0};q<w.byteLength;)if(71!==w[L]||71!==w[q])L++,q++;else{if("pes"===(re=w.subarray(L,q),to.ts.parseType(re,M.pid))&&(He=to.ts.parsePesType(re,M.table),Je=to.ts.parsePayloadUnitStartIndicator(re),"video"===He&&(Je&&!Cn&&(lt=to.ts.parsePesTime(re))&&(lt.type="video",F.video.push(lt),Cn=!0),!F.firstKeyFrame))){if(Je&&0!==si.size){for(At=new Uint8Array(si.size),sn=0;si.data.length;)nr=si.data.shift(),At.set(nr,sn),sn+=nr.byteLength;if(to.ts.videoPacketContainsKeyFrame(At)){var Ei=to.ts.parsePesTime(At);Ei?(F.firstKeyFrame=Ei,F.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}si.size=0}si.data.push(re),si.size+=re.byteLength}if(Cn&&F.firstKeyFrame)break;L+=rl,q+=rl}for(L=(q=w.byteLength)-rl,Cn=!1;L>=0;)if(71!==w[L]||71!==w[q])L--,q--;else{if("pes"===(re=w.subarray(L,q),to.ts.parseType(re,M.pid))&&(He=to.ts.parsePesType(re,M.table),Je=to.ts.parsePayloadUnitStartIndicator(re),"video"===He&&Je&&(lt=to.ts.parsePesTime(re))&&(lt.type="video",F.video.push(lt),Cn=!0)),Cn)break;L-=rl,q-=rl}},Fb_inspect=function(w,M){var L;return L=to.aac.isLikelyAacData(w)?function(w){for(var He,M=!1,F=0,L=null,q=null,re=0,Be=0;w.length-Be>=3;){switch(to.aac.parseType(w,Be)){case"timed-metadata":if(w.length-Be<10){M=!0;break}if((re=to.aac.parseId3TagSize(w,Be))>w.length){M=!0;break}null===q&&(He=w.subarray(Be,Be+re),q=to.aac.parseAacTimestamp(He)),Be+=re;break;case"audio":if(w.length-Be<7){M=!0;break}if((re=to.aac.parseAdtsSize(w,Be))>w.length){M=!0;break}null===L&&(He=w.subarray(Be,Be+re),L=to.aac.parseSampleRate(He)),F++,Be+=re;break;default:Be++}if(M)return null}if(null===L||null===q)return null;var lt=Ig/L;return{audio:[{type:"audio",dts:q,pts:q},{type:"audio",dts:q+1024*F*lt,pts:q+1024*F*lt}]}}(w):function(w){var M={pid:null,table:null},F={};for(var L in function(w,M){for(var q,F=0,L=rl;L<w.byteLength;)if(71!==w[F]||71!==w[L])F++,L++;else{switch(q=w.subarray(F,L),to.ts.parseType(q,M.pid)){case"pat":M.pid=to.ts.parsePat(q);break;case"pmt":var Be=to.ts.parsePmt(q);M.table=M.table||{},Object.keys(Be).forEach(function(He){M.table[He]=Be[He]})}F+=rl,L+=rl}}(w,M),M.table)if(M.table.hasOwnProperty(L))switch(M.table[L]){case W_.H264_STREAM_TYPE:F.video=[],TT(w,M,F),0===F.video.length&&delete F.video;break;case W_.ADTS_STREAM_TYPE:F.audio=[],Lb(w,M,F),0===F.audio.length&&delete F.audio}return F}(w),L&&(L.audio||L.video)?(function(w,M){if(w.audio&&w.audio.length){var F=M;(typeof F>"u"||isNaN(F))&&(F=w.audio[0].dts),w.audio.forEach(function(re){re.dts=Dg(re.dts,F),re.pts=Dg(re.pts,F),re.dtsTime=re.dts/Ig,re.ptsTime=re.pts/Ig})}if(w.video&&w.video.length){var L=M;if((typeof L>"u"||isNaN(L))&&(L=w.video[0].dts),w.video.forEach(function(re){re.dts=Dg(re.dts,L),re.pts=Dg(re.pts,L),re.dtsTime=re.dts/Ig,re.ptsTime=re.pts/Ig}),w.firstKeyFrame){var q=w.firstKeyFrame;q.dts=Dg(q.dts,L),q.pts=Dg(q.pts,L),q.dtsTime=q.dts/Ig,q.ptsTime=q.pts/Ig}}}(L,M),L):null};class K_{constructor(M,F){this.options=F||{},this.self=M,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new wy.Transmuxer(this.options),function(w,M){M.on("data",function(F){const L=F.initSegment;F.initSegment={data:L.buffer,byteOffset:L.byteOffset,byteLength:L.byteLength};const q=F.data;F.data=q.buffer,w.postMessage({action:"data",segment:F,byteOffset:q.byteOffset,byteLength:q.byteLength},[F.data])}),M.on("done",function(F){w.postMessage({action:"done"})}),M.on("gopInfo",function(F){w.postMessage({action:"gopInfo",gopInfo:F})}),M.on("videoSegmentTimingInfo",function(F){const L={start:{decode:bo.videoTsToSeconds(F.start.dts),presentation:bo.videoTsToSeconds(F.start.pts)},end:{decode:bo.videoTsToSeconds(F.end.dts),presentation:bo.videoTsToSeconds(F.end.pts)},baseMediaDecodeTime:bo.videoTsToSeconds(F.baseMediaDecodeTime)};F.prependedContentDuration&&(L.prependedContentDuration=bo.videoTsToSeconds(F.prependedContentDuration)),w.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:L})}),M.on("audioSegmentTimingInfo",function(F){const L={start:{decode:bo.videoTsToSeconds(F.start.dts),presentation:bo.videoTsToSeconds(F.start.pts)},end:{decode:bo.videoTsToSeconds(F.end.dts),presentation:bo.videoTsToSeconds(F.end.pts)},baseMediaDecodeTime:bo.videoTsToSeconds(F.baseMediaDecodeTime)};F.prependedContentDuration&&(L.prependedContentDuration=bo.videoTsToSeconds(F.prependedContentDuration)),w.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:L})}),M.on("id3Frame",function(F){w.postMessage({action:"id3Frame",id3Frame:F})}),M.on("caption",function(F){w.postMessage({action:"caption",caption:F})}),M.on("trackinfo",function(F){w.postMessage({action:"trackinfo",trackInfo:F})}),M.on("audioTimingInfo",function(F){w.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:bo.videoTsToSeconds(F.start),end:bo.videoTsToSeconds(F.end)}})}),M.on("videoTimingInfo",function(F){w.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:bo.videoTsToSeconds(F.start),end:bo.videoTsToSeconds(F.end)}})}),M.on("log",function(F){w.postMessage({action:"log",log:F})})}(this.self,this.transmuxer)}pushMp4Captions(M){this.captionParser||(this.captionParser=new _f,this.captionParser.init());const F=new Uint8Array(M.data,M.byteOffset,M.byteLength),L=this.captionParser.parse(F,M.trackIds,M.timescales);this.self.postMessage({action:"mp4Captions",captions:L&&L.captions||[],logs:L&&L.logs||[],data:F.buffer},[F.buffer])}probeMp4StartTime({timescales:M,data:F}){const L=Ti_startTime(M,F);this.self.postMessage({action:"probeMp4StartTime",startTime:L,data:F},[F.buffer])}probeMp4Tracks({data:M}){const F=Ti_tracks(M);this.self.postMessage({action:"probeMp4Tracks",tracks:F,data:M},[M.buffer])}probeTs({data:M,baseStartTime:F}){const L="number"!=typeof F||isNaN(F)?void 0:F*bo.ONE_SECOND_IN_TS,q=Fb_inspect(M,L);let re=null;q&&(re={hasVideo:q.video&&2===q.video.length||!1,hasAudio:q.audio&&2===q.audio.length||!1},re.hasVideo&&(re.videoStart=q.video[0].ptsTime),re.hasAudio&&(re.audioStart=q.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:re,data:M},[M.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(M){const F=new Uint8Array(M.data,M.byteOffset,M.byteLength);this.transmuxer.push(F)}reset(){this.transmuxer.reset()}setTimestampOffset(M){this.transmuxer.setBaseMediaDecodeTime(Math.round(bo.secondsToVideoTs(M.timestampOffset||0)))}setAudioAppendStart(M){this.transmuxer.setAudioAppendStart(Math.ceil(bo.secondsToVideoTs(M.appendStart)))}setRemux(M){this.transmuxer.setRemux(M.remux)}flush(M){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(M){this.transmuxer.alignGopsWith(M.gopsToAlignWith.slice())}}self.onmessage=function(w){"init"===w.data.action&&w.data.options?this.messageHandlers=new K_(self,w.data.options):(this.messageHandlers||(this.messageHandlers=new K_(self)),w.data&&w.data.action&&"init"!==w.data.action&&this.messageHandlers[w.data.action]&&this.messageHandlers[w.data.action](w.data))}}));var nh=Ju(Fp);const Wg=c=>{const{transmuxer:t,bytes:i,audioAppendStart:l,gopsToAlignWith:f,remux:v,onData:E,onTrackInfo:I,onAudioTimingInfo:$,onVideoTimingInfo:ce,onVideoSegmentTimingInfo:me,onAudioSegmentTimingInfo:ze,onId3:It,onCaptions:xt,onDone:it,onEndedTimeline:Gt,onTransmuxerLog:en,isEndOfTimeline:an}=c,Qt={buffer:[]};let Sn=an;if(t.onmessage=Ht=>{t.currentTransmux===c&&("data"===Ht.data.action&&((c,t,i)=>{const{type:l,initSegment:f,captions:v,captionStreams:E,metadata:I,videoFrameDtsTime:$,videoFramePtsTime:ce}=c.data.segment;t.buffer.push({captions:v,captionStreams:E,metadata:I});const me=c.data.segment.boxes||{data:c.data.segment.data},ze={type:l,data:new Uint8Array(me.data,me.data.byteOffset,me.data.byteLength),initSegment:new Uint8Array(f.data,f.byteOffset,f.byteLength)};typeof $<"u"&&(ze.videoFrameDtsTime=$),typeof ce<"u"&&(ze.videoFramePtsTime=ce),i(ze)})(Ht,Qt,E),"trackinfo"===Ht.data.action&&I(Ht.data.trackInfo),"gopInfo"===Ht.data.action&&((c,t)=>{t.gopInfo=c.data.gopInfo})(Ht,Qt),"audioTimingInfo"===Ht.data.action&&$(Ht.data.audioTimingInfo),"videoTimingInfo"===Ht.data.action&&ce(Ht.data.videoTimingInfo),"videoSegmentTimingInfo"===Ht.data.action&&me(Ht.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===Ht.data.action&&ze(Ht.data.audioSegmentTimingInfo),"id3Frame"===Ht.data.action&&It([Ht.data.id3Frame],Ht.data.id3Frame.dispatchType),"caption"===Ht.data.action&&xt(Ht.data.caption),"endedtimeline"===Ht.data.action&&(Sn=!1,Gt()),"log"===Ht.data.action&&en(Ht.data.log),"transmuxed"===Ht.data.type&&(Sn||(t.onmessage=null,(({transmuxedData:c,callback:t})=>{c.buffer=[],t(c)})({transmuxedData:Qt,callback:it}),jp(t))))},l&&t.postMessage({action:"setAudioAppendStart",appendStart:l}),Array.isArray(f)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:f}),typeof v<"u"&&t.postMessage({action:"setRemux",remux:v}),i.byteLength){const Ht=i instanceof ArrayBuffer?i:i.buffer,Gn=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:Ht,byteOffset:Gn,byteLength:i.byteLength},[Ht])}an&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},jp=c=>{c.currentTransmux=null,c.transmuxQueue.length&&(c.currentTransmux=c.transmuxQueue.shift(),"function"==typeof c.currentTransmux?c.currentTransmux():Wg(c.currentTransmux))},Jy=(c,t)=>{c.postMessage({action:t}),jp(c)};var Kg_reset=c=>{((c,t)=>{if(!t.currentTransmux)return t.currentTransmux=c,void Jy(t,c);t.transmuxQueue.push(Jy.bind(null,t,c))})("reset",c)};const Zl=function(c){const t=c.transmuxer,i=c.endAction||c.action,l=c.callback,f=Bt({},c,{endAction:null,transmuxer:null,callback:null}),v=E=>{E.data.action===i&&(t.removeEventListener("message",v),E.data.data&&(E.data.data=new Uint8Array(E.data.data,c.byteOffset||0,c.byteLength||E.data.data.byteLength),c.data&&(c.data=E.data.data)),l(E.data))};if(t.addEventListener("message",v),c.data){const E=c.data instanceof ArrayBuffer;f.byteOffset=E?0:c.data.byteOffset,f.byteLength=c.data.byteLength,t.postMessage(f,[E?c.data:c.data.buffer])}else t.postMessage(f)},Zg=c=>{c.forEach(t=>{t.abort()})},hv=(c,t)=>t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:-101,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:-102,xhr:t}:c?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null,m_=(c,t,i)=>(l,f)=>{const v=f.response,E=hv(l,f);if(E)return i(E,c);if(16!==v.byteLength)return i({status:f.status,message:"Invalid HLS key at URL: "+f.uri,code:2,xhr:f},c);const I=new DataView(v),$=new Uint32Array([I.getUint32(0),I.getUint32(4),I.getUint32(8),I.getUint32(12)]);for(let ce=0;ce<t.length;ce++)t[ce].bytes=$;return i(null,c)},e0=(c,t)=>{const i=lr(c.map.bytes);if("mp4"!==i)return t({internal:!0,message:`Found unsupported ${i||"unknown"} container for initialization segment at URL: ${c.map.resolvedUri||c.map.uri}`,code:2});Zl({action:"probeMp4Tracks",data:c.map.bytes,transmuxer:c.transmuxer,callback:({tracks:l,data:f})=>(c.map.bytes=f,l.forEach(function(v){c.map.tracks=c.map.tracks||{},!c.map.tracks[v.type]&&(c.map.tracks[v.type]=v,"number"==typeof v.id&&v.timescale&&(c.map.timescales=c.map.timescales||{},c.map.timescales[v.id]=v.timescale))}),t(null))})},sb=({segment:c,bytes:t,trackInfoFn:i,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:I,isEndOfTimeline:$,endedTimelineFn:ce,dataFn:me,doneFn:ze,onTransmuxerLog:It})=>{const xt=c.map&&c.map.tracks||{},it=!(!xt.audio||!xt.video);let Gt=l.bind(null,c,"audio","start");const en=l.bind(null,c,"audio","end");let an=l.bind(null,c,"video","start");const Qt=l.bind(null,c,"video","end");Zl({action:"probeTs",transmuxer:c.transmuxer,data:t,baseStartTime:c.baseStartTime,callback:fn=>{c.bytes=t=fn.data;const Ht=fn.result;Ht&&(i(c,{hasAudio:Ht.hasAudio,hasVideo:Ht.hasVideo,isMuxed:it}),i=null,Ht.hasAudio&&!it&&Gt(Ht.audioStart),Ht.hasVideo&&an(Ht.videoStart),Gt=null,an=null),(c=>{if(!c.transmuxer.currentTransmux)return c.transmuxer.currentTransmux=c,void Wg(c);c.transmuxer.transmuxQueue.push(c)})({bytes:t,transmuxer:c.transmuxer,audioAppendStart:c.audioAppendStart,gopsToAlignWith:c.gopsToAlignWith,remux:it,onData:fn=>{fn.type="combined"===fn.type?"video":fn.type,me(c,fn)},onTrackInfo:fn=>{i&&(it&&(fn.isMuxed=!0),i(c,fn))},onAudioTimingInfo:fn=>{Gt&&typeof fn.start<"u"&&(Gt(fn.start),Gt=null),en&&typeof fn.end<"u"&&en(fn.end)},onVideoTimingInfo:fn=>{an&&typeof fn.start<"u"&&(an(fn.start),an=null),Qt&&typeof fn.end<"u"&&Qt(fn.end)},onVideoSegmentTimingInfo:fn=>{f(fn)},onAudioSegmentTimingInfo:fn=>{v(fn)},onId3:(fn,Ht)=>{E(c,fn,Ht)},onCaptions:fn=>{I(c,[fn])},isEndOfTimeline:$,onEndedTimeline:()=>{ce()},onTransmuxerLog:It,onDone:fn=>{ze&&(fn.type="combined"===fn.type?"video":fn.type,ze(null,c,fn))}})}})},Up=({segment:c,bytes:t,trackInfoFn:i,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:I,isEndOfTimeline:$,endedTimelineFn:ce,dataFn:me,doneFn:ze,onTransmuxerLog:It})=>{let xt=new Uint8Array(t);if(function(t){return jr(t,["moof"]).length>0}(xt)){c.isFmp4=!0;const{tracks:it}=c.map,Gt={isFmp4:!0,hasVideo:!!it.video,hasAudio:!!it.audio};it.audio&&it.audio.codec&&"enca"!==it.audio.codec&&(Gt.audioCodec=it.audio.codec),it.video&&it.video.codec&&"encv"!==it.video.codec&&(Gt.videoCodec=it.video.codec),it.video&&it.audio&&(Gt.isMuxed=!0),i(c,Gt);const en=an=>{me(c,{data:xt,type:Gt.hasAudio&&!Gt.isMuxed?"audio":"video"}),an&&an.length&&I(c,an),ze(null,c,{})};Zl({action:"probeMp4StartTime",timescales:c.map.timescales,data:xt,transmuxer:c.transmuxer,callback:({data:an,startTime:Qt})=>{t=an.buffer,c.bytes=xt=an,Gt.hasAudio&&!Gt.isMuxed&&l(c,"audio","start",Qt),Gt.hasVideo&&l(c,"video","start",Qt),it.video&&an.byteLength&&c.transmuxer?Zl({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:c.transmuxer,data:xt,timescales:c.map.timescales,trackIds:[it.video.id],callback:Sn=>{t=Sn.data.buffer,c.bytes=xt=Sn.data,Sn.logs.forEach(function(fn){It(ms(fn,{stream:"mp4CaptionParser"}))}),en(Sn.captions)}}):en()}})}else{if(c.transmuxer)return typeof c.container>"u"&&(c.container=lr(xt)),"ts"!==c.container&&"aac"!==c.container?(i(c,{hasAudio:!1,hasVideo:!1}),void ze(null,c,{})):void sb({segment:c,bytes:t,trackInfoFn:i,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:I,isEndOfTimeline:$,endedTimelineFn:ce,dataFn:me,doneFn:ze,onTransmuxerLog:It});ze(null,c,{})}},t0=function({id:c,key:t,encryptedBytes:i,decryptionWorker:l},f){const v=I=>{if(I.data.source===c){l.removeEventListener("message",v);const $=I.data.decrypted;f(new Uint8Array($.bytes,$.byteOffset,$.byteLength))}};let E;l.addEventListener("message",v),E=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),l.postMessage(Kh({source:c,encrypted:i,key:E,iv:t.iv}),[i.buffer,E.buffer])},Vf=({xhr:c,xhrOptions:t,decryptionWorker:i,segment:l,abortFn:f,progressFn:v,trackInfoFn:E,timingInfoFn:I,videoSegmentTimingInfoFn:$,audioSegmentTimingInfoFn:ce,id3Fn:me,captionsFn:ze,isEndOfTimeline:It,endedTimelineFn:xt,dataFn:it,doneFn:Gt,onTransmuxerLog:en})=>{const an=[],Qt=(({activeXhrs:c,decryptionWorker:t,trackInfoFn:i,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:I,isEndOfTimeline:$,endedTimelineFn:ce,dataFn:me,doneFn:ze,onTransmuxerLog:It})=>{let xt=0,it=!1;return(Gt,en)=>{if(!it){if(Gt)return it=!0,Zg(c),ze(Gt,en);if(xt+=1,xt===c.length){const an=function(){if(en.encryptedBytes)return(({decryptionWorker:c,segment:t,trackInfoFn:i,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:I,isEndOfTimeline:$,endedTimelineFn:ce,dataFn:me,doneFn:ze,onTransmuxerLog:It})=>{t0({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:c},xt=>{t.bytes=xt,Up({segment:t,bytes:t.bytes,trackInfoFn:i,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:I,isEndOfTimeline:$,endedTimelineFn:ce,dataFn:me,doneFn:ze,onTransmuxerLog:It})})})({decryptionWorker:t,segment:en,trackInfoFn:i,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:I,isEndOfTimeline:$,endedTimelineFn:ce,dataFn:me,doneFn:ze,onTransmuxerLog:It});Up({segment:en,bytes:en.bytes,trackInfoFn:i,timingInfoFn:l,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:E,captionsFn:I,isEndOfTimeline:$,endedTimelineFn:ce,dataFn:me,doneFn:ze,onTransmuxerLog:It})};if(en.endOfAllRequests=Date.now(),en.map&&en.map.encryptedBytes&&!en.map.bytes)return t0({decryptionWorker:t,id:en.requestId+"-init",encryptedBytes:en.map.encryptedBytes,key:en.map.key},Qt=>{en.map.bytes=Qt,e0(en,Sn=>{if(Sn)return Zg(c),ze(Sn,en);an()})});an()}}}})({activeXhrs:an,decryptionWorker:i,trackInfoFn:E,timingInfoFn:I,videoSegmentTimingInfoFn:$,audioSegmentTimingInfoFn:ce,id3Fn:me,captionsFn:ze,isEndOfTimeline:It,endedTimelineFn:xt,dataFn:it,doneFn:Gt,onTransmuxerLog:en});if(l.key&&!l.key.bytes){const Dr=[l.key];l.map&&!l.map.bytes&&l.map.key&&l.map.key.resolvedUri===l.key.resolvedUri&&Dr.push(l.map.key);const Qi=c(ms(t,{uri:l.key.resolvedUri,responseType:"arraybuffer"}),m_(l,Dr,Qt));an.push(Qi)}if(l.map&&!l.map.bytes){if(l.map.key&&(!l.key||l.key.resolvedUri!==l.map.key.resolvedUri)){const pr=c(ms(t,{uri:l.map.key.resolvedUri,responseType:"arraybuffer"}),m_(l,[l.map.key],Qt));an.push(pr)}const mi=ms(t,{uri:l.map.resolvedUri,responseType:"arraybuffer",headers:Hg(l.map)}),Hi=(({segment:c,finishProcessingFn:t})=>(i,l)=>{const f=hv(i,l);if(f)return t(f,c);const v=new Uint8Array(l.response);if(c.map.key)return c.map.encryptedBytes=v,t(null,c);c.map.bytes=v,e0(c,function(E){if(E)return E.xhr=l,E.status=l.status,t(E,c);t(null,c)})})({segment:l,finishProcessingFn:Qt}),Qi=c(mi,Hi);an.push(Qi)}const Sn=ms(t,{uri:l.part&&l.part.resolvedUri||l.resolvedUri,responseType:"arraybuffer",headers:Hg(l)}),Ht=c(Sn,(({segment:c,finishProcessingFn:t,responseType:i})=>(l,f)=>{const v=hv(l,f);if(v)return t(v,c);const E="arraybuffer"!==i&&f.responseText?(c=>{const t=new Uint8Array(new ArrayBuffer(c.length));for(let i=0;i<c.length;i++)t[i]=c.charCodeAt(i);return t.buffer})(f.responseText.substring(c.lastReachedChar||0)):f.response;return c.stats=(c=>({bandwidth:c.bandwidth,bytesReceived:c.bytesReceived||0,roundTripTime:c.roundTripTime||0}))(f),c.key?c.encryptedBytes=new Uint8Array(E):c.bytes=new Uint8Array(E),t(null,c)})({segment:l,finishProcessingFn:Qt,responseType:Sn.responseType}));Ht.addEventListener("progress",(({segment:c,progressFn:t})=>ze=>{if(!ze.target.aborted)return c.stats=ms(c.stats,(c=>{const t=c.target,l={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return l.bytesReceived=c.loaded,l.bandwidth=Math.floor(l.bytesReceived/l.roundTripTime*8*1e3),l})(ze)),!c.stats.firstBytesReceivedAt&&c.stats.bytesReceived&&(c.stats.firstBytesReceivedAt=Date.now()),t(ze,c)})({segment:l,progressFn:v,trackInfoFn:E,timingInfoFn:I,videoSegmentTimingInfoFn:$,audioSegmentTimingInfoFn:ce,id3Fn:me,captionsFn:ze,isEndOfTimeline:It,endedTimelineFn:xt,dataFn:it})),an.push(Ht);const Gn={};return an.forEach(Dr=>{Dr.addEventListener("loadend",(({loadendState:c,abortFn:t})=>i=>{i.target.aborted&&t&&!c.calledAbortFn&&(t(),c.calledAbortFn=!0)})({loadendState:Gn,abortFn:f}))}),()=>Zg(an)},Hp=aa("CodecUtils"),ih=(c,t)=>{const i=t.attributes||{};return c&&c.mediaGroups&&c.mediaGroups.AUDIO&&i.AUDIO&&c.mediaGroups.AUDIO[i.AUDIO]},Kc=function(c){const t={};return c.forEach(({mediaType:i,type:l,details:f})=>{t[i]=t[i]||[],t[i].push(zn(`${l}${f}`))}),Object.keys(t).forEach(function(i){if(t[i].length>1)return Hp(`multiple ${i} codecs found as attributes: ${t[i].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[i]=null);t[i]=t[i][0]}),t},sh=function(c){let t=0;return c.audio&&t++,c.video&&t++,t},$f=function(c,t){const i=t.attributes||{},l=Kc(function(c){const t=c.attributes||{};if(t.CODECS)return $n(t.CODECS)}(t)||[]);if(ih(c,t)&&!l.audio&&!((c,t)=>{if(!ih(c,t))return!0;const l=c.mediaGroups.AUDIO[(t.attributes||{}).AUDIO];for(const f in l)if(!l[f].uri&&!l[f].playlists)return!0;return!1})(c,t)){const f=Kc(function(t,i){if(!t.mediaGroups.AUDIO||!i)return null;var l=t.mediaGroups.AUDIO[i];if(!l)return null;for(var f in l){var v=l[f];if(v.default&&v.playlists)return $n(v.playlists[0].attributes.CODECS)}return null}(c,i.AUDIO)||[]);f.audio&&(l.audio=f.audio)}return l},oh=aa("PlaylistSelector"),zp=function(c){if(!c||!c.playlist)return;const t=c.playlist;return JSON.stringify({id:t.id,bandwidth:c.bandwidth,width:c.width,height:c.height,codecs:t.attributes&&t.attributes.CODECS||""})},qp=function(c,t){if(!c)return"";const i=le().getComputedStyle(c);return i?i[t]:""},Qh=function(c,t){const i=c.slice();c.sort(function(l,f){const v=t(l,f);return 0===v?i.indexOf(l)-i.indexOf(f):v})},Qg=function(c,t){let i,l;return c.attributes.BANDWIDTH&&(i=c.attributes.BANDWIDTH),i=i||le().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(l=t.attributes.BANDWIDTH),l=l||le().Number.MAX_VALUE,i-l};let gv=function(c,t,i,l,f,v){if(!c)return;const E={bandwidth:t,width:i,height:l,limitRenditionByPlayerDimensions:f};let I=c.playlists;ka.isAudioOnly(c)&&(I=v.getAudioTrackPlaylists_(),E.audioOnly=!0);let $=I.map(Ht=>{let Gn;const Dr=Ht.attributes&&Ht.attributes.RESOLUTION&&Ht.attributes.RESOLUTION.width,mi=Ht.attributes&&Ht.attributes.RESOLUTION&&Ht.attributes.RESOLUTION.height;return Gn=Ht.attributes&&Ht.attributes.BANDWIDTH,Gn=Gn||le().Number.MAX_VALUE,{bandwidth:Gn,width:Dr,height:mi,playlist:Ht}});Qh($,(Ht,Gn)=>Ht.bandwidth-Gn.bandwidth),$=$.filter(Ht=>!ka.isIncompatible(Ht.playlist));let ce=$.filter(Ht=>ka.isEnabled(Ht.playlist));ce.length||(ce=$.filter(Ht=>!ka.isDisabled(Ht.playlist)));const me=ce.filter(Ht=>Ht.bandwidth*Ma.BANDWIDTH_VARIANCE<t);let ze=me[me.length-1];const It=me.filter(Ht=>Ht.bandwidth===ze.bandwidth)[0];if(!1===f){const Ht=It||ce[0]||$[0];if(Ht&&Ht.playlist){let Gn="sortedPlaylistReps";return It&&(Gn="bandwidthBestRep"),ce[0]&&(Gn="enabledPlaylistReps"),oh(`choosing ${zp(Ht)} using ${Gn} with options`,E),Ht.playlist}return oh("could not choose a playlist with options",E),null}const xt=me.filter(Ht=>Ht.width&&Ht.height);Qh(xt,(Ht,Gn)=>Ht.width-Gn.width);const it=xt.filter(Ht=>Ht.width===i&&Ht.height===l);ze=it[it.length-1];const Gt=it.filter(Ht=>Ht.bandwidth===ze.bandwidth)[0];let en,an,Qt,Sn;if(Gt||(en=xt.filter(Ht=>Ht.width>i||Ht.height>l),an=en.filter(Ht=>Ht.width===en[0].width&&Ht.height===en[0].height),ze=an[an.length-1],Qt=an.filter(Ht=>Ht.bandwidth===ze.bandwidth)[0]),v.leastPixelDiffSelector){const Ht=xt.map(Gn=>(Gn.pixelDiff=Math.abs(Gn.width-i)+Math.abs(Gn.height-l),Gn));Qh(Ht,(Gn,Dr)=>Gn.pixelDiff===Dr.pixelDiff?Dr.bandwidth-Gn.bandwidth:Gn.pixelDiff-Dr.pixelDiff),Sn=Ht[0]}const fn=Sn||Qt||Gt||It||ce[0]||$[0];if(fn&&fn.playlist){let Ht="sortedPlaylistReps";return Sn?Ht="leastPixelDiffRep":Qt?Ht="resolutionPlusOneRep":Gt?Ht="resolutionBestRep":It?Ht="bandwidthBestRep":ce[0]&&(Ht="enabledPlaylistReps"),oh(`choosing ${zp(fn)} using ${Ht} with options`,E),fn.playlist}return oh("could not choose a playlist with options",E),null};const mv=function(){const c=this.useDevicePixelRatio&&le().devicePixelRatio||1;return gv(this.playlists.main,this.systemBandwidth,parseInt(qp(this.tech_.el(),"width"),10)*c,parseInt(qp(this.tech_.el(),"height"),10)*c,this.limitRenditionByPlayerDimensions,this.playlistController_)},Hf=function(c,t,i){let l,f;if(i&&i.cues)for(l=i.cues.length;l--;)f=i.cues[l],f.startTime>=c&&f.endTime<=t&&i.removeCue(f)},Zp=c=>"number"==typeof c&&isFinite(c),Xh=1/60,Jh=c=>{const{startOfSegment:t,duration:i,segment:l,part:f,playlist:{mediaSequence:v,id:E,segments:I=[]},mediaIndex:$,partIndex:ce,timeline:me}=c,ze=I.length-1;let It="mediaIndex/partIndex increment";c.getMediaInfoForTime?It=`getMediaInfoForTime (${c.getMediaInfoForTime})`:c.isSyncRequest&&(It="getSyncSegmentCandidate (isSyncRequest)"),c.independent&&(It+=` with independent ${c.independent}`);const xt="number"==typeof ce,it=c.segment.uri?"segment":"pre-segment",Gt=xt?wc({preloadSegment:l})-1:0;return`${it} [${v+$}/${v+ze}]`+(xt?` part [${ce}/${Gt}]`:"")+` segment start/end [${l.start} => ${l.end}]`+(xt?` part start/end [${f.start} => ${f.end}]`:"")+` startOfSegment [${t}] duration [${i}] timeline [${me}] selected by [${It}] playlist [${E}]`},Ev=c=>`${c}TimingInfo`,ef=({timelineChangeController:c,currentTimeline:t,segmentTimeline:i,loaderType:l,audioDisabled:f})=>{if(t===i)return!1;if("audio"===l){const v=c.lastTimelineChange({type:"main"});return!v||v.to!==i}if("main"===l&&f){const v=c.pendingTimelineChange({type:"audio"});return!(v&&v.to===i)}return!1},Cv=({segmentDuration:c,maxDuration:t})=>!!c&&Math.round(c)>t+Mu;class ga extends gt.EventTarget{constructor(t,i={}){if(super(),!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.vhs_=t.vhs,this.loaderType_=t.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.sourceType_=t.sourceType,this.sourceUpdater_=t.sourceUpdater,this.inbandTextTracks_=t.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=t.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=t.parse708captions,this.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,this.captionServices_=t.captionServices,this.exactManifestTimings=t.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=gt.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=t.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=aa(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(l){l!==this.state_&&(this.logger_(`${this.state_} -> ${l}`),this.state_=l,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return(c=>{const t=new nh;t.currentTransmux=null,t.transmuxQueue=[];const i=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)),t.postMessage({action:"init",options:c}),t})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&le().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,le().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)}error(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Kg_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return ua();if("main"===this.loaderType_){const{hasAudio:i,hasVideo:l,isMuxed:f}=t;if(l&&i&&!this.audioDisabled_&&!f)return this.sourceUpdater_.buffered();if(l)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(t,i=!1){if(!t)return null;const l=Kl(t);let f=this.initSegments_[l];return i&&!f&&t.bytes&&(this.initSegments_[l]=f={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),f||t}segmentKey(t,i=!1){if(!t)return null;const l=Td(t);let f=this.keyCache_[l];this.cacheEncryptionKeys_&&i&&!f&&t.bytes&&(this.keyCache_[l]=f={resolvedUri:t.resolvedUri,bytes:t.bytes});const v={resolvedUri:(f||t).resolvedUri};return f&&(v.bytes=f.bytes),v}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(t,i={}){if(!t)return;const l=this.playlist_,f=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=i,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));let v=null;if(l&&(l.id?v=l.id:l.uri&&(v=l.uri)),this.logger_(`playlist update [${v} => ${t.id||t.uri}]`),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!l||l.uri!==t.uri)return null!==this.mediaIndex&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const E=t.mediaSequence-l.mediaSequence;if(this.logger_(`live window shift [${E}]`),null!==this.mediaIndex)if(this.mediaIndex-=E,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const I=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!I.parts||!I.parts.length||!I.parts[this.partIndex])){const $=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=$}}f&&(f.mediaIndex-=E,f.mediaIndex<0?(f.mediaIndex=null,f.partIndex=null):(f.mediaIndex>=0&&(f.segment=t.segments[f.mediaIndex]),f.partIndex>=0&&f.segment.parts&&(f.part=f.segment.parts[f.partIndex]))),this.syncController_.saveExpiredSegmentInfo(l,t)}pause(){this.checkBufferTimeout_&&(le().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&Kg_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(t,i,l=(()=>{}),f=!1){if(i===1/0&&(i=this.duration_()),i<=t)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let v=1;const E=()=>{v--,0===v&&l()};(f||!this.audioDisabled_)&&(v++,this.sourceUpdater_.removeAudio(t,i,E)),(f||"main"===this.loaderType_)&&(this.gopBuffer_=((c,t,i,l)=>{const f=Math.ceil((t-l)*Oi.ONE_SECOND_IN_TS),v=Math.ceil((i-l)*Oi.ONE_SECOND_IN_TS),E=c.slice();let I=c.length;for(;I--&&!(c[I].pts<=v););if(-1===I)return E;let $=I+1;for(;$--&&!(c[$].pts<=f););return $=Math.max($,0),E.splice($,I-$+1),E})(this.gopBuffer_,t,i,this.timeMapping_),v++,this.sourceUpdater_.removeVideo(t,i,E));for(const I in this.inbandTextTracks_)Hf(t,i,this.inbandTextTracks_[I]);Hf(t,i,this.segmentMetadataTrack_),E()}monitorBuffer_(){this.checkBufferTimeout_&&le().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=le().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&le().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=le().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const t=this.chooseNextRequest_();t&&("number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}isEndOfStream_(t=this.mediaIndex,i=this.playlist_,l=this.partIndex){if(!i||!this.mediaSource_)return!1;const f="number"==typeof t&&i.segments[t];return i.endList&&"open"===this.mediaSource_.readyState&&t+1===i.segments.length&&(!f||!f.parts||l+1===f.parts.length)}chooseNextRequest_(){const t=this.buffered_(),i=Hm(t)||0,l=_o(t,this.currentTime_()),f=!this.hasPlayed_()&&l>=1,v=l>=this.goalBufferLength_(),E=this.playlist_.segments;if(!E.length||f||v)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const I={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(I.isSyncRequest)I.mediaIndex=function(c,t,i){t=t||[];const l=[];let f=0;for(let v=0;v<t.length;v++){const E=t[v];if(c===E.timeline&&(l.push(v),f+=E.duration,f>i))return v}return 0===l.length?0:l[l.length-1]}(this.currentTimeline_,E,i);else if(null!==this.mediaIndex){const ze=E[this.mediaIndex],It="number"==typeof this.partIndex?this.partIndex:-1;I.startOfSegment=ze.end?ze.end:i,ze.parts&&ze.parts[It+1]?(I.mediaIndex=this.mediaIndex,I.partIndex=It+1):I.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:ze,startTime:It,partIndex:xt}=ka.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?i:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});I.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${i}`:`currentTime ${this.currentTime_()}`,I.mediaIndex=ze,I.startOfSegment=It,I.partIndex=xt}const $=E[I.mediaIndex];let ce=$&&"number"==typeof I.partIndex&&$.parts&&$.parts[I.partIndex];if(!$||"number"==typeof I.partIndex&&!ce)return null;if("number"!=typeof I.partIndex&&$.parts&&(I.partIndex=0,ce=$.parts[0]),!l&&ce&&!ce.independent)if(0===I.partIndex){const ze=E[I.mediaIndex-1],It=ze.parts&&ze.parts.length&&ze.parts[ze.parts.length-1];It&&It.independent&&(I.mediaIndex-=1,I.partIndex=ze.parts.length-1,I.independent="previous segment")}else $.parts[I.partIndex-1].independent&&(I.partIndex-=1,I.independent="previous part");return I.mediaIndex>=E.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(I)}generateSegmentInfo_(t){const{independent:i,playlist:l,mediaIndex:f,startOfSegment:v,isSyncRequest:E,partIndex:I,forceTimestampOffset:$,getMediaInfoForTime:ce}=t,me=l.segments[f],ze="number"==typeof I&&me.parts[I],It={requestId:"segment-loader-"+Math.random(),uri:ze&&ze.resolvedUri||me.resolvedUri,mediaIndex:f,partIndex:ze?I:null,isSyncRequest:E,startOfSegment:v,playlist:l,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:me.timeline,duration:ze&&ze.duration||me.duration,segment:me,part:ze,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:ce,independent:i},xt=typeof $<"u"?$:this.isPendingTimestampOffset_;It.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:me.timeline,currentTimeline:this.currentTimeline_,startOfSegment:v,buffered:this.buffered_(),overrideCheck:xt});const it=Hm(this.sourceUpdater_.audioBuffered());return"number"==typeof it&&(It.audioAppendStart=it-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(It.gopsToAlignWith=((c,t,i)=>{if(typeof t>"u"||null===t||!c.length)return[];const l=Math.ceil((t-this.timeMapping_+3)*Oi.ONE_SECOND_IN_TS);let f;for(f=0;f<c.length&&!(c[f].pts>l);f++);return c.slice(f)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset())),It}timestampOffsetForSegment_(t){return(({segmentTimeline:c,currentTimeline:t,startOfSegment:i,buffered:l,overrideCheck:f})=>f||c!==t?c<t?i:l.length?l.end(l.length-1):i:null)(t)}earlyAbortWhenNeeded_(t){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return;const i=this.currentTime_(),l=t.bandwidth,f=this.pendingSegment_.duration,v=ka.estimateSegmentRequestTime(f,l,this.playlist_,t.bytesReceived),E=function(c,t,i=1){return((c.length?c.end(c.length-1):0)-t)/i}(this.buffered_(),i,this.vhs_.tech_.playbackRate())-1;if(v<=E)return;const I=function(c){const{main:t,currentTime:i,bandwidth:l,duration:f,segmentDuration:v,timeUntilRebuffer:E,currentTimeline:I,syncController:$}=c,ce=t.playlists.filter(it=>!ka.isIncompatible(it));let me=ce.filter(ka.isEnabled);me.length||(me=ce.filter(it=>!ka.isDisabled(it)));const It=me.filter(ka.hasAttribute.bind(null,"BANDWIDTH")).map(it=>{const en=$.getSyncPoint(it,f,I,i)?1:2;return{playlist:it,rebufferingImpact:ka.estimateSegmentRequestTime(v,l,it)*en-E}}),xt=It.filter(it=>it.rebufferingImpact<=0);return Qh(xt,(it,Gt)=>Qg(Gt.playlist,it.playlist)),xt.length?xt[0]:(Qh(It,(it,Gt)=>it.rebufferingImpact-Gt.rebufferingImpact),It[0]||null)}({main:this.vhs_.playlists.main,currentTime:i,bandwidth:l,duration:this.duration_(),segmentDuration:f,timeUntilRebuffer:E,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!I)return;let me=.5;E<=Mu&&(me=1),I.playlist&&I.playlist.uri!==this.playlist_.uri&&!(v-E-I.rebufferingImpact<me)&&(this.bandwidth=I.playlist.attributes.BANDWIDTH*Ma.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(t){this.logger_(`Aborting ${Jh(t)}`),this.mediaRequestsAborted+=1}handleProgress_(t,i){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&this.trigger("progress")}handleTrackInfo_(t,i){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(i)||(function(c,t){if(!c&&!t||!c&&t||c&&!t)return!1;if(c===t)return!0;const i=Object.keys(c).sort(),l=Object.keys(t).sort();if(i.length!==l.length)return!1;for(let f=0;f<i.length;f++){const v=i[f];if(v!==l[f]||c[v]!==t[v])return!1}return!0}(this.currentMediaInfo_,i=i||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=i,this.currentMediaInfo_=i,this.logger_("trackinfo update",i),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=i,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(t,i,l,f){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;const v=this.pendingSegment_,E=Ev(i);v[E]=v[E]||{},v[E][l]=f,this.logger_(`timinginfo: ${i} - ${l} - ${f}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(t,i){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(0===i.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,i));const f=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),v={};i.forEach(E=>{v[E.stream]=v[E.stream]||{startTime:1/0,captions:[],endTime:0};const I=v[E.stream];I.startTime=Math.min(I.startTime,E.startTime+f),I.endTime=Math.max(I.endTime,E.endTime+f),I.captions.push(E)}),Object.keys(v).forEach(E=>{const{startTime:I,endTime:$,captions:ce}=v[E],me=this.inbandTextTracks_;this.logger_(`adding cues from ${I} -> ${$} for ${E}`),function(c,t,i){if(!c[i]){t.trigger({type:"usage",name:"vhs-608"});let l=i;/^cc708_/.test(i)&&(l="SERVICE"+i.split("_")[1]);const f=t.textTracks().getTrackById(l);if(f)c[i]=f;else{let E=i,I=i,$=!1;const ce=(t.options_.vhs&&t.options_.vhs.captionServices||{})[l];ce&&(E=ce.label,I=ce.language,$=ce.default),c[i]=t.addRemoteTextTrack({kind:"captions",id:l,default:$,label:E,language:I},!1).track}}}(me,this.vhs_.tech_,E),Hf(I,$,me[E]),function({inbandTextTracks:c,captionArray:t,timestampOffset:i}){if(!t)return;const l=le().WebKitDataCue||le().VTTCue;t.forEach(f=>{c[f.stream].addCue(new l(f.startTime+i,f.endTime+i,f.text))})}({captionArray:ce,inbandTextTracks:me,timestampOffset:f})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(t,i,l){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,i,l));const v=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();((c,t,i)=>{c.metadataTrack_||(c.metadataTrack_=this.vhs_.tech_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,c.metadataTrack_.inBandMetadataTrackDispatchType=t)})(this.inbandTextTracks_,l),(({inbandTextTracks:c,metadataArray:t,timestampOffset:i,videoDuration:l})=>{if(!t)return;const f=le().WebKitDataCue||le().VTTCue,v=c.metadataTrack_;if(!v||(t.forEach(me=>{const ze=me.cueTime+i;"number"!=typeof ze||le().isNaN(ze)||ze<0||!(ze<1/0)||me.frames.forEach(It=>{const xt=new f(ze,ze,It.value||It.url||It.data||"");xt.frame=It,xt.value=It,function(c){Object.defineProperties(c.frame,{id:{get:()=>(gt.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),c.value.key)},value:{get:()=>(gt.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),c.value.data)},privateData:{get:()=>(gt.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),c.value.data)}})}(xt),v.addCue(xt)})}),!v.cues||!v.cues.length))return;const E=v.cues,I=[];for(let me=0;me<E.length;me++)E[me]&&I.push(E[me]);const $=I.reduce((me,ze)=>{const It=me[ze.startTime]||[];return It.push(ze),me[ze.startTime]=It,me},{}),ce=Object.keys($).sort((me,ze)=>Number(me)-Number(ze));ce.forEach((me,ze)=>{const It=$[me],xt=Number(ce[ze+1])||l;It.forEach(it=>{it.endTime=xt})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:i,timestampOffset:v,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach(t=>t()),this.metadataQueue_.caption.forEach(t=>t()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const t=this.callQueue_;this.callQueue_=[],t.forEach(i=>i())}processLoadQueue_(){const t=this.loadQueue_;this.loadQueue_=[],t.forEach(i=>i())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&ef({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(t=this.pendingSegment_){return t&&t.trackInfo||this.currentMediaInfo_}getMediaInfo_(t=this.pendingSegment_){return this.getCurrentMediaInfo_(t)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const t=this.pendingSegment_,i=this.getCurrentMediaInfo_();if(!t||!i)return!1;const{hasAudio:l,hasVideo:f,isMuxed:v}=i;return!(f&&!t.videoTimingInfo||l&&!this.audioDisabled_&&!v&&!t.audioTimingInfo||ef({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(t,i){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,t,i));const l=this.pendingSegment_;if(this.setTimeMapping_(l.timeline),this.updateMediaSecondsLoaded_(l.part||l.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),l.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),l.isFmp4=t.isFmp4,l.timingInfo=l.timingInfo||{},l.isFmp4)this.trigger("fmp4"),l.timingInfo.start=l[Ev(i.type)].start;else{const f=this.getCurrentMediaInfo_(),v="main"===this.loaderType_&&f&&f.hasVideo;let E;v&&(E=l.videoTimingInfo.start),l.timingInfo.start=this.trueSegmentStart_({currentStart:l.timingInfo.start,playlist:l.playlist,mediaIndex:l.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:v,firstVideoFrameTimeForData:E,videoTimingInfo:l.videoTimingInfo,audioTimingInfo:l.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(l,i.type),this.updateSourceBufferTimestampOffset_(l),l.isSyncRequest){this.updateTimingInfoEnd_(l),this.syncController_.saveSegmentTimingInfo({segmentInfo:l,shouldSaveTimelineMapping:"main"===this.loaderType_});const f=this.chooseNextRequest_();if(f.mediaIndex!==l.mediaIndex||f.partIndex!==l.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}l.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(l,i)}}updateAppendInitSegmentStatus(t,i){"main"===this.loaderType_&&"number"==typeof t.timestampOffset&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[i]!==t.playlist&&(this.appendInitSegment_[i]=!0)}getInitSegmentAndUpdateState_({type:t,initSegment:i,map:l,playlist:f}){if(l){const v=Kl(l);if(this.activeInitSegmentId_===v)return null;i=this.initSegmentForMap(l,!0).bytes,this.activeInitSegmentId_=v}return i&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=f,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,i):null}handleQuotaExceededError_({segmentInfo:t,type:i,bytes:l},f){const v=this.sourceUpdater_.audioBuffered(),E=this.sourceUpdater_.videoBuffered();v.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ql(v).join(", ")),E.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ql(E).join(", "));const I=v.length?v.start(0):0,$=v.length?v.end(v.length-1):0,ce=E.length?E.start(0):0,me=E.length?E.end(E.length-1):0;if($-I<=1&&me-ce<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${l.byteLength}, audio buffer: ${ql(v).join(", ")}, video buffer: ${ql(E).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:t,type:i,bytes:l}));const It=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${It}`),this.remove(0,It,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=le().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:t,type:i,bytes:l},f){if(f){if(22===f.code)return void this.handleQuotaExceededError_({segmentInfo:t,type:i,bytes:l});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",f),this.error(`${i} append of ${l.length}b failed for segment #${t.mediaIndex} in playlist ${t.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:t,type:i,initSegment:l,data:f,bytes:v}){if(!v){const E=[f];let I=f.byteLength;l&&(E.unshift(l),I+=l.byteLength),v=(c=>{let i,t=0;return c.bytes&&(i=new Uint8Array(c.bytes),c.segments.forEach(l=>{i.set(l,t),t+=l.byteLength})),i})({bytes:I,segments:E})}this.sourceUpdater_.appendBuffer({segmentInfo:t,type:i,bytes:v},this.handleAppendError_.bind(this,{segmentInfo:t,type:i,bytes:v}))}handleSegmentTimingInfo_(t,i,l){if(!this.pendingSegment_||i!==this.pendingSegment_.requestId)return;const f=this.pendingSegment_.segment,v=`${t}TimingInfo`;f[v]||(f[v]={}),f[v].transmuxerPrependedSeconds=l.prependedContentDuration||0,f[v].transmuxedPresentationStart=l.start.presentation,f[v].transmuxedDecodeStart=l.start.decode,f[v].transmuxedPresentationEnd=l.end.presentation,f[v].transmuxedDecodeEnd=l.end.decode,f[v].baseMediaDecodeTime=l.baseMediaDecodeTime}appendData_(t,i){const{type:l,data:f}=i;if(!f||!f.byteLength||"audio"===l&&this.audioDisabled_)return;const v=this.getInitSegmentAndUpdateState_({type:l,initSegment:i.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:l,initSegment:v,data:f})}loadSegment_(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(()=>{const i=Bt({},t,{forceTimestampOffset:!0});Bt(t,this.generateSegmentInfo_(i)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(t)})}updateTransmuxerAndRequestSegment_(t){this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));const i=this.createSimplifiedSegmentObj_(t),E=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)||null!==this.mediaIndex&&t.timeline!==this.currentTimeline_&&t.timeline>0;this.logger_(`Requesting ${Jh(t)}`),i.map&&!i.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=Vf({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:E,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:I,level:$,stream:ce})=>{this.logger_(`${Jh(t)} logged from transmuxer stream ${ce} as a ${$}: ${I}`)}})}trimBackBuffer_(t){const i=((c,t,i)=>{let l=t-Ma.BACK_BUFFER_LENGTH;return c.length&&(l=Math.max(l,c.start(0))),Math.min(t-i,l)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);i>0&&this.remove(0,i)}createSimplifiedSegmentObj_(t){const i=t.segment,l=t.part,f={resolvedUri:l?l.resolvedUri:i.resolvedUri,byterange:l?l.byterange:i.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},v=t.playlist.segments[t.mediaIndex-1];if(v&&v.timeline===i.timeline&&(v.videoTimingInfo?f.baseStartTime=v.videoTimingInfo.transmuxedDecodeEnd:v.audioTimingInfo&&(f.baseStartTime=v.audioTimingInfo.transmuxedDecodeEnd)),i.key){const E=i.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);f.key=this.segmentKey(i.key),f.key.iv=E}return i.map&&(f.map=this.initSegmentForMap(i.map)),f}saveTransferStats_(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)}saveBandwidthRelatedStats_(t,i){this.pendingSegment_.byteLength=i.bytesReceived,t<Xh?this.logger_(`Ignoring segment's bandwidth because its duration of ${t} is less than the min to record ${Xh}`):(this.bandwidth=i.bandwidth,this.roundTrip=i.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(t,i,l){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,i,l));if(this.saveTransferStats_(i.stats),!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId)return;if(t){if(this.pendingSegment_=null,this.state="READY",-102===t.code)return;return this.pause(),-101===t.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}const f=this.pendingSegment_;this.saveBandwidthRelatedStats_(f.duration,i.stats),f.endOfAllRequests=i.endOfAllRequests,l.gopInfo&&(this.gopBuffer_=((c,t,i)=>{if(!t.length)return c;if(this.safeAppend_)return t.slice();const l=t[0].pts;let f=0;for(;f<c.length&&!(c[f].pts>=l);f++);return c.slice(0,f).concat(t)})(this.gopBuffer_,l.gopInfo)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(f)}setTimeMapping_(t){const i=this.syncController_.mappingForTimeline(t);null!==i&&(this.timeMapping_=i)}updateMediaSecondsLoaded_(t){this.mediaSecondsLoaded+="number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:t.duration}shouldUpdateTransmuxerTimestampOffset_(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:t,playlist:i,mediaIndex:l,firstVideoFrameTimeForData:f,currentVideoTimestampOffset:v,useVideoTimingInfo:E,videoTimingInfo:I,audioTimingInfo:$}){if(typeof t<"u")return t;if(!E)return $.start;const ce=i.segments[l-1];return 0===l||!ce||typeof ce.start>"u"||ce.end!==f+v?f:I.start}waitForAppendsToComplete_(t){const i=this.getCurrentMediaInfo_(t);if(!i)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:l,hasVideo:f,isMuxed:v}=i,E="main"===this.loaderType_&&f,I=!this.audioDisabled_&&l&&!v;if(t.waitingOnAppends=0,!t.hasAppendedData_)return!t.timingInfo&&"number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);E&&t.waitingOnAppends++,I&&t.waitingOnAppends++,E&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),I&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))}checkAppendsDone_(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(t){const i=((c,t,i)=>"main"===c&&t&&i?i.hasAudio||i.hasVideo?t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!i&&(this.error({message:i,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(t){if(null===t.timestampOffset||"number"!=typeof t.timingInfo.start||t.changedTimestampOffset||"main"!==this.loaderType_)return;let i=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),i=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),i=!0),i&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t,audioTimingInfo:i,timingInfo:l}){return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:i&&"number"==typeof i.transmuxedDecodeStart?i.transmuxedDecodeStart:l.start:l.start}updateTimingInfoEnd_(t){t.timingInfo=t.timingInfo||{};const i=this.getMediaInfo_(),f="main"===this.loaderType_&&i&&i.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;f&&(t.timingInfo.end="number"==typeof f.end?f.end:f.start+t.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});const i=((c,t)=>{if("hls"!==t)return null;const i=(c=>{let t=0;return["video","audio"].forEach(function(i){const l=c[`${i}TimingInfo`];if(!l)return;const{start:f,end:v}=l;let E;"bigint"==typeof f||"bigint"==typeof v?E=le().BigInt(v)-le().BigInt(f):"number"==typeof f&&"number"==typeof v&&(E=v-f),typeof E<"u"&&E>t&&(t=E)}),"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t})({audioTimingInfo:c.audioTimingInfo,videoTimingInfo:c.videoTimingInfo});if(!i)return null;const l=c.playlist.targetDuration,f=Cv({segmentDuration:i,maxDuration:2*l}),v=Cv({segmentDuration:i,maxDuration:l});return f||v?{severity:f?"warn":"info",message:`Segment with index ${c.mediaIndex} from playlist ${c.playlist.id} has a duration of ${i} when the reported duration is ${c.duration} and the target duration is ${l}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`}:null})(t,this.sourceType_);if(i&&("warn"===i.severity?gt.log.warn(i.message):this.logger_(i.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${Jh(t)}`);this.logger_(`Appended ${Jh(t)}`),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");const l=t.segment,f=t.part,v=l.end&&this.currentTime_()-l.end>3*t.playlist.targetDuration,E=f&&f.end&&this.currentTime_()-f.end>3*t.playlist.partTargetDuration;if(v||E)return this.logger_(`bad ${v?"segment":"part"} ${Jh(t)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(t){if(t.duration<Xh)return void this.logger_(`Ignoring segment's throughput because its duration of ${t.duration} is less than the min to record ${Xh}`);const i=this.throughput.rate,l=Date.now()-t.endOfAllRequests+1,f=Math.floor(t.byteLength/l*8*1e3);this.throughput.rate+=(f-i)/++this.throughput.count}addSegmentMetadataCue_(t){if(!this.segmentMetadataTrack_)return;const i=t.segment,l=i.start,f=i.end;if(!Zp(l)||!Zp(f))return;Hf(l,f,this.segmentMetadataTrack_);const v=le().WebKitDataCue||le().VTTCue,E={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:l,end:f},$=new v(l,f,JSON.stringify(E));$.value=E,this.segmentMetadataTrack_.addCue($)}}function el(){}const zf=function(c){return"string"!=typeof c?c:c.replace(/./,t=>t.toUpperCase())},Yp=["video","audio"],lh=(c,t)=>{const i=t[`${c}Buffer`];return i&&i.updating||t.queuePending[c]},nf=(c,t)=>{if(0===t.queue.length)return;let i=0,l=t.queue[i];if("mediaSource"!==l.type){if("mediaSource"!==c&&t.ready()&&"closed"!==t.mediaSource.readyState&&!lh(c,t)){if(l.type!==c){if(i=((c,t)=>{for(let i=0;i<t.length;i++){const l=t[i];if("mediaSource"===l.type)return null;if(l.type===c)return i}return null})(c,t.queue),null===i)return;l=t.queue[i]}if(t.queue.splice(i,1),t.queuePending[c]=l,l.action(c,t),!l.doneFn)return t.queuePending[c]=null,void nf(c,t)}}else!t.updating()&&"closed"!==t.mediaSource.readyState&&(t.queue.shift(),l.action(t),l.doneFn&&l.doneFn(),nf("audio",t),nf("video",t))},a0=(c,t)=>{const i=t[`${c}Buffer`],l=zf(c);i&&(i.removeEventListener("updateend",t[`on${l}UpdateEnd_`]),i.removeEventListener("error",t[`on${l}Error_`]),t.codecs[c]=null,t[`${c}Buffer`]=null)},Zc=(c,t)=>c&&t&&-1!==Array.prototype.indexOf.call(c.sourceBuffers,t),bl_appendBuffer=(c,t,i)=>(l,f)=>{const v=f[`${l}Buffer`];if(Zc(f.mediaSource,v)){f.logger_(`Appending segment ${t.mediaIndex}'s ${c.length} bytes to ${l}Buffer`);try{v.appendBuffer(c)}catch(E){f.logger_(`Error with code ${E.code} `+(22===E.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${l}Buffer`),f.queuePending[l]=null,i(E)}}},bl_remove=(c,t)=>(i,l)=>{const f=l[`${i}Buffer`];if(Zc(l.mediaSource,f)){l.logger_(`Removing ${c} to ${t} from ${i}Buffer`);try{f.remove(c,t)}catch{l.logger_(`Remove ${c} to ${t} from ${i}Buffer failed`)}}},bl_timestampOffset=c=>(t,i)=>{const l=i[`${t}Buffer`];Zc(i.mediaSource,l)&&(i.logger_(`Setting ${t}timestampOffset to ${c}`),l.timestampOffset=c)},bl_callback=c=>(t,i)=>{c()},bl_endOfStream=c=>t=>{if("open"===t.mediaSource.readyState){t.logger_(`Calling mediaSource endOfStream(${c||""})`);try{t.mediaSource.endOfStream(c)}catch(i){gt.log.warn("Failed to call media source endOfStream",i)}}},bl_duration=c=>t=>{t.logger_(`Setting mediaSource duration to ${c}`);try{t.mediaSource.duration=c}catch(i){gt.log.warn("Failed to set media source duration",i)}},bl_addSourceBuffer=(c,t)=>i=>{const l=zf(c),f=Mr(t);i.logger_(`Adding ${c}Buffer with codec ${t} to mediaSource`);const v=i.mediaSource.addSourceBuffer(f);v.addEventListener("updateend",i[`on${l}UpdateEnd_`]),v.addEventListener("error",i[`on${l}Error_`]),i.codecs[c]=t,i[`${c}Buffer`]=v},bl_removeSourceBuffer=c=>t=>{const i=t[`${c}Buffer`];if(a0(c,t),Zc(t.mediaSource,i)){t.logger_(`Removing ${c}Buffer with codec ${t.codecs[c]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(i)}catch(l){gt.log.warn(`Failed to removeSourceBuffer ${c}Buffer`,l)}}},bl_changeType=c=>(t,i)=>{const l=i[`${t}Buffer`],f=Mr(c);Zc(i.mediaSource,l)&&i.codecs[t]!==c&&(i.logger_(`changing ${t}Buffer codec from ${i.codecs[t]} to ${c}`),l.changeType(f),i.codecs[t]=c)},Tl=({type:c,sourceUpdater:t,action:i,doneFn:l,name:f})=>{t.queue.push({type:c,action:i,doneFn:l,name:f}),nf(c,t)},Qp=(c,t)=>i=>{if(t.queuePending[c]){const l=t.queuePending[c].doneFn;t.queuePending[c]=null,l&&l(t[`${c}Error_`])}nf(c,t)};class rf extends gt.EventTarget{constructor(t){super(),this.mediaSource=t,this.sourceopenListener_=()=>nf("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=aa("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=Qp("video",this),this.onAudioUpdateEnd_=Qp("audio",this),this.onVideoError_=i=>{this.videoError_=i},this.onAudioError_=i=>{this.audioError_=i},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(t,i){Tl({type:"mediaSource",sourceUpdater:this,action:bl_addSourceBuffer(t,i),name:"addSourceBuffer"})}abort(t){Tl({type:t,sourceUpdater:this,action:(c,t)=>{if("open"!==t.mediaSource.readyState)return;const i=t[`${c}Buffer`];if(Zc(t.mediaSource,i)){t.logger_(`calling abort on ${c}Buffer`);try{i.abort()}catch(l){gt.log.warn(`Failed to abort on ${c}Buffer`,l)}}},name:"abort"})}removeSourceBuffer(t){this.canRemoveSourceBuffer()?Tl({type:"mediaSource",sourceUpdater:this,action:bl_removeSourceBuffer(t),name:"removeSourceBuffer"}):gt.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!gt.browser.IE_VERSION&&!gt.browser.IS_FIREFOX&&le().MediaSource&&le().MediaSource.prototype&&"function"==typeof le().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return le().SourceBuffer&&le().SourceBuffer.prototype&&"function"==typeof le().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(t,i){this.canChangeType()?Tl({type:t,sourceUpdater:this,action:bl_changeType(i),name:"changeType"}):gt.log.error("changeType is not supported!")}addOrChangeSourceBuffers(t){if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(i=>{const l=t[i];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(i,l);this.canChangeType()&&this.changeType(i,l)})}appendBuffer(t,i){const{segmentInfo:l,type:f,bytes:v}=t;if(this.processedAppend_=!0,"audio"===f&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,i]),void this.logger_(`delayed audio append of ${v.length} until video append`);if(Tl({type:f,sourceUpdater:this,action:bl_appendBuffer(v,l||{mediaIndex:-1},i),doneFn:i,name:"appendBuffer"}),"video"===f){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const I=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${I.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,I.forEach($=>{this.appendBuffer.apply(this,$)})}}audioBuffered(){return Zc(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:ua()}videoBuffered(){return Zc(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:ua()}buffered(){const t=Zc(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,i=Zc(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return i&&!t?this.audioBuffered():t&&!i?this.videoBuffered():function(c,t){let i=null,l=null,f=0;const v=[],E=[];if(!(c&&c.length&&t&&t.length))return ua();let I=c.length;for(;I--;)v.push({time:c.start(I),type:"start"}),v.push({time:c.end(I),type:"end"});for(I=t.length;I--;)v.push({time:t.start(I),type:"start"}),v.push({time:t.end(I),type:"end"});for(v.sort(function($,ce){return $.time-ce.time}),I=0;I<v.length;I++)"start"===v[I].type?(f++,2===f&&(i=v[I].time)):"end"===v[I].type&&(f--,1===f&&(l=v[I].time)),null!==i&&null!==l&&(E.push([i,l]),i=null,l=null);return ua(E)}(this.audioBuffered(),this.videoBuffered())}setDuration(t,i=el){Tl({type:"mediaSource",sourceUpdater:this,action:bl_duration(t),name:"duration",doneFn:i})}endOfStream(t=null,i=el){"string"!=typeof t&&(t=void 0),Tl({type:"mediaSource",sourceUpdater:this,action:bl_endOfStream(t),name:"endOfStream",doneFn:i})}removeAudio(t,i,l=el){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Tl({type:"audio",sourceUpdater:this,action:bl_remove(t,i),doneFn:l,name:"remove"}):l()}removeVideo(t,i,l=el){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Tl({type:"video",sourceUpdater:this,action:bl_remove(t,i),doneFn:l,name:"remove"}):l()}updating(){return!(!lh("audio",this)&&!lh("video",this))}audioTimestampOffset(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(Tl({type:"audio",sourceUpdater:this,action:bl_timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_}videoTimestampOffset(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset!==t&&(Tl({type:"video",sourceUpdater:this,action:bl_timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_}audioQueueCallback(t){this.audioBuffer&&Tl({type:"audio",sourceUpdater:this,action:bl_callback(t),name:"callback"})}videoQueueCallback(t){this.videoBuffer&&Tl({type:"video",sourceUpdater:this,action:bl_callback(t),name:"callback"})}dispose(){this.trigger("dispose"),Yp.forEach(t=>{this.abort(t),this.canRemoveSourceBuffer()?this.removeSourceBuffer(t):this[`${t}QueueCallback`](()=>a0(t,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const Yc=c=>decodeURIComponent(escape(String.fromCharCode.apply(null,c))),sf=new Uint8Array("\n\n".split("").map(c=>c.charCodeAt(0)));class u0 extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class qf extends ga{constructor(t,i={}){super(t,i),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=t.featuresNativeTextTracks,this.loadVttJs=t.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return ua();const t=this.subtitlesTrack_.cues;return ua([[t[0].startTime,t[t.length-1].startTime]])}initSegmentForMap(t,i=!1){if(!t)return null;const l=Kl(t);let f=this.initSegments_[l];if(i&&!f&&t.bytes){const E=new Uint8Array(sf.byteLength+t.bytes.byteLength);E.set(t.bytes),E.set(sf,t.bytes.byteLength),this.initSegments_[l]=f={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:E}}return f||t}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(t){return typeof t>"u"||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(t,i){Hf(t,i,this.subtitlesTrack_)}fillBuffer_(){const t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",()=>{this.state="READY",this.paused()||this.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t}stopForError(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(t,i,l){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(i.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return-101===t.code&&this.handleTimeout_(),-102===t.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);const f=this.pendingSegment_;this.saveBandwidthRelatedStats_(f.duration,i.stats),i.key&&this.segmentKey(i.key,!0),this.state="APPENDING",this.trigger("appending");const v=f.segment;if(v.map&&(v.map.bytes=i.map.bytes),f.bytes=i.bytes,"function"!=typeof le().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(()=>this.segmentRequestFinished_(t,i,l),()=>this.stopForError({message:"Error loading vtt.js"}));v.requested=!0;try{this.parseVTTCues_(f)}catch(E){return void this.stopForError({message:E.message})}if(this.updateTimeMapping_(f,this.syncController_.timelines[f.timeline],this.playlist_),f.timingInfo=f.cues.length?{start:f.cues[0].startTime,end:f.cues[f.cues.length-1].endTime}:{start:f.startOfSegment,end:f.startOfSegment+f.duration},f.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");f.byteLength=f.bytes.byteLength,this.mediaSecondsLoaded+=v.duration,f.cues.forEach(E=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(le().VTTCue)(E.startTime,E.endTime,E.text):E)}),function(c){const t=c.cues;if(t)for(let i=0;i<t.length;i++){const l=[];let f=0;for(let v=0;v<t.length;v++)t[i].startTime===t[v].startTime&&t[i].endTime===t[v].endTime&&t[i].text===t[v].text&&(f++,f>1&&l.push(t[v]));l.length&&l.forEach(v=>c.removeCue(v))}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(t){let i,l=!1;if("function"!=typeof le().WebVTT)throw new u0;"function"==typeof le().TextDecoder?i=new(le().TextDecoder)("utf8"):(i=le().WebVTT.StringDecoder(),l=!0);const f=new(le().WebVTT.Parser)(le(),le().vttjs,i);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},f.oncue=t.cues.push.bind(t.cues),f.ontimestampmap=E=>{t.timestampmap=E},f.onparsingerror=E=>{gt.log.warn("Error encountered when parsing cues: "+E.message)},t.segment.map){let E=t.segment.map.bytes;l&&(E=Yc(E)),f.parse(E)}let v=t.bytes;l&&(v=Yc(v)),f.parse(v),f.flush()}updateTimeMapping_(t,i,l){const f=t.segment;if(!i)return;if(!t.cues.length)return void(f.empty=!0);const v=t.timestampmap,E=v.MPEGTS/Oi.ONE_SECOND_IN_TS-v.LOCAL+i.mapping;t.cues.forEach(I=>{I.startTime+=E,I.endTime+=E}),l.syncInfo||(l.syncInfo={mediaSequence:l.mediaSequence+t.mediaIndex,time:Math.min(t.cues[0].startTime,t.cues[t.cues.length-1].startTime-f.duration)})}}const l0=function(c,t){const i=c.cues;for(let l=0;l<i.length;l++){const f=i[l];if(t>=f.adStartTime&&t<=f.adEndTime)return f}return null},Xp=[{name:"VOD",run:(c,t,i,l,f)=>i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(c,t,i,l,f)=>{if(!Object.keys(c.timelineToDatetimeMappings).length)return null;let v=null,E=null;const I=yd(t);f=f||0;for(let $=0;$<I.length;$++){const me=I[t.endList||0===f?$:I.length-($+1)],ze=me.segment,It=c.timelineToDatetimeMappings[ze.timeline];if(!It||!ze.dateTimeObject)continue;let it=ze.dateTimeObject.getTime()/1e3+It;if(ze.parts&&"number"==typeof me.partIndex)for(let en=0;en<me.partIndex;en++)it+=ze.parts[en].duration;const Gt=Math.abs(f-it);if(null!==E&&(0===Gt||E<Gt))break;E=Gt,v={time:it,segmentIndex:me.segmentIndex,partIndex:me.partIndex}}return v}},{name:"Segment",run:(c,t,i,l,f)=>{let v=null,E=null;f=f||0;const I=yd(t);for(let $=0;$<I.length;$++){const me=I[t.endList||0===f?$:I.length-($+1)],ze=me.segment,It=me.part&&me.part.start||ze&&ze.start;if(ze.timeline===l&&typeof It<"u"){const xt=Math.abs(f-It);if(null!==E&&E<xt)break;(!v||null===E||E>=xt)&&(E=xt,v={time:It,segmentIndex:me.segmentIndex,partIndex:me.partIndex})}}return v}},{name:"Discontinuity",run:(c,t,i,l,f)=>{let v=null;if(f=f||0,t.discontinuityStarts&&t.discontinuityStarts.length){let E=null;for(let I=0;I<t.discontinuityStarts.length;I++){const $=t.discontinuityStarts[I],me=c.discontinuities[t.discontinuitySequence+I+1];if(me){const ze=Math.abs(f-me.time);if(null!==E&&E<ze)break;(!v||null===E||E>=ze)&&(E=ze,v={time:me.time,segmentIndex:$,partIndex:null})}}}return v}},{name:"Playlist",run:(c,t,i,l,f)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}];class b_ extends gt.EventTarget{constructor(t={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=aa("SyncController")}getSyncPoint(t,i,l,f){const v=this.runStrategies_(t,i,l,f);return v.length?this.selectSyncPoint_(v,{key:"time",value:f}):null}getExpiredTime(t,i){if(!t||!t.segments)return null;const l=this.runStrategies_(t,i,t.discontinuitySequence,0);if(!l.length)return null;const f=this.selectSyncPoint_(l,{key:"segmentIndex",value:0});return f.segmentIndex>0&&(f.time*=-1),Math.abs(f.time+_d({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:f.segmentIndex,endIndex:0}))}runStrategies_(t,i,l,f){const v=[];for(let E=0;E<Xp.length;E++){const I=Xp[E],$=I.run(this,t,i,l,f);$&&($.strategy=I.name,v.push({strategy:I.name,syncPoint:$}))}return v}selectSyncPoint_(t,i){let l=t[0].syncPoint,f=Math.abs(t[0].syncPoint[i.key]-i.value),v=t[0].strategy;for(let E=1;E<t.length;E++){const I=Math.abs(t[E].syncPoint[i.key]-i.value);I<f&&(f=I,l=t[E].syncPoint,v=t[E].strategy)}return this.logger_(`syncPoint for [${i.key}: ${i.value}] chosen with strategy [${v}]: [time:${l.time}, segmentIndex:${l.segmentIndex}`+("number"==typeof l.partIndex?`,partIndex:${l.partIndex}`:"")+"]"),l}saveExpiredSegmentInfo(t,i){const l=i.mediaSequence-t.mediaSequence;if(l>86400)gt.log.warn(`Not saving expired segment info. Media sequence gap ${l} is too large.`);else for(let f=l-1;f>=0;f--){const v=t.segments[f];if(v&&typeof v.start<"u"){i.syncInfo={mediaSequence:t.mediaSequence+f,time:v.start},this.logger_(`playlist refresh sync: [time:${i.syncInfo.time}, mediaSequence: ${i.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){const i=t.segments[0],l=i.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[i.timeline]=-l}}saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:i}){const l=this.calculateSegmentTimeMapping_(t,t.timingInfo,i),f=t.segment;l&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:f.start}));const v=f.dateTimeObject;f.discontinuity&&i&&v&&(this.timelineToDatetimeMappings[f.timeline]=-v.getTime()/1e3)}timestampOffsetForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time}mappingForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping}calculateSegmentTimeMapping_(t,i,l){const f=t.segment,v=t.part;let I,$,E=this.timelines[t.timeline];if("number"==typeof t.timestampOffset)E={time:t.startOfSegment,mapping:t.startOfSegment-i.start},l&&(this.timelines[t.timeline]=E,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${t.timeline}: [time: ${E.time}] [mapping: ${E.mapping}]`)),I=t.startOfSegment,$=i.end+E.mapping;else{if(!E)return!1;I=i.start+E.mapping,$=i.end+E.mapping}return v&&(v.start=I,v.end=$),(!f.start||I<f.start)&&(f.start=I),f.end=$,!0}saveDiscontinuitySyncInfo_(t){const i=t.playlist,l=t.segment;if(l.discontinuity)this.discontinuities[l.timeline]={time:l.start,accuracy:0};else if(i.discontinuityStarts&&i.discontinuityStarts.length)for(let f=0;f<i.discontinuityStarts.length;f++){const v=i.discontinuityStarts[f],E=i.discontinuitySequence+f+1,I=v-t.mediaIndex,$=Math.abs(I);if(!this.discontinuities[E]||this.discontinuities[E].accuracy>$){let ce;ce=I<0?l.start-_d({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:t.mediaIndex,endIndex:v}):l.end+_d({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:t.mediaIndex+1,endIndex:v}),this.discontinuities[E]={time:ce,accuracy:$}}}}dispose(){this.trigger("dispose"),this.off()}}class em extends gt.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:t,from:i,to:l}){return"number"==typeof i&&"number"==typeof l&&(this.pendingTimelineChanges_[t]={type:t,from:i,to:l},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]}lastTimelineChange({type:t,from:i,to:l}){return"number"==typeof i&&"number"==typeof l&&(this.lastTimelineChanges_[t]={type:t,from:i,to:l},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const Kf=Xy(Ed(function(){var c=function(){function Gt(){this.listeners={}}var en=Gt.prototype;return en.on=function(Qt,Sn){this.listeners[Qt]||(this.listeners[Qt]=[]),this.listeners[Qt].push(Sn)},en.off=function(Qt,Sn){if(!this.listeners[Qt])return!1;var fn=this.listeners[Qt].indexOf(Sn);return this.listeners[Qt]=this.listeners[Qt].slice(0),this.listeners[Qt].splice(fn,1),fn>-1},en.trigger=function(Qt){var Sn=this.listeners[Qt];if(Sn)if(2===arguments.length)for(var fn=Sn.length,Ht=0;Ht<fn;++Ht)Sn[Ht].call(this,arguments[1]);else for(var Gn=Array.prototype.slice.call(arguments,1),Dr=Sn.length,mi=0;mi<Dr;++mi)Sn[mi].apply(this,Gn)},en.dispose=function(){this.listeners={}},en.pipe=function(Qt){this.on("data",function(Sn){Qt.push(Sn)})},Gt}();let l=null;class f{constructor(en){let an,Qt,Sn;l||(l=function(){const Gt=[[[],[],[],[],[]],[[],[],[],[],[]]],en=Gt[0],an=Gt[1],Qt=en[4],Sn=an[4];let fn,Ht,Gn;const Dr=[],mi=[];let Hi,Qi,ea,xo,pr,Vs;for(fn=0;fn<256;fn++)mi[(Dr[fn]=fn<<1^283*(fn>>7))^fn]=fn;for(Ht=Gn=0;!Qt[Ht];Ht^=Hi||1,Gn=mi[Gn]||1)for(xo=Gn^Gn<<1^Gn<<2^Gn<<3^Gn<<4,xo=xo>>8^255&xo^99,Qt[Ht]=xo,Sn[xo]=Ht,ea=Dr[Qi=Dr[Hi=Dr[Ht]]],Vs=16843009*ea^65537*Qi^257*Hi^16843008*Ht,pr=257*Dr[xo]^16843008*xo,fn=0;fn<4;fn++)en[fn][Ht]=pr=pr<<24^pr>>>8,an[fn][xo]=Vs=Vs<<24^Vs>>>8;for(fn=0;fn<5;fn++)en[fn]=en[fn].slice(0),an[fn]=an[fn].slice(0);return Gt}()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];const fn=this._tables[0][4],Ht=this._tables[1],Gn=en.length;let Dr=1;if(4!==Gn&&6!==Gn&&8!==Gn)throw new Error("Invalid aes key size");const mi=en.slice(0),Hi=[];for(this._key=[mi,Hi],an=Gn;an<4*Gn+28;an++)Sn=mi[an-1],(an%Gn==0||8===Gn&&an%Gn==4)&&(Sn=fn[Sn>>>24]<<24^fn[Sn>>16&255]<<16^fn[Sn>>8&255]<<8^fn[255&Sn],an%Gn==0&&(Sn=Sn<<8^Sn>>>24^Dr<<24,Dr=Dr<<1^283*(Dr>>7))),mi[an]=mi[an-Gn]^Sn;for(Qt=0;an;Qt++,an--)Sn=mi[3&Qt?an:an-4],Hi[Qt]=an<=4||Qt<4?Sn:Ht[0][fn[Sn>>>24]]^Ht[1][fn[Sn>>16&255]]^Ht[2][fn[Sn>>8&255]]^Ht[3][fn[255&Sn]]}decrypt(en,an,Qt,Sn,fn,Ht){const Gn=this._key[1];let ea,xo,pr,Dr=en^Gn[0],mi=Sn^Gn[1],Hi=Qt^Gn[2],Qi=an^Gn[3];const Vs=Gn.length/4-2;let ou,Ru=4;const tl=this._tables[1],El=tl[0],Nu=tl[1],hi=tl[2],wl=tl[3],Cl=tl[4];for(ou=0;ou<Vs;ou++)ea=El[Dr>>>24]^Nu[mi>>16&255]^hi[Hi>>8&255]^wl[255&Qi]^Gn[Ru],xo=El[mi>>>24]^Nu[Hi>>16&255]^hi[Qi>>8&255]^wl[255&Dr]^Gn[Ru+1],pr=El[Hi>>>24]^Nu[Qi>>16&255]^hi[Dr>>8&255]^wl[255&mi]^Gn[Ru+2],Qi=El[Qi>>>24]^Nu[Dr>>16&255]^hi[mi>>8&255]^wl[255&Hi]^Gn[Ru+3],Ru+=4,Dr=ea,mi=xo,Hi=pr;for(ou=0;ou<4;ou++)fn[(3&-ou)+Ht]=Cl[Dr>>>24]<<24^Cl[mi>>16&255]<<16^Cl[Hi>>8&255]<<8^Cl[255&Qi]^Gn[Ru++],ea=Dr,Dr=mi,mi=Hi,Hi=Qi,Qi=ea}}class v extends c{constructor(){super(c),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}push(en){this.jobs.push(en),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const E=function(Gt){return Gt<<24|(65280&Gt)<<8|(16711680&Gt)>>8|Gt>>>24};class ${constructor(en,an,Qt,Sn){const fn=$.STEP,Ht=new Int32Array(en.buffer),Gn=new Uint8Array(en.byteLength);let Dr=0;for(this.asyncStream_=new v,this.asyncStream_.push(this.decryptChunk_(Ht.subarray(Dr,Dr+fn),an,Qt,Gn)),Dr=fn;Dr<Ht.length;Dr+=fn)Qt=new Uint32Array([E(Ht[Dr-4]),E(Ht[Dr-3]),E(Ht[Dr-2]),E(Ht[Dr-1])]),this.asyncStream_.push(this.decryptChunk_(Ht.subarray(Dr,Dr+fn),an,Qt,Gn));this.asyncStream_.push(function(){Sn(null,function t(Gt){return Gt.subarray(0,Gt.byteLength-Gt[Gt.byteLength-1])}(Gn))})}static get STEP(){return 32e3}decryptChunk_(en,an,Qt,Sn){return function(){const fn=function(Gt,en,an){const Qt=new Int32Array(Gt.buffer,Gt.byteOffset,Gt.byteLength>>2),Sn=new f(Array.prototype.slice.call(en)),fn=new Uint8Array(Gt.byteLength),Ht=new Int32Array(fn.buffer);let Gn,Dr,mi,Hi,Qi,ea,xo,pr,Vs;for(Gn=an[0],Dr=an[1],mi=an[2],Hi=an[3],Vs=0;Vs<Qt.length;Vs+=4)Qi=E(Qt[Vs]),ea=E(Qt[Vs+1]),xo=E(Qt[Vs+2]),pr=E(Qt[Vs+3]),Sn.decrypt(Qi,ea,xo,pr,Ht,Vs),Ht[Vs]=E(Ht[Vs]^Gn),Ht[Vs+1]=E(Ht[Vs+1]^Dr),Ht[Vs+2]=E(Ht[Vs+2]^mi),Ht[Vs+3]=E(Ht[Vs+3]^Hi),Gn=Qi,Dr=ea,mi=xo,Hi=pr;return fn}(en,an,Qt);Sn.set(fn,en.byteOffset)}}}var Gt,ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xt=(typeof window<"u"?window:typeof ce<"u"?ce:typeof self<"u"?self:{}).BigInt||Number;xt("0x1"),xt("0x100"),xt("0x10000"),xt("0x1000000"),xt("0x100000000"),xt("0x10000000000"),xt("0x1000000000000"),xt("0x100000000000000"),xt("0x10000000000000000"),Gt=new Uint16Array([65484]),new Uint8Array(Gt.buffer,Gt.byteOffset,Gt.byteLength);self.onmessage=function(Gt){const en=Gt.data,an=new Uint8Array(en.encrypted.bytes,en.encrypted.byteOffset,en.encrypted.byteLength),Qt=new Uint32Array(en.key.bytes,en.key.byteOffset,en.key.byteLength/4),Sn=new Uint32Array(en.iv.bytes,en.iv.byteOffset,en.iv.byteLength/4);new $(an,Qt,Sn,function(fn,Ht){self.postMessage(function(Gt){const en={};return Object.keys(Gt).forEach(an=>{const Qt=Gt[an];en[an]=function(en){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(en):en&&en.buffer instanceof ArrayBuffer}(Qt)?{bytes:Qt.buffer,byteOffset:Qt.byteOffset,byteLength:Qt.byteLength}:Qt}),en}({source:en.source,decrypted:Ht}),[Ht.buffer])})}}));var Cd=Ju(Kf);const Iv=c=>{let t=c.default?"main":"alternative";return c.characteristics&&c.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Jp=(c,t)=>{c.abort(),c.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},ci=(c,t)=>{t.activePlaylistLoader=c,c.load()},Zf={AUDIO:(c,t)=>()=>{const{segmentLoaders:{[c]:i},mediaTypes:{[c]:l},excludePlaylist:f}=t;Jp(i,l);const v=l.activeTrack(),E=l.activeGroup(),I=(E.filter(ce=>ce.default)[0]||E[0]).id,$=l.tracks[I];if(v!==$){gt.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const ce in l.tracks)l.tracks[ce].enabled=l.tracks[ce]===$;l.onTrackChanged()}else f({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(c,t)=>()=>{const{segmentLoaders:{[c]:i},mediaTypes:{[c]:l}}=t;gt.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Jp(i,l);const f=l.activeTrack();f&&(f.mode="disabled"),l.onTrackChanged()}},Yf={AUDIO:(c,t,i)=>{if(!t)return;const{tech:l,requestOptions:f,segmentLoaders:{[c]:v}}=i;t.on("loadedmetadata",()=>{const E=t.media();v.playlist(E,f),(!l.paused()||E.endList&&"none"!==l.preload())&&v.load()}),t.on("loadedplaylist",()=>{v.playlist(t.media(),f),l.paused()||v.load()}),t.on("error",Zf[c](c,i))},SUBTITLES:(c,t,i)=>{const{tech:l,requestOptions:f,segmentLoaders:{[c]:v},mediaTypes:{[c]:E}}=i;t.on("loadedmetadata",()=>{const I=t.media();v.playlist(I,f),v.track(E.activeTrack()),(!l.paused()||I.endList&&"none"!==l.preload())&&v.load()}),t.on("loadedplaylist",()=>{v.playlist(t.media(),f),l.paused()||v.load()}),t.on("error",Zf[c](c,i))}},xv={AUDIO:(c,t)=>{const{vhs:i,sourceType:l,segmentLoaders:{[c]:f},requestOptions:v,main:{mediaGroups:E},mediaTypes:{[c]:{groups:I,tracks:$,logger_:ce}},mainPlaylistLoader:me}=t,ze=Wl(me.main);(!E[c]||0===Object.keys(E[c]).length)&&(E[c]={main:{default:{default:!0}}},ze&&(E[c].main.default.playlists=me.main.playlists));for(const It in E[c]){I[It]||(I[It]=[]);for(const xt in E[c][It]){let Gt,it=E[c][It][xt];if(ze?(ce(`AUDIO group '${It}' label '${xt}' is a main playlist`),it.isMainPlaylist=!0,Gt=null):Gt="vhs-json"===l&&it.playlists?new jf(it.playlists[0],i,v):it.resolvedUri?new jf(it.resolvedUri,i,v):it.playlists&&"dash"===l?new eh(it.playlists[0],i,v,me):null,it=ms({id:xt,playlistLoader:Gt},it),Yf[c](c,it.playlistLoader,t),I[It].push(it),typeof $[xt]>"u"){const en=new gt.AudioTrack({id:xt,kind:Iv(it),enabled:!1,language:it.language,default:it.default,label:xt});$[xt]=en}}}f.on("error",Zf[c](c,t))},SUBTITLES:(c,t)=>{const{tech:i,vhs:l,sourceType:f,segmentLoaders:{[c]:v},requestOptions:E,main:{mediaGroups:I},mediaTypes:{[c]:{groups:$,tracks:ce}},mainPlaylistLoader:me}=t;for(const ze in I[c]){$[ze]||($[ze]=[]);for(const It in I[c][ze]){if(I[c][ze][It].forced)continue;let it,xt=I[c][ze][It];if("hls"===f)it=new jf(xt.resolvedUri,l,E);else if("dash"===f){if(!xt.playlists.filter(en=>en.excludeUntil!==1/0).length)return;it=new eh(xt.playlists[0],l,E,me)}else"vhs-json"===f&&(it=new jf(xt.playlists?xt.playlists[0]:xt.resolvedUri,l,E));if(xt=ms({id:It,playlistLoader:it},xt),Yf[c](c,xt.playlistLoader,t),$[ze].push(xt),typeof ce[It]>"u"){const Gt=i.addRemoteTextTrack({id:It,kind:"subtitles",default:xt.default&&xt.autoselect,language:xt.language,label:It},!1).track;ce[It]=Gt}}}v.on("error",Zf[c](c,t))},"CLOSED-CAPTIONS":(c,t)=>{const{tech:i,main:{mediaGroups:l},mediaTypes:{[c]:{groups:f,tracks:v}}}=t;for(const E in l[c]){f[E]||(f[E]=[]);for(const I in l[c][E]){const $=l[c][E][I];if(!/^(?:CC|SERVICE)/.test($.instreamId))continue;const ce=i.options_.vhs&&i.options_.vhs.captionServices||{};let me={label:I,language:$.language,instreamId:$.instreamId,default:$.default&&$.autoselect};if(ce[me.instreamId]&&(me=ms(me,ce[me.instreamId])),void 0===me.default&&delete me.default,f[E].push(ms({id:I},$)),typeof v[I]>"u"){const ze=i.addRemoteTextTrack({id:me.instreamId,kind:"captions",default:me.default,language:me.language,label:me.label},!1).track;v[I]=ze}}}}},Av=(c,t)=>{for(let i=0;i<c.length;i++)if(Yd(t,c[i])||c[i].playlists&&Av(c[i].playlists,t))return!0;return!1},kv={AUDIO:(c,t)=>()=>{const{mediaTypes:{[c]:{tracks:i}}}=t;for(const l in i)if(i[l].enabled)return i[l];return null},SUBTITLES:(c,t)=>()=>{const{mediaTypes:{[c]:{tracks:i}}}=t;for(const l in i)if("showing"===i[l].mode||"hidden"===i[l].mode)return i[l];return null}};let Qc;const nm=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],ch=function(c){return this.audioSegmentLoader_[c]+this.mainSegmentLoader_[c]};class f0 extends gt.EventTarget{constructor(t){super();const{src:i,withCredentials:l,tech:f,bandwidth:v,externVhs:E,useCueTags:I,playlistExclusionDuration:$,enableLowInitialPlaylist:ce,sourceType:me,cacheEncryptionKeys:ze,bufferBasedABR:It,leastPixelDiffSelector:xt,captionServices:it}=t;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:Gt}=t;(null===Gt||typeof Gt>"u")&&(Gt=1/0),Qc=E,this.bufferBasedABR=!!It,this.leastPixelDiffSelector=!!xt,this.withCredentials=l,this.tech_=f,this.vhs_=f.vhs,this.sourceType_=me,this.useCueTags_=I,this.playlistExclusionDuration=$,this.maxPlaylistRetries=Gt,this.enableLowInitialPlaylist=ce,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:l,maxPlaylistRetries:Gt,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const c={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{c[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:el,activeTrack:el,getActiveGroup:el,onGroupChanged:el,onTrackChanged:el,lastTrack_:null,logger_:aa(`MediaGroups[${t}]`)}}),c})(),this.mediaSource=new(le().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=ua(),this.hasPlayed_=!1,this.syncController_=new b_(t),this.segmentMetadataTrack_=f.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new Cd,this.sourceUpdater_=new rf(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new em;const en={vhs:this.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:it,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:v,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:ze,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:t.exactManifestTimings};this.mainPlaylistLoader_="dash"===this.sourceType_?new eh(i,this.vhs_,this.requestOptions_):new jf(i,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new ga(ms(en,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new ga(ms(en,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new qf(ms(en,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((Qt,Sn)=>{function fn(){f.off("vttjserror",Ht),Qt()}function Ht(){f.off("vttjsloaded",fn),Sn()}f.one("vttjsloaded",fn),f.one("vttjserror",Ht),f.addWebVttScript_()})}),t),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),nm.forEach(Qt=>{this[Qt+"_"]=ch.bind(this,Qt)}),this.logger_=aa("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const an="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(an,()=>{const Qt=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-Qt,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const t=this.mainAppendsToLoadedData_(),i=this.audioAppendsToLoadedData_();return-1===t||-1===i?-1:t+i}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(t="abr"){const i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,t)}switchMedia_(t,i,l){const f=this.media(),v=f&&(f.id||f.uri),E=t.id||t.uri;v&&v!==E&&(this.logger_(`switch media ${v} -> ${E} from ${i}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${i}`})),this.mainPlaylistLoader_.media(t,l)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=le().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(le().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const t=this.main(),i=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return i;const l=t.mediaGroups.AUDIO,f=Object.keys(l);let v;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)v=this.mediaTypes_.AUDIO.activeTrack();else{const I=l.main||f.length&&l[f[0]];for(const $ in I)if(I[$].default){v={label:$};break}}if(!v)return i;const E=[];for(const I in l)if(l[I][v.label]){const $=l[I][v.label];if($.playlists&&$.playlists.length)E.push.apply(E,$.playlists);else if($.uri)E.push($);else if(t.playlists.length)for(let ce=0;ce<t.playlists.length;ce++){const me=t.playlists[ce];me.attributes&&me.attributes.AUDIO&&me.attributes.AUDIO===I&&E.push(me)}}return E.length?E:i}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;this.requestOptions_.timeout=Cc(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:i,t.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),(c=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(ce=>{xv[ce](ce,c)});const{mediaTypes:t,mainPlaylistLoader:i,tech:l,vhs:f,segmentLoaders:{AUDIO:v,main:E}}=c;["AUDIO","SUBTITLES"].forEach(ce=>{t[ce].activeGroup=((c,t)=>i=>{const{mainPlaylistLoader:l,mediaTypes:{[c]:{groups:f}}}=t,v=l.media();if(!v)return null;let E=null;v.attributes[c]&&(E=f[v.attributes[c]]);const I=Object.keys(f);if(!E)if("AUDIO"===c&&I.length>1&&Wl(t.main))for(let $=0;$<I.length;$++){const ce=f[I[$]];if(Av(ce,v)){E=ce;break}}else f.main?E=f.main:1===I.length&&(E=f[I[0]]);return typeof i>"u"?E:null!==i&&E&&E.filter($=>$.id===i.id)[0]||null})(ce,c),t[ce].activeTrack=kv[ce](ce,c),t[ce].onGroupChanged=((c,t)=>()=>{const{segmentLoaders:{[c]:i,main:l},mediaTypes:{[c]:f}}=t,v=f.activeTrack(),E=f.getActiveGroup(),I=f.activePlaylistLoader,$=f.lastGroup_;if((!E||!$||E.id!==$.id)&&(f.lastGroup_=E,f.lastTrack_=v,Jp(i,f),E&&!E.isMainPlaylist)){if(!E.playlistLoader)return void(I&&l.resetEverything());i.resyncLoader(),ci(E.playlistLoader,f)}})(ce,c),t[ce].onGroupChanging=((c,t)=>()=>{const{segmentLoaders:{[c]:i},mediaTypes:{[c]:l}}=t;l.lastGroup_=null,i.abort(),i.pause()})(ce,c),t[ce].onTrackChanged=((c,t)=>()=>{const{mainPlaylistLoader:i,segmentLoaders:{[c]:l,main:f},mediaTypes:{[c]:v}}=t,E=v.activeTrack(),I=v.getActiveGroup(),$=v.activePlaylistLoader,ce=v.lastTrack_;if((!ce||!E||ce.id!==E.id)&&(v.lastGroup_=I,v.lastTrack_=E,Jp(l,v),I)){if(I.isMainPlaylist){if(!E||!ce||E.id===ce.id)return;const me=t.vhs.playlistController_,ze=me.selectPlaylist();if(me.media()===ze)return;return v.logger_(`track change. Switching main audio from ${ce.id} to ${E.id}`),i.pause(),f.resetEverything(),void me.fastQualityChange_(ze)}if("AUDIO"===c){if(!I.playlistLoader)return f.setAudio(!0),void f.resetEverything();l.setAudio(!0),f.setAudio(!1)}if($===I.playlistLoader)return void ci(I.playlistLoader,v);l.track&&l.track(E),l.resetEverything(),ci(I.playlistLoader,v)}})(ce,c),t[ce].getActiveGroup=((c,{mediaTypes:t})=>()=>{const i=t[c].activeTrack();return i?t[c].activeGroup(i):null})(ce,c)});const I=t.AUDIO.activeGroup();if(I){const ce=(I.filter(ze=>ze.default)[0]||I[0]).id;t.AUDIO.tracks[ce].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(E.setAudio(!1),v.setAudio(!0)):E.setAudio(!0)}i.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(ce=>t[ce].onGroupChanged())}),i.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(ce=>t[ce].onGroupChanging())});const $=()=>{t.AUDIO.onTrackChanged(),l.trigger({type:"usage",name:"vhs-audio-change"})};l.audioTracks().addEventListener("change",$),l.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),f.on("dispose",()=>{l.audioTracks().removeEventListener("change",$),l.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),l.clearTracks("audio");for(const ce in t.AUDIO.tracks)l.audioTracks().addTrack(t.AUDIO.tracks[ce])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){let i;if(this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),i=1.5*t.targetDuration*1e3;this.requestOptions_.timeout=Cc(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:i,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(t,i){const l=t.mediaGroups||{};let f=!0;const v=Object.keys(l.AUDIO);for(const E in l.AUDIO)for(const I in l.AUDIO[E])l.AUDIO[E][I].uri||(f=!1);f&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(l.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Qc.Playlist.isAes(i)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),v.length&&Object.keys(l.AUDIO[v[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(t){const i=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,l=this.tech_.currentTime(),f=this.bufferLowWaterLine(),v=this.bufferHighWaterLine();return function({currentPlaylist:c,buffered:t,currentTime:i,nextPlaylist:l,bufferLowWaterLine:f,bufferHighWaterLine:v,duration:E,bufferBasedABR:I,log:$}){if(!l)return gt.log.warn("We received no playlist to switch to. Please check your stream."),!1;const ce=`allowing switch ${c&&c.id||"null"} -> ${l.id}`;if(!c)return $(`${ce} as current playlist is not set`),!0;if(l.id===c.id)return!1;const me=!!yl(t,i).length;if(!c.endList)return me||"number"!=typeof c.partTargetDuration?($(`${ce} as current playlist is live`),!0):($(`not ${ce} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const ze=_o(t,i),It=I?Ma.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ma.MAX_BUFFER_LOW_WATER_LINE;if(E<It)return $(`${ce} as duration < max low water line (${E} < ${It})`),!0;const xt=l.attributes.BANDWIDTH,it=c.attributes.BANDWIDTH;if(xt<it&&(!I||ze<v)){let Gt=`${ce} as next bandwidth < current bandwidth (${xt} < ${it})`;return I&&(Gt+=` and forwardBuffer < bufferHighWaterLine (${ze} < ${v})`),$(Gt),!0}if((!I||xt>it)&&ze>=f){let Gt=`${ce} as forwardBuffer >= bufferLowWaterLine (${ze} >= ${f})`;return I&&(Gt+=` and next bandwidth > current bandwidth (${xt} > ${it})`),$(Gt),!0}return $(`not ${ce} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:l,currentPlaylist:i,nextPlaylist:t,bufferLowWaterLine:f,bufferHighWaterLine:v,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:120}))});const t=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(t=this.selectPlaylist()){t!==this.mainPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(()=>{this.tech_.setCurrentTime(gt.browser.IE_VERSION||gt.browser.IS_EDGE?this.tech_.currentTime()+.04:this.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}setupFirstPlay(){const t=this.mainPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){const i=this.seekable();if(!i.length)return!1;if(gt.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0)),this.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const t=this.tech_.play();typeof t<"u"&&"function"==typeof t.then&&t.then(null,i=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const t=this.inbandTextTracks_.metadataTrack_.cues;if(!t||!t.length)return;const i=this.duration();t[t.length-1].endTime=isNaN(i)||Math.abs(i)===1/0?Number.MAX_VALUE:i}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const i=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!i||i.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(t){if(!this.seekable().length)return!1;const l=this.syncController_.getExpiredTime(t,this.duration());if(null===l)return!1;const f=Qc.Playlist.playlistEnd(t,l),v=this.tech_.currentTime(),E=this.tech_.buffered();if(!E.length)return f-v<=yu;const I=E.end(E.length-1);return I-v<=yu&&f-I<=yu}excludePlaylist({playlistToExclude:t=this.mainPlaylistLoader_.media(),error:i={},playlistExclusionDuration:l}){if(t=t||this.mainPlaylistLoader_.media(),l=l||i.playlistExclusionDuration||this.playlistExclusionDuration,!t)return this.error=i,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));t.playlistErrors_++;const f=this.mainPlaylistLoader_.main.playlists,v=f.filter(Mp),E=1===v.length&&v[0]===t;if(1===f.length&&l!==1/0)return gt.log.warn(`Problem encountered with playlist ${t.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(E);if(E){let xt=!1;f.forEach(it=>{if(it===t)return;const Gt=it.excludeUntil;typeof Gt<"u"&&Gt!==1/0&&(xt=!0,delete it.excludeUntil)}),xt&&(gt.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let I;I=t.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*l,t.excludeUntil=I,i.reason&&(t.lastExcludeReason_=i.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const $=this.selectPlaylist();if(!$)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(i.internal?this.logger_:gt.log.warn)(`${i.internal?"Internal problem":"Problem"} encountered with playlist ${t.id}.${i.message?" "+i.message:""} Switching to playlist ${$.id}.`),$.attributes.AUDIO!==t.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),$.attributes.SUBTITLES!==t.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const ze=$.targetDuration/2*1e3||5e3,It="number"==typeof $.lastRequest&&Date.now()-$.lastRequest<=ze;return this.switchMedia_($,"exclude",E||It)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(t,i){const l=[],f="all"===t;(f||"main"===t)&&l.push(this.mainPlaylistLoader_);const v=[];(f||"audio"===t)&&v.push("AUDIO"),(f||"subtitle"===t)&&(v.push("CLOSED-CAPTIONS"),v.push("SUBTITLES")),v.forEach(E=>{const I=this.mediaTypes_[E]&&this.mediaTypes_[E].activePlaylistLoader;I&&l.push(I)}),["main","audio","subtitle"].forEach(E=>{const I=this[`${E}SegmentLoader_`];I&&(t===E||"all"===t)&&l.push(I)}),l.forEach(E=>i.forEach(I=>{"function"==typeof E[I]&&E[I]()}))}setCurrentTime(t){const i=yl(this.tech_.buffered(),t);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?i&&i.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const t=this.mainPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:Qc.Playlist.duration(t):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let t;if(!this.mainPlaylistLoader_)return;let i=this.mainPlaylistLoader_.media();if(!i)return;let l=this.syncController_.getExpiredTime(i,this.duration());if(null===l)return;const f=this.mainPlaylistLoader_.main,v=Qc.Playlist.seekable(i,l,Qc.Playlist.liveEdgeDelay(f,i));if(0===v.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),l=this.syncController_.getExpiredTime(i,this.duration()),null===l||(t=Qc.Playlist.seekable(i,l,Qc.Playlist.liveEdgeDelay(f,i)),0===t.length)))return;let E,I;this.seekable_&&this.seekable_.length&&(E=this.seekable_.end(0),I=this.seekable_.start(0)),this.seekable_=t?t.start(0)>v.end(0)||v.start(0)>t.end(0)?v:ua([[t.start(0)>v.start(0)?t.start(0):v.start(0),t.end(0)<v.end(0)?t.end(0):v.end(0)]]):v,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==E||this.seekable_.start(0)!==I)&&(this.logger_(`seekable updated [${Fy(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){const f=this.seekable();if(!f.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<f.end(f.length-1))&&this.sourceUpdater_.setDuration(f.end(f.length-1)))}const i=this.tech_.buffered();let l=Qc.Playlist.duration(this.mainPlaylistLoader_.media());i.length>0&&(l=Math.max(l,i.end(i.length-1))),this.mediaSource.duration!==l&&this.sourceUpdater_.setDuration(l)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(t=>{const i=this.mediaTypes_[t].groups;for(const l in i)i[l].forEach(f=>{f.playlistLoader&&f.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,i=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),l=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!i||!l)}getCodecsOrExclude_(){const t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},i=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;const l=$f(this.main(),i),f={},v=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(f.video=l.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(f.video+=`,${l.audio||t.main.audioCodec||Ir}`),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||v)&&(f.audio=l.audio||t.main.audioCodec||t.audio.audioCodec||Ir,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),!f.audio&&!f.video)return void this.excludePlaylist({playlistToExclude:i,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const I={};let $;if(["video","audio"].forEach(function(ce){if(f.hasOwnProperty(ce)&&!((ce,me)=>ce?Pr(me):yi(me))(t[ce].isFmp4,f[ce])){const me=t[ce].isFmp4?"browser":"muxer";I[me]=I[me]||[],I[me].push(f[ce]),"audio"===ce&&($=me)}}),v&&$&&i.attributes.AUDIO){const ce=i.attributes.AUDIO;this.main().playlists.forEach(me=>{(me.attributes&&me.attributes.AUDIO)===ce&&me!==i&&(me.excludeUntil=1/0)}),this.logger_(`excluding audio group ${ce} as ${$} does not support codec(s): "${f.audio}"`)}if(!Object.keys(I).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const ce=[];if(["video","audio"].forEach(me=>{const ze=($n(this.sourceUpdater_.codecs[me]||"")[0]||{}).type,It=($n(f[me]||"")[0]||{}).type;ze&&It&&ze.toLowerCase()!==It.toLowerCase()&&ce.push(`"${this.sourceUpdater_.codecs[me]}" -> "${f[me]}"`)}),ce.length)return void this.excludePlaylist({playlistToExclude:i,error:{message:`Codec switching not supported: ${ce.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return f}{const ce=Object.keys(I).reduce((me,ze)=>(me&&(me+=", "),me+`${ze} does not support codec(s): "${I[ze].join(",")}"`),"")+".";this.excludePlaylist({playlistToExclude:i,error:{internal:!0,message:ce},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const t=this.getCodecsOrExclude_();if(!t)return;this.sourceUpdater_.createSourceBuffers(t);const i=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(i)}excludeUnsupportedVariants_(){const t=this.main().playlists,i=[];Object.keys(t).forEach(l=>{const f=t[l];if(-1!==i.indexOf(f.id))return;i.push(f.id);const v=$f(this.main,f),E=[];v.audio&&!yi(v.audio)&&!Pr(v.audio)&&E.push(`audio codec ${v.audio}`),v.video&&!yi(v.video)&&!Pr(v.video)&&E.push(`video codec ${v.video}`),v.text&&"stpp.ttml.im1t"===v.text&&E.push(`text codec ${v.text}`),E.length&&(f.excludeUntil=1/0,this.logger_(`excluding ${f.id} for unsupported: ${E.join(", ")}`))})}excludeIncompatibleVariants_(t){const i=[],l=this.main().playlists,f=Kc($n(t)),v=sh(f),E=f.video&&$n(f.video)[0]||null,I=f.audio&&$n(f.audio)[0]||null;Object.keys(l).forEach($=>{const ce=l[$];if(-1!==i.indexOf(ce.id)||ce.excludeUntil===1/0)return;i.push(ce.id);const me=[],ze=$f(this.mainPlaylistLoader_.main,ce),It=sh(ze);if(ze.audio||ze.video){if(It!==v&&me.push(`codec count "${It}" !== "${v}"`),!this.sourceUpdater_.canChangeType()){const xt=ze.video&&$n(ze.video)[0]||null,it=ze.audio&&$n(ze.audio)[0]||null;xt&&E&&xt.type.toLowerCase()!==E.type.toLowerCase()&&me.push(`video codec "${xt.type}" !== "${E.type}"`),it&&I&&it.type.toLowerCase()!==I.type.toLowerCase()&&me.push(`audio codec "${it.type}" !== "${I.type}"`)}me.length&&(ce.excludeUntil=1/0,this.logger_(`excluding ${ce.id}: ${me.join(" && ")}`))}})}updateAdCues_(t){let i=0;const l=this.seekable();l.length&&(i=l.start(0)),function(c,t,i=0){if(!c.segments)return;let f,l=i;for(let v=0;v<c.segments.length;v++){const E=c.segments[v];if(f||(f=l0(t,l+E.duration/2)),f){if("cueIn"in E){f.endTime=l,f.adEndTime=l,l+=E.duration,f=null;continue}if(l<f.endTime){l+=E.duration;continue}f.endTime+=E.duration}else if("cueOut"in E&&(f=new(le().VTTCue)(l,l+E.duration,E.cueOut),f.adStartTime=l,f.adEndTime=l+parseFloat(E.cueOut),t.addCue(f)),"cueOutCont"in E){const[I,$]=E.cueOutCont.split("/").map(parseFloat);f=new(le().VTTCue)(l,l+E.duration,""),f.adStartTime=l-I,f.adEndTime=f.adStartTime+$,t.addCue(f)}l+=E.duration}}(t,this.cueTagsTrack_,i)}goalBufferLength(){const t=this.tech_.currentTime(),i=Ma.GOAL_BUFFER_LENGTH,l=Ma.GOAL_BUFFER_LENGTH_RATE,f=Math.max(i,Ma.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+t*l,f)}bufferLowWaterLine(){const t=this.tech_.currentTime(),i=Ma.BUFFER_LOW_WATER_LINE,l=Ma.BUFFER_LOW_WATER_LINE_RATE,f=Math.max(i,Ma.MAX_BUFFER_LOW_WATER_LINE),v=Math.max(i,Ma.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+t*l,this.bufferBasedABR?v:f)}bufferHighWaterLine(){return Ma.BUFFER_HIGH_WATER_LINE}}class rm{constructor(t,i,l){const{playlistController_:f}=t,v=f.fastQualityChange_.bind(f);if(i.attributes){const E=i.attributes.RESOLUTION;this.width=E&&E.width,this.height=E&&E.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=$f(f.main(),i),this.playlist=i,this.id=l,this.enabled=((c,t,i)=>l=>{const f=c.main.playlists[t],v=bd(f),E=Mp(f);return typeof l>"u"?E:(l?delete f.disabled:f.disabled=!0,l!==E&&!v&&(i(),c.trigger(l?"renditionenabled":"renditiondisabled")),l)})(t.playlists,i.id,v)}}const eg=["seeking","seeked","pause","playing","error"];class uf{constructor(t){this.playlistController_=t.playlistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=aa("PlaybackWatcher"),this.logger_("initialize");const i=()=>this.monitorCurrentTime_(),l=()=>this.monitorCurrentTime_(),f=()=>this.techWaiting_(),v=()=>this.resetTimeUpdate_(),E=this.playlistController_,I=["main","subtitle","audio"],$={};I.forEach(me=>{$[me]={reset:()=>this.resetSegmentDownloads_(me),updateend:()=>this.checkSegmentDownloads_(me)},E[`${me}SegmentLoader_`].on("appendsdone",$[me].updateend),E[`${me}SegmentLoader_`].on("playlistupdate",$[me].reset),this.tech_.on(["seeked","seeking"],$[me].reset)});const ce=me=>{["main","audio"].forEach(ze=>{E[`${ze}SegmentLoader_`][me]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),ce("off"))},this.clearSeekingAppendCheck_=()=>ce("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),ce("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",f),this.tech_.on(eg,v),this.tech_.on("canplay",l),this.tech_.one("play",i),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",f),this.tech_.off(eg,v),this.tech_.off("canplay",l),this.tech_.off("play",i),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),I.forEach(me=>{E[`${me}SegmentLoader_`].off("appendsdone",$[me].updateend),E[`${me}SegmentLoader_`].off("playlistupdate",$[me].reset),this.tech_.off(["seeked","seeking"],$[me].reset)}),this.checkCurrentTimeTimeout_&&le().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&le().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=le().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(t){const i=this.playlistController_[`${t}SegmentLoader_`];this[`${t}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${t} loader`),this[`${t}StalledDownloads_`]=0,this[`${t}Buffered_`]=i.buffered_()}checkSegmentDownloads_(t){const i=this.playlistController_,l=i[`${t}SegmentLoader_`],f=l.buffered_(),v=function(c,t){if(c===t)return!1;if(!c&&t||!t&&c||c.length!==t.length)return!0;for(let i=0;i<c.length;i++)if(c.start(i)!==t.start(i)||c.end(i)!==t.end(i))return!0;return!1}(this[`${t}Buffered_`],f);this[`${t}Buffered_`]=f,v?this.resetSegmentDownloads_(t):(this[`${t}StalledDownloads_`]++,this.logger_(`found #${this[`${t}StalledDownloads_`]} ${t} appends that did not increase buffer (possible stalled download)`,{playlistId:l.playlist_&&l.playlist_.id,buffered:ql(f)}),!(this[`${t}StalledDownloads_`]<10)&&(this.logger_(`${t} loader stalled download exclusion`),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:`vhs-${t}-download-exclusion`}),"subtitle"!==t&&i.excludePlaylist({error:{message:`Excessive ${t} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const t=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===t&&(!i.length||t+yu>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const i=this.seekable(),l=this.tech_.currentTime();let v;if(this.afterSeekableWindow_(i,l,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(v=i.end(i.length-1)),this.beforeSeekableWindow_(i,l)){const it=i.start(0);v=it+(it===i.end(0)?0:yu)}if(typeof v<"u")return this.logger_(`Trying to seek outside of seekable at time ${l} with seekable range ${Fy(i)}. Seeking to ${v}.`),this.tech_.setCurrentTime(v),!0;const E=this.playlistController_.sourceUpdater_,I=this.tech_.buffered(),$=E.audioBuffer?E.audioBuffered():null,ce=E.videoBuffer?E.videoBuffered():null,me=this.media(),ze=me.partTargetDuration?me.partTargetDuration:2*(me.targetDuration-Mu),It=[$,ce];for(let it=0;it<It.length;it++)if(It[it]&&_o(It[it],l)<ze)return!1;const xt=Gc(I,l);return 0!==xt.length&&(v=xt.start(0)+yu,this.logger_(`Buffered region starts (${xt.start(0)})  just beyond seek point (${l}). Seeking to ${v}.`),this.tech_.setCurrentTime(v),!0)}waiting_(){if(this.techWaiting_())return;const t=this.tech_.currentTime(),i=this.tech_.buffered(),l=yl(i,t);return l.length&&t+3<=l.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.logger_(`Stopped at ${t} while inside a buffered region [${l.start(0)} -> ${l.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const t=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(t,i)){const I=t.end(t.length-1);return this.logger_(`Fell out of live window at time ${i}. Seeking to live point (seekable end) ${I}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(I),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const l=this.tech_.vhs.playlistController_.sourceUpdater_,f=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:l.audioBuffered(),videoBuffered:l.videoBuffered(),currentTime:i}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const E=Gc(f,i);return E.length>0&&(this.logger_(`Stopped at ${i} and seeking to ${E.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(i),!0)}afterSeekableWindow_(t,i,l,f=!1){if(!t.length)return!1;let v=t.end(t.length-1)+yu;return!l.endList&&f&&(v=t.end(t.length-1)+3*l.targetDuration),i>v}beforeSeekableWindow_(t,i){return!!(t.length&&t.start(0)>0&&i<t.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:t,audioBuffered:i,currentTime:l}){if(!t)return;let f;if(t.length&&i.length){const v=yl(t,l-3),E=yl(t,l),I=yl(i,l);I.length&&!E.length&&v.length&&(f={start:v.end(0),end:I.end(0)})}else Gc(t,l).length||(f=this.gapFromVideoUnderflow_(t,l));return!!f&&(this.logger_(`Encountered a gap in video from ${f.start} to ${f.end}. Seeking to current time ${l}`),!0)}skipTheGap_(t){const i=this.tech_.buffered(),l=this.tech_.currentTime(),f=Gc(i,l);this.resetTimeUpdate_(),0!==f.length&&l===t&&(this.logger_("skipTheGap_:","currentTime:",l,"scheduled currentTime:",t,"nextRange start:",f.start(0)),this.tech_.setCurrentTime(f.start(0)+Mu),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(t,i){const l=function(c){if(c.length<2)return ua();const t=[];for(let i=1;i<c.length;i++){const l=c.end(i-1),f=c.start(i);t.push([l,f])}return ua(t)}(t);for(let f=0;f<l.length;f++){const v=l.start(f),E=l.end(f);if(i-v<4&&i-v>2)return{start:v,end:E}}return null}}const im={errorInterval:30,getSource(c){return c(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Qf=function(c,t){let i=0,l=0;const f=ms(im,t);c.ready(()=>{c.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const v=function(){l&&c.currentTime(l)},E=function(me){null!=me&&(l=c.duration()!==1/0&&c.currentTime()||0,c.one("loadedmetadata",v),c.src(me),c.trigger({type:"usage",name:"vhs-error-reload"}),c.play())},I=function(){if(Date.now()-i<1e3*f.errorInterval)c.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(f.getSource&&"function"==typeof f.getSource)return i=Date.now(),f.getSource.call(c,E);gt.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},$=function(){c.off("loadedmetadata",v),c.off("error",I),c.off("dispose",$)};c.on("error",I),c.on("dispose",$),c.reloadSourceOnError=function(me){$(),Qf(c,me)}},ma={PlaylistLoader:jf,Playlist:ka,utils:Xm,STANDARD_PLAYLIST_SELECTOR:mv,INITIAL_PLAYLIST_SELECTOR:function(){const c=this.playlists.main.playlists.filter(ka.isEnabled);return Qh(c,(i,l)=>Qg(i,l)),c.filter(i=>!!$f(this.playlists.main,i).video)[0]||null},lastBandwidthSelector:mv,movingAverageBandwidthSelector:function(c){let t=-1,i=-1;if(c<0||c>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const l=this.useDevicePixelRatio&&le().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(t=c*this.systemBandwidth+(1-c)*t,i=this.systemBandwidth),gv(this.playlists.main,t,parseInt(qp(this.tech_.el(),"width"),10)*l,parseInt(qp(this.tech_.el(),"height"),10)*l,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:Qg,comparePlaylistResolution:function(c,t){let i,l;return c.attributes.RESOLUTION&&c.attributes.RESOLUTION.width&&(i=c.attributes.RESOLUTION.width),i=i||le().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(l=t.attributes.RESOLUTION.width),l=l||le().Number.MAX_VALUE,i===l&&c.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?c.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-l},xhr:Xd()};Object.keys(Ma).forEach(c=>{Object.defineProperty(ma,c,{get:()=>(gt.log.warn(`using Vhs.${c} is UNSAFE be sure you know what you are doing`),Ma[c]),set(t){gt.log.warn(`using Vhs.${c} is UNSAFE be sure you know what you are doing`),"number"!=typeof t||t<0?gt.log.warn(`value of Vhs.${c} must be greater than or equal to 0`):Ma[c]=t}})});const Pv="videojs-vhs",g0=function(c,t){const i=t.media();let l=-1;for(let f=0;f<c.length;f++)if(c[f].id===i.id){l=f;break}c.selectedIndex_=l,c.trigger({selectedIndex:l,type:"change"})};ma.canPlaySource=function(){return gt.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const v0=()=>{if(!le().localStorage)return null;const c=le().localStorage.getItem(Pv);if(!c)return null;try{return JSON.parse(c)}catch{return null}};ma.supportsNativeHls=function(){if(!qe()||!qe().createElement)return!1;const c=qe().createElement("video");return!!gt.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(i){return/maybe|probably/i.test(c.canPlayType(i))})}(),ma.supportsNativeDash=!!(qe()&&qe().createElement&&gt.getTech("Html5").isSupported())&&/maybe|probably/i.test(qe().createElement("video").canPlayType("application/dash+xml")),ma.supportsTypeNatively=c=>"hls"===c?ma.supportsNativeHls:"dash"===c&&ma.supportsNativeDash,ma.isSupported=function(){return gt.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const w_=gt.getComponent("Component");class Fv extends w_{constructor(t,i,l){if(super(i,l.vhs),"number"==typeof l.initialBandwidth&&(this.options_.bandwidth=l.initialBandwidth),this.logger_=aa("VhsHandler"),i.options_&&i.options_.playerId){const f=gt.getPlayer(i.options_.playerId);this.player_=f}if(this.tech_=i,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(qe(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],f=>{const v=qe().fullscreenElement||qe().webkitFullscreenElement||qe().mozFullScreenElement||qe().msFullscreenElement;v&&v.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const t=v0();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Ma.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ma.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(t=>{typeof this.source_[t]<"u"&&(this.options_[t]=this.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(t,i){if(!t)return;this.setOptions_(),this.options_.src=(c=>0===c.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(c.substring(c.indexOf(",")+1)):c)(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ma,this.options_.sourceType=xr(i),this.options_.seekTo=v=>{this.tech_.setCurrentTime(v)},this.playlistController_=new f0(this.options_);const l=ms({liveRangeSafeTimeDelta:yu},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new uf(l),this.playlistController_.on("error",()=>{const v=gt.players[this.tech_.options_.playerId];let E=this.playlistController_.error;"object"!=typeof E||E.code?"string"==typeof E&&(E={message:E,code:3}):E.code=3,v.error(E)});const f=this.options_.bufferBasedABR?ma.movingAverageBandwidthSelector(.55):ma.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):f.bind(this),this.playlistController_.selectInitialPlaylist=ma.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(v){this.playlistController_.selectPlaylist=v.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(v){this.playlistController_.mainSegmentLoader_.throughput.rate=v,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let v=this.playlistController_.mainSegmentLoader_.bandwidth;const E=le().navigator.connection||le().navigator.mozConnection||le().navigator.webkitConnection,I=1e7;if(this.options_.useNetworkInformationApi&&E){const $=1e3*E.downlink*1e3;v=$>=I&&v>=I?Math.max(v,$):$}return v},set(v){this.playlistController_.mainSegmentLoader_.bandwidth=v,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let E;return E=this.throughput>0?1/this.throughput:0,Math.floor(1/(1/(this.bandwidth||1)+E))},set(){gt.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>ql(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>ql(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(c=>{if(!le().localStorage)return!1;let t=v0();t=t?ms(t,c):c;try{le().localStorage.setItem(Pv,JSON.stringify(t))}catch{return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{!function(c){c.representations=()=>{const t=c.playlistController_.main(),i=Wl(t)?c.playlistController_.getAudioTrackPlaylists_():t.playlists;return i?i.filter(l=>!bd(l)).map((l,f)=>new rm(c,l,l.id)):[]}}(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=le().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:c,sourceKeySystems:t,audioMedia:i,mainPlaylists:l})=>{if(!c.eme.initializeMediaKeys)return Promise.resolve();const v=((c,t)=>c.reduce((i,l)=>{if(!l.contentProtection)return i;const f=t.reduce((v,E)=>{const I=l.contentProtection[E];return I&&I.pssh&&(v[E]={pssh:I.pssh}),v},{});return Object.keys(f).length&&i.push(f),i},[]))(i?l.concat([i]):l,Object.keys(t)),E=[],I=[];return v.forEach($=>{I.push(new Promise((ce,me)=>{c.tech_.one("keysessioncreated",ce)})),E.push(new Promise((ce,me)=>{c.eme.initializeMediaKeys({keySystems:$},ze=>{ze?me(ze):ce()})}))}),Promise.race([Promise.all(E),Promise.race(I)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(i=>{this.logger_("error while creating EME key session",i),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,i=(({player:c,sourceKeySystems:t,media:i,audioMedia:l})=>{const f=((c,t,i)=>{if(!c)return c;let l={};t&&t.attributes&&t.attributes.CODECS&&(l=Kc($n(t.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(l.audio=i.attributes.CODECS);const f=Mr(l.video),v=Mr(l.audio),E={};for(const I in c)E[I]={},v&&(E[I].audioContentType=v),f&&(E[I].videoContentType=f),t.contentProtection&&t.contentProtection[I]&&t.contentProtection[I].pssh&&(E[I].pssh=t.contentProtection[I].pssh),"string"==typeof c[I]&&(E[I].url=c[I]);return ms(c,E)})(t,i,l);return!(!f||(c.currentSource().keySystems=f,f&&!c.eme&&(gt.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",l=>{if("output-restricted"!==l.status)return;const f=this.playlistController_.main();if(!f||!f.playlists)return;const v=[];f.playlists.forEach(E=>{E&&E.attributes&&E.attributes.RESOLUTION&&E.attributes.RESOLUTION.height>=720&&(!E.excludeUntil||E.excludeUntil<1/0)&&(E.excludeUntil=1/0,v.push(E))}),v.length&&(gt.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...v),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==gt.browser.IE_VERSION&&i?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const t=gt.players[this.tech_.options_.playerId];!t||!t.qualityLevels||this.qualityLevels_||(this.qualityLevels_=t.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{!function(c,t){t.representations().forEach(i=>{c.addQualityLevel(i)}),g0(c,t.playlists)}(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{g0(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.0.2","mux.js":"6.3.0","mpd-parser":"1.0.1","m3u8-parser":"6.0.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return rf.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(t){this.playlistController_.setCurrentTime(t)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&le().URL.revokeObjectURL&&(le().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(t,i){return(({playlist:c,time:t,callback:i})=>{if(!i)throw new Error("getProgramTime: callback must be provided");if(!c||void 0===t)return i({message:"getProgramTime: playlist and time must be provided"});const l=((c,t)=>{if(!t||!t.segments||0===t.segments.length)return null;let l,i=0;for(let v=0;v<t.segments.length&&(l=t.segments[v],i=l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationEnd:i+l.duration,!(c<=i));v++);const f=t.segments[t.segments.length-1];if(f.videoTimingInfo&&f.videoTimingInfo.transmuxedPresentationEnd<c)return null;if(c>i){if(c>i+.25*f.duration)return null;l=f}return{segment:l,estimatedStart:l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationStart:i-l.duration,type:l.videoTimingInfo?"accurate":"estimate"}})(t,c);if(!l)return i({message:"valid programTime was not found"});if("estimate"===l.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:l.estimatedStart});const f={mediaSeconds:t},v=((c,t)=>{if(!t.dateTimeObject)return null;const v=c-(t.videoTimingInfo.transmuxedPresentationStart+t.videoTimingInfo.transmuxerPrependedSeconds);return new Date(t.dateTimeObject.getTime()+1e3*v)})(t,l.segment);return v&&(f.programDateTime=v.toISOString()),i(null,f)})({playlist:this.playlistController_.media(),time:t,callback:i})}seekToProgramTime(t,i,l=!0,f=2){return Jd({programTime:t,playlist:this.playlistController_.media(),retryCount:f,pauseAfterSeek:l,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}}const jv={name:"videojs-http-streaming",VERSION:"3.0.2",canHandleSource(c,t={}){const i=ms(gt.options,t);return jv.canPlayType(c.type,i)},handleSource(c,t,i={}){const l=ms(gt.options,i);return t.vhs=new Fv(c,t,l),t.vhs.xhr=Xd(),t.vhs.src(c.src,c.type),t.vhs},canPlayType(c,t){const i=xr(c);if(!i)return"";const l=jv.getOverrideNative(t);return!ma.supportsTypeNatively(i)||l?"maybe":""},getOverrideNative(c={}){const{vhs:t={}}=c,i=!(gt.browser.IS_ANY_SAFARI||gt.browser.IS_IOS),{overrideNative:l=i}=t;return l}};Pr("avc1.4d400d,mp4a.40.2")&&gt.getTech("Html5").registerSourceHandler(jv,0),gt.VhsHandler=Fv,gt.VhsSourceHandler=jv,gt.Vhs=ma,gt.use||gt.registerComponent("Vhs",ma),gt.options.vhs=gt.options.vhs||{},(!gt.getPlugin||!gt.getPlugin("reloadSourceOnError"))&&gt.registerPlugin("reloadSourceOnError",function(c){Qf(this,c)});const Uv=["videoPlayer"];let y0=(()=>{class c{constructor(i){this.route=i}ngOnInit(){this.player=gt(this.target?.nativeElement),this.route.data.subscribe(i=>{this.clip=i.clip,this.player?.src({src:this.clip.url,type:"video/mp4"})})}}return c.\u0275fac=function(i){return new(i||c)(V.Y36(se.gz))},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-clip"]],viewQuery:function(i,l){if(1&i&&V.Gf(Uv,7),2&i){let f;V.iGM(f=V.CRH())&&(l.target=f.first)}},features:[V._Bn([Ce.uU])],decls:16,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative","aspect-video","overflow-hidden"],["controls","","crossorigin","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"]],template:function(i,l){1&i&&(V.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),V._uU(3),V.qZA(),V.TgZ(4,"div",3),V._uU(5),V.TgZ(6,"span"),V._uU(7),V.ALo(8,"fbTimestamp"),V.qZA()(),V.TgZ(9,"div",4),V._UZ(10,"video",5,6),V.qZA()()(),V.TgZ(12,"div",7)(13,"h2",8),V._uU(14,"More Clips"),V.qZA(),V._UZ(15,"app-clipslist",9),V.qZA()),2&i&&(V.xp6(3),V.hij(" ",null==l.clip?null:l.clip.title," "),V.xp6(2),V.hij(" Uploaded By ",null==l.clip?null:l.clip.displayName," on "),V.xp6(2),V.Oqu(V.lcZ(8,4,null==l.clip?null:l.clip.timestamp)),V.xp6(8),V.Q6J("scrollable",!1))},dependencies:[Se,$e],styles:['.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABUgAAsAAAAAItAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV33Y21hcAAAAYQAAAEJAAAD5p42+VxnbHlmAAACkAAADwwAABdk9R/WHmhlYWQAABGcAAAAKwAAADYn8kSnaGhlYQAAEcgAAAAdAAAAJA+RCL1obXR4AAAR6AAAABMAAAC8Q44AAGxvY2EAABH8AAAAYAAAAGB7SIHGbWF4cAAAElwAAAAfAAAAIAFAAI9uYW1lAAASfAAAASUAAAIK1cf1oHBvc3QAABOkAAABfAAAAnXdFqh1eJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGR7xDiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGPHcRdyA4RZgQRADbZCycAAHic7dPXbcMwAEXRK1vuvffem749XAbKV3bjBA6fXsaIgMMLEWoQJaAEFKNnlELyQ4K27zib5PNF6vl8yld+TKr5kH0+cUw0xv00Hwvx2DResUyFKrV4XoMmLdp06NKjz4AhI8ZMmDJjzoIlK9Zs2LJjz4EjJ85cuHLjziPe/0UWL17mf2tqKLz/9jK9f8tXpGCoRdPKhtS0RqFkWvVQNtSKoVYNtWaoddPXEBqG2jQ9XWgZattQO4baNdSeofYNdWCoQ0MdGerYUCeGOjXUmaHODXVhqEtDXRnq2lA3hro11J2h7g31YKhHQz0Z6tlQL4Z6NdSbod4N9WGoT9MfHF6GmhnZLxyDcRMAAAB4nJ1YC1gUV5auc6urCmxEGrq6VRD6ATQP5dHPKK8GRIyoKApoEBUDAiGzGmdUfKNRM4qLZrUZdGKcGN/GZJKd0SyOWTbfbmZ2NxqzM5IxRtNZd78vwYlJdtREoO7sudVNq6PmmxmKqrqPU+eee173P80Bh39Cu9DOEY4DHZBK3i20D/QRLcfxbE5sEVtwLpZzclw4ibFIkSCJUcZ4MBpMnnzwuKNsGWBL5i3qy6kO2dVpvUpKbkAP9fq62rdeGJ+TM/7C1nbIutfuWrWk5ci4zMxxR1qW/N+9JsmCGXj9VKWhFx/6tr/nz78INDm2C9yPF/fDcxLuyKxLBZ1ZBz2QTi+RSkiH5RrDQJ/GgGQadX9m0YSURs7GpSG905Zsk41uj14yul1OtieZ7QUk5GRG/YiS7PYYPSAZNRed9sq3+bOpz00rKb7pe/ZEZvbALxZAHT3AFoH8GXP3rt67QFn40kt8W13FjLTDb48c+fSi5/7h0P4dL5yz7DPtbmgmYxfQA9RL2+EOfTcvdp+1vmuBpvOll1As1S6ak0IvJzC7sKWJFtJgBd2uWcg+0Zyg7dzQfhcjXRgXGZRf5/a4A58IDU777Nl252AUk4m2ByRRjqTNqIDCEJeAnU3iCFwrkrNwXEzg4yFevBwypzxkcX+AIfk3VEKl3XmWbT8788SzvpvFJaiOezL6QyuSr9VNf97csNu0z3LuhR0wATUxZAfVBwVOy+nQFhxYdWaXlXe4HC4zWGWzzsrLDtmhI9pOWOHv7PTT7XybH1Z0+v2d5Abd3kmG+TsH23CS/KwTxx/JkzEwx6jcQOUc42LLwHJ/J93uZ9ygh3HuZGwqsY9dWDHQ58dxNqyqKRQTYdxwTubiOSs3FiMDkq0WSZQgCT0GBDOg2lxOAd1FlPVGs4AKBAcYHHaP2wPkHaivmLF5zYqnIZrvcHx5gN4k/6tchNW1DtdgNL2KrxEkS/kfnIHoVnp1VjmjpTf5r0lTzLj0mdS28tX+XGorU364eMPmnWVl8J36nlKGw3CZhjEiuMw8h8mKvhGD+4/lElBWjAhLJMg6fTw4zPZ8cOmcGQBm2Qxml1nAm13CpYGq1JKUlJJUzQn1PTAO0mgv6VMMpA/DuRfSWEu4lDIxdbAtdWIKvnn2Vk766CWfz9fpY0sH/UpdP50rfszaVpdVRmvIejEdLMk45s4Bu0EWHjeOySmFyZSiMahvZdNSn29peoI/YexYfKQTLeurTXXwEVLeSfInTWHkkMaeUx7sBvOCSTSj3AlcKjfueyS36tCrXDlgRtF0etFq9jhc1kfKuBT/OwMr0F4UUTTh1AN0g20+H/ScPcsIEsYu9d/zN5PmjprPtNwI1ZZcDK6iC97Mcjp2y2aX36f+QbpGHrgRuHlXJ+Zf6PFRL2uQSp8vxHeF2IoRb8Rd2rhMzsNxSRmEuKK4JFnkojhMcx6jzqHzGMGFcW+MhBj0bhf6cowN+45I4LHvwT6fteu7M42wGRI/pxcg6/MZdEvt1U1XaulHFXuLmqov/MukvRVL35/b3ODM1+4aPjtzeK7zmUkV2h3DN54HaQ9GzJvxHRb6Ks2gB81fwqraT+A7GvZJrRLRofU6G0urNL+zFw3v0FaVDFxsKEZW56F31r6ip6vOL+FCObBPuIMRiXld9RaMdLzRIOGhPey2T9vA/35DmZPK9IWaT9d/WgOGMieYqJ/dzjLIhZU118gbysxrNUGefxD6UO/hyNNllpFTOIbx32kSFQctnweV5PxTMHLjRqiAN+fQE9gL+Xy5WB6MOS4GJJuYbDUHhcKDhHGRbLzOpjsjdM1+iwAZLGeieehACX2hhI7SjK/ZUTNrvVje31TxJiFBGYViWFkCn9PMeX9fS6qVbzfCj4fOCTzDnuWy2c4xA7mdNkA3RS9FH2VeqzdCBlixxbzXjvkHU1I8BOYFb1pZvPIHSSIj4svT8xpzcxtXN+ZKyjdDvbz08niiF3PqV9Tn5NST8vg48MTaY8E5xqSSIsWoWHo+LtAzxdH/GDUyp37CBEYfso04F/NlMTcDJUTpECLY0HFGQHImE8xsEUdgnrQlixIvGhJA1BvxpDHGxEMBYFeNOHcBJlSjwe2JcSfbBEsGOPPBHg/6SBBOCsLLw0SpUxod0Z1bFMfLkbQ3UiZxEyd0Dx8t+SRBu18Q9msFbI4e3p1THEfkSEh7kEJ5orR10qTWDvbgPWn5aWvCYyOAjwgXyjJi34uMjo58L25cmRAeQZWI2PA1QQLsPESAH8WGFwZZ4SPoR73BHPzIPMJj9AreBzKUmrH4todT18ANvi1oc3YGjUT/0j+ExUwq8PI9BLaCQIpvewwYu2evAG/Vo/5avPdY7o+BemLLXw3y+AdkzP9bpIxB1wm5EYq8fesHbPEPtm6HrHvtx4jcGPR8fDDpkZBefIjB46QnlUNRltv4Z/pO/J6dxEjhYAtmoMeq+GozvUVvNYOW3m6GCIhoprcfr97B8AcIQYsfD8ljUvGNjvkrpj0ETA48ZMIxCeqsRIsQALE0gi2GB+glSOfbOjW3GSBM9yPq8/rpJXrJDz0BPxV6xdN4uiCGDQed3WhgFkBUZEFsmeyyBpzXrm7UGTBZG8Lh5aubFufk5eUsbrrFGr7McYdbltxa0nKYqRKbQjvikXYkTGM0f2xuyM3Ly21oXnWfvf6I1BmZwfh7EWWIYsg2nHhsDhOnczhJcmI6eBAmy3jZ3RiJmKQR/JA99FcwsfaVbNDDyi1rL9NPj9hfo61wjM6BjzOLijLpeTgk/pL+ip6tfYWupzeOgPny2tcUu9J/9mhxJlgyi985NFRbvCVewXUNXLJaW0RxZqtRYtnfYdcYomXQWdnJHQA3jiEEkeTQWcWxdDP9IvvVWvo2TK553XEMEq+s69/QDU1Q7p0zxwsm9qS379whr8NI2PJqLUyGyfNeX3eFfnJU2U+uHR9cVV1IqgurqwuV44XVp0h2qN55X5XJwtk59yP0IZuHrqBOBIuIYhkcoT6Kx79Pu2HS/IPZIMOqLWs/pteOOk4NPgEb6QAIdAPsyZk5Mwd+wVaHMexJv719W7xCu2l37UG6lvYdBcvHa08p89741zd63phTRGqL5ggo6SlvdbWXzCqsPq78NnSu7wnKy2HNZbVoRCI7UJEOyRj+sPE002tOOY7Qa5fXboFWkLNeqYUSZRocp9XwSUZxcQZ9Hw6LV2pOoVmvHQEDbGIENEG5i6bLgMSM4n8+FNLTtAds99DaWEvgcf4o5SyYe9x+kF6/tGoTPAdRmS/XQIEy//QxKC2oqioAI3tS5auvxCtzT6y6RK8fhChYcwCJaMJhxc0vqSxQ/qmgsrKAlBZUHlauheTpvd9uj5DnLzJct6qfq5fXbYHVIGcfrIVJihbaVLu1wW7Vbs8zK0A8e9Jvb91S9cVMjPrazD6gpfeZTXzYbCFMcppVRsGMpp55OWgx1/3JeAxW1Y7AORgM/m3rWrsdLkQVmEVSU16cX/e7uvkvpqRiQsG06XJ0t64Tf+l0nG1dt025gyOIZlvq5u9KSU1N2TW/rsWnnMRPyTDkctbhvIcNvYIXWyLzdwYLoYesUbaQG4iK2cWO2gdpeUYLqDD0MUTOPhDIGnZEs58yArR86FznuWEsU4YDi2x26dA4klkn8Qa6vhk2QUfX4Jxm/ngX9r7ogn1dmlmwqZmuhxtdg9XN/DEcUgqb+9hMyNansfaQET2mcROCmGEMVqxm5u+h6kN2MOwgqykV2wH9yQG9DvVFU38Pogaf4FVuE62KI/oJ02RDdWW2w5dqQwU/8+N1q1DlvsL863u61KLE7x/o8w0VJQM/Y/SQ3unIrqxueEa1BqT5VFNsO7p39/UC771a77RowpaKe9nvJQIT1Pog5LGx8XblBKmCNGTf3xMogAQvPnz9PYKX/08sVDTG1OKUlOLUgS/UaZtm1NAaYTsl7i9ZQ+L6O4Rl0OGa577LuWvc+C+x96/vYh0lLBuM+7XwI/dTLtdT7v4d6rRTWDnku0IBrqFnZ5bVIqKP8lasJlithWnaLhTsr8qFJBulF/70p4undou36HeTJ5+jv1fCybeQ8nH3+Xv6aENczmOFlab+hqMDg1rLOt12A+tiUFrYDwQ6c3RUJp601nzegTNX6WlYAI2zSUV945F6zU56ZmZVQaWspWcIADxJ9GmljQUnL2p2Dpr5T8H+5KJFu+vqBq8qvyHRzStLHPEO5SPYCV9nZe0yZT2RcH0oHvegSzNEJ0oGWU8iQWM12dgPEugngVceGIwZgPFp0BiT1a0a3R5Rcot7ihfA1J/20v96jX7zmTX9s583H0kwx6WnLd09cXrR9LGroOa9sHNbdyz8wcKk5lqhaVFJZNwmqtw884MXNdvJujpBa3xzuSaZH9sxa06Z7x+HJSduPbdYHv/DgmEhfbehvlmGN7JUkcG78GDM12CeyFFTPNqVeNxC1gzjz+c2nVo63Xxs8rKJWXoBJM0tmEbfGm4qzpoOH3xpzQfyxLzW1gnE9NHo6tol1eMEic4ZVPrjnVi0kqAe2sQ2bgqupScaq8WGlUWgWHI51SKJl/UYT6zccNsCSkBtiVZLsiefuFSDYT3Fi8Zk7EUnmjTRYtsFeuDDJS05MW79M3mr3mla+d8dzac31KTPmBYfFiYSUef48PhPjm9ryZsSGZZkdNvzq0Y9rdNcwDq5Dg5C3QW+7UN64IKptvS3tvHbvu5c9pv1Exau21rc9LIpwpQwUjTq8576yeVDz5+4WZ1nXT43wV60rPLJbDp/UksNrP3iQ2SA63Pst058gOYDbhRnRUw8l/sRt4HbxPzO4WYpInCpuVgSbVh6JXuwnnJngKTTCwaPWmG5Xbhpm1U0Yt3FyBGpGYemPM77p2TD904JjgJ2QFpFLeYpGx8X15Qx1Zk31p5ki9ZLUuXE0lmuJlcakJMVLeFS1iIvrB8drY0aloilakqCZwzwRORtxlgwxS4IThggJd4TDxoiaAIT80fFPGrCPPru+puFn504P/ybr4ihA/6dKASLshEJic7xE8tmzu3KzA7TABBe8y5fNbWo3ilQn/SuFKM16b2l5bOeayqfGhYmhIulU+fVNDdWVv4NMzX10MBHyPR5uhWUu8D9P1VnIMt4nGNgZGBgAOJ/1bf64vltvjJwszOAwAOlmqvINEc/WJyDgQlEAQA+dgnjAHicY2BkYGBnAAGOPgaG//85+hkYGVCBPgBGJwNkAAAAeJxjYGBgYB/EmKMPtxwAhg4B0gAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAe4CLgKKAtAC/ANiA4wDqAPgBDAEsATaBQgFWgXABggGLgZwBqwG9gdOB4oH0ggqCHAIhgicCMgJJAlWCYgJrAnyCkAKdgrkC7J4nGNgZGBg0GdoZmBnAAEmIOYCQgaG/2A+AwAaqwHQAHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkXlT2zAQxf1C4thJAwRajt4HRy8VMwwfSJHXsQZZcnUQ+PYoTtwpM+wf2t9brWZ2n5JBsol58nJcYYAdDDFCijEy5JhgileYYRd72MccBzjEa7zBEY5xglO8xTu8xwd8xCd8xhd8xTec4RwXuMR3/MBP/MJvMPzBFYpk2Cr+OF0fTEgrFI1aHhxN740KDbEmeJpsWZlVj40s+45aLuv9KijlhCXSjLQnu/d/4UH6sWul1mRzFxZeekUuE7z10mg3qMtM1FGQddPSrLQyvJR6OaukItYXDp6pCJrmz0umqkau5pZ2hFmm7m+ImG5W2t0kZoJXUtPhVnYTbbdOBdeCVGqpJe7XKTqSbRK7zbdwXfR0U+SVsStuS3Y76em6+Ic3xYiHUppc04Nn0lMzay3dSxNcp8auDlWlaCi48yetFD7Y9USsx87G45cuop1ZxQUtjLnL4j53FO0a+5X08UXqQ7NQNo92R0XOz7sxWEnxN2TneJI8Acttu4Q=) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10a"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10b"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-downloading{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-downloading:before{content:"\\f10f"}.vjs-icon-file-download{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download:before{content:"\\f110"}.vjs-icon-file-download-done{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download-done:before{content:"\\f111"}.vjs-icon-file-download-off{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download-off:before{content:"\\f112"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f113"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f114"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f115"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f116"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f117"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f118"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f119"}.vjs-icon-repeat{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-repeat:before{content:"\\f11a"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f11b"}.vjs-icon-replay-5,.video-js .vjs-skip-backward-5 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay-5:before,.video-js .vjs-skip-backward-5 .vjs-icon-placeholder:before{content:"\\f11c"}.vjs-icon-replay-10,.video-js .vjs-skip-backward-10 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay-10:before,.video-js .vjs-skip-backward-10 .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-replay-30,.video-js .vjs-skip-backward-30 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay-30:before,.video-js .vjs-skip-backward-30 .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-forward-5,.video-js .vjs-skip-forward-5 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-forward-5:before,.video-js .vjs-skip-forward-5 .vjs-icon-placeholder:before{content:"\\f11f"}.vjs-icon-forward-10,.video-js .vjs-skip-forward-10 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-forward-10:before,.video-js .vjs-skip-forward-10 .vjs-icon-placeholder:before{content:"\\f120"}.vjs-icon-forward-30,.video-js .vjs-skip-forward-30 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-forward-30:before,.video-js .vjs-skip-forward-30 .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f122"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f123"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f124"}.vjs-icon-shuffle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-shuffle:before{content:"\\f125"}.vjs-icon-cast{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cast:before{content:"\\f126"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f127"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f128"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f129"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f12a"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f12b"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f12c"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f12d"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f12e"}.video-js{display:inline-block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window,body.vjs-pip-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen,body.vjs-pip-window .video-js{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs),body.vjs-pip-window .video-js{width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-pip-container .vjs-pip-text{position:absolute;bottom:10%;font-size:2em;background-color:#000000b3;padding:.5em;text-align:center;width:100%}.vjs-layout-tiny.vjs-pip-container .vjs-pip-text,.vjs-layout-x-small.vjs-pip-container .vjs-pip-text,.vjs-layout-small.vjs-pip-container .vjs-pip-text{bottom:0;font-size:1.4em}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:50%;left:50%;padding:0;margin-top:-.81666em;margin-left:-1.5em;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-pip-window .vjs-menu-button-popup .vjs-menu{left:unset;right:1em}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;line-height:.35em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{line-height:.35em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster,.vjs-pip-container.vjs-has-started .vjs-poster{display:block}.vjs-poster img{width:100%;height:100%;object-fit:contain}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.vjs-live .vjs-time-divider,.video-js .vjs-current-time,.video-js .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control,.vjs-pip-window .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control,.vjs-pip-window .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10c";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f12e";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:10px;border:none}.vjs-text-track-settings fieldset span{display:inline-block;padding:0 6px 8px}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;font-weight:700;font-size:14px}.vjs-text-track-settings .vjs-label{clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);margin:0 5px 5px 0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}.vjs-title-bar{background:rgba(0,0,0,.9);background:linear-gradient(180deg,rgba(0,0,0,.9) 0%,rgba(0,0,0,.7) 60%,rgba(0,0,0,0) 100%);font-size:1.2em;line-height:1.5;transition:opacity .1s;padding:.666em 1.333em 4em;pointer-events:none;position:absolute;top:0;width:100%}.vjs-title-bar-title,.vjs-title-bar-description{margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vjs-title-bar-title{font-weight:700;margin-bottom:.333em}.vjs-playing.vjs-user-inactive .vjs-title-bar{opacity:0;transition:opacity 1s}.video-js .vjs-skip-forward-5,.video-js .vjs-skip-forward-10,.video-js .vjs-skip-forward-30,.video-js .vjs-skip-backward-5,.video-js .vjs-skip-backward-10,.video-js .vjs-skip-backward-30{cursor:pointer}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129,140,248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js{position:initial}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2}),c})(),_0=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(i,l){1&i&&(V.TgZ(0,"div",0)(1,"span",1),V._uU(2,"404"),V.qZA(),V._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),V.qZA(),V.TgZ(15,"div",14)(16,"h2",15),V._uU(17,"Page not found"),V.qZA(),V.TgZ(18,"p"),V._uU(19,"Looks like the page you're looking for is gone or doesn't exist."),V.qZA()())}}),c})();const C_=[{path:"",component:Re},{path:"about",component:Le},{path:"clip/:id",component:y0,resolve:{clip:De.Y}},{path:"",loadChildren:function(){var c=(0,fe.Z)(function*(){return(yield H.e(925).then(H.bind(H,9925))).VideoModule});return function(){return c.apply(this,arguments)}}()},{path:"**",component:_0}];let b0=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=V.oAB({type:c}),c.\u0275inj=V.cJS({imports:[se.Bz.forRoot(C_),se.Bz]}),c})();var S_=H(2096),T0=H(7398),Jf=H(6321),Vv=H(5211),am=H(8180),D_=H(9360),$v=H(8251),I_=H(2420),um=H(975),Hv=H(1631),Gv=H(4829);function E0(c,t){return t?i=>(0,Vv.z)(t.pipe((0,am.q)(1),function Yl(){return(0,D_.e)((c,t)=>{c.subscribe((0,$v.x)(t,I_.Z))})}()),i.pipe(E0(c))):(0,Hv.z)((i,l)=>(0,Gv.Xf)(c(i,l)).pipe((0,am.q)(1),(0,um.h)(i)))}var lm=H(5592),w0=H(671);var S0=H(2181),cm=H(4664),lf=H(6796),dm=H(8330);let Xc=(()=>{class c{constructor(i,l,f,v){this.auth=i,this.db=l,this.router=f,this.route=v,this.redirect=!1,this.usersCollection=l.collection("users"),this.isAuthenticated$=i.user.pipe((0,T0.U)(E=>!!E)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function C0(c,t=Jf.z){const i=function zv(c=0,t,i=Jf.P){let l=-1;return null!=t&&((0,w0.K)(t)?i=t:l=t),new lm.y(f=>{let v=function ep(c){return c instanceof Date&&!isNaN(c)}(c)?+c-i.now():c;v<0&&(v=0);let E=0;return i.schedule(function(){f.closed||(f.next(E++),0<=l?this.schedule(void 0,l):f.complete())},v)})}(c,t);return E0(()=>i)}(1500)),this.router.events.pipe((0,S0.h)(E=>E instanceof se.m2),(0,T0.U)(E=>this.route.firstChild),(0,cm.w)(E=>E?.data??(0,S_.of)({authOnly:!1}))).subscribe(E=>{this.redirect=E.authOnly??!1})}createUser(i){var l=this;return(0,fe.Z)(function*(){if(!i.password)throw new Error("Password not provided!");const f=yield l.auth.createUserWithEmailAndPassword(i.email,i.password);if(!f.user)throw new Error("User can't be found");yield l.usersCollection.doc(f.user.uid).set({name:i.name,email:i.email,age:i.age,phoneNumber:i.phoneNumber}),yield f.user.updateProfile({displayName:i.name})})()}logout(i){var l=this;return(0,fe.Z)(function*(){i&&i.preventDefault(),yield l.auth.signOut(),l.redirect&&(yield l.router.navigateByUrl("/"))})()}}return c.\u0275fac=function(i){return new(i||c)(V.LFG(lf.zQ),V.LFG(dm.ST),V.LFG(se.F0),V.LFG(se.gz))},c.\u0275prov=V.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var Ic=H(2855),qv=H(8105);const x_=["*"];let tp=(()=>{class c{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:x_,decls:2,vars:2,template:function(i,l){1&i&&(V.F$t(),V.TgZ(0,"div"),V.Hsn(1),V.qZA()),2&i&&V.ekj("hidden",!l.active)}}),c})();const Sd=function(c,t){return{"hover:text-indigo-400":c,"hover:text-white text-white bg-indigo-400":t}};function Wv(c,t){if(1&c){const i=V.EpF();V.TgZ(0,"li",2)(1,"a",3),V.NdJ("click",function(){const v=V.CHM(i).$implicit,E=V.oxw();return V.KtG(E.selectTab(v))}),V._uU(2),V.qZA()()}if(2&c){const i=t.$implicit;V.xp6(1),V.Q6J("ngClass",V.WLB(2,Sd,!i.active,i.active)),V.xp6(1),V.Oqu(i.tabTitle)}}const A_=["*"];let D0=(()=>{class c{constructor(){this.tabs=new V.n_E}ngAfterContentInit(){const i=this.tabs?.filter(l=>l.active);(!i||0===i.length)&&this.selectTab(this.tabs.first)}selectTab(i){return this.tabs?.forEach(l=>{l.active=!1}),i.active=!0,!1}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-tabs-container"]],contentQueries:function(i,l,f){if(1&i&&V.Suo(f,tp,4),2&i){let v;V.iGM(v=V.CRH())&&(l.tabs=v)}},ngContentSelectors:A_,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(i,l){1&i&&(V.F$t(),V.TgZ(0,"ul",0),V.YNc(1,Wv,3,5,"li",1),V.qZA(),V.Hsn(2)),2&i&&(V.xp6(1),V.Q6J("ngForOf",l.tabs))},dependencies:[Ce.mk,Ce.sg]}),c})();var Kv=H(5193),Ts=H(6223);function np(c,t){if(1&c&&(V.TgZ(0,"app-alert",11),V._uU(1),V.qZA()),2&c){const i=V.oxw();V.Q6J("color",i.alertColor),V.xp6(1),V.hij(" ",i.alertMsg,"\n")}}function tg(c,t){1&c&&(V.TgZ(0,"p",12),V._uU(1," Email is invalid "),V.qZA())}function rp(c,t){1&c&&(V.TgZ(0,"p",12),V._uU(1," Password is invalid "),V.qZA())}let ub=(()=>{class c{constructor(i){this.auth=i,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please wait! we are logging you in.",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){}login(){var i=this;return(0,fe.Z)(function*(){i.showAlert=!0,i.alertMsg="Please wait! we are logging you in.",i.alertColor="blue",i.inSubmission=!0;try{yield i.auth.signInWithEmailAndPassword(i.credentials.email,i.credentials.password)}catch(l){return i.alertMsg="auth/wrong-password"===l.code?"The password is invalid or the user does not have a password.":"auth/user-not-found"==l.code?"User not found!!!":"An unexpected error ocurred. Please try again later",i.inSubmission=!1,void(i.alertColor="red")}i.alertMsg="Success! You are now logged in.",i.alertColor="green"})()}}return c.\u0275fac=function(i){return new(i||c)(V.Y36(lf.zQ))},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["name","password","type","password","placeholder","Password","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(i,l){if(1&i&&(V.YNc(0,np,2,2,"app-alert",0),V.TgZ(1,"form",1,2),V.NdJ("ngSubmit",function(){return l.login()}),V.TgZ(3,"div",3)(4,"label",4),V._uU(5,"Email"),V.qZA(),V.TgZ(6,"input",5,6),V.NdJ("ngModelChange",function(v){return l.credentials.email=v}),V.qZA(),V.YNc(8,tg,2,0,"p",7),V.qZA(),V.TgZ(9,"div",3)(10,"label",4),V._uU(11,"Password"),V.qZA(),V.TgZ(12,"input",8,9),V.NdJ("ngModelChange",function(v){return l.credentials.password=v}),V.qZA(),V.YNc(14,rp,2,0,"p",7),V.qZA(),V.TgZ(15,"button",10),V._uU(16," Submit "),V.qZA()()),2&i){const f=V.MAs(2),v=V.MAs(7),E=V.MAs(13);V.Q6J("ngIf",l.showAlert),V.xp6(6),V.Q6J("ngModel",l.credentials.email),V.xp6(2),V.Q6J("ngIf",v.errors&&v.touched&&v.dirty),V.xp6(4),V.Q6J("ngModel",l.credentials.password),V.xp6(2),V.Q6J("ngIf",E.errors&&E.touched&&E.dirty),V.xp6(1),V.Q6J("disabled",f.invalid||l.inSubmission)}},dependencies:[Ce.O5,Kv.w,Ts._Y,Ts.Fj,Ts.JJ,Ts.JL,Ts.Q7,Ts.c5,Ts.On,Ts.F]}),c})();class Zv{static match(t,i){return l=>{const f=l.get(t),v=l.get(i);if(!f||!v)return console.error("Form controls can not be found in the form group."),{controlNotFound:!1};const E=f.value===v.value?null:{noMatch:!0};return v.setErrors(E),E}}}let I0=(()=>{class c{constructor(i){this.auth=i,this.validate=l=>this.auth.fetchSignInMethodsForEmail(l.value).then(f=>f.length?{emailTaken:!0}:null)}}return c.\u0275fac=function(i){return new(i||c)(V.LFG(lf.zQ))},c.\u0275prov=V.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var hm=H(1060);function x0(c,t){if(1&c&&(V.TgZ(0,"app-alert",11),V._uU(1),V.qZA()),2&c){const i=V.oxw();V.Q6J("color",i.alertColor),V.xp6(1),V.hij(" ",i.alertMsg,"\n")}}let Yv=(()=>{class c{constructor(i,l){this.auth=i,this.emailTaken=l,this.inSubmission=!1,this.name=new Ts.NI("",[Ts.kI.required,Ts.kI.minLength(3)]),this.email=new Ts.NI("",[Ts.kI.required,Ts.kI.email],[this.emailTaken.validate]),this.age=new Ts.NI(null,[Ts.kI.required,Ts.kI.min(18),Ts.kI.max(120)]),this.password=new Ts.NI("",[Ts.kI.required,Ts.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new Ts.NI("",[Ts.kI.required]),this.phoneNumber=new Ts.NI("",[Ts.kI.required,Ts.kI.minLength(16),Ts.kI.maxLength(16)]),this.showAlert=!1,this.alertMsg="Please wait! Your account is being created.",this.alertColor="blue",this.registerForm=new Ts.cw({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[Zv.match("password","confirm_password")])}register(){var i=this;return(0,fe.Z)(function*(){i.showAlert=!0,i.alertMsg="Please wait! Your account is being created.",i.alertColor="blue",i.inSubmission=!0;try{yield i.auth.createUser(i.registerForm.value)}catch(l){return i.alertMsg="auth/email-already-in-use"===l.code?"The email address is already in use":"An unexpected error occurred. Please try again later",i.alertColor="red",void(i.inSubmission=!1)}i.alertMsg="Success! Your account has been created",i.alertColor="green"})()}}return c.\u0275fac=function(i){return new(i||c)(V.Y36(Xc),V.Y36(I0))},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter Name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Confirm Password",3,"control"],["placeholder","Enter Phone Number","format","(+000) 000000000",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(i,l){1&i&&(V.YNc(0,x0,2,2,"app-alert",0),V.TgZ(1,"form",1),V.NdJ("ngSubmit",function(){return l.register()}),V.TgZ(2,"div",2)(3,"label",3),V._uU(4,"Name"),V.qZA(),V._UZ(5,"app-input",4),V.qZA(),V.TgZ(6,"div",2)(7,"label",3),V._uU(8,"Email"),V.qZA(),V._UZ(9,"app-input",5),V.qZA(),V.TgZ(10,"div",2)(11,"label",3),V._uU(12,"Age"),V.qZA(),V._UZ(13,"app-input",6),V.qZA(),V.TgZ(14,"div",2)(15,"label",3),V._uU(16,"Password"),V.qZA(),V._UZ(17,"app-input",7),V.qZA(),V.TgZ(18,"div",2)(19,"label",3),V._uU(20,"Confirm Password"),V.qZA(),V._UZ(21,"app-input",8),V.qZA(),V.TgZ(22,"div",2)(23,"label",3),V._uU(24,"Phone Number"),V.qZA(),V._UZ(25,"app-input",9),V.qZA(),V.TgZ(26,"button",10),V._uU(27," Submit "),V.qZA()()),2&i&&(V.Q6J("ngIf",l.showAlert),V.xp6(1),V.Q6J("formGroup",l.registerForm),V.xp6(4),V.Q6J("control",l.name),V.xp6(4),V.Q6J("control",l.email),V.xp6(4),V.Q6J("control",l.age),V.xp6(4),V.Q6J("control",l.password),V.xp6(4),V.Q6J("control",l.confirm_password),V.xp6(4),V.Q6J("control",l.phoneNumber),V.xp6(1),V.Q6J("disabled",l.registerForm.invalid||l.inSubmission))},dependencies:[Ce.O5,hm.a,Kv.w,Ts._Y,Ts.JL,Ts.sg]}),c})(),Qv=(()=>{class c{constructor(i){this.modal=i}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return c.\u0275fac=function(i){return new(i||c)(V.Y36(Ic.Z))},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(i,l){1&i&&(V.TgZ(0,"app-modal",0)(1,"p",1),V._uU(2,"Your Account"),V.qZA(),V.TgZ(3,"app-tabs-container")(4,"app-tab",2),V._UZ(5,"app-login"),V.qZA(),V.TgZ(6,"app-tab",3),V._UZ(7,"app-register"),V.qZA()()())},dependencies:[qv.z,D0,tp,ub,Yv]}),c})();function A0(c,t){if(1&c){const i=V.EpF();V.TgZ(0,"li")(1,"a",8),V.NdJ("click",function(f){V.CHM(i);const v=V.oxw();return V.KtG(v.openModal(f))}),V._uU(2,"Login / Register"),V.qZA()()}}const ng=function(){return{sort:"1"}},Xv=function(){return{exact:!0}};function k0(c,t){if(1&c){const i=V.EpF();V.TgZ(0,"li")(1,"a",9),V._uU(2,"Manage"),V.qZA()(),V.TgZ(3,"li")(4,"a",10),V._uU(5,"Upload"),V.qZA()(),V.TgZ(6,"li")(7,"a",8),V.NdJ("click",function(f){V.CHM(i);const v=V.oxw();return V.KtG(v.auth.logout(f))}),V._uU(8,"Logout"),V.qZA()()}if(2&c){const i=V.oxw();V.xp6(1),V.Q6J("routerLinkActiveOptions",i.myMatchOptions)("queryParams",V.DdM(3,ng)),V.xp6(3),V.Q6J("routerLinkActiveOptions",V.DdM(4,Xv))}}let fm=(()=>{class c{constructor(i,l){this.modal=i,this.auth=l,this.myMatchOptions={queryParams:"ignored",matrixParams:"exact",paths:"exact",fragment:"exact"}}ngOnInit(){}openModal(i){i.preventDefault(),this.modal.toggleModal("auth")}}return c.\u0275fac=function(i){return new(i||c)(V.Y36(Ic.Z),V.Y36(Xc))},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-nav"]],decls:13,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLink","/about","routerLinkActive","text-orange-400",1,"px-2"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-orange-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-orange-400",1,"px-2",3,"routerLinkActiveOptions"]],template:function(i,l){if(1&i&&(V.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),V._uU(3,"Twatch"),V.qZA(),V.TgZ(4,"div",3)(5,"ul",4),V.YNc(6,A0,3,0,"li",5),V.ALo(7,"async"),V.YNc(8,k0,9,5,"ng-template",null,6,V.W1O),V.TgZ(10,"li")(11,"a",7),V._uU(12,"About"),V.qZA()()()()()()),2&i){const f=V.MAs(9);V.xp6(6),V.Q6J("ngIf",!V.lcZ(7,2,l.auth.isAuthenticated$))("ngIfElse",f)}},dependencies:[Ce.O5,se.rH,se.Od,Ce.Ov]}),c})();function Jv(c,t){1&c&&V._UZ(0,"app-auth-modal")}let ey=(()=>{class c{constructor(i){this.auth=i}}return c.\u0275fac=function(i){return new(i||c)(V.Y36(Xc))},c.\u0275cmp=V.Xpm({type:c,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(i,l){1&i&&(V._UZ(0,"app-nav")(1,"router-outlet"),V.YNc(2,Jv,1,0,"app-auth-modal",0),V.ALo(3,"async")),2&i&&(V.xp6(2),V.Q6J("ngIf",!V.lcZ(3,1,l.auth.isAuthenticatedWithDelay$)))},dependencies:[Ce.O5,Qv,se.lC,fm,Ce.Ov]}),c})();var rg=H(6208);let ig=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=V.oAB({type:c}),c.\u0275inj=V.cJS({imports:[Ce.ez,rg.m,Ts.UX,Ts.u5]}),c})();var lb=H(6304);const sg_firebase={apiKey:"AIzaSyBht9ajWF3LN5uPL0brX3-USR3FxNhBLPg",authDomain:"twatch-c02df.firebaseapp.com",projectId:"twatch-c02df",storageBucket:"twatch-c02df.appspot.com",appId:"1:752613596831:web:9eb785479193b93ef04caa"};var ty=H(6240);let ip=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=V.oAB({type:c,bootstrap:[ey]}),c.\u0275inj=V.cJS({imports:[y.b2,ig,lb.hO.initializeApp(sg_firebase),lf.ww,ty.TE,b0,ty.TE]}),c})();var ny=H(7142);H(5967),ny.Z.initializeApp(sg_firebase);let M0=!1;ny.Z.auth().onAuthStateChanged(()=>{M0||y.q6().bootstrapModule(ip).catch(c=>console.error(c)),M0=!0})},5060:(nn,st,H)=>{"use strict";var y=H(6382);nn.exports=function(Ce,De){return void 0===De&&(De=!1),function($e,Xe,et){if($e)Ce($e);else if(Xe.statusCode>=400&&Xe.statusCode<=599){var Se=et;if(De)if(y.TextDecoder){var Re=function se(V){return void 0===V&&(V=""),V.toLowerCase().split(";").reduce(function(Ce,De){var $e=De.split("="),et=$e[1];return"charset"===$e[0].trim()?et.trim():Ce},"utf-8")}(Xe.headers&&Xe.headers["content-type"]);try{Se=new TextDecoder(Re).decode(et)}catch{}}else Se=String.fromCharCode.apply(null,new Uint8Array(et));Ce({cause:Se})}else Ce(null,et)}}},3817:(nn,st,H)=>{"use strict";var y=H(6382),fe=H(434),se=H(7794);Xe.httpHandler=H(5060);var V=function(wt){var le={};return wt&&wt.trim().split("\n").forEach(function(vt){var qe=vt.indexOf(":"),Tt=vt.slice(0,qe).trim().toLowerCase(),je=vt.slice(qe+1).trim();typeof le[Tt]>"u"?le[Tt]=je:Array.isArray(le[Tt])?le[Tt].push(je):le[Tt]=[le[Tt],je]}),le};function $e(Le,wt,le){var vt=Le;return se(wt)?(le=wt,"string"==typeof Le&&(vt={uri:Le})):vt=fe({},wt,{uri:Le}),vt.callback=le,vt}function Xe(Le,wt,le){return et(wt=$e(Le,wt,le))}function et(Le){if(typeof Le.callback>"u")throw new Error("callback argument missing");var wt=!1,le=function($t,Xt,ot){wt||(wt=!0,Le.callback($t,Xt,ot))};function qe(){var Bt=void 0;if(Bt=Ve.response?Ve.response:Ve.responseText||function Se(Le){try{if("document"===Le.responseType)return Le.responseXML;if(""===Le.responseType&&(!Le.responseXML||"parsererror"!==Le.responseXML.documentElement.nodeName))return Le.responseXML}catch{}return null}(Ve),ne)try{Bt=JSON.parse(Bt)}catch{}return Bt}function Tt(Bt){return clearTimeout(Pe),Bt instanceof Error||(Bt=new Error(""+(Bt||"Unknown XMLHttpRequest Error"))),Bt.statusCode=0,le(Bt,bt)}function je(){if(!Y){var Bt;clearTimeout(Pe);var $t=bt,Xt=null;return 0!==(Bt=Le.useXDR&&void 0===Ve.status?200:1223===Ve.status?204:Ve.status)?($t={body:qe(),statusCode:Bt,method:_e,headers:{},url:Ee,rawRequest:Ve},Ve.getAllResponseHeaders&&($t.headers=V(Ve.getAllResponseHeaders()))):Xt=new Error("Internal XMLHttpRequest Error"),le(Xt,$t,$t.body)}}var Ve=Le.xhr||null;Ve||(Ve=Le.cors||Le.useXDR?new Xe.XDomainRequest:new Xe.XMLHttpRequest);var J,Y,Pe,Ee=Ve.url=Le.uri||Le.url,_e=Ve.method=Le.method||"GET",Fe=Le.body||Le.data,ut=Ve.headers=Le.headers||{},W=!!Le.sync,ne=!1,bt={body:void 0,headers:{},statusCode:0,method:_e,url:Ee,rawRequest:Ve};if("json"in Le&&!1!==Le.json&&(ne=!0,ut.accept||ut.Accept||(ut.Accept="application/json"),"GET"!==_e&&"HEAD"!==_e&&(ut["content-type"]||ut["Content-Type"]||(ut["Content-Type"]="application/json"),Fe=JSON.stringify(!0===Le.json?Fe:Le.json))),Ve.onreadystatechange=function vt(){4===Ve.readyState&&setTimeout(je,0)},Ve.onload=je,Ve.onerror=Tt,Ve.onprogress=function(){},Ve.onabort=function(){Y=!0},Ve.ontimeout=Tt,Ve.open(_e,Ee,!W,Le.username,Le.password),W||(Ve.withCredentials=!!Le.withCredentials),!W&&Le.timeout>0&&(Pe=setTimeout(function(){if(!Y){Y=!0,Ve.abort("timeout");var Bt=new Error("XMLHttpRequest timeout");Bt.code="ETIMEDOUT",Tt(Bt)}},Le.timeout)),Ve.setRequestHeader)for(J in ut)ut.hasOwnProperty(J)&&Ve.setRequestHeader(J,ut[J]);else if(Le.headers&&!function De(Le){for(var wt in Le)if(Le.hasOwnProperty(wt))return!1;return!0}(Le.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Le&&(Ve.responseType=Le.responseType),"beforeSend"in Le&&"function"==typeof Le.beforeSend&&Le.beforeSend(Ve),Ve.send(Fe||null),Ve}nn.exports=Xe,nn.exports.default=Xe,Xe.XMLHttpRequest=y.XMLHttpRequest||function Re(){},Xe.XDomainRequest="withCredentials"in new Xe.XMLHttpRequest?Xe.XMLHttpRequest:y.XDomainRequest,function Ce(Le,wt){for(var le=0;le<Le.length;le++)wt(Le[le])}(["get","put","post","patch","head","delete"],function(Le){Xe["delete"===Le?"del":Le]=function(wt,le,vt){return(le=$e(wt,le,vt)).method=Le.toUpperCase(),et(le)}})},9451:(nn,st)=>{"use strict";function y(Ce,De){return void 0===De&&(De=Object),De&&"function"==typeof De.freeze?De.freeze(Ce):Ce}var se=y({HTML:"text/html",isHTML:function(Ce){return Ce===se.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),V=y({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(Ce){return Ce===V.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});st.assign=function fe(Ce,De){if(null===Ce||"object"!=typeof Ce)throw new TypeError("target is not an object");for(var $e in De)Object.prototype.hasOwnProperty.call(De,$e)&&(Ce[$e]=De[$e]);return Ce},st.find=function H(Ce,De,$e){if(void 0===$e&&($e=Array.prototype),Ce&&"function"==typeof $e.find)return $e.find.call(Ce,De);for(var Xe=0;Xe<Ce.length;Xe++)if(Object.prototype.hasOwnProperty.call(Ce,Xe)){var et=Ce[Xe];if(De.call(void 0,et,Xe,Ce))return et}},st.freeze=y,st.MIME_TYPE=se,st.NAMESPACE=V},1020:(nn,st,H)=>{var fe=H(9451),se=H(6475),V=H(4562),Ce=H(6989),De=se.DOMImplementation,$e=fe.NAMESPACE,Xe=Ce.ParseError,et=Ce.XMLReader;function Se(je){return je.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function Re(je){this.options=je||{locator:{}}}function wt(){this.cdata=!1}function le(je,Ve){Ve.lineNumber=je.lineNumber,Ve.columnNumber=je.columnNumber}function vt(je){if(je)return"\n@"+(je.systemId||"")+"#[line:"+je.lineNumber+",col:"+je.columnNumber+"]"}function qe(je,Ve,J){return"string"==typeof je?je.substr(Ve,J):je.length>=Ve+J||Ve?new java.lang.String(je,Ve,J)+"":je}function Tt(je,Ve){je.currentElement?je.currentElement.appendChild(Ve):je.doc.appendChild(Ve)}Re.prototype.parseFromString=function(je,Ve){var J=this.options,Y=new et,Ee=J.domBuilder||new wt,_e=J.errorHandler,Fe=J.locator,ut=J.xmlns||{},W=/\/x?html?$/.test(Ve),ne=W?V.HTML_ENTITIES:V.XML_ENTITIES;return Fe&&Ee.setDocumentLocator(Fe),Y.errorHandler=function Le(je,Ve,J){if(!je){if(Ve instanceof wt)return Ve;je=Ve}var Y={},Ee=je instanceof Function;function _e(Fe){var ut=je[Fe];!ut&&Ee&&(ut=2==je.length?function(W){je(Fe,W)}:je),Y[Fe]=ut&&function(W){ut("[xmldom "+Fe+"]\t"+W+vt(J))}||function(){}}return J=J||{},_e("warning"),_e("error"),_e("fatalError"),Y}(_e,Ee,Fe),Y.domBuilder=J.domBuilder||Ee,W&&(ut[""]=$e.HTML),ut.xml=ut.xml||$e.XML,je&&"string"==typeof je?Y.parse((J.normalizeLineEndings||Se)(je),ut,ne):Y.errorHandler.error("invalid doc source"),Ee.doc},wt.prototype={startDocument:function(){this.doc=(new De).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(je,Ve,J,Y){var Ee=this.doc,_e=Ee.createElementNS(je,J||Ve),Fe=Y.length;Tt(this,_e),this.currentElement=_e,this.locator&&le(this.locator,_e);for(var ut=0;ut<Fe;ut++){je=Y.getURI(ut);var W=Y.getValue(ut),ne=(J=Y.getQName(ut),Ee.createAttributeNS(je,J));this.locator&&le(Y.getLocator(ut),ne),ne.value=ne.nodeValue=W,_e.setAttributeNode(ne)}},endElement:function(je,Ve,J){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(je,Ve){},endPrefixMapping:function(je){},processingInstruction:function(je,Ve){var J=this.doc.createProcessingInstruction(je,Ve);this.locator&&le(this.locator,J),Tt(this,J)},ignorableWhitespace:function(je,Ve,J){},characters:function(je,Ve,J){if(je=qe.apply(this,arguments)){if(this.cdata)var Y=this.doc.createCDATASection(je);else Y=this.doc.createTextNode(je);this.currentElement?this.currentElement.appendChild(Y):/^\s*$/.test(je)&&this.doc.appendChild(Y),this.locator&&le(this.locator,Y)}},skippedEntity:function(je){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(je){(this.locator=je)&&(je.lineNumber=0)},comment:function(je,Ve,J){je=qe.apply(this,arguments);var Y=this.doc.createComment(je);this.locator&&le(this.locator,Y),Tt(this,Y)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(je,Ve,J){var Y=this.doc.implementation;if(Y&&Y.createDocumentType){var Ee=Y.createDocumentType(je,Ve,J);this.locator&&le(this.locator,Ee),Tt(this,Ee),this.doc.doctype=Ee}},warning:function(je){console.warn("[xmldom warning]\t"+je,vt(this.locator))},error:function(je){console.error("[xmldom error]\t"+je,vt(this.locator))},fatalError:function(je){throw new Xe(je,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(je){wt.prototype[je]=function(){return null}}),st.DOMParser=Re},6475:(nn,st,H)=>{var y=H(9451),fe=y.find,se=y.NAMESPACE;function V(he){return""!==he}function De(he,pe){return he.hasOwnProperty(pe)||(he[pe]=!0),he}function $e(he){if(!he)return[];var pe=function Ce(he){return he?he.split(/[\t\n\f\r ]+/).filter(V):[]}(he);return Object.keys(pe.reduce(De,{}))}function et(he,pe){for(var Ne in he)Object.prototype.hasOwnProperty.call(he,Ne)&&(pe[Ne]=he[Ne])}function Se(he,pe){var Ne=he.prototype;if(!(Ne instanceof pe)){let cn=function(){};cn.prototype=pe.prototype,cn=new cn,et(Ne,cn),he.prototype=Ne=cn}Ne.constructor!=he&&("function"!=typeof he&&console.error("unknown Class:"+he),Ne.constructor=he)}var Re={},Le=Re.ELEMENT_NODE=1,wt=Re.ATTRIBUTE_NODE=2,le=Re.TEXT_NODE=3,vt=Re.CDATA_SECTION_NODE=4,qe=Re.ENTITY_REFERENCE_NODE=5,Tt=Re.ENTITY_NODE=6,je=Re.PROCESSING_INSTRUCTION_NODE=7,Ve=Re.COMMENT_NODE=8,J=Re.DOCUMENT_NODE=9,Y=Re.DOCUMENT_TYPE_NODE=10,Ee=Re.DOCUMENT_FRAGMENT_NODE=11,_e=Re.NOTATION_NODE=12,Fe={},ut={},Pe=(Fe.INDEX_SIZE_ERR=(ut[1]="Index size error",1),Fe.DOMSTRING_SIZE_ERR=(ut[2]="DOMString size error",2),Fe.HIERARCHY_REQUEST_ERR=(ut[3]="Hierarchy request error",3)),ot=(Fe.WRONG_DOCUMENT_ERR=(ut[4]="Wrong document",4),Fe.INVALID_CHARACTER_ERR=(ut[5]="Invalid character",5),Fe.NO_DATA_ALLOWED_ERR=(ut[6]="No data allowed",6),Fe.NO_MODIFICATION_ALLOWED_ERR=(ut[7]="No modification allowed",7),Fe.NOT_FOUND_ERR=(ut[8]="Not found",8)),rt=(Fe.NOT_SUPPORTED_ERR=(ut[9]="Not supported",9),Fe.INUSE_ATTRIBUTE_ERR=(ut[10]="Attribute in use",10));function jt(he,pe){if(pe instanceof Error)var Ne=pe;else Ne=this,Error.call(this,ut[he]),this.message=ut[he],Error.captureStackTrace&&Error.captureStackTrace(this,jt);return Ne.code=he,pe&&(this.message=this.message+": "+pe),Ne}function Lt(){}function Kt(he,pe){this._node=he,this._refresh=pe,wn(this)}function wn(he){var pe=he._node._inc||he._node.ownerDocument._inc;if(he._inc!==pe){var Ne=he._refresh(he._node);if(Yt(he,"length",Ne.length),!he.$$length||Ne.length<he.$$length)for(var ct=Ne.length;ct in he;ct++)Object.prototype.hasOwnProperty.call(he,ct)&&delete he[ct];et(Ne,he),he._inc=pe}}function Fn(){}function jn(he,pe){for(var Ne=he.length;Ne--;)if(he[Ne]===pe)return Ne}function zn(he,pe,Ne,ct){if(ct?pe[jn(pe,ct)]=Ne:pe[pe.length++]=Ne,he){Ne.ownerElement=he;var cn=he.ownerDocument;cn&&(ct&&Mr(cn,he,ct),function Hr(he,pe,Ne){he&&he._inc++,Ne.namespaceURI===se.XMLNS&&(pe._nsMap[Ne.prefix?Ne.localName:""]=Ne.value)}(cn,he,Ne))}}function ur(he,pe,Ne){var ct=jn(pe,Ne);if(!(ct>=0))throw new jt(ot,new Error(he.tagName+"@"+Ne));for(var cn=pe.length-1;ct<cn;)pe[ct]=pe[++ct];if(pe.length=cn,he){var Zn=he.ownerDocument;Zn&&(Mr(Zn,he,Ne),Ne.ownerElement=null)}}function rr(){}function $n(){}function wr(he){return("<"==he?"&lt;":">"==he&&"&gt;")||"&"==he&&"&amp;"||'"'==he&&"&quot;"||"&#"+he.charCodeAt()+";"}function Yr(he,pe){if(pe(he))return!0;if(he=he.firstChild)do{if(Yr(he,pe))return!0}while(he=he.nextSibling)}function Cr(){this.ownerDocument=this}function Mr(he,pe,Ne,ct){he&&he._inc++,Ne.namespaceURI===se.XMLNS&&delete pe._nsMap[Ne.prefix?Ne.localName:""]}function Pr(he,pe,Ne){if(he&&he._inc){he._inc++;var ct=pe.childNodes;if(Ne)ct[ct.length++]=Ne;else{for(var cn=pe.firstChild,Zn=0;cn;)ct[Zn++]=cn,cn=cn.nextSibling;ct.length=Zn,delete ct[ct.length]}}}function yi(he,pe){var Ne=pe.previousSibling,ct=pe.nextSibling;return Ne?Ne.nextSibling=ct:he.firstChild=ct,ct?ct.previousSibling=Ne:he.lastChild=Ne,pe.parentNode=null,pe.previousSibling=null,pe.nextSibling=null,Pr(he.ownerDocument,he),pe}function Bn(he){return he&&he.nodeType===$n.DOCUMENT_TYPE_NODE}function Nn(he){return he&&he.nodeType===$n.ELEMENT_NODE}function xr(he){return he&&he.nodeType===$n.TEXT_NODE}function sr(he,pe){var Ne=he.childNodes||[];if(fe(Ne,Nn)||Bn(pe))return!1;var ct=fe(Ne,Bn);return!(pe&&ct&&Ne.indexOf(ct)>Ne.indexOf(pe))}function Gi(he,pe){var Ne=he.childNodes||[];if(fe(Ne,function ct(Zn){return Nn(Zn)&&Zn!==pe}))return!1;var cn=fe(Ne,Bn);return!(pe&&cn&&Ne.indexOf(cn)>Ne.indexOf(pe))}function _i(he,pe,Ne){var ct=he.childNodes||[],cn=pe.childNodes||[];if(pe.nodeType===$n.DOCUMENT_FRAGMENT_NODE){var Zn=cn.filter(Nn);if(Zn.length>1||fe(cn,xr))throw new jt(Pe,"More than one element or text in fragment");if(1===Zn.length&&!sr(he,Ne))throw new jt(Pe,"Element in fragment can not be inserted before doctype")}if(Nn(pe)&&!sr(he,Ne))throw new jt(Pe,"Only one element can be added and only after doctype");if(Bn(pe)){if(fe(ct,Bn))throw new jt(Pe,"Only one doctype is allowed");var kr=fe(ct,Nn);if(Ne&&ct.indexOf(kr)<ct.indexOf(Ne))throw new jt(Pe,"Doctype can only be inserted before an element");if(!Ne&&kr)throw new jt(Pe,"Doctype can not be appended since element is present")}}function Ws(he,pe,Ne){var ct=he.childNodes||[],cn=pe.childNodes||[];if(pe.nodeType===$n.DOCUMENT_FRAGMENT_NODE){var Zn=cn.filter(Nn);if(Zn.length>1||fe(cn,xr))throw new jt(Pe,"More than one element or text in fragment");if(1===Zn.length&&!Gi(he,Ne))throw new jt(Pe,"Element in fragment can not be inserted before doctype")}if(Nn(pe)&&!Gi(he,Ne))throw new jt(Pe,"Only one element can be added and only after doctype");if(Bn(pe)){if(fe(ct,function(Et){return Bn(Et)&&Et!==Ne}))throw new jt(Pe,"Only one doctype is allowed");var kr=fe(ct,Nn);if(Ne&&ct.indexOf(kr)<ct.indexOf(Ne))throw new jt(Pe,"Doctype can only be inserted before an element")}}function Rr(he,pe,Ne,ct){(function Zr(he,pe,Ne){if(!function Ir(he){return he&&(he.nodeType===$n.DOCUMENT_NODE||he.nodeType===$n.DOCUMENT_FRAGMENT_NODE||he.nodeType===$n.ELEMENT_NODE)}(he))throw new jt(Pe,"Unexpected parent node type "+he.nodeType);if(Ne&&Ne.parentNode!==he)throw new jt(ot,"child not in parent");if(!function dn(he){return he&&(Nn(he)||xr(he)||Bn(he)||he.nodeType===$n.DOCUMENT_FRAGMENT_NODE||he.nodeType===$n.COMMENT_NODE||he.nodeType===$n.PROCESSING_INSTRUCTION_NODE)}(pe)||Bn(pe)&&he.nodeType!==$n.DOCUMENT_NODE)throw new jt(Pe,"Unexpected node type "+pe.nodeType+" for parent node type "+he.nodeType)})(he,pe,Ne),he.nodeType===$n.DOCUMENT_NODE&&(ct||_i)(he,pe,Ne);var cn=pe.parentNode;if(cn&&cn.removeChild(pe),pe.nodeType===Ee){var Zn=pe.firstChild;if(null==Zn)return pe;var kr=pe.lastChild}else Zn=kr=pe;var ti=Ne?Ne.previousSibling:he.lastChild;Zn.previousSibling=ti,kr.nextSibling=Ne,ti?ti.nextSibling=Zn:he.firstChild=Zn,null==Ne?he.lastChild=kr:Ne.previousSibling=kr;do{Zn.parentNode=he}while(Zn!==kr&&(Zn=Zn.nextSibling));return Pr(he.ownerDocument||he,he),pe.nodeType==Ee&&(pe.firstChild=pe.lastChild=null),pe}function mr(){this._nsMap={}}function ns(){}function gr(){}function zi(){}function di(){}function Xi(){}function bi(){}function wi(){}function Vr(){}function os(){}function Ar(){}function vs(){}function Rn(){}function tt(he,pe){var Ne=[],ct=9==this.nodeType&&this.documentElement||this,cn=ct.prefix,Zn=ct.namespaceURI;if(Zn&&null==cn&&null==(cn=ct.lookupPrefix(Zn)))var kr=[{namespace:Zn,prefix:null}];return ye(this,Ne,he,pe,kr),Ne.join("")}function ve(he,pe,Ne){var ct=he.prefix||"",cn=he.namespaceURI;if(!cn||"xml"===ct&&cn===se.XML||cn===se.XMLNS)return!1;for(var Zn=Ne.length;Zn--;){var kr=Ne[Zn];if(kr.prefix===ct)return kr.namespace!==cn}return!0}function be(he,pe,Ne){he.push(" ",pe,'="',Ne.replace(/[<>&"\t\n\r]/g,wr),'"')}function ye(he,pe,Ne,ct,cn){if(cn||(cn=[]),ct){if(!(he=ct(he)))return;if("string"==typeof he)return void pe.push(he)}switch(he.nodeType){case Le:var Zn=he.attributes,kr=Zn.length,pi=he.firstChild,ti=he.tagName,Ut=ti;if(!(Ne=se.isHTML(he.namespaceURI)||Ne)&&!he.prefix&&he.namespaceURI){for(var Et,Jt=0;Jt<Zn.length;Jt++)if("xmlns"===Zn.item(Jt).name){Et=Zn.item(Jt).value;break}if(!Et)for(var An=cn.length-1;An>=0;An--)if(""===(Yn=cn[An]).prefix&&Yn.namespace===he.namespaceURI){Et=Yn.namespace;break}if(Et!==he.namespaceURI)for(An=cn.length-1;An>=0;An--){var Yn;if((Yn=cn[An]).namespace===he.namespaceURI){Yn.prefix&&(Ut=Yn.prefix+":"+ti);break}}}pe.push("<",Ut);for(var ir=0;ir<kr;ir++)"xmlns"==(yr=Zn.item(ir)).prefix?cn.push({prefix:yr.localName,namespace:yr.value}):"xmlns"==yr.nodeName&&cn.push({prefix:"",namespace:yr.value});for(ir=0;ir<kr;ir++){var yr,Qr,fi;ve(yr=Zn.item(ir),0,cn)&&(be(pe,(Qr=yr.prefix||"")?"xmlns:"+Qr:"xmlns",fi=yr.namespaceURI),cn.push({prefix:Qr,namespace:fi})),ye(yr,pe,Ne,ct,cn)}if(ti===Ut&&ve(he,0,cn)&&(be(pe,(Qr=he.prefix||"")?"xmlns:"+Qr:"xmlns",fi=he.namespaceURI),cn.push({prefix:Qr,namespace:fi})),pi||Ne&&!/^(?:meta|link|img|br|hr|input)$/i.test(ti)){if(pe.push(">"),Ne&&/^script$/i.test(ti))for(;pi;)pi.data?pe.push(pi.data):ye(pi,pe,Ne,ct,cn.slice()),pi=pi.nextSibling;else for(;pi;)ye(pi,pe,Ne,ct,cn.slice()),pi=pi.nextSibling;pe.push("</",Ut,">")}else pe.push("/>");return;case J:case Ee:for(pi=he.firstChild;pi;)ye(pi,pe,Ne,ct,cn.slice()),pi=pi.nextSibling;return;case wt:return be(pe,he.name,he.value);case le:return pe.push(he.data.replace(/[<&>]/g,wr));case vt:return pe.push("<![CDATA[",he.data,"]]>");case Ve:return pe.push("\x3c!--",he.data,"--\x3e");case Y:var rs=he.publicId,Ks=he.systemId;if(pe.push("<!DOCTYPE ",he.name),rs)pe.push(" PUBLIC ",rs),Ks&&"."!=Ks&&pe.push(" ",Ks),pe.push(">");else if(Ks&&"."!=Ks)pe.push(" SYSTEM ",Ks,">");else{var $o=he.internalSubset;$o&&pe.push(" [",$o,"]"),pe.push(">")}return;case je:return pe.push("<?",he.target," ",he.data,"?>");case qe:return pe.push("&",he.nodeName,";");default:pe.push("??",he.nodeName)}}function Ae(he,pe,Ne){var ct;switch(pe.nodeType){case Le:(ct=pe.cloneNode(!1)).ownerDocument=he;case Ee:break;case wt:Ne=!0}if(ct||(ct=pe.cloneNode(!1)),ct.ownerDocument=he,ct.parentNode=null,Ne)for(var cn=pe.firstChild;cn;)ct.appendChild(Ae(he,cn,Ne)),cn=cn.nextSibling;return ct}function yt(he,pe,Ne){var ct=new pe.constructor;for(var cn in pe)if(Object.prototype.hasOwnProperty.call(pe,cn)){var Zn=pe[cn];"object"!=typeof Zn&&Zn!=ct[cn]&&(ct[cn]=Zn)}switch(pe.childNodes&&(ct.childNodes=new Lt),ct.ownerDocument=he,ct.nodeType){case Le:var kr=pe.attributes,ti=ct.attributes=new Fn,Ut=kr.length;ti._ownerElement=ct;for(var Et=0;Et<Ut;Et++)ct.setAttributeNode(yt(he,kr.item(Et),!0));break;case wt:Ne=!0}if(Ne)for(var Jt=pe.firstChild;Jt;)ct.appendChild(yt(he,Jt,Ne)),Jt=Jt.nextSibling;return ct}function Yt(he,pe,Ne){he[pe]=Ne}Fe.INVALID_STATE_ERR=(ut[11]="Invalid state",11),Fe.SYNTAX_ERR=(ut[12]="Syntax error",12),Fe.INVALID_MODIFICATION_ERR=(ut[13]="Invalid modification",13),Fe.NAMESPACE_ERR=(ut[14]="Invalid namespace",14),Fe.INVALID_ACCESS_ERR=(ut[15]="Invalid access",15),jt.prototype=Error.prototype,et(Fe,jt),Lt.prototype={length:0,item:function(he){return he>=0&&he<this.length?this[he]:null},toString:function(he,pe){for(var Ne=[],ct=0;ct<this.length;ct++)ye(this[ct],Ne,he,pe);return Ne.join("")},filter:function(he){return Array.prototype.filter.call(this,he)},indexOf:function(he){return Array.prototype.indexOf.call(this,he)}},Kt.prototype.item=function(he){return wn(this),this[he]||null},Se(Kt,Lt),Fn.prototype={length:0,item:Lt.prototype.item,getNamedItem:function(he){for(var pe=this.length;pe--;){var Ne=this[pe];if(Ne.nodeName==he)return Ne}},setNamedItem:function(he){var pe=he.ownerElement;if(pe&&pe!=this._ownerElement)throw new jt(rt);var Ne=this.getNamedItem(he.nodeName);return zn(this._ownerElement,this,he,Ne),Ne},setNamedItemNS:function(he){var Ne,pe=he.ownerElement;if(pe&&pe!=this._ownerElement)throw new jt(rt);return Ne=this.getNamedItemNS(he.namespaceURI,he.localName),zn(this._ownerElement,this,he,Ne),Ne},removeNamedItem:function(he){var pe=this.getNamedItem(he);return ur(this._ownerElement,this,pe),pe},removeNamedItemNS:function(he,pe){var Ne=this.getNamedItemNS(he,pe);return ur(this._ownerElement,this,Ne),Ne},getNamedItemNS:function(he,pe){for(var Ne=this.length;Ne--;){var ct=this[Ne];if(ct.localName==pe&&ct.namespaceURI==he)return ct}return null}},rr.prototype={hasFeature:function(he,pe){return!0},createDocument:function(he,pe,Ne){var ct=new Cr;if(ct.implementation=this,ct.childNodes=new Lt,ct.doctype=Ne||null,Ne&&ct.appendChild(Ne),pe){var cn=ct.createElementNS(he,pe);ct.appendChild(cn)}return ct},createDocumentType:function(he,pe,Ne){var ct=new bi;return ct.name=he,ct.nodeName=he,ct.publicId=pe||"",ct.systemId=Ne||"",ct}},$n.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(he,pe){return Rr(this,he,pe)},replaceChild:function(he,pe){Rr(this,he,pe,Ws),pe&&this.removeChild(pe)},removeChild:function(he){return yi(this,he)},appendChild:function(he){return this.insertBefore(he,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(he){return yt(this.ownerDocument||this,this,he)},normalize:function(){for(var he=this.firstChild;he;){var pe=he.nextSibling;pe&&pe.nodeType==le&&he.nodeType==le?(this.removeChild(pe),he.appendData(pe.data)):(he.normalize(),he=pe)}},isSupported:function(he,pe){return this.ownerDocument.implementation.hasFeature(he,pe)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(he){for(var pe=this;pe;){var Ne=pe._nsMap;if(Ne)for(var ct in Ne)if(Object.prototype.hasOwnProperty.call(Ne,ct)&&Ne[ct]===he)return ct;pe=pe.nodeType==wt?pe.ownerDocument:pe.parentNode}return null},lookupNamespaceURI:function(he){for(var pe=this;pe;){var Ne=pe._nsMap;if(Ne&&Object.prototype.hasOwnProperty.call(Ne,he))return Ne[he];pe=pe.nodeType==wt?pe.ownerDocument:pe.parentNode}return null},isDefaultNamespace:function(he){return null==this.lookupPrefix(he)}},et(Re,$n),et(Re,$n.prototype),Cr.prototype={nodeName:"#document",nodeType:J,doctype:null,documentElement:null,_inc:1,insertBefore:function(he,pe){if(he.nodeType==Ee){for(var Ne=he.firstChild;Ne;){var ct=Ne.nextSibling;this.insertBefore(Ne,pe),Ne=ct}return he}return Rr(this,he,pe),he.ownerDocument=this,null===this.documentElement&&he.nodeType===Le&&(this.documentElement=he),he},removeChild:function(he){return this.documentElement==he&&(this.documentElement=null),yi(this,he)},replaceChild:function(he,pe){Rr(this,he,pe,Ws),he.ownerDocument=this,pe&&this.removeChild(pe),Nn(he)&&(this.documentElement=he)},importNode:function(he,pe){return Ae(this,he,pe)},getElementById:function(he){var pe=null;return Yr(this.documentElement,function(Ne){if(Ne.nodeType==Le&&Ne.getAttribute("id")==he)return pe=Ne,!0}),pe},getElementsByClassName:function(he){var pe=$e(he);return new Kt(this,function(Ne){var ct=[];return pe.length>0&&Yr(Ne.documentElement,function(cn){if(cn!==Ne&&cn.nodeType===Le){var Zn=cn.getAttribute("class");if(Zn){var kr=he===Zn;if(!kr){var ti=$e(Zn);kr=pe.every(function Xe(he){return function(pe){return he&&-1!==he.indexOf(pe)}}(ti))}kr&&ct.push(cn)}}}),ct})},createElement:function(he){var pe=new mr;return pe.ownerDocument=this,pe.nodeName=he,pe.tagName=he,pe.localName=he,pe.childNodes=new Lt,(pe.attributes=new Fn)._ownerElement=pe,pe},createDocumentFragment:function(){var he=new Ar;return he.ownerDocument=this,he.childNodes=new Lt,he},createTextNode:function(he){var pe=new zi;return pe.ownerDocument=this,pe.appendData(he),pe},createComment:function(he){var pe=new di;return pe.ownerDocument=this,pe.appendData(he),pe},createCDATASection:function(he){var pe=new Xi;return pe.ownerDocument=this,pe.appendData(he),pe},createProcessingInstruction:function(he,pe){var Ne=new vs;return Ne.ownerDocument=this,Ne.tagName=Ne.nodeName=Ne.target=he,Ne.nodeValue=Ne.data=pe,Ne},createAttribute:function(he){var pe=new ns;return pe.ownerDocument=this,pe.name=he,pe.nodeName=he,pe.localName=he,pe.specified=!0,pe},createEntityReference:function(he){var pe=new os;return pe.ownerDocument=this,pe.nodeName=he,pe},createElementNS:function(he,pe){var Ne=new mr,ct=pe.split(":"),cn=Ne.attributes=new Fn;return Ne.childNodes=new Lt,Ne.ownerDocument=this,Ne.nodeName=pe,Ne.tagName=pe,Ne.namespaceURI=he,2==ct.length?(Ne.prefix=ct[0],Ne.localName=ct[1]):Ne.localName=pe,cn._ownerElement=Ne,Ne},createAttributeNS:function(he,pe){var Ne=new ns,ct=pe.split(":");return Ne.ownerDocument=this,Ne.nodeName=pe,Ne.name=pe,Ne.namespaceURI=he,Ne.specified=!0,2==ct.length?(Ne.prefix=ct[0],Ne.localName=ct[1]):Ne.localName=pe,Ne}},Se(Cr,$n),Cr.prototype.getElementsByTagName=(mr.prototype={nodeType:Le,hasAttribute:function(he){return null!=this.getAttributeNode(he)},getAttribute:function(he){var pe=this.getAttributeNode(he);return pe&&pe.value||""},getAttributeNode:function(he){return this.attributes.getNamedItem(he)},setAttribute:function(he,pe){var Ne=this.ownerDocument.createAttribute(he);Ne.value=Ne.nodeValue=""+pe,this.setAttributeNode(Ne)},removeAttribute:function(he){var pe=this.getAttributeNode(he);pe&&this.removeAttributeNode(pe)},appendChild:function(he){return he.nodeType===Ee?this.insertBefore(he,null):function On(he,pe){return pe.parentNode&&pe.parentNode.removeChild(pe),pe.parentNode=he,pe.previousSibling=he.lastChild,pe.nextSibling=null,pe.previousSibling?pe.previousSibling.nextSibling=pe:he.firstChild=pe,he.lastChild=pe,Pr(he.ownerDocument,he,pe),pe}(this,he)},setAttributeNode:function(he){return this.attributes.setNamedItem(he)},setAttributeNodeNS:function(he){return this.attributes.setNamedItemNS(he)},removeAttributeNode:function(he){return this.attributes.removeNamedItem(he.nodeName)},removeAttributeNS:function(he,pe){var Ne=this.getAttributeNodeNS(he,pe);Ne&&this.removeAttributeNode(Ne)},hasAttributeNS:function(he,pe){return null!=this.getAttributeNodeNS(he,pe)},getAttributeNS:function(he,pe){var Ne=this.getAttributeNodeNS(he,pe);return Ne&&Ne.value||""},setAttributeNS:function(he,pe,Ne){var ct=this.ownerDocument.createAttributeNS(he,pe);ct.value=ct.nodeValue=""+Ne,this.setAttributeNode(ct)},getAttributeNodeNS:function(he,pe){return this.attributes.getNamedItemNS(he,pe)},getElementsByTagName:function(he){return new Kt(this,function(pe){var Ne=[];return Yr(pe,function(ct){ct!==pe&&ct.nodeType==Le&&("*"===he||ct.tagName==he)&&Ne.push(ct)}),Ne})},getElementsByTagNameNS:function(he,pe){return new Kt(this,function(Ne){var ct=[];return Yr(Ne,function(cn){cn!==Ne&&cn.nodeType===Le&&("*"===he||cn.namespaceURI===he)&&("*"===pe||cn.localName==pe)&&ct.push(cn)}),ct})}}).getElementsByTagName,Cr.prototype.getElementsByTagNameNS=mr.prototype.getElementsByTagNameNS,Se(mr,$n),ns.prototype.nodeType=wt,Se(ns,$n),gr.prototype={data:"",substringData:function(he,pe){return this.data.substring(he,he+pe)},appendData:function(he){this.nodeValue=this.data=he=this.data+he,this.length=he.length},insertData:function(he,pe){this.replaceData(he,0,pe)},appendChild:function(he){throw new Error(ut[Pe])},deleteData:function(he,pe){this.replaceData(he,pe,"")},replaceData:function(he,pe,Ne){var ct=this.data.substring(0,he),cn=this.data.substring(he+pe);this.nodeValue=this.data=Ne=ct+Ne+cn,this.length=Ne.length}},Se(gr,$n),zi.prototype={nodeName:"#text",nodeType:le,splitText:function(he){var pe=this.data,Ne=pe.substring(he);pe=pe.substring(0,he),this.data=this.nodeValue=pe,this.length=pe.length;var ct=this.ownerDocument.createTextNode(Ne);return this.parentNode&&this.parentNode.insertBefore(ct,this.nextSibling),ct}},Se(zi,gr),di.prototype={nodeName:"#comment",nodeType:Ve},Se(di,gr),Xi.prototype={nodeName:"#cdata-section",nodeType:vt},Se(Xi,gr),bi.prototype.nodeType=Y,Se(bi,$n),wi.prototype.nodeType=_e,Se(wi,$n),Vr.prototype.nodeType=Tt,Se(Vr,$n),os.prototype.nodeType=qe,Se(os,$n),Ar.prototype.nodeName="#document-fragment",Ar.prototype.nodeType=Ee,Se(Ar,$n),vs.prototype.nodeType=je,Se(vs,$n),Rn.prototype.serializeToString=function(he,pe,Ne){return tt.call(he,pe,Ne)},$n.prototype.toString=tt;try{if(Object.defineProperty){let he=function(pe){switch(pe.nodeType){case Le:case Ee:var Ne=[];for(pe=pe.firstChild;pe;)7!==pe.nodeType&&8!==pe.nodeType&&Ne.push(he(pe)),pe=pe.nextSibling;return Ne.join("");default:return pe.nodeValue}};Object.defineProperty(Kt.prototype,"length",{get:function(){return wn(this),this.$$length}}),Object.defineProperty($n.prototype,"textContent",{get:function(){return he(this)},set:function(pe){switch(this.nodeType){case Le:case Ee:for(;this.firstChild;)this.removeChild(this.firstChild);(pe||String(pe))&&this.appendChild(this.ownerDocument.createTextNode(pe));break;default:this.data=pe,this.value=pe,this.nodeValue=pe}}}),Yt=function(pe,Ne,ct){pe["$$"+Ne]=ct}}}catch{}st.DocumentType=bi,st.DOMException=jt,st.DOMImplementation=rr,st.Element=mr,st.Node=$n,st.NodeList=Lt,st.XMLSerializer=Rn},4562:(nn,st,H)=>{"use strict";var y=H(9451).freeze;st.XML_ENTITIES=y({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),st.HTML_ENTITIES=y({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),st.entityMap=st.HTML_ENTITIES},3862:(nn,st,H)=>{H(6475);st.DOMParser=H(1020).DOMParser},6989:(nn,st,H)=>{var y=H(9451).NAMESPACE,fe=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,se=new RegExp("[\\-\\.0-9"+fe.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),V=new RegExp("^"+fe.source+se.source+"*(?::"+fe.source+se.source+"*)?$");function wt(W,ne){this.message=W,this.locator=ne,Error.captureStackTrace&&Error.captureStackTrace(this,wt)}function le(){}function qe(W,ne){return ne.lineNumber=W.lineNumber,ne.columnNumber=W.columnNumber,ne}function Tt(W,ne,Pe,bt,Bt,$t){function Xt(Ot,qt,jt){Pe.attributeNames.hasOwnProperty(Ot)&&$t.fatalError("Attribute "+Ot+" redefined"),Pe.addValue(Ot,qt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,Bt),jt)}for(var ot,rt=++ne,Qe=0;;){var dt=W.charAt(rt);switch(dt){case"=":if(1===Qe)ot=W.slice(ne,rt),Qe=3;else{if(2!==Qe)throw new Error("attribute equal must after attrName");Qe=3}break;case"'":case'"':if(3===Qe||1===Qe){if(1===Qe&&($t.warning('attribute value must after "="'),ot=W.slice(ne,rt)),!((rt=W.indexOf(dt,ne=rt+1))>0))throw new Error("attribute value no end '"+dt+"' match");Xt(ot,Ye=W.slice(ne,rt),ne-1),Qe=5}else{if(4!=Qe)throw new Error('attribute value must after "="');Xt(ot,Ye=W.slice(ne,rt),ne),$t.warning('attribute "'+ot+'" missed start quot('+dt+")!!"),ne=rt+1,Qe=5}break;case"/":switch(Qe){case 0:Pe.setTagName(W.slice(ne,rt));case 5:case 6:case 7:Qe=7,Pe.closed=!0;case 4:case 1:break;case 2:Pe.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return $t.error("unexpected end of input"),0==Qe&&Pe.setTagName(W.slice(ne,rt)),rt;case">":switch(Qe){case 0:Pe.setTagName(W.slice(ne,rt));case 5:case 6:case 7:break;case 4:case 1:"/"===(Ye=W.slice(ne,rt)).slice(-1)&&(Pe.closed=!0,Ye=Ye.slice(0,-1));case 2:2===Qe&&(Ye=ot),4==Qe?($t.warning('attribute "'+Ye+'" missed quot(")!'),Xt(ot,Ye,ne)):((!y.isHTML(bt[""])||!Ye.match(/^(?:disabled|checked|selected)$/i))&&$t.warning('attribute "'+Ye+'" missed value!! "'+Ye+'" instead!!'),Xt(Ye,Ye,ne));break;case 3:throw new Error("attribute value missed!!")}return rt;case"\x80":dt=" ";default:if(dt<=" ")switch(Qe){case 0:Pe.setTagName(W.slice(ne,rt)),Qe=6;break;case 1:ot=W.slice(ne,rt),Qe=2;break;case 4:var Ye=W.slice(ne,rt);$t.warning('attribute "'+Ye+'" missed quot(")!!'),Xt(ot,Ye,ne);case 5:Qe=6}else switch(Qe){case 2:(!y.isHTML(bt[""])||!ot.match(/^(?:disabled|checked|selected)$/i))&&$t.warning('attribute "'+ot+'" missed value!! "'+ot+'" instead2!!'),Xt(ot,ot,ne),ne=rt,Qe=1;break;case 5:$t.warning('attribute space is required"'+ot+'"!!');case 6:Qe=1,ne=rt;break;case 3:Qe=4,ne=rt;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}rt++}}function je(W,ne,Pe){for(var bt=W.tagName,Bt=null,dt=W.length;dt--;){var $t=W[dt],Xt=$t.qName,ot=$t.value;if((at=Xt.indexOf(":"))>0)var Ye=$t.prefix=Xt.slice(0,at),rt=Xt.slice(at+1),Qe="xmlns"===Ye&&rt;else rt=Xt,Ye=null,Qe="xmlns"===Xt&&"";$t.localName=rt,!1!==Qe&&(null==Bt&&(Bt={},Y(Pe,Pe={})),Pe[Qe]=Bt[Qe]=ot,$t.uri=y.XMLNS,ne.startPrefixMapping(Qe,ot))}for(dt=W.length;dt--;)(Ye=($t=W[dt]).prefix)&&("xml"===Ye&&($t.uri=y.XML),"xmlns"!==Ye&&($t.uri=Pe[Ye||""]));var at;(at=bt.indexOf(":"))>0?(Ye=W.prefix=bt.slice(0,at),rt=W.localName=bt.slice(at+1)):(Ye=null,rt=W.localName=bt);var Ot=W.uri=Pe[Ye||""];if(ne.startElement(Ot,rt,bt,W),!W.closed)return W.currentNSMap=Pe,W.localNSMap=Bt,!0;if(ne.endElement(Ot,rt,bt),Bt)for(Ye in Bt)Object.prototype.hasOwnProperty.call(Bt,Ye)&&ne.endPrefixMapping(Ye)}function Ve(W,ne,Pe,bt,Bt){if(/^(?:script|textarea)$/i.test(Pe)){var $t=W.indexOf("</"+Pe+">",ne),Xt=W.substring(ne+1,$t);if(/[&<]/.test(Xt))return/^script$/i.test(Pe)?(Bt.characters(Xt,0,Xt.length),$t):(Xt=Xt.replace(/&#?\w+;/g,bt),Bt.characters(Xt,0,Xt.length),$t)}return ne+1}function J(W,ne,Pe,bt){var Bt=bt[Pe];return null==Bt&&((Bt=W.lastIndexOf("</"+Pe+">"))<ne&&(Bt=W.lastIndexOf("</"+Pe)),bt[Pe]=Bt),Bt<ne}function Y(W,ne){for(var Pe in W)Object.prototype.hasOwnProperty.call(W,Pe)&&(ne[Pe]=W[Pe])}function Ee(W,ne,Pe,bt){if("-"===W.charAt(ne+2))return"-"===W.charAt(ne+3)?($t=W.indexOf("--\x3e",ne+4))>ne?(Pe.comment(W,ne+4,$t-ne-4),$t+3):(bt.error("Unclosed comment"),-1):-1;if("CDATA["==W.substr(ne+3,6)){var $t=W.indexOf("]]>",ne+9);return Pe.startCDATA(),Pe.characters(W,ne+9,$t-ne-9),Pe.endCDATA(),$t+3}var Xt=function ut(W,ne){var Pe,bt=[],Bt=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Bt.lastIndex=ne,Bt.exec(W);Pe=Bt.exec(W);)if(bt.push(Pe),Pe[1])return bt}(W,ne),ot=Xt.length;if(ot>1&&/!doctype/i.test(Xt[0][0])){var Ye=Xt[1][0],rt=!1,Qe=!1;ot>3&&(/^public$/i.test(Xt[2][0])?(rt=Xt[3][0],Qe=ot>4&&Xt[4][0]):/^system$/i.test(Xt[2][0])&&(Qe=Xt[3][0]));var dt=Xt[ot-1];return Pe.startDTD(Ye,rt,Qe),Pe.endDTD(),dt.index+dt[0].length}return-1}function _e(W,ne,Pe){var bt=W.indexOf("?>",ne);if(bt){var Bt=W.substring(ne,bt).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Bt?(Pe.processingInstruction(Bt[1],Bt[2]),bt+2):-1}return-1}function Fe(){this.attributeNames={}}(wt.prototype=new Error).name=wt.name,le.prototype={parse:function(W,ne,Pe){var bt=this.domBuilder;bt.startDocument(),Y(ne,ne={}),function vt(W,ne,Pe,bt,Bt){function Xt(Ir){var dn=Ir.slice(1,-1);return Object.hasOwnProperty.call(Pe,dn)?Pe[dn]:"#"===dn.charAt(0)?function $t(Ir){return Ir>65535?(Ir-=65536,String.fromCharCode(55296+(Ir>>10),56320+(1023&Ir))):String.fromCharCode(Ir)}(parseInt(dn.substr(1).replace("x","0x"))):(Bt.error("entity not found:"+Ir),Ir)}function ot(Ir){if(Ir>jt){var dn=W.substring(jt,Ir).replace(/&#?\w+;/g,Xt);at&&Ye(jt),bt.characters(dn,0,Ir-jt),jt=Ir}}function Ye(Ir,dn){for(;Ir>=Qe&&(dn=dt.exec(W));)Qe=(rt=dn.index)+dn[0].length,at.lineNumber++;at.columnNumber=Ir-rt+1}for(var rt=0,Qe=0,dt=/.*(?:\r\n?|\n)|.*$/g,at=bt.locator,Ot=[{currentNSMap:ne}],qt={},jt=0;;){try{var Lt=W.indexOf("<",jt);if(Lt<0){if(!W.substr(jt).match(/^\s*$/)){var Kt=bt.doc,wn=Kt.createTextNode(W.substr(jt));Kt.appendChild(wn),bt.currentElement=wn}return}switch(Lt>jt&&ot(Lt),W.charAt(Lt+1)){case"/":var Cr=W.indexOf(">",Lt+3),Fn=W.substring(Lt+2,Cr).replace(/[ \t\n\r]+$/g,""),jn=Ot.pop();Cr<0?(Fn=W.substring(Lt+2).replace(/[\s<].*/,""),Bt.error("end tag name: "+Fn+" is not complete:"+jn.tagName),Cr=Lt+1+Fn.length):Fn.match(/\s</)&&(Fn=Fn.replace(/[\s<].*/,""),Bt.error("end tag name: "+Fn+" maybe not complete"),Cr=Lt+1+Fn.length);var zn=jn.localNSMap,ur=jn.tagName==Fn;if(ur||jn.tagName&&jn.tagName.toLowerCase()==Fn.toLowerCase()){if(bt.endElement(jn.uri,jn.localName,Fn),zn)for(var $n in zn)Object.prototype.hasOwnProperty.call(zn,$n)&&bt.endPrefixMapping($n);ur||Bt.fatalError("end tag name: "+Fn+" is not match the current start tagName:"+jn.tagName)}else Ot.push(jn);Cr++;break;case"?":at&&Ye(Lt),Cr=_e(W,Lt,bt);break;case"!":at&&Ye(Lt),Cr=Ee(W,Lt,bt,Bt);break;default:at&&Ye(Lt);var wr=new Fe,Yr=Ot[Ot.length-1].currentNSMap,Hr=(Cr=Tt(W,Lt,wr,Yr,Xt,Bt),wr.length);if(!wr.closed&&J(W,Cr,wr.tagName,qt)&&(wr.closed=!0,Pe.nbsp||Bt.warning("unclosed xml attribute")),at&&Hr){for(var Mr=qe(at,{}),Pr=0;Pr<Hr;Pr++){var yi=wr[Pr];Ye(yi.offset),yi.locator=qe(at,{})}bt.locator=Mr,je(wr,bt,Yr)&&Ot.push(wr),bt.locator=at}else je(wr,bt,Yr)&&Ot.push(wr);y.isHTML(wr.uri)&&!wr.closed?Cr=Ve(W,Cr,wr.tagName,Xt,bt):Cr++}}catch(Ir){if(Ir instanceof wt)throw Ir;Bt.error("element parse error: "+Ir),Cr=-1}Cr>jt?jt=Cr:ot(Math.max(Lt,jt)+1)}}(W,ne,Pe,bt,this.errorHandler),bt.endDocument()}},Fe.prototype={setTagName:function(W){if(!V.test(W))throw new Error("invalid tagName:"+W);this.tagName=W},addValue:function(W,ne,Pe){if(!V.test(W))throw new Error("invalid attribute:"+W);this.attributeNames[W]=this.length,this[this.length++]={qName:W,value:ne,offset:Pe}},length:0,getLocalName:function(W){return this[W].localName},getLocator:function(W){return this[W].locator},getQName:function(W){return this[W].qName},getURI:function(W){return this[W].uri},getValue:function(W){return this[W].value}},st.XMLReader=le,st.ParseError=wt},7598:(nn,st,H)=>{var se,y=typeof global<"u"?global:typeof window<"u"?window:{},fe=H(5893);typeof document<"u"?se=document:(se=y["__GLOBAL_DOCUMENT_CACHE@4"])||(se=y["__GLOBAL_DOCUMENT_CACHE@4"]=fe),nn.exports=se},6382:nn=>{var st;st=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nn.exports=st},7794:nn=>{nn.exports=function H(y){if(!y)return!1;var fe=st.call(y);return"[object Function]"===fe||"function"==typeof y&&"[object RegExp]"!==fe||typeof window<"u"&&(y===window.setTimeout||y===window.alert||y===window.confirm||y===window.prompt)};var st=Object.prototype.toString},8317:(nn,st)=>{function H(De){if(De&&"object"==typeof De){var $e=De.which||De.keyCode||De.charCode;$e&&(De=$e)}if("number"==typeof De)return V[De];var et,Xe=String(De);return(et=y[Xe.toLowerCase()])?et:(et=fe[Xe.toLowerCase()])||(1===Xe.length?Xe.charCodeAt(0):void 0)}H.isEventKey=function($e,Xe){if($e&&"object"==typeof $e){var et=$e.which||$e.keyCode||$e.charCode;if(null==et)return!1;if("string"==typeof Xe){var Se;if(Se=y[Xe.toLowerCase()])return Se===et;if(Se=fe[Xe.toLowerCase()])return Se===et}else if("number"==typeof Xe)return Xe===et;return!1}};var y=(st=nn.exports=H).code=st.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},fe=st.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(se=97;se<123;se++)y[String.fromCharCode(se)]=se-32;for(var se=48;se<58;se++)y[se-48]=se;for(se=1;se<13;se++)y["f"+se]=se+111;for(se=0;se<10;se++)y["numpad "+se]=se+96;var V=st.names=st.title={};for(se in y)V[y[se]]=se;for(var Ce in fe)y[Ce]=fe[Ce]},5035:(nn,st,H)=>{var y=H(301).getUint64;nn.exports=function(se){var V=new DataView(se.buffer,se.byteOffset,se.byteLength),Ce={version:se[0],flags:new Uint8Array(se.subarray(1,4)),references:[],referenceId:V.getUint32(4),timescale:V.getUint32(8)},De=12;0===Ce.version?(Ce.earliestPresentationTime=V.getUint32(De),Ce.firstOffset=V.getUint32(De+4),De+=8):(Ce.earliestPresentationTime=y(se.subarray(De)),Ce.firstOffset=y(se.subarray(De+8)),De+=16);var $e=V.getUint16(De+=2);for(De+=2;$e>0;De+=12,$e--)Ce.references.push({referenceType:(128&se[De])>>>7,referencedSize:2147483647&V.getUint32(De),subsegmentDuration:V.getUint32(De+4),startsWithSap:!!(128&se[De+8]),sapType:(112&se[De+8])>>>4,sapDeltaTime:268435455&V.getUint32(De+8)});return Ce}},5562:nn=>{var H,y,fe,se,V,Ce,De;V=function($e,Xe){return H(se($e,Xe))},Ce=function($e,Xe){return y(fe($e),Xe)},De=function($e,Xe,et){return fe(et?$e:$e-Xe)},nn.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:H=function($e){return 9e4*$e},secondsToAudioTs:y=function($e,Xe){return $e*Xe},videoTsToSeconds:fe=function($e){return $e/9e4},audioTsToSeconds:se=function($e,Xe){return $e/Xe},audioTsToVideoTs:V,videoTsToAudioTs:Ce,metadataTsToSeconds:De}},301:nn=>{var st=Math.pow(2,32);nn.exports={getUint64:function(y){var se,fe=new DataView(y.buffer,y.byteOffset,y.byteLength);return fe.getBigUint64?(se=fe.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(se):se:fe.getUint32(0)*st+fe.getUint32(4)},MAX_UINT32:st}},5619:(nn,st,H)=>{"use strict";H.d(st,{X:()=>fe});var y=H(8645);class fe extends y.x{constructor(V){super(),this._value=V}get value(){return this.getValue()}_subscribe(V){const Ce=super._subscribe(V);return!Ce.closed&&V.next(this._value),Ce}getValue(){const{hasError:V,thrownError:Ce,_value:De}=this;if(V)throw Ce;return this._throwIfClosed(),De}next(V){super.next(this._value=V)}}},5592:(nn,st,H)=>{"use strict";H.d(st,{y:()=>Xe});var y=H(305),fe=H(7394),se=H(4850),V=H(8407),Ce=H(2653),De=H(4674),$e=H(1441);let Xe=(()=>{class Le{constructor(le){le&&(this._subscribe=le)}lift(le){const vt=new Le;return vt.source=this,vt.operator=le,vt}subscribe(le,vt,qe){const Tt=function Re(Le){return Le&&Le instanceof y.Lv||function Se(Le){return Le&&(0,De.m)(Le.next)&&(0,De.m)(Le.error)&&(0,De.m)(Le.complete)}(Le)&&(0,fe.Nn)(Le)}(le)?le:new y.Hp(le,vt,qe);return(0,$e.x)(()=>{const{operator:je,source:Ve}=this;Tt.add(je?je.call(Tt,Ve):Ve?this._subscribe(Tt):this._trySubscribe(Tt))}),Tt}_trySubscribe(le){try{return this._subscribe(le)}catch(vt){le.error(vt)}}forEach(le,vt){return new(vt=et(vt))((qe,Tt)=>{const je=new y.Hp({next:Ve=>{try{le(Ve)}catch(J){Tt(J),je.unsubscribe()}},error:Tt,complete:qe});this.subscribe(je)})}_subscribe(le){var vt;return null===(vt=this.source)||void 0===vt?void 0:vt.subscribe(le)}[se.L](){return this}pipe(...le){return(0,V.U)(le)(this)}toPromise(le){return new(le=et(le))((vt,qe)=>{let Tt;this.subscribe(je=>Tt=je,je=>qe(je),()=>vt(Tt))})}}return Le.create=wt=>new Le(wt),Le})();function et(Le){var wt;return null!==(wt=Le??Ce.config.Promise)&&void 0!==wt?wt:Promise}},8645:(nn,st,H)=>{"use strict";H.d(st,{x:()=>$e});var y=H(5592),fe=H(7394);const V=(0,H(2306).d)(et=>function(){et(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=H(9039),De=H(1441);let $e=(()=>{class et extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Re){const Le=new Xe(this,this);return Le.operator=Re,Le}_throwIfClosed(){if(this.closed)throw new V}next(Re){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Le of this.currentObservers)Le.next(Re)}})}error(Re){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Re;const{observers:Le}=this;for(;Le.length;)Le.shift().error(Re)}})}complete(){(0,De.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Re}=this;for(;Re.length;)Re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Re;return(null===(Re=this.observers)||void 0===Re?void 0:Re.length)>0}_trySubscribe(Re){return this._throwIfClosed(),super._trySubscribe(Re)}_subscribe(Re){return this._throwIfClosed(),this._checkFinalizedStatuses(Re),this._innerSubscribe(Re)}_innerSubscribe(Re){const{hasError:Le,isStopped:wt,observers:le}=this;return Le||wt?fe.Lc:(this.currentObservers=null,le.push(Re),new fe.w0(()=>{this.currentObservers=null,(0,Ce.P)(le,Re)}))}_checkFinalizedStatuses(Re){const{hasError:Le,thrownError:wt,isStopped:le}=this;Le?Re.error(wt):le&&Re.complete()}asObservable(){const Re=new y.y;return Re.source=this,Re}}return et.create=(Se,Re)=>new Xe(Se,Re),et})();class Xe extends $e{constructor(Se,Re){super(),this.destination=Se,this.source=Re}next(Se){var Re,Le;null===(Le=null===(Re=this.destination)||void 0===Re?void 0:Re.next)||void 0===Le||Le.call(Re,Se)}error(Se){var Re,Le;null===(Le=null===(Re=this.destination)||void 0===Re?void 0:Re.error)||void 0===Le||Le.call(Re,Se)}complete(){var Se,Re;null===(Re=null===(Se=this.destination)||void 0===Se?void 0:Se.complete)||void 0===Re||Re.call(Se)}_subscribe(Se){var Re,Le;return null!==(Le=null===(Re=this.source)||void 0===Re?void 0:Re.subscribe(Se))&&void 0!==Le?Le:fe.Lc}}},305:(nn,st,H)=>{"use strict";H.d(st,{Hp:()=>qe,Lv:()=>Le});var y=H(4674),fe=H(7394),se=H(2653),V=H(3894),Ce=H(2420);const De=et("C",void 0,void 0);function et(Y,Ee,_e){return{kind:Y,value:Ee,error:_e}}var Se=H(7599),Re=H(1441);class Le extends fe.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,fe.Nn)(Ee)&&Ee.add(this)):this.destination=J}static create(Ee,_e,Fe){return new qe(Ee,_e,Fe)}next(Ee){this.isStopped?Ve(function Xe(Y){return et("N",Y,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ve(function $e(Y){return et("E",void 0,Y)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ve(De,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const wt=Function.prototype.bind;function le(Y,Ee){return wt.call(Y,Ee)}class vt{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:_e}=this;if(_e.next)try{_e.next(Ee)}catch(Fe){Tt(Fe)}}error(Ee){const{partialObserver:_e}=this;if(_e.error)try{_e.error(Ee)}catch(Fe){Tt(Fe)}else Tt(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(_e){Tt(_e)}}}class qe extends Le{constructor(Ee,_e,Fe){let ut;if(super(),(0,y.m)(Ee)||!Ee)ut={next:Ee??void 0,error:_e??void 0,complete:Fe??void 0};else{let W;this&&se.config.useDeprecatedNextContext?(W=Object.create(Ee),W.unsubscribe=()=>this.unsubscribe(),ut={next:Ee.next&&le(Ee.next,W),error:Ee.error&&le(Ee.error,W),complete:Ee.complete&&le(Ee.complete,W)}):ut=Ee}this.destination=new vt(ut)}}function Tt(Y){se.config.useDeprecatedSynchronousErrorHandling?(0,Re.O)(Y):(0,V.h)(Y)}function Ve(Y,Ee){const{onStoppedNotification:_e}=se.config;_e&&Se.z.setTimeout(()=>_e(Y,Ee))}const J={closed:!0,next:Ce.Z,error:function je(Y){throw Y},complete:Ce.Z}},7394:(nn,st,H)=>{"use strict";H.d(st,{Lc:()=>De,w0:()=>Ce,Nn:()=>$e});var y=H(4674);const se=(0,H(2306).d)(et=>function(Re){et(this),this.message=Re?`${Re.length} errors occurred during unsubscription:\n${Re.map((Le,wt)=>`${wt+1}) ${Le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Re});var V=H(9039);class Ce{constructor(Se){this.initialTeardown=Se,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Se;if(!this.closed){this.closed=!0;const{_parentage:Re}=this;if(Re)if(this._parentage=null,Array.isArray(Re))for(const le of Re)le.remove(this);else Re.remove(this);const{initialTeardown:Le}=this;if((0,y.m)(Le))try{Le()}catch(le){Se=le instanceof se?le.errors:[le]}const{_finalizers:wt}=this;if(wt){this._finalizers=null;for(const le of wt)try{Xe(le)}catch(vt){Se=Se??[],vt instanceof se?Se=[...Se,...vt.errors]:Se.push(vt)}}if(Se)throw new se(Se)}}add(Se){var Re;if(Se&&Se!==this)if(this.closed)Xe(Se);else{if(Se instanceof Ce){if(Se.closed||Se._hasParent(this))return;Se._addParent(this)}(this._finalizers=null!==(Re=this._finalizers)&&void 0!==Re?Re:[]).push(Se)}}_hasParent(Se){const{_parentage:Re}=this;return Re===Se||Array.isArray(Re)&&Re.includes(Se)}_addParent(Se){const{_parentage:Re}=this;this._parentage=Array.isArray(Re)?(Re.push(Se),Re):Re?[Re,Se]:Se}_removeParent(Se){const{_parentage:Re}=this;Re===Se?this._parentage=null:Array.isArray(Re)&&(0,V.P)(Re,Se)}remove(Se){const{_finalizers:Re}=this;Re&&(0,V.P)(Re,Se),Se instanceof Ce&&Se._removeParent(this)}}Ce.EMPTY=(()=>{const et=new Ce;return et.closed=!0,et})();const De=Ce.EMPTY;function $e(et){return et instanceof Ce||et&&"closed"in et&&(0,y.m)(et.remove)&&(0,y.m)(et.add)&&(0,y.m)(et.unsubscribe)}function Xe(et){(0,y.m)(et)?et():et.unsubscribe()}},2653:(nn,st,H)=>{"use strict";H.d(st,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2572:(nn,st,H)=>{"use strict";H.d(st,{a:()=>Se});var y=H(5592),fe=H(7453),se=H(2459),V=H(2737),Ce=H(7400),De=H(9940),$e=H(2714),Xe=H(8251),et=H(7103);function Se(...wt){const le=(0,De.yG)(wt),vt=(0,De.jO)(wt),{args:qe,keys:Tt}=(0,fe.D)(wt);if(0===qe.length)return(0,se.D)([],le);const je=new y.y(function Re(wt,le,vt=V.y){return qe=>{Le(le,()=>{const{length:Tt}=wt,je=new Array(Tt);let Ve=Tt,J=Tt;for(let Y=0;Y<Tt;Y++)Le(le,()=>{const Ee=(0,se.D)(wt[Y],le);let _e=!1;Ee.subscribe((0,Xe.x)(qe,Fe=>{je[Y]=Fe,_e||(_e=!0,J--),J||qe.next(vt(je.slice()))},()=>{--Ve||qe.complete()}))},qe)},qe)}}(qe,le,Tt?Ve=>(0,$e.n)(Tt,Ve):V.y));return vt?je.pipe((0,Ce.Z)(vt)):je}function Le(wt,le,vt){wt?(0,et.f)(vt,wt,le):le()}},5211:(nn,st,H)=>{"use strict";H.d(st,{z:()=>Ce});var y=H(7537),se=H(9940),V=H(2459);function Ce(...De){return function fe(){return(0,y.J)(1)}()((0,V.D)(De,(0,se.yG)(De)))}},6232:(nn,st,H)=>{"use strict";H.d(st,{E:()=>fe});const fe=new(H(5592).y)(Ce=>Ce.complete())},9315:(nn,st,H)=>{"use strict";H.d(st,{D:()=>Xe});var y=H(5592),fe=H(7453),se=H(4829),V=H(9940),Ce=H(8251),De=H(7400),$e=H(2714);function Xe(...et){const Se=(0,V.jO)(et),{args:Re,keys:Le}=(0,fe.D)(et),wt=new y.y(le=>{const{length:vt}=Re;if(!vt)return void le.complete();const qe=new Array(vt);let Tt=vt,je=vt;for(let Ve=0;Ve<vt;Ve++){let J=!1;(0,se.Xf)(Re[Ve]).subscribe((0,Ce.x)(le,Y=>{J||(J=!0,je--),qe[Ve]=Y},()=>Tt--,void 0,()=>{(!Tt||!J)&&(je||le.next(Le?(0,$e.n)(Le,qe):qe),le.complete())}))}});return Se?wt.pipe((0,De.Z)(Se)):wt}},2459:(nn,st,H)=>{"use strict";H.d(st,{D:()=>Ee});var y=H(4829),fe=H(3093),se=H(5137),De=H(5592),Xe=H(4971),et=H(4674),Se=H(7103);function Le(_e,Fe){if(!_e)throw new Error("Iterable cannot be null");return new De.y(ut=>{(0,Se.f)(ut,Fe,()=>{const W=_e[Symbol.asyncIterator]();(0,Se.f)(ut,Fe,()=>{W.next().then(ne=>{ne.done?ut.complete():ut.next(ne.value)})},0,!0)})})}var wt=H(8382),le=H(4026),vt=H(4266),qe=H(3664),Tt=H(5726),je=H(9853),Ve=H(541);function Ee(_e,Fe){return Fe?function Y(_e,Fe){if(null!=_e){if((0,wt.c)(_e))return function V(_e,Fe){return(0,y.Xf)(_e).pipe((0,se.R)(Fe),(0,fe.Q)(Fe))}(_e,Fe);if((0,vt.z)(_e))return function $e(_e,Fe){return new De.y(ut=>{let W=0;return Fe.schedule(function(){W===_e.length?ut.complete():(ut.next(_e[W++]),ut.closed||this.schedule())})})}(_e,Fe);if((0,le.t)(_e))return function Ce(_e,Fe){return(0,y.Xf)(_e).pipe((0,se.R)(Fe),(0,fe.Q)(Fe))}(_e,Fe);if((0,Tt.D)(_e))return Le(_e,Fe);if((0,qe.T)(_e))return function Re(_e,Fe){return new De.y(ut=>{let W;return(0,Se.f)(ut,Fe,()=>{W=_e[Xe.h](),(0,Se.f)(ut,Fe,()=>{let ne,Pe;try{({value:ne,done:Pe}=W.next())}catch(bt){return void ut.error(bt)}Pe?ut.complete():ut.next(ne)},0,!0)}),()=>(0,et.m)(W?.return)&&W.return()})}(_e,Fe);if((0,Ve.L)(_e))return function J(_e,Fe){return Le((0,Ve.Q)(_e),Fe)}(_e,Fe)}throw(0,je.z)(_e)}(_e,Fe):(0,y.Xf)(_e)}},4829:(nn,st,H)=>{"use strict";H.d(st,{Xf:()=>wt});var y=H(7582),fe=H(4266),se=H(4026),V=H(5592),Ce=H(8382),De=H(5726),$e=H(9853),Xe=H(3664),et=H(541),Se=H(4674),Re=H(3894),Le=H(4850);function wt(Y){if(Y instanceof V.y)return Y;if(null!=Y){if((0,Ce.c)(Y))return function le(Y){return new V.y(Ee=>{const _e=Y[Le.L]();if((0,Se.m)(_e.subscribe))return _e.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Y);if((0,fe.z)(Y))return function vt(Y){return new V.y(Ee=>{for(let _e=0;_e<Y.length&&!Ee.closed;_e++)Ee.next(Y[_e]);Ee.complete()})}(Y);if((0,se.t)(Y))return function qe(Y){return new V.y(Ee=>{Y.then(_e=>{Ee.closed||(Ee.next(_e),Ee.complete())},_e=>Ee.error(_e)).then(null,Re.h)})}(Y);if((0,De.D)(Y))return je(Y);if((0,Xe.T)(Y))return function Tt(Y){return new V.y(Ee=>{for(const _e of Y)if(Ee.next(_e),Ee.closed)return;Ee.complete()})}(Y);if((0,et.L)(Y))return function Ve(Y){return je((0,et.Q)(Y))}(Y)}throw(0,$e.z)(Y)}function je(Y){return new V.y(Ee=>{(function J(Y,Ee){var _e,Fe,ut,W;return(0,y.mG)(this,void 0,void 0,function*(){try{for(_e=(0,y.KL)(Y);!(Fe=yield _e.next()).done;)if(Ee.next(Fe.value),Ee.closed)return}catch(ne){ut={error:ne}}finally{try{Fe&&!Fe.done&&(W=_e.return)&&(yield W.call(_e))}finally{if(ut)throw ut.error}}Ee.complete()})})(Y,Ee).catch(_e=>Ee.error(_e))})}},3019:(nn,st,H)=>{"use strict";H.d(st,{T:()=>De});var y=H(7537),fe=H(4829),se=H(6232),V=H(9940),Ce=H(2459);function De(...$e){const Xe=(0,V.yG)($e),et=(0,V._6)($e,1/0),Se=$e;return Se.length?1===Se.length?(0,fe.Xf)(Se[0]):(0,y.J)(et)((0,Ce.D)(Se,Xe)):se.E}},2096:(nn,st,H)=>{"use strict";H.d(st,{of:()=>se});var y=H(9940),fe=H(2459);function se(...V){const Ce=(0,y.yG)(V);return(0,fe.D)(V,Ce)}},8251:(nn,st,H)=>{"use strict";H.d(st,{x:()=>fe});var y=H(305);function fe(V,Ce,De,$e,Xe){return new se(V,Ce,De,$e,Xe)}class se extends y.Lv{constructor(Ce,De,$e,Xe,et,Se){super(Ce),this.onFinalize=et,this.shouldUnsubscribe=Se,this._next=De?function(Re){try{De(Re)}catch(Le){Ce.error(Le)}}:super._next,this._error=Xe?function(Re){try{Xe(Re)}catch(Le){Ce.error(Le)}finally{this.unsubscribe()}}:super._error,this._complete=$e?function(){try{$e()}catch(Re){Ce.error(Re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:De}=this;super.unsubscribe(),!De&&(null===(Ce=this.onFinalize)||void 0===Ce||Ce.call(this))}}}},3572:(nn,st,H)=>{"use strict";H.d(st,{d:()=>se});var y=H(9360),fe=H(8251);function se(V){return(0,y.e)((Ce,De)=>{let $e=!1;Ce.subscribe((0,fe.x)(De,Xe=>{$e=!0,De.next(Xe)},()=>{$e||De.next(V),De.complete()}))})}},3997:(nn,st,H)=>{"use strict";H.d(st,{x:()=>V});var y=H(2737),fe=H(9360),se=H(8251);function V(De,$e=y.y){return De=De??Ce,(0,fe.e)((Xe,et)=>{let Se,Re=!0;Xe.subscribe((0,se.x)(et,Le=>{const wt=$e(Le);(Re||!De(Se,wt))&&(Re=!1,Se=wt,et.next(Le))}))})}function Ce(De,$e){return De===$e}},2181:(nn,st,H)=>{"use strict";H.d(st,{h:()=>se});var y=H(9360),fe=H(8251);function se(V,Ce){return(0,y.e)((De,$e)=>{let Xe=0;De.subscribe((0,fe.x)($e,et=>V.call(Ce,et,Xe++)&&$e.next(et)))})}},1374:(nn,st,H)=>{"use strict";H.d(st,{P:()=>$e});var y=H(6973),fe=H(2181),se=H(8180),V=H(3572),Ce=H(3026),De=H(2737);function $e(Xe,et){const Se=arguments.length>=2;return Re=>Re.pipe(Xe?(0,fe.h)((Le,wt)=>Xe(Le,wt,Re)):De.y,(0,se.q)(1),Se?(0,V.d)(et):(0,Ce.T)(()=>new y.K))}},7398:(nn,st,H)=>{"use strict";H.d(st,{U:()=>se});var y=H(9360),fe=H(8251);function se(V,Ce){return(0,y.e)((De,$e)=>{let Xe=0;De.subscribe((0,fe.x)($e,et=>{$e.next(V.call(Ce,et,Xe++))}))})}},975:(nn,st,H)=>{"use strict";H.d(st,{h:()=>fe});var y=H(7398);function fe(se){return(0,y.U)(()=>se)}},7537:(nn,st,H)=>{"use strict";H.d(st,{J:()=>se});var y=H(1631),fe=H(2737);function se(V=1/0){return(0,y.z)(fe.y,V)}},1631:(nn,st,H)=>{"use strict";H.d(st,{z:()=>Xe});var y=H(7398),fe=H(4829),se=H(9360),V=H(7103),Ce=H(8251),$e=H(4674);function Xe(et,Se,Re=1/0){return(0,$e.m)(Se)?Xe((Le,wt)=>(0,y.U)((le,vt)=>Se(Le,le,wt,vt))((0,fe.Xf)(et(Le,wt))),Re):("number"==typeof Se&&(Re=Se),(0,se.e)((Le,wt)=>function De(et,Se,Re,Le,wt,le,vt,qe){const Tt=[];let je=0,Ve=0,J=!1;const Y=()=>{J&&!Tt.length&&!je&&Se.complete()},Ee=Fe=>je<Le?_e(Fe):Tt.push(Fe),_e=Fe=>{le&&Se.next(Fe),je++;let ut=!1;(0,fe.Xf)(Re(Fe,Ve++)).subscribe((0,Ce.x)(Se,W=>{wt?.(W),le?Ee(W):Se.next(W)},()=>{ut=!0},void 0,()=>{if(ut)try{for(je--;Tt.length&&je<Le;){const W=Tt.shift();vt?(0,V.f)(Se,vt,()=>_e(W)):_e(W)}Y()}catch(W){Se.error(W)}}))};return et.subscribe((0,Ce.x)(Se,Ee,()=>{J=!0,Y()})),()=>{qe?.()}}(Le,wt,et,Re)))}},3093:(nn,st,H)=>{"use strict";H.d(st,{Q:()=>V});var y=H(7103),fe=H(9360),se=H(8251);function V(Ce,De=0){return(0,fe.e)(($e,Xe)=>{$e.subscribe((0,se.x)(Xe,et=>(0,y.f)(Xe,Ce,()=>Xe.next(et),De),()=>(0,y.f)(Xe,Ce,()=>Xe.complete(),De),et=>(0,y.f)(Xe,Ce,()=>Xe.error(et),De)))})}},6699:(nn,st,H)=>{"use strict";H.d(st,{R:()=>V});var y=H(9360),fe=H(8251);function V(Ce,De){return(0,y.e)(function se(Ce,De,$e,Xe,et){return(Se,Re)=>{let Le=$e,wt=De,le=0;Se.subscribe((0,fe.x)(Re,vt=>{const qe=le++;wt=Le?Ce(wt,vt,qe):(Le=!0,vt),Xe&&Re.next(wt)},et&&(()=>{Le&&Re.next(wt),Re.complete()})))}}(Ce,De,arguments.length>=2,!0))}},3020:(nn,st,H)=>{"use strict";H.d(st,{B:()=>Ce});var y=H(4829),fe=H(8645),se=H(305),V=H(9360);function Ce($e={}){const{connector:Xe=(()=>new fe.x),resetOnError:et=!0,resetOnComplete:Se=!0,resetOnRefCountZero:Re=!0}=$e;return Le=>{let wt,le,vt,qe=0,Tt=!1,je=!1;const Ve=()=>{le?.unsubscribe(),le=void 0},J=()=>{Ve(),wt=vt=void 0,Tt=je=!1},Y=()=>{const Ee=wt;J(),Ee?.unsubscribe()};return(0,V.e)((Ee,_e)=>{qe++,!je&&!Tt&&Ve();const Fe=vt=vt??Xe();_e.add(()=>{qe--,0===qe&&!je&&!Tt&&(le=De(Y,Re))}),Fe.subscribe(_e),!wt&&qe>0&&(wt=new se.Hp({next:ut=>Fe.next(ut),error:ut=>{je=!0,Ve(),le=De(J,et,ut),Fe.error(ut)},complete:()=>{Tt=!0,Ve(),le=De(J,Se),Fe.complete()}}),(0,y.Xf)(Ee).subscribe(wt))})(Le)}}function De($e,Xe,...et){if(!0===Xe)return void $e();if(!1===Xe)return;const Se=new se.Hp({next:()=>{Se.unsubscribe(),$e()}});return(0,y.Xf)(Xe(...et)).subscribe(Se)}},7921:(nn,st,H)=>{"use strict";H.d(st,{O:()=>V});var y=H(5211),fe=H(9940),se=H(9360);function V(...Ce){const De=(0,fe.yG)(Ce);return(0,se.e)(($e,Xe)=>{(De?(0,y.z)(Ce,$e,De):(0,y.z)(Ce,$e)).subscribe(Xe)})}},5137:(nn,st,H)=>{"use strict";H.d(st,{R:()=>fe});var y=H(9360);function fe(se,V=0){return(0,y.e)((Ce,De)=>{De.add(se.schedule(()=>Ce.subscribe(De),V))})}},4664:(nn,st,H)=>{"use strict";H.d(st,{w:()=>V});var y=H(4829),fe=H(9360),se=H(8251);function V(Ce,De){return(0,fe.e)(($e,Xe)=>{let et=null,Se=0,Re=!1;const Le=()=>Re&&!et&&Xe.complete();$e.subscribe((0,se.x)(Xe,wt=>{et?.unsubscribe();let le=0;const vt=Se++;(0,y.Xf)(Ce(wt,vt)).subscribe(et=(0,se.x)(Xe,qe=>Xe.next(De?De(wt,qe,vt,le++):qe),()=>{et=null,Le()}))},()=>{Re=!0,Le()}))})}},8180:(nn,st,H)=>{"use strict";H.d(st,{q:()=>V});var y=H(6232),fe=H(9360),se=H(8251);function V(Ce){return Ce<=0?()=>y.E:(0,fe.e)((De,$e)=>{let Xe=0;De.subscribe((0,se.x)($e,et=>{++Xe<=Ce&&($e.next(et),Ce<=Xe&&$e.complete())}))})}},9397:(nn,st,H)=>{"use strict";H.d(st,{b:()=>Ce});var y=H(4674),fe=H(9360),se=H(8251),V=H(2737);function Ce(De,$e,Xe){const et=(0,y.m)(De)||$e||Xe?{next:De,error:$e,complete:Xe}:De;return et?(0,fe.e)((Se,Re)=>{var Le;null===(Le=et.subscribe)||void 0===Le||Le.call(et);let wt=!0;Se.subscribe((0,se.x)(Re,le=>{var vt;null===(vt=et.next)||void 0===vt||vt.call(et,le),Re.next(le)},()=>{var le;wt=!1,null===(le=et.complete)||void 0===le||le.call(et),Re.complete()},le=>{var vt;wt=!1,null===(vt=et.error)||void 0===vt||vt.call(et,le),Re.error(le)},()=>{var le,vt;wt&&(null===(le=et.unsubscribe)||void 0===le||le.call(et)),null===(vt=et.finalize)||void 0===vt||vt.call(et)}))}):V.y}},3026:(nn,st,H)=>{"use strict";H.d(st,{T:()=>V});var y=H(6973),fe=H(9360),se=H(8251);function V(De=Ce){return(0,fe.e)(($e,Xe)=>{let et=!1;$e.subscribe((0,se.x)(Xe,Se=>{et=!0,Xe.next(Se)},()=>et?Xe.complete():Xe.error(De())))})}function Ce(){return new y.K}},1954:(nn,st,H)=>{"use strict";H.d(st,{o:()=>Ce});var y=H(7394);class fe extends y.w0{constructor($e,Xe){super()}schedule($e,Xe=0){return this}}const se={setInterval(De,$e,...Xe){const{delegate:et}=se;return et?.setInterval?et.setInterval(De,$e,...Xe):setInterval(De,$e,...Xe)},clearInterval(De){const{delegate:$e}=se;return($e?.clearInterval||clearInterval)(De)},delegate:void 0};var V=H(9039);class Ce extends fe{constructor($e,Xe){super($e,Xe),this.scheduler=$e,this.work=Xe,this.pending=!1}schedule($e,Xe=0){var et;if(this.closed)return this;this.state=$e;const Se=this.id,Re=this.scheduler;return null!=Se&&(this.id=this.recycleAsyncId(Re,Se,Xe)),this.pending=!0,this.delay=Xe,this.id=null!==(et=this.id)&&void 0!==et?et:this.requestAsyncId(Re,this.id,Xe),this}requestAsyncId($e,Xe,et=0){return se.setInterval($e.flush.bind($e,this),et)}recycleAsyncId($e,Xe,et=0){if(null!=et&&this.delay===et&&!1===this.pending)return Xe;null!=Xe&&se.clearInterval(Xe)}execute($e,Xe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const et=this._execute($e,Xe);if(et)return et;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute($e,Xe){let Se,et=!1;try{this.work($e)}catch(Re){et=!0,Se=Re||new Error("Scheduled action threw falsy error")}if(et)return this.unsubscribe(),Se}unsubscribe(){if(!this.closed){const{id:$e,scheduler:Xe}=this,{actions:et}=Xe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,V.P)(et,this),null!=$e&&(this.id=this.recycleAsyncId(Xe,$e,null)),this.delay=null,super.unsubscribe()}}}},2631:(nn,st,H)=>{"use strict";H.d(st,{v:()=>se});var y=H(4552);class fe{constructor(Ce,De=fe.now){this.schedulerActionCtor=Ce,this.now=De}schedule(Ce,De=0,$e){return new this.schedulerActionCtor(this,Ce).schedule($e,De)}}fe.now=y.l.now;class se extends fe{constructor(Ce,De=fe.now){super(Ce,De),this.actions=[],this._active=!1}flush(Ce){const{actions:De}=this;if(this._active)return void De.push(Ce);let $e;this._active=!0;do{if($e=Ce.execute(Ce.state,Ce.delay))break}while(Ce=De.shift());if(this._active=!1,$e){for(;Ce=De.shift();)Ce.unsubscribe();throw $e}}}},6321:(nn,st,H)=>{"use strict";H.d(st,{P:()=>V,z:()=>se});var y=H(1954);const se=new(H(2631).v)(y.o),V=se},4552:(nn,st,H)=>{"use strict";H.d(st,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},7599:(nn,st,H)=>{"use strict";H.d(st,{z:()=>y});const y={setTimeout(fe,se,...V){const{delegate:Ce}=y;return Ce?.setTimeout?Ce.setTimeout(fe,se,...V):setTimeout(fe,se,...V)},clearTimeout(fe){const{delegate:se}=y;return(se?.clearTimeout||clearTimeout)(fe)},delegate:void 0}},4971:(nn,st,H)=>{"use strict";H.d(st,{h:()=>fe});const fe=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(nn,st,H)=>{"use strict";H.d(st,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(nn,st,H)=>{"use strict";H.d(st,{K:()=>fe});const fe=(0,H(2306).d)(se=>function(){se(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(nn,st,H)=>{"use strict";H.d(st,{_6:()=>De,jO:()=>V,yG:()=>Ce});var y=H(4674),fe=H(671);function se($e){return $e[$e.length-1]}function V($e){return(0,y.m)(se($e))?$e.pop():void 0}function Ce($e){return(0,fe.K)(se($e))?$e.pop():void 0}function De($e,Xe){return"number"==typeof se($e)?$e.pop():Xe}},7453:(nn,st,H)=>{"use strict";H.d(st,{D:()=>Ce});const{isArray:y}=Array,{getPrototypeOf:fe,prototype:se,keys:V}=Object;function Ce($e){if(1===$e.length){const Xe=$e[0];if(y(Xe))return{args:Xe,keys:null};if(function De($e){return $e&&"object"==typeof $e&&fe($e)===se}(Xe)){const et=V(Xe);return{args:et.map(Se=>Xe[Se]),keys:et}}}return{args:$e,keys:null}}},9039:(nn,st,H)=>{"use strict";function y(fe,se){if(fe){const V=fe.indexOf(se);0<=V&&fe.splice(V,1)}}H.d(st,{P:()=>y})},2306:(nn,st,H)=>{"use strict";function y(fe){const V=fe(Ce=>{Error.call(Ce),Ce.stack=(new Error).stack});return V.prototype=Object.create(Error.prototype),V.prototype.constructor=V,V}H.d(st,{d:()=>y})},2714:(nn,st,H)=>{"use strict";function y(fe,se){return fe.reduce((V,Ce,De)=>(V[Ce]=se[De],V),{})}H.d(st,{n:()=>y})},1441:(nn,st,H)=>{"use strict";H.d(st,{O:()=>V,x:()=>se});var y=H(2653);let fe=null;function se(Ce){if(y.config.useDeprecatedSynchronousErrorHandling){const De=!fe;if(De&&(fe={errorThrown:!1,error:null}),Ce(),De){const{errorThrown:$e,error:Xe}=fe;if(fe=null,$e)throw Xe}}else Ce()}function V(Ce){y.config.useDeprecatedSynchronousErrorHandling&&fe&&(fe.errorThrown=!0,fe.error=Ce)}},7103:(nn,st,H)=>{"use strict";function y(fe,se,V,Ce=0,De=!1){const $e=se.schedule(function(){V(),De?fe.add(this.schedule(null,Ce)):this.unsubscribe()},Ce);if(fe.add($e),!De)return $e}H.d(st,{f:()=>y})},2737:(nn,st,H)=>{"use strict";function y(fe){return fe}H.d(st,{y:()=>y})},4266:(nn,st,H)=>{"use strict";H.d(st,{z:()=>y});const y=fe=>fe&&"number"==typeof fe.length&&"function"!=typeof fe},5726:(nn,st,H)=>{"use strict";H.d(st,{D:()=>fe});var y=H(4674);function fe(se){return Symbol.asyncIterator&&(0,y.m)(se?.[Symbol.asyncIterator])}},4674:(nn,st,H)=>{"use strict";function y(fe){return"function"==typeof fe}H.d(st,{m:()=>y})},8382:(nn,st,H)=>{"use strict";H.d(st,{c:()=>se});var y=H(4850),fe=H(4674);function se(V){return(0,fe.m)(V[y.L])}},3664:(nn,st,H)=>{"use strict";H.d(st,{T:()=>se});var y=H(4971),fe=H(4674);function se(V){return(0,fe.m)(V?.[y.h])}},4026:(nn,st,H)=>{"use strict";H.d(st,{t:()=>fe});var y=H(4674);function fe(se){return(0,y.m)(se?.then)}},541:(nn,st,H)=>{"use strict";H.d(st,{L:()=>V,Q:()=>se});var y=H(7582),fe=H(4674);function se(Ce){return(0,y.FC)(this,arguments,function*(){const $e=Ce.getReader();try{for(;;){const{value:Xe,done:et}=yield(0,y.qq)($e.read());if(et)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Xe)}}finally{$e.releaseLock()}})}function V(Ce){return(0,fe.m)(Ce?.getReader)}},671:(nn,st,H)=>{"use strict";H.d(st,{K:()=>fe});var y=H(4674);function fe(se){return se&&(0,y.m)(se.schedule)}},9360:(nn,st,H)=>{"use strict";H.d(st,{A:()=>fe,e:()=>se});var y=H(4674);function fe(V){return(0,y.m)(V?.lift)}function se(V){return Ce=>{if(fe(Ce))return Ce.lift(function(De){try{return V(De,this)}catch($e){this.error($e)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(nn,st,H)=>{"use strict";H.d(st,{Z:()=>V});var y=H(7398);const{isArray:fe}=Array;function V(Ce){return(0,y.U)(De=>function se(Ce,De){return fe(De)?Ce(...De):Ce(De)}(Ce,De))}},2420:(nn,st,H)=>{"use strict";function y(){}H.d(st,{Z:()=>y})},8407:(nn,st,H)=>{"use strict";H.d(st,{U:()=>se,z:()=>fe});var y=H(2737);function fe(...V){return se(V)}function se(V){return 0===V.length?y.y:1===V.length?V[0]:function(De){return V.reduce(($e,Xe)=>Xe($e),De)}}},3894:(nn,st,H)=>{"use strict";H.d(st,{h:()=>se});var y=H(2653),fe=H(7599);function se(V){fe.z.setTimeout(()=>{const{onUnhandledError:Ce}=y.config;if(!Ce)throw V;Ce(V)})}},9853:(nn,st,H)=>{"use strict";function y(fe){return new TypeError(`You provided ${null!==fe&&"object"==typeof fe?"an invalid object":`'${fe}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(st,{z:()=>y})},4135:nn=>{nn.exports=function st(H,y){var fe,se=null;try{fe=JSON.parse(H,y)}catch(V){se=V}return[se,fe]}},6367:function(nn){var H,y,fe,se,V;H=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,y=/^(?=([^\/?#]*))\1([^]*)$/,fe=/(?:\/|^)\.(?=\/)/g,se=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,nn.exports=V={buildAbsoluteURL:function(Ce,De,$e){if($e=$e||{},Ce=Ce.trim(),!(De=De.trim())){if(!$e.alwaysNormalize)return Ce;var Xe=V.parseURL(Ce);if(!Xe)throw new Error("Error trying to parse base URL.");return Xe.path=V.normalizePath(Xe.path),V.buildURLFromParts(Xe)}var et=V.parseURL(De);if(!et)throw new Error("Error trying to parse relative URL.");if(et.scheme)return $e.alwaysNormalize?(et.path=V.normalizePath(et.path),V.buildURLFromParts(et)):De;var Se=V.parseURL(Ce);if(!Se)throw new Error("Error trying to parse base URL.");if(!Se.netLoc&&Se.path&&"/"!==Se.path[0]){var Re=y.exec(Se.path);Se.netLoc=Re[1],Se.path=Re[2]}Se.netLoc&&!Se.path&&(Se.path="/");var Le={scheme:Se.scheme,netLoc:et.netLoc,path:null,params:et.params,query:et.query,fragment:et.fragment};if(!et.netLoc&&(Le.netLoc=Se.netLoc,"/"!==et.path[0]))if(et.path){var wt=Se.path,le=wt.substring(0,wt.lastIndexOf("/")+1)+et.path;Le.path=V.normalizePath(le)}else Le.path=Se.path,et.params||(Le.params=Se.params,et.query||(Le.query=Se.query));return null===Le.path&&(Le.path=$e.alwaysNormalize?V.normalizePath(et.path):et.path),V.buildURLFromParts(Le)},parseURL:function(Ce){var De=H.exec(Ce);return De?{scheme:De[1]||"",netLoc:De[2]||"",path:De[3]||"",params:De[4]||"",query:De[5]||"",fragment:De[6]||""}:null},normalizePath:function(Ce){for(Ce=Ce.split("").reverse().join("").replace(fe,"");Ce.length!==(Ce=Ce.replace(se,"")).length;);return Ce.split("").reverse().join("")},buildURLFromParts:function(Ce){return Ce.scheme+Ce.netLoc+Ce.path+Ce.params+Ce.query+Ce.fragment}}},5506:(nn,st,H)=>{var y=H(6382),fe=nn.exports={WebVTT:H(4149),VTTCue:H(4472),VTTRegion:H(9880)};y.vttjs=fe,y.WebVTT=fe.WebVTT;var se=fe.VTTCue,V=fe.VTTRegion,Ce=y.VTTCue,De=y.VTTRegion;fe.shim=function(){y.VTTCue=se,y.VTTRegion=V},fe.restore=function(){y.VTTCue=Ce,y.VTTRegion=De},y.VTTCue||fe.shim()},4149:(nn,st,H)=>{var y=H(7598),fe=Object.create||function(){function W(){}return function(ne){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return W.prototype=ne,new W}}();function se(W,ne){this.name="ParsingError",this.code=W.code,this.message=ne||W.message}function V(W){function ne(bt,Bt,$t,Xt){return 3600*(0|bt)+60*(0|Bt)+(0|$t)+(0|Xt)/1e3}var Pe=W.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Pe?Pe[3]?ne(Pe[1],Pe[2],Pe[3].replace(":",""),Pe[4]):Pe[1]>59?ne(Pe[1],Pe[2],0,Pe[4]):ne(0,Pe[1],Pe[2],Pe[4]):null}function Ce(){this.values=fe(null)}function De(W,ne,Pe,bt){var Bt=bt?W.split(bt):[W];for(var $t in Bt)if("string"==typeof Bt[$t]){var Xt=Bt[$t].split(Pe);2===Xt.length&&ne(Xt[0].trim(),Xt[1].trim())}}function $e(W,ne,Pe){var bt=W;function Bt(){var ot=V(W);if(null===ot)throw new se(se.Errors.BadTimeStamp,"Malformed timestamp: "+bt);return W=W.replace(/^[^\sa-zA-Z-]+/,""),ot}function Xt(){W=W.replace(/^\s+/,"")}if(Xt(),ne.startTime=Bt(),Xt(),"--\x3e"!==W.substr(0,3))throw new se(se.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+bt);W=W.substr(3),Xt(),ne.endTime=Bt(),Xt(),function $t(ot,Ye){var rt=new Ce;De(ot,function(Qe,dt){switch(Qe){case"region":for(var at=Pe.length-1;at>=0;at--)if(Pe[at].id===dt){rt.set(Qe,Pe[at].region);break}break;case"vertical":rt.alt(Qe,dt,["rl","lr"]);break;case"line":var Ot=dt.split(","),qt=Ot[0];rt.integer(Qe,qt),rt.percent(Qe,qt)&&rt.set("snapToLines",!1),rt.alt(Qe,qt,["auto"]),2===Ot.length&&rt.alt("lineAlign",Ot[1],["start","center","end"]);break;case"position":Ot=dt.split(","),rt.percent(Qe,Ot[0]),2===Ot.length&&rt.alt("positionAlign",Ot[1],["start","center","end"]);break;case"size":rt.percent(Qe,dt);break;case"align":rt.alt(Qe,dt,["start","center","end","left","right"])}},/:/,/\s/),Ye.region=rt.get("region",null),Ye.vertical=rt.get("vertical","");try{Ye.line=rt.get("line","auto")}catch{}Ye.lineAlign=rt.get("lineAlign","start"),Ye.snapToLines=rt.get("snapToLines",!0),Ye.size=rt.get("size",100);try{Ye.align=rt.get("align","center")}catch{Ye.align=rt.get("align","middle")}try{Ye.position=rt.get("position","auto")}catch{Ye.position=rt.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Ye.align)}Ye.positionAlign=rt.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Ye.align)}(W,ne)}(se.prototype=fe(Error.prototype)).constructor=se,se.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Ce.prototype={set:function(W,ne){!this.get(W)&&""!==ne&&(this.values[W]=ne)},get:function(W,ne,Pe){return Pe?this.has(W)?this.values[W]:ne[Pe]:this.has(W)?this.values[W]:ne},has:function(W){return W in this.values},alt:function(W,ne,Pe){for(var bt=0;bt<Pe.length;++bt)if(ne===Pe[bt]){this.set(W,ne);break}},integer:function(W,ne){/^-?\d+$/.test(ne)&&this.set(W,parseInt(ne,10))},percent:function(W,ne){return!!(ne.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(ne=parseFloat(ne),ne>=0&&ne<=100))&&(this.set(W,ne),!0)}};var Xe=y.createElement&&y.createElement("textarea"),et={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Se={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Re={v:"title",lang:"lang"},Le={rt:"ruby"};function wt(W,ne){function Pe(){if(!ne)return null;var jt=ne.match(/^([^<]*)(<[^>]*>?)?/);return function qt(Lt){return ne=ne.substr(Lt.length),Lt}(jt[1]?jt[1]:jt[2])}function bt(qt){return Xe.innerHTML=qt,qt=Xe.textContent,Xe.textContent="",qt}function $t(qt,jt){var Lt=et[qt];if(!Lt)return null;var Kt=W.document.createElement(Lt),wn=Re[qt];return wn&&jt&&(Kt[wn]=jt.trim()),Kt}for(var Ye,Xt=W.document.createElement("div"),ot=Xt,rt=[];null!==(Ye=Pe());)if("<"!==Ye[0])ot.appendChild(W.document.createTextNode(bt(Ye)));else{if("/"===Ye[1]){rt.length&&rt[rt.length-1]===Ye.substr(2).replace(">","")&&(rt.pop(),ot=ot.parentNode);continue}var dt,Qe=V(Ye.substr(1,Ye.length-2));if(Qe){dt=W.document.createProcessingInstruction("timestamp",Qe),ot.appendChild(dt);continue}var at=Ye.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!at||!(dt=$t(at[1],at[3]))||Le[(jt=dt).localName]&&Le[jt.localName]!==ot.localName)continue;if(at[2]){var Ot=at[2].split(".");Ot.forEach(function(qt){var jt=/^bg_/.test(qt),Lt=jt?qt.slice(3):qt;Se.hasOwnProperty(Lt)&&(dt.style[jt?"background-color":"color"]=Se[Lt])}),dt.className=Ot.join(" ")}rt.push(at[1]),ot.appendChild(dt),ot=dt}var jt;return Xt}var le=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function vt(W){for(var ne=0;ne<le.length;ne++){var Pe=le[ne];if(W>=Pe[0]&&W<=Pe[1])return!0}return!1}function qe(W){var ne=[],Pe="";if(!W||!W.childNodes)return"ltr";function Bt(ot,Ye){for(var rt=Ye.childNodes.length-1;rt>=0;rt--)ot.push(Ye.childNodes[rt])}function $t(ot){if(!ot||!ot.length)return null;var Ye=ot.pop(),rt=Ye.textContent||Ye.innerText;if(rt){var Qe=rt.match(/^.*(\n|\r)/);return Qe?(ot.length=0,Qe[0]):rt}return"ruby"===Ye.tagName?$t(ot):Ye.childNodes?(Bt(ot,Ye),$t(ot)):void 0}for(Bt(ne,W);Pe=$t(ne);)for(var Xt=0;Xt<Pe.length;Xt++)if(vt(Pe.charCodeAt(Xt)))return"rtl";return"ltr"}function je(){}function Ve(W,ne,Pe){je.call(this),this.cue=ne,this.cueDiv=wt(W,ne.text);var bt={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===ne.vertical?"horizontal-tb":"lr"===ne.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(bt,this.cueDiv),this.div=W.document.createElement("div"),bt={direction:qe(this.cueDiv),writingMode:""===ne.vertical?"horizontal-tb":"lr"===ne.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===ne.align?"center":ne.align,font:Pe.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(bt),this.div.appendChild(this.cueDiv);var Bt=0;switch(ne.positionAlign){case"start":Bt=ne.position;break;case"center":Bt=ne.position-ne.size/2;break;case"end":Bt=ne.position-ne.size}this.applyStyles(""===ne.vertical?{left:this.formatStyle(Bt,"%"),width:this.formatStyle(ne.size,"%")}:{top:this.formatStyle(Bt,"%"),height:this.formatStyle(ne.size,"%")}),this.move=function($t){this.applyStyles({top:this.formatStyle($t.top,"px"),bottom:this.formatStyle($t.bottom,"px"),left:this.formatStyle($t.left,"px"),right:this.formatStyle($t.right,"px"),height:this.formatStyle($t.height,"px"),width:this.formatStyle($t.width,"px")})}}function J(W){var ne,Pe,bt,Bt;if(W.div){Pe=W.div.offsetHeight,bt=W.div.offsetWidth,Bt=W.div.offsetTop;var $t=($t=W.div.childNodes)&&($t=$t[0])&&$t.getClientRects&&$t.getClientRects();W=W.div.getBoundingClientRect(),ne=$t?Math.max($t[0]&&$t[0].height||0,W.height/$t.length):0}this.left=W.left,this.right=W.right,this.top=W.top||Bt,this.height=W.height||Pe,this.bottom=W.bottom||Bt+(W.height||Pe),this.width=W.width||bt,this.lineHeight=void 0!==ne?ne:W.lineHeight}function Y(W,ne,Pe,bt){var $t=new J(ne),Xt=ne.cue,ot=function Tt(W){if("number"==typeof W.line&&(W.snapToLines||W.line>=0&&W.line<=100))return W.line;if(!W.track||!W.track.textTrackList||!W.track.textTrackList.mediaElement)return-1;for(var ne=W.track,Pe=ne.textTrackList,bt=0,Bt=0;Bt<Pe.length&&Pe[Bt]!==ne;Bt++)"showing"===Pe[Bt].mode&&bt++;return-1*++bt}(Xt),Ye=[];if(Xt.snapToLines){var rt;switch(Xt.vertical){case"":Ye=["+y","-y"],rt="height";break;case"rl":Ye=["+x","-x"],rt="width";break;case"lr":Ye=["-x","+x"],rt="width"}var Qe=$t.lineHeight,dt=Qe*Math.round(ot),at=Pe[rt]+Qe,Ot=Ye[0];Math.abs(dt)>at&&(dt=dt<0?-1:1,dt*=Math.ceil(at/Qe)*Qe),ot<0&&(dt+=""===Xt.vertical?Pe.height:Pe.width,Ye=Ye.reverse()),$t.move(Ot,dt)}else{var qt=$t.lineHeight/Pe.height*100;switch(Xt.lineAlign){case"center":ot-=qt/2;break;case"end":ot-=qt}switch(Xt.vertical){case"":ne.applyStyles({top:ne.formatStyle(ot,"%")});break;case"rl":ne.applyStyles({left:ne.formatStyle(ot,"%")});break;case"lr":ne.applyStyles({right:ne.formatStyle(ot,"%")})}Ye=["+y","-x","+x","-y"],$t=new J(ne)}var jt=function Bt(Lt,Kt){for(var wn,Fn=new J(Lt),jn=1,zn=0;zn<Kt.length;zn++){for(;Lt.overlapsOppositeAxis(Pe,Kt[zn])||Lt.within(Pe)&&Lt.overlapsAny(bt);)Lt.move(Kt[zn]);if(Lt.within(Pe))return Lt;var ur=Lt.intersectPercentage(Pe);jn>ur&&(wn=new J(Lt),jn=ur),Lt=new J(Fn)}return wn||Fn}($t,Ye);ne.move(jt.toCSSCompatValues(Pe))}function Ee(){}je.prototype.applyStyles=function(W,ne){for(var Pe in ne=ne||this.div,W)W.hasOwnProperty(Pe)&&(ne.style[Pe]=W[Pe])},je.prototype.formatStyle=function(W,ne){return 0===W?0:W+ne},(Ve.prototype=fe(je.prototype)).constructor=Ve,J.prototype.move=function(W,ne){switch(ne=void 0!==ne?ne:this.lineHeight,W){case"+x":this.left+=ne,this.right+=ne;break;case"-x":this.left-=ne,this.right-=ne;break;case"+y":this.top+=ne,this.bottom+=ne;break;case"-y":this.top-=ne,this.bottom-=ne}},J.prototype.overlaps=function(W){return this.left<W.right&&this.right>W.left&&this.top<W.bottom&&this.bottom>W.top},J.prototype.overlapsAny=function(W){for(var ne=0;ne<W.length;ne++)if(this.overlaps(W[ne]))return!0;return!1},J.prototype.within=function(W){return this.top>=W.top&&this.bottom<=W.bottom&&this.left>=W.left&&this.right<=W.right},J.prototype.overlapsOppositeAxis=function(W,ne){switch(ne){case"+x":return this.left<W.left;case"-x":return this.right>W.right;case"+y":return this.top<W.top;case"-y":return this.bottom>W.bottom}},J.prototype.intersectPercentage=function(W){return Math.max(0,Math.min(this.right,W.right)-Math.max(this.left,W.left))*Math.max(0,Math.min(this.bottom,W.bottom)-Math.max(this.top,W.top))/(this.height*this.width)},J.prototype.toCSSCompatValues=function(W){return{top:this.top-W.top,bottom:W.bottom-this.bottom,left:this.left-W.left,right:W.right-this.right,height:this.height,width:this.width}},J.getSimpleBoxPosition=function(W){var ne=W.div?W.div.offsetHeight:W.tagName?W.offsetHeight:0,Pe=W.div?W.div.offsetWidth:W.tagName?W.offsetWidth:0,bt=W.div?W.div.offsetTop:W.tagName?W.offsetTop:0;return{left:(W=W.div?W.div.getBoundingClientRect():W.tagName?W.getBoundingClientRect():W).left,right:W.right,top:W.top||bt,height:W.height||ne,bottom:W.bottom||bt+(W.height||ne),width:W.width||Pe}},Ee.StringDecoder=function(){return{decode:function(W){if(!W)return"";if("string"!=typeof W)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(W))}}},Ee.convertCueToDOMTree=function(W,ne){return W&&ne?wt(W,ne):null},Ee.processCues=function(W,ne,Pe){if(!W||!ne||!Pe)return null;for(;Pe.firstChild;)Pe.removeChild(Pe.firstChild);var bt=W.document.createElement("div");if(bt.style.position="absolute",bt.style.left="0",bt.style.right="0",bt.style.top="0",bt.style.bottom="0",bt.style.margin="1.5%",Pe.appendChild(bt),function Bt(Qe){for(var dt=0;dt<Qe.length;dt++)if(Qe[dt].hasBeenReset||!Qe[dt].displayState)return!0;return!1}(ne)){var Xt=[],ot=J.getSimpleBoxPosition(bt),rt={font:Math.round(.05*ot.height*100)/100+"px sans-serif"};!function(){for(var Qe,dt,at=0;at<ne.length;at++)Qe=new Ve(W,dt=ne[at],rt),bt.appendChild(Qe.div),Y(0,Qe,ot,Xt),dt.displayState=Qe.div,Xt.push(J.getSimpleBoxPosition(Qe))}()}else for(var $t=0;$t<ne.length;$t++)bt.appendChild(ne[$t].displayState)},(Ee.Parser=function(W,ne,Pe){Pe||(Pe=ne,ne={}),ne||(ne={}),this.window=W,this.vttjs=ne,this.state="INITIAL",this.buffer="",this.decoder=Pe||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(W){if(!(W instanceof se))throw W;this.onparsingerror&&this.onparsingerror(W)},parse:function(W){var Qe,ne=this;function Pe(){for(var Qe=ne.buffer,dt=0;dt<Qe.length&&"\r"!==Qe[dt]&&"\n"!==Qe[dt];)++dt;var at=Qe.substr(0,dt);return"\r"===Qe[dt]&&++dt,"\n"===Qe[dt]&&++dt,ne.buffer=Qe.substr(dt),at}W&&(ne.buffer+=ne.decoder.decode(W,{stream:!0}));try{var Xt;if("INITIAL"===ne.state){if(!/\r\n|\n/.test(ne.buffer))return this;var ot=(Xt=Pe()).match(/^WEBVTT([ \t].*)?$/);if(!ot||!ot[0])throw new se(se.Errors.BadSignature);ne.state="HEADER"}for(var Ye=!1;ne.buffer;){if(!/\r\n|\n/.test(ne.buffer))return this;switch(Ye?Ye=!1:Xt=Pe(),ne.state){case"HEADER":/:/.test(Xt)?(Qe=Xt).match(/X-TIMESTAMP-MAP/)?De(Qe,function(dt,at){"X-TIMESTAMP-MAP"===dt&&function Bt(Qe){var dt=new Ce;De(Qe,function(at,Ot){switch(at){case"MPEGT":dt.integer(at+"S",Ot);break;case"LOCA":dt.set(at+"L",V(Ot))}},/[^\d]:/,/,/),ne.ontimestampmap&&ne.ontimestampmap({MPEGTS:dt.get("MPEGTS"),LOCAL:dt.get("LOCAL")})}(at)},/=/):De(Qe,function(dt,at){"Region"===dt&&function bt(Qe){var dt=new Ce;if(De(Qe,function(Ot,qt){switch(Ot){case"id":dt.set(Ot,qt);break;case"width":dt.percent(Ot,qt);break;case"lines":dt.integer(Ot,qt);break;case"regionanchor":case"viewportanchor":var jt=qt.split(",");if(2!==jt.length)break;var Lt=new Ce;if(Lt.percent("x",jt[0]),Lt.percent("y",jt[1]),!Lt.has("x")||!Lt.has("y"))break;dt.set(Ot+"X",Lt.get("x")),dt.set(Ot+"Y",Lt.get("y"));break;case"scroll":dt.alt(Ot,qt,["up"])}},/=/,/\s/),dt.has("id")){var at=new(ne.vttjs.VTTRegion||ne.window.VTTRegion);at.width=dt.get("width",100),at.lines=dt.get("lines",3),at.regionAnchorX=dt.get("regionanchorX",0),at.regionAnchorY=dt.get("regionanchorY",100),at.viewportAnchorX=dt.get("viewportanchorX",0),at.viewportAnchorY=dt.get("viewportanchorY",100),at.scroll=dt.get("scroll",""),ne.onregion&&ne.onregion(at),ne.regionList.push({id:dt.get("id"),region:at})}}(at)},/:/):Xt||(ne.state="ID");continue;case"NOTE":Xt||(ne.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Xt)){ne.state="NOTE";break}if(!Xt)continue;ne.cue=new(ne.vttjs.VTTCue||ne.window.VTTCue)(0,0,"");try{ne.cue.align="center"}catch{ne.cue.align="middle"}if(ne.state="CUE",-1===Xt.indexOf("--\x3e")){ne.cue.id=Xt;continue}case"CUE":try{$e(Xt,ne.cue,ne.regionList)}catch(Qe){ne.reportOrThrowError(Qe),ne.cue=null,ne.state="BADCUE";continue}ne.state="CUETEXT";continue;case"CUETEXT":var rt=-1!==Xt.indexOf("--\x3e");if(!Xt||rt&&(Ye=!0)){ne.oncue&&ne.oncue(ne.cue),ne.cue=null,ne.state="ID";continue}ne.cue.text&&(ne.cue.text+="\n"),ne.cue.text+=Xt.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":Xt||(ne.state="ID");continue}}}catch(Qe){ne.reportOrThrowError(Qe),"CUETEXT"===ne.state&&ne.cue&&ne.oncue&&ne.oncue(ne.cue),ne.cue=null,ne.state="INITIAL"===ne.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var W=this;try{if(W.buffer+=W.decoder.decode(),(W.cue||"HEADER"===W.state)&&(W.buffer+="\n\n",W.parse()),"INITIAL"===W.state)throw new se(se.Errors.BadSignature)}catch(ne){W.reportOrThrowError(ne)}return W.onflush&&W.onflush(),this}},nn.exports=Ee},4472:nn=>{var H={"":1,lr:1,rl:1},y={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function se(Ce){return"string"==typeof Ce&&!!y[Ce.toLowerCase()]&&Ce.toLowerCase()}function V(Ce,De,$e){this.hasBeenReset=!1;var Xe="",et=!1,Se=Ce,Re=De,Le=$e,wt=null,le="",vt=!0,qe="auto",Tt="start",je="auto",Ve="auto",J=100,Y="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return Xe},set:function(Ee){Xe=""+Ee}},pauseOnExit:{enumerable:!0,get:function(){return et},set:function(Ee){et=!!Ee}},startTime:{enumerable:!0,get:function(){return Se},set:function(Ee){if("number"!=typeof Ee)throw new TypeError("Start time must be set to a number.");Se=Ee,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Re},set:function(Ee){if("number"!=typeof Ee)throw new TypeError("End time must be set to a number.");Re=Ee,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Le},set:function(Ee){Le=""+Ee,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return wt},set:function(Ee){wt=Ee,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return le},set:function(Ee){var _e=function fe(Ce){return"string"==typeof Ce&&!!H[Ce.toLowerCase()]&&Ce.toLowerCase()}(Ee);if(!1===_e)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");le=_e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return vt},set:function(Ee){vt=!!Ee,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return qe},set:function(Ee){if("number"!=typeof Ee&&"auto"!==Ee)throw new SyntaxError("Line: an invalid number or illegal string was specified.");qe=Ee,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Tt},set:function(Ee){var _e=se(Ee);_e?(Tt=_e,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return je},set:function(Ee){if(Ee<0||Ee>100)throw new Error("Position must be between 0 and 100.");je=Ee,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Ve},set:function(Ee){var _e=se(Ee);_e?(Ve=_e,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return J},set:function(Ee){if(Ee<0||Ee>100)throw new Error("Size must be between 0 and 100.");J=Ee,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Y},set:function(Ee){var _e=se(Ee);if(!_e)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Y=_e,this.hasBeenReset=!0}}}),this.displayState=void 0}V.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},nn.exports=V},9880:nn=>{var st={"":!0,up:!0};function y(se){return"number"==typeof se&&se>=0&&se<=100}nn.exports=function fe(){var se=100,V=3,Ce=0,De=100,$e=0,Xe=100,et="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return se},set:function(Se){if(!y(Se))throw new Error("Width must be between 0 and 100.");se=Se}},lines:{enumerable:!0,get:function(){return V},set:function(Se){if("number"!=typeof Se)throw new TypeError("Lines must be set to a number.");V=Se}},regionAnchorY:{enumerable:!0,get:function(){return De},set:function(Se){if(!y(Se))throw new Error("RegionAnchorX must be between 0 and 100.");De=Se}},regionAnchorX:{enumerable:!0,get:function(){return Ce},set:function(Se){if(!y(Se))throw new Error("RegionAnchorY must be between 0 and 100.");Ce=Se}},viewportAnchorY:{enumerable:!0,get:function(){return Xe},set:function(Se){if(!y(Se))throw new Error("ViewportAnchorY must be between 0 and 100.");Xe=Se}},viewportAnchorX:{enumerable:!0,get:function(){return $e},set:function(Se){if(!y(Se))throw new Error("ViewportAnchorX must be between 0 and 100.");$e=Se}},scroll:{enumerable:!0,get:function(){return et},set:function(Se){var Re=function H(se){return"string"==typeof se&&!!st[se.toLowerCase()]&&se.toLowerCase()}(Se);!1===Re?console.warn("Scroll: an invalid or illegal string was specified."):et=Re}}})}},5893:()=>{},434:nn=>{function st(){return nn.exports=st=Object.assign?Object.assign.bind():function(H){for(var y=1;y<arguments.length;y++){var fe=arguments[y];for(var se in fe)Object.prototype.hasOwnProperty.call(fe,se)&&(H[se]=fe[se])}return H},nn.exports.__esModule=!0,nn.exports.default=nn.exports,st.apply(this,arguments)}nn.exports=st,nn.exports.__esModule=!0,nn.exports.default=nn.exports},6814:(nn,st,H)=>{"use strict";H.d(st,{Do:()=>qe,EM:()=>go,HT:()=>V,JF:()=>Is,K0:()=>De,Mx:()=>rs,O5:()=>fo,Ov:()=>Ys,PM:()=>na,S$:()=>wt,V_:()=>Xe,Ye:()=>Tt,Zx:()=>Ji,b0:()=>vt,bD:()=>ta,ez:()=>po,mk:()=>Ns,q:()=>se,sg:()=>Ss,uU:()=>Dn,w_:()=>Ce});var y=H(5879);let fe=null;function se(){return fe}function V(N){fe||(fe=N)}class Ce{}const De=new y.OlP("DocumentToken");let $e=(()=>{class N{historyGo(z){throw new Error("Not implemented")}}return N.\u0275fac=function(z){return new(z||N)},N.\u0275prov=y.Yz7({token:N,factory:function(){return(0,y.f3M)(et)},providedIn:"platform"}),N})();const Xe=new y.OlP("Location Initialized");let et=(()=>{class N extends $e{constructor(){super(),this._doc=(0,y.f3M)(De),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return se().getBaseHref(this._doc)}onPopState(z){const Te=se().getGlobalEventTarget(this._doc,"window");return Te.addEventListener("popstate",z,!1),()=>Te.removeEventListener("popstate",z)}onHashChange(z){const Te=se().getGlobalEventTarget(this._doc,"window");return Te.addEventListener("hashchange",z,!1),()=>Te.removeEventListener("hashchange",z)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(z){this._location.pathname=z}pushState(z,Te,Ke){this._history.pushState(z,Te,Ke)}replaceState(z,Te,Ke){this._history.replaceState(z,Te,Ke)}forward(){this._history.forward()}back(){this._history.back()}historyGo(z=0){this._history.go(z)}getState(){return this._history.state}}return N.\u0275fac=function(z){return new(z||N)},N.\u0275prov=y.Yz7({token:N,factory:function(){return new N},providedIn:"platform"}),N})();function Se(N,ae){if(0==N.length)return ae;if(0==ae.length)return N;let z=0;return N.endsWith("/")&&z++,ae.startsWith("/")&&z++,2==z?N+ae.substring(1):1==z?N+ae:N+"/"+ae}function Re(N){const ae=N.match(/#|\?|$/),z=ae&&ae.index||N.length;return N.slice(0,z-("/"===N[z-1]?1:0))+N.slice(z)}function Le(N){return N&&"?"!==N[0]?"?"+N:N}let wt=(()=>{class N{historyGo(z){throw new Error("Not implemented")}}return N.\u0275fac=function(z){return new(z||N)},N.\u0275prov=y.Yz7({token:N,factory:function(){return(0,y.f3M)(vt)},providedIn:"root"}),N})();const le=new y.OlP("appBaseHref");let vt=(()=>{class N extends wt{constructor(z,Te){super(),this._platformLocation=z,this._removeListenerFns=[],this._baseHref=Te??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(De).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}prepareExternalUrl(z){return Se(this._baseHref,z)}path(z=!1){const Te=this._platformLocation.pathname+Le(this._platformLocation.search),Ke=this._platformLocation.hash;return Ke&&z?`${Te}${Ke}`:Te}pushState(z,Te,Ke,Nt){const Zt=this.prepareExternalUrl(Ke+Le(Nt));this._platformLocation.pushState(z,Te,Zt)}replaceState(z,Te,Ke,Nt){const Zt=this.prepareExternalUrl(Ke+Le(Nt));this._platformLocation.replaceState(z,Te,Zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){this._platformLocation.historyGo?.(z)}}return N.\u0275fac=function(z){return new(z||N)(y.LFG($e),y.LFG(le,8))},N.\u0275prov=y.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),qe=(()=>{class N extends wt{constructor(z,Te){super(),this._platformLocation=z,this._baseHref="",this._removeListenerFns=[],null!=Te&&(this._baseHref=Te)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}path(z=!1){let Te=this._platformLocation.hash;return null==Te&&(Te="#"),Te.length>0?Te.substring(1):Te}prepareExternalUrl(z){const Te=Se(this._baseHref,z);return Te.length>0?"#"+Te:Te}pushState(z,Te,Ke,Nt){let Zt=this.prepareExternalUrl(Ke+Le(Nt));0==Zt.length&&(Zt=this._platformLocation.pathname),this._platformLocation.pushState(z,Te,Zt)}replaceState(z,Te,Ke,Nt){let Zt=this.prepareExternalUrl(Ke+Le(Nt));0==Zt.length&&(Zt=this._platformLocation.pathname),this._platformLocation.replaceState(z,Te,Zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){this._platformLocation.historyGo?.(z)}}return N.\u0275fac=function(z){return new(z||N)(y.LFG($e),y.LFG(le,8))},N.\u0275prov=y.Yz7({token:N,factory:N.\u0275fac}),N})(),Tt=(()=>{class N{constructor(z){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=z;const Te=this._locationStrategy.getBaseHref();this._basePath=function Y(N){if(new RegExp("^(https?:)?//").test(N)){const[,z]=N.split(/\/\/[^\/]+/);return z}return N}(Re(J(Te))),this._locationStrategy.onPopState(Ke=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ke.state,type:Ke.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(z=!1){return this.normalize(this._locationStrategy.path(z))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(z,Te=""){return this.path()==this.normalize(z+Le(Te))}normalize(z){return N.stripTrailingSlash(function Ve(N,ae){if(!N||!ae.startsWith(N))return ae;const z=ae.substring(N.length);return""===z||["/",";","?","#"].includes(z[0])?z:ae}(this._basePath,J(z)))}prepareExternalUrl(z){return z&&"/"!==z[0]&&(z="/"+z),this._locationStrategy.prepareExternalUrl(z)}go(z,Te="",Ke=null){this._locationStrategy.pushState(Ke,"",z,Te),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+Le(Te)),Ke)}replaceState(z,Te="",Ke=null){this._locationStrategy.replaceState(Ke,"",z,Te),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+Le(Te)),Ke)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(z=0){this._locationStrategy.historyGo?.(z)}onUrlChange(z){return this._urlChangeListeners.push(z),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Te=>{this._notifyUrlChangeListeners(Te.url,Te.state)})),()=>{const Te=this._urlChangeListeners.indexOf(z);this._urlChangeListeners.splice(Te,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(z="",Te){this._urlChangeListeners.forEach(Ke=>Ke(z,Te))}subscribe(z,Te,Ke){return this._subject.subscribe({next:z,error:Te,complete:Ke})}}return N.normalizeQueryParams=Le,N.joinWithSlash=Se,N.stripTrailingSlash=Re,N.\u0275fac=function(z){return new(z||N)(y.LFG(wt))},N.\u0275prov=y.Yz7({token:N,factory:function(){return function je(){return new Tt((0,y.LFG)(wt))}()},providedIn:"root"}),N})();function J(N){return N.replace(/\/index.html$/,"")}var _e=(()=>((_e=_e||{})[_e.Decimal=0]="Decimal",_e[_e.Percent=1]="Percent",_e[_e.Currency=2]="Currency",_e[_e.Scientific=3]="Scientific",_e))(),ut=(()=>((ut=ut||{})[ut.Format=0]="Format",ut[ut.Standalone=1]="Standalone",ut))(),W=(()=>((W=W||{})[W.Narrow=0]="Narrow",W[W.Abbreviated=1]="Abbreviated",W[W.Wide=2]="Wide",W[W.Short=3]="Short",W))(),ne=(()=>((ne=ne||{})[ne.Short=0]="Short",ne[ne.Medium=1]="Medium",ne[ne.Long=2]="Long",ne[ne.Full=3]="Full",ne))(),Pe=(()=>((Pe=Pe||{})[Pe.Decimal=0]="Decimal",Pe[Pe.Group=1]="Group",Pe[Pe.List=2]="List",Pe[Pe.PercentSign=3]="PercentSign",Pe[Pe.PlusSign=4]="PlusSign",Pe[Pe.MinusSign=5]="MinusSign",Pe[Pe.Exponential=6]="Exponential",Pe[Pe.SuperscriptingExponent=7]="SuperscriptingExponent",Pe[Pe.PerMille=8]="PerMille",Pe[Pe.Infinity=9]="Infinity",Pe[Pe.NaN=10]="NaN",Pe[Pe.TimeSeparator=11]="TimeSeparator",Pe[Pe.CurrencyDecimal=12]="CurrencyDecimal",Pe[Pe.CurrencyGroup=13]="CurrencyGroup",Pe))();function dt(N,ae){return wr((0,y.cg1)(N)[y.wAp.DateFormat],ae)}function at(N,ae){return wr((0,y.cg1)(N)[y.wAp.TimeFormat],ae)}function Ot(N,ae){return wr((0,y.cg1)(N)[y.wAp.DateTimeFormat],ae)}function qt(N,ae){const z=(0,y.cg1)(N),Te=z[y.wAp.NumberSymbols][ae];if(typeof Te>"u"){if(ae===Pe.CurrencyDecimal)return z[y.wAp.NumberSymbols][Pe.Decimal];if(ae===Pe.CurrencyGroup)return z[y.wAp.NumberSymbols][Pe.Group]}return Te}function zn(N){if(!N[y.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${N[y.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function wr(N,ae){for(let z=ae;z>-1;z--)if(typeof N[z]<"u")return N[z];throw new Error("Locale data API: locale data undefined")}function Yr(N){const[ae,z]=N.split(":");return{hours:+ae,minutes:+z}}const Pr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yi={},Ir=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.ShortGMT=1]="ShortGMT",dn[dn.Long=2]="Long",dn[dn.Extended=3]="Extended",dn))(),Bn=(()=>((Bn=Bn||{})[Bn.FullYear=0]="FullYear",Bn[Bn.Month=1]="Month",Bn[Bn.Date=2]="Date",Bn[Bn.Hours=3]="Hours",Bn[Bn.Minutes=4]="Minutes",Bn[Bn.Seconds=5]="Seconds",Bn[Bn.FractionalSeconds=6]="FractionalSeconds",Bn[Bn.Day=7]="Day",Bn))(),Nn=(()=>((Nn=Nn||{})[Nn.DayPeriods=0]="DayPeriods",Nn[Nn.Days=1]="Days",Nn[Nn.Months=2]="Months",Nn[Nn.Eras=3]="Eras",Nn))();function xr(N,ae,z,Te){let Ke=function ve(N){if(ye(N))return N;if("number"==typeof N&&!isNaN(N))return new Date(N);if("string"==typeof N){if(N=N.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(N)){const[Ke,Nt=1,Zt=1]=N.split("-").map(Jn=>+Jn);return sr(Ke,Nt-1,Zt)}const z=parseFloat(N);if(!isNaN(N-z))return new Date(z);let Te;if(Te=N.match(Pr))return function be(N){const ae=new Date(0);let z=0,Te=0;const Ke=N[8]?ae.setUTCFullYear:ae.setFullYear,Nt=N[8]?ae.setUTCHours:ae.setHours;N[9]&&(z=Number(N[9]+N[10]),Te=Number(N[9]+N[11])),Ke.call(ae,Number(N[1]),Number(N[2])-1,Number(N[3]));const Zt=Number(N[4]||0)-z,Jn=Number(N[5]||0)-Te,es=Number(N[6]||0),Gr=Math.floor(1e3*parseFloat("0."+(N[7]||0)));return Nt.call(ae,Zt,Jn,es,Gr),ae}(Te)}const ae=new Date(N);if(!ye(ae))throw new Error(`Unable to convert "${N}" into a date`);return ae}(N);ae=Gi(z,ae)||ae;let Jn,Zt=[];for(;ae;){if(Jn=Ir.exec(ae),!Jn){Zt.push(ae);break}{Zt=Zt.concat(Jn.slice(1));const zr=Zt.pop();if(!zr)break;ae=zr}}let es=Ke.getTimezoneOffset();Te&&(es=vs(Te,es),Ke=function tt(N,ae,z){const Te=z?-1:1,Ke=N.getTimezoneOffset();return function Rn(N,ae){return(N=new Date(N.getTime())).setMinutes(N.getMinutes()+ae),N}(N,Te*(vs(ae,Ke)-Ke))}(Ke,Te,!0));let Gr="";return Zt.forEach(zr=>{const hr=function Ar(N){if(os[N])return os[N];let ae;switch(N){case"G":case"GG":case"GGG":ae=mr(Nn.Eras,W.Abbreviated);break;case"GGGG":ae=mr(Nn.Eras,W.Wide);break;case"GGGGG":ae=mr(Nn.Eras,W.Narrow);break;case"y":ae=Rr(Bn.FullYear,1,0,!1,!0);break;case"yy":ae=Rr(Bn.FullYear,2,0,!0,!0);break;case"yyy":ae=Rr(Bn.FullYear,3,0,!1,!0);break;case"yyyy":ae=Rr(Bn.FullYear,4,0,!1,!0);break;case"Y":ae=Vr(1);break;case"YY":ae=Vr(2,!0);break;case"YYY":ae=Vr(3);break;case"YYYY":ae=Vr(4);break;case"M":case"L":ae=Rr(Bn.Month,1,1);break;case"MM":case"LL":ae=Rr(Bn.Month,2,1);break;case"MMM":ae=mr(Nn.Months,W.Abbreviated);break;case"MMMM":ae=mr(Nn.Months,W.Wide);break;case"MMMMM":ae=mr(Nn.Months,W.Narrow);break;case"LLL":ae=mr(Nn.Months,W.Abbreviated,ut.Standalone);break;case"LLLL":ae=mr(Nn.Months,W.Wide,ut.Standalone);break;case"LLLLL":ae=mr(Nn.Months,W.Narrow,ut.Standalone);break;case"w":ae=wi(1);break;case"ww":ae=wi(2);break;case"W":ae=wi(1,!0);break;case"d":ae=Rr(Bn.Date,1);break;case"dd":ae=Rr(Bn.Date,2);break;case"c":case"cc":ae=Rr(Bn.Day,1);break;case"ccc":ae=mr(Nn.Days,W.Abbreviated,ut.Standalone);break;case"cccc":ae=mr(Nn.Days,W.Wide,ut.Standalone);break;case"ccccc":ae=mr(Nn.Days,W.Narrow,ut.Standalone);break;case"cccccc":ae=mr(Nn.Days,W.Short,ut.Standalone);break;case"E":case"EE":case"EEE":ae=mr(Nn.Days,W.Abbreviated);break;case"EEEE":ae=mr(Nn.Days,W.Wide);break;case"EEEEE":ae=mr(Nn.Days,W.Narrow);break;case"EEEEEE":ae=mr(Nn.Days,W.Short);break;case"a":case"aa":case"aaa":ae=mr(Nn.DayPeriods,W.Abbreviated);break;case"aaaa":ae=mr(Nn.DayPeriods,W.Wide);break;case"aaaaa":ae=mr(Nn.DayPeriods,W.Narrow);break;case"b":case"bb":case"bbb":ae=mr(Nn.DayPeriods,W.Abbreviated,ut.Standalone,!0);break;case"bbbb":ae=mr(Nn.DayPeriods,W.Wide,ut.Standalone,!0);break;case"bbbbb":ae=mr(Nn.DayPeriods,W.Narrow,ut.Standalone,!0);break;case"B":case"BB":case"BBB":ae=mr(Nn.DayPeriods,W.Abbreviated,ut.Format,!0);break;case"BBBB":ae=mr(Nn.DayPeriods,W.Wide,ut.Format,!0);break;case"BBBBB":ae=mr(Nn.DayPeriods,W.Narrow,ut.Format,!0);break;case"h":ae=Rr(Bn.Hours,1,-12);break;case"hh":ae=Rr(Bn.Hours,2,-12);break;case"H":ae=Rr(Bn.Hours,1);break;case"HH":ae=Rr(Bn.Hours,2);break;case"m":ae=Rr(Bn.Minutes,1);break;case"mm":ae=Rr(Bn.Minutes,2);break;case"s":ae=Rr(Bn.Seconds,1);break;case"ss":ae=Rr(Bn.Seconds,2);break;case"S":ae=Rr(Bn.FractionalSeconds,1);break;case"SS":ae=Rr(Bn.FractionalSeconds,2);break;case"SSS":ae=Rr(Bn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ae=gr(dn.Short);break;case"ZZZZZ":ae=gr(dn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ae=gr(dn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ae=gr(dn.Long);break;default:return null}return os[N]=ae,ae}(zr);Gr+=hr?hr(Ke,z,es):"''"===zr?"'":zr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Gr}function sr(N,ae,z){const Te=new Date(0);return Te.setFullYear(N,ae,z),Te.setHours(0,0,0),Te}function Gi(N,ae){const z=function Bt(N){return(0,y.cg1)(N)[y.wAp.LocaleId]}(N);if(yi[z]=yi[z]||{},yi[z][ae])return yi[z][ae];let Te="";switch(ae){case"shortDate":Te=dt(N,ne.Short);break;case"mediumDate":Te=dt(N,ne.Medium);break;case"longDate":Te=dt(N,ne.Long);break;case"fullDate":Te=dt(N,ne.Full);break;case"shortTime":Te=at(N,ne.Short);break;case"mediumTime":Te=at(N,ne.Medium);break;case"longTime":Te=at(N,ne.Long);break;case"fullTime":Te=at(N,ne.Full);break;case"short":const Ke=Gi(N,"shortTime"),Nt=Gi(N,"shortDate");Te=Zr(Ot(N,ne.Short),[Ke,Nt]);break;case"medium":const Zt=Gi(N,"mediumTime"),Jn=Gi(N,"mediumDate");Te=Zr(Ot(N,ne.Medium),[Zt,Jn]);break;case"long":const es=Gi(N,"longTime"),Gr=Gi(N,"longDate");Te=Zr(Ot(N,ne.Long),[es,Gr]);break;case"full":const zr=Gi(N,"fullTime"),hr=Gi(N,"fullDate");Te=Zr(Ot(N,ne.Full),[zr,hr])}return Te&&(yi[z][ae]=Te),Te}function Zr(N,ae){return ae&&(N=N.replace(/\{([^}]+)}/g,function(z,Te){return null!=ae&&Te in ae?ae[Te]:z})),N}function _i(N,ae,z="-",Te,Ke){let Nt="";(N<0||Ke&&N<=0)&&(Ke?N=1-N:(N=-N,Nt=z));let Zt=String(N);for(;Zt.length<ae;)Zt="0"+Zt;return Te&&(Zt=Zt.slice(Zt.length-ae)),Nt+Zt}function Rr(N,ae,z=0,Te=!1,Ke=!1){return function(Nt,Zt){let Jn=function On(N,ae){switch(N){case Bn.FullYear:return ae.getFullYear();case Bn.Month:return ae.getMonth();case Bn.Date:return ae.getDate();case Bn.Hours:return ae.getHours();case Bn.Minutes:return ae.getMinutes();case Bn.Seconds:return ae.getSeconds();case Bn.FractionalSeconds:return ae.getMilliseconds();case Bn.Day:return ae.getDay();default:throw new Error(`Unknown DateType value "${N}".`)}}(N,Nt);if((z>0||Jn>-z)&&(Jn+=z),N===Bn.Hours)0===Jn&&-12===z&&(Jn=12);else if(N===Bn.FractionalSeconds)return function Ws(N,ae){return _i(N,3).substring(0,ae)}(Jn,ae);const es=qt(Zt,Pe.MinusSign);return _i(Jn,ae,es,Te,Ke)}}function mr(N,ae,z=ut.Format,Te=!1){return function(Ke,Nt){return function ns(N,ae,z,Te,Ke,Nt){switch(z){case Nn.Months:return function ot(N,ae,z){const Te=(0,y.cg1)(N),Nt=wr([Te[y.wAp.MonthsFormat],Te[y.wAp.MonthsStandalone]],ae);return wr(Nt,z)}(ae,Ke,Te)[N.getMonth()];case Nn.Days:return function Xt(N,ae,z){const Te=(0,y.cg1)(N),Nt=wr([Te[y.wAp.DaysFormat],Te[y.wAp.DaysStandalone]],ae);return wr(Nt,z)}(ae,Ke,Te)[N.getDay()];case Nn.DayPeriods:const Zt=N.getHours(),Jn=N.getMinutes();if(Nt){const Gr=function ur(N){const ae=(0,y.cg1)(N);return zn(ae),(ae[y.wAp.ExtraData][2]||[]).map(Te=>"string"==typeof Te?Yr(Te):[Yr(Te[0]),Yr(Te[1])])}(ae),zr=function rr(N,ae,z){const Te=(0,y.cg1)(N);zn(Te);const Nt=wr([Te[y.wAp.ExtraData][0],Te[y.wAp.ExtraData][1]],ae)||[];return wr(Nt,z)||[]}(ae,Ke,Te),hr=Gr.findIndex(ji=>{if(Array.isArray(ji)){const[Jr,Yi]=ji,vr=Zt>=Jr.hours&&Jn>=Jr.minutes,Qn=Zt<Yi.hours||Zt===Yi.hours&&Jn<Yi.minutes;if(Jr.hours<Yi.hours){if(vr&&Qn)return!0}else if(vr||Qn)return!0}else if(ji.hours===Zt&&ji.minutes===Jn)return!0;return!1});if(-1!==hr)return zr[hr]}return function $t(N,ae,z){const Te=(0,y.cg1)(N),Nt=wr([Te[y.wAp.DayPeriodsFormat],Te[y.wAp.DayPeriodsStandalone]],ae);return wr(Nt,z)}(ae,Ke,Te)[Zt<12?0:1];case Nn.Eras:return function Ye(N,ae){return wr((0,y.cg1)(N)[y.wAp.Eras],ae)}(ae,Te)[N.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${z}`)}}(Ke,Nt,N,ae,z,Te)}}function gr(N){return function(ae,z,Te){const Ke=-1*Te,Nt=qt(z,Pe.MinusSign),Zt=Ke>0?Math.floor(Ke/60):Math.ceil(Ke/60);switch(N){case dn.Short:return(Ke>=0?"+":"")+_i(Zt,2,Nt)+_i(Math.abs(Ke%60),2,Nt);case dn.ShortGMT:return"GMT"+(Ke>=0?"+":"")+_i(Zt,1,Nt);case dn.Long:return"GMT"+(Ke>=0?"+":"")+_i(Zt,2,Nt)+":"+_i(Math.abs(Ke%60),2,Nt);case dn.Extended:return 0===Te?"Z":(Ke>=0?"+":"")+_i(Zt,2,Nt)+":"+_i(Math.abs(Ke%60),2,Nt);default:throw new Error(`Unknown zone width "${N}"`)}}}const zi=0,di=4;function bi(N){return sr(N.getFullYear(),N.getMonth(),N.getDate()+(di-N.getDay()))}function wi(N,ae=!1){return function(z,Te){let Ke;if(ae){const Nt=new Date(z.getFullYear(),z.getMonth(),1).getDay()-1,Zt=z.getDate();Ke=1+Math.floor((Zt+Nt)/7)}else{const Nt=bi(z),Zt=function Xi(N){const ae=sr(N,zi,1).getDay();return sr(N,0,1+(ae<=di?di:di+7)-ae)}(Nt.getFullYear()),Jn=Nt.getTime()-Zt.getTime();Ke=1+Math.round(Jn/6048e5)}return _i(Ke,N,qt(Te,Pe.MinusSign))}}function Vr(N,ae=!1){return function(z,Te){return _i(bi(z).getFullYear(),N,qt(Te,Pe.MinusSign),ae)}}const os={};function vs(N,ae){N=N.replace(/:/g,"");const z=Date.parse("Jan 01, 1970 00:00:00 "+N)/6e4;return isNaN(z)?ae:z}function ye(N){return N instanceof Date&&!isNaN(N.valueOf())}const Ae=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ir(N){const ae=parseInt(N);if(isNaN(ae))throw new Error("Invalid integer literal when parsing "+N);return ae}function rs(N,ae){ae=encodeURIComponent(ae);for(const z of N.split(";")){const Te=z.indexOf("="),[Ke,Nt]=-1==Te?[z,""]:[z.slice(0,Te),z.slice(Te+1)];if(Ke.trim()===ae)return decodeURIComponent(Nt)}return null}const Ks=/\s+/,$o=[];let Ns=(()=>{class N{constructor(z,Te,Ke,Nt){this._iterableDiffers=z,this._keyValueDiffers=Te,this._ngEl=Ke,this._renderer=Nt,this.initialClasses=$o,this.stateMap=new Map}set klass(z){this.initialClasses=null!=z?z.trim().split(Ks):$o}set ngClass(z){this.rawClass="string"==typeof z?z.trim().split(Ks):z}ngDoCheck(){for(const Te of this.initialClasses)this._updateState(Te,!0);const z=this.rawClass;if(Array.isArray(z)||z instanceof Set)for(const Te of z)this._updateState(Te,!0);else if(null!=z)for(const Te of Object.keys(z))this._updateState(Te,!!z[Te]);this._applyStateDiff()}_updateState(z,Te){const Ke=this.stateMap.get(z);void 0!==Ke?(Ke.enabled!==Te&&(Ke.changed=!0,Ke.enabled=Te),Ke.touched=!0):this.stateMap.set(z,{enabled:Te,changed:!0,touched:!0})}_applyStateDiff(){for(const z of this.stateMap){const Te=z[0],Ke=z[1];Ke.changed?(this._toggleClass(Te,Ke.enabled),Ke.changed=!1):Ke.touched||(Ke.enabled&&this._toggleClass(Te,!1),this.stateMap.delete(Te)),Ke.touched=!1}}_toggleClass(z,Te){(z=z.trim()).length>0&&z.split(Ks).forEach(Ke=>{Te?this._renderer.addClass(this._ngEl.nativeElement,Ke):this._renderer.removeClass(this._ngEl.nativeElement,Ke)})}}return N.\u0275fac=function(z){return new(z||N)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},N.\u0275dir=y.lG2({type:N,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),N})();class Ho{constructor(ae,z,Te,Ke){this.$implicit=ae,this.ngForOf=z,this.index=Te,this.count=Ke}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ss=(()=>{class N{set ngForOf(z){this._ngForOf=z,this._ngForOfDirty=!0}set ngForTrackBy(z){this._trackByFn=z}get ngForTrackBy(){return this._trackByFn}constructor(z,Te,Ke){this._viewContainer=z,this._template=Te,this._differs=Ke,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(z){z&&(this._template=z)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const z=this._ngForOf;!this._differ&&z&&(this._differ=this._differs.find(z).create(this.ngForTrackBy))}if(this._differ){const z=this._differ.diff(this._ngForOf);z&&this._applyChanges(z)}}_applyChanges(z){const Te=this._viewContainer;z.forEachOperation((Ke,Nt,Zt)=>{if(null==Ke.previousIndex)Te.createEmbeddedView(this._template,new Ho(Ke.item,this._ngForOf,-1,-1),null===Zt?void 0:Zt);else if(null==Zt)Te.remove(null===Nt?void 0:Nt);else if(null!==Nt){const Jn=Te.get(Nt);Te.move(Jn,Zt),no(Jn,Ke)}});for(let Ke=0,Nt=Te.length;Ke<Nt;Ke++){const Jn=Te.get(Ke).context;Jn.index=Ke,Jn.count=Nt,Jn.ngForOf=this._ngForOf}z.forEachIdentityChange(Ke=>{no(Te.get(Ke.currentIndex),Ke)})}static ngTemplateContextGuard(z,Te){return!0}}return N.\u0275fac=function(z){return new(z||N)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},N.\u0275dir=y.lG2({type:N,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),N})();function no(N,ae){N.context.$implicit=ae.item}let fo=(()=>{class N{constructor(z,Te){this._viewContainer=z,this._context=new Zs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Te}set ngIf(z){this._context.$implicit=this._context.ngIf=z,this._updateView()}set ngIfThen(z){ya("ngIfThen",z),this._thenTemplateRef=z,this._thenViewRef=null,this._updateView()}set ngIfElse(z){ya("ngIfElse",z),this._elseTemplateRef=z,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(z,Te){return!0}}return N.\u0275fac=function(z){return new(z||N)(y.Y36(y.s_b),y.Y36(y.Rgc))},N.\u0275dir=y.lG2({type:N,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),N})();class Zs{constructor(){this.$implicit=null,this.ngIf=null}}function ya(N,ae){if(ae&&!ae.createEmbeddedView)throw new Error(`${N} must be a TemplateRef, but received '${(0,y.AaK)(ae)}'.`)}function _r(N,ae){return new y.vHH(2100,!1)}class us{createSubscription(ae,z){return(0,y.rg0)(()=>ae.subscribe({next:z,error:Te=>{throw Te}}))}dispose(ae){(0,y.rg0)(()=>ae.unsubscribe())}}class Ci{createSubscription(ae,z){return ae.then(z,Te=>{throw Te})}dispose(ae){}}const Mo=new Ci,is=new us;let Ys=(()=>{class N{constructor(z){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=z}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(z){return this._obj?z!==this._obj?(this._dispose(),this.transform(z)):this._latestValue:(z&&this._subscribe(z),this._latestValue)}_subscribe(z){this._obj=z,this._strategy=this._selectStrategy(z),this._subscription=this._strategy.createSubscription(z,Te=>this._updateLatestValue(z,Te))}_selectStrategy(z){if((0,y.QGY)(z))return Mo;if((0,y.F4k)(z))return is;throw _r()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(z,Te){z===this._obj&&(this._latestValue=Te,this._ref.markForCheck())}}return N.\u0275fac=function(z){return new(z||N)(y.Y36(y.sBO,16))},N.\u0275pipe=y.Yjl({name:"async",type:N,pure:!1,standalone:!0}),N})();const rn=new y.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Ln=new y.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Dn=(()=>{class N{constructor(z,Te,Ke){this.locale=z,this.defaultTimezone=Te,this.defaultOptions=Ke}transform(z,Te,Ke,Nt){if(null==z||""===z||z!=z)return null;try{return xr(z,Te??this.defaultOptions?.dateFormat??"mediumDate",Nt||this.locale,Ke??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(Zt){throw _r()}}}return N.\u0275fac=function(z){return new(z||N)(y.Y36(y.soG,16),y.Y36(rn,24),y.Y36(Ln,24))},N.\u0275pipe=y.Yjl({name:"date",type:N,pure:!0,standalone:!0}),N})(),Ji=(()=>{class N{constructor(z){this._locale=z}transform(z,Te,Ke){if(!function ys(N){return!(null==N||""===N||N!=N)}(z))return null;Ke=Ke||this._locale;try{return function ti(N,ae,z){return function Zn(N,ae,z,Te,Ke,Nt,Zt=!1){let Jn="",es=!1;if(isFinite(N)){let Gr=function An(N){let Te,Ke,Nt,Zt,Jn,ae=Math.abs(N)+"",z=0;for((Ke=ae.indexOf("."))>-1&&(ae=ae.replace(".","")),(Nt=ae.search(/e/i))>0?(Ke<0&&(Ke=Nt),Ke+=+ae.slice(Nt+1),ae=ae.substring(0,Nt)):Ke<0&&(Ke=ae.length),Nt=0;"0"===ae.charAt(Nt);Nt++);if(Nt===(Jn=ae.length))Te=[0],Ke=1;else{for(Jn--;"0"===ae.charAt(Jn);)Jn--;for(Ke-=Nt,Te=[],Zt=0;Nt<=Jn;Nt++,Zt++)Te[Zt]=Number(ae.charAt(Nt))}return Ke>22&&(Te=Te.splice(0,21),z=Ke-1,Ke=1),{digits:Te,exponent:z,integerLen:Ke}}(N);Zt&&(Gr=function Jt(N){if(0===N.digits[0])return N;const ae=N.digits.length-N.integerLen;return N.exponent?N.exponent+=2:(0===ae?N.digits.push(0,0):1===ae&&N.digits.push(0),N.integerLen+=2),N}(Gr));let zr=ae.minInt,hr=ae.minFrac,ji=ae.maxFrac;if(Nt){const Fo=Nt.match(Ae);if(null===Fo)throw new Error(`${Nt} is not a valid digit info`);const bs=Fo[1],ia=Fo[3],ja=Fo[5];null!=bs&&(zr=ir(bs)),null!=ia&&(hr=ir(ia)),null!=ja?ji=ir(ja):null!=ia&&hr>ji&&(ji=hr)}!function Yn(N,ae,z){if(ae>z)throw new Error(`The minimum number of digits after fraction (${ae}) is higher than the maximum (${z}).`);let Te=N.digits,Ke=Te.length-N.integerLen;const Nt=Math.min(Math.max(ae,Ke),z);let Zt=Nt+N.integerLen,Jn=Te[Zt];if(Zt>0){Te.splice(Math.max(N.integerLen,Zt));for(let hr=Zt;hr<Te.length;hr++)Te[hr]=0}else{Ke=Math.max(0,Ke),N.integerLen=1,Te.length=Math.max(1,Zt=Nt+1),Te[0]=0;for(let hr=1;hr<Zt;hr++)Te[hr]=0}if(Jn>=5)if(Zt-1<0){for(let hr=0;hr>Zt;hr--)Te.unshift(0),N.integerLen++;Te.unshift(1),N.integerLen++}else Te[Zt-1]++;for(;Ke<Math.max(0,Nt);Ke++)Te.push(0);let es=0!==Nt;const Gr=ae+N.integerLen,zr=Te.reduceRight(function(hr,ji,Jr,Yi){return Yi[Jr]=(ji+=hr)<10?ji:ji-10,es&&(0===Yi[Jr]&&Jr>=Gr?Yi.pop():es=!1),ji>=10?1:0},0);zr&&(Te.unshift(zr),N.integerLen++)}(Gr,hr,ji);let Jr=Gr.digits,Yi=Gr.integerLen;const vr=Gr.exponent;let Qn=[];for(es=Jr.every(Fo=>!Fo);Yi<zr;Yi++)Jr.unshift(0);for(;Yi<0;Yi++)Jr.unshift(0);Yi>0?Qn=Jr.splice(Yi,Jr.length):(Qn=Jr,Jr=[0]);const qo=[];for(Jr.length>=ae.lgSize&&qo.unshift(Jr.splice(-ae.lgSize,Jr.length).join(""));Jr.length>ae.gSize;)qo.unshift(Jr.splice(-ae.gSize,Jr.length).join(""));Jr.length&&qo.unshift(Jr.join("")),Jn=qo.join(qt(z,Te)),Qn.length&&(Jn+=qt(z,Ke)+Qn.join("")),vr&&(Jn+=qt(z,Pe.Exponential)+"+"+vr)}else Jn=qt(z,Pe.Infinity);return Jn=N<0&&!es?ae.negPre+Jn+ae.negSuf:ae.posPre+Jn+ae.posSuf,Jn}(N,function Et(N,ae="-"){const z={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Te=N.split(";"),Ke=Te[0],Nt=Te[1],Zt=-1!==Ke.indexOf(".")?Ke.split("."):[Ke.substring(0,Ke.lastIndexOf("0")+1),Ke.substring(Ke.lastIndexOf("0")+1)],Jn=Zt[0],es=Zt[1]||"";z.posPre=Jn.substring(0,Jn.indexOf("#"));for(let zr=0;zr<es.length;zr++){const hr=es.charAt(zr);"0"===hr?z.minFrac=z.maxFrac=zr+1:"#"===hr?z.maxFrac=zr+1:z.posSuf+=hr}const Gr=Jn.split(",");if(z.gSize=Gr[1]?Gr[1].length:0,z.lgSize=Gr[2]||Gr[1]?(Gr[2]||Gr[1]).length:0,Nt){const zr=Ke.length-z.posPre.length-z.posSuf.length,hr=Nt.indexOf("#");z.negPre=Nt.substring(0,hr).replace(/'/g,""),z.negSuf=Nt.slice(hr+zr).replace(/'/g,"")}else z.negPre=ae+z.posPre,z.negSuf=z.posSuf;return z}(function jt(N,ae){return(0,y.cg1)(N)[y.wAp.NumberFormats][ae]}(ae,_e.Percent),qt(ae,Pe.MinusSign)),ae,Pe.Group,Pe.Decimal,z,!0).replace(new RegExp("%","g"),qt(ae,Pe.PercentSign))}(function qi(N){if("string"==typeof N&&!isNaN(Number(N)-parseFloat(N)))return Number(N);if("number"!=typeof N)throw new Error(`${N} is not a number`);return N}(z),Ke,Te)}catch(Nt){throw _r()}}}return N.\u0275fac=function(z){return new(z||N)(y.Y36(y.soG,16))},N.\u0275pipe=y.Yjl({name:"percent",type:N,pure:!0,standalone:!0}),N})();let po=(()=>{class N{}return N.\u0275fac=function(z){return new(z||N)},N.\u0275mod=y.oAB({type:N}),N.\u0275inj=y.cJS({}),N})();const ta="browser",Eu="server";function na(N){return N===Eu}let go=(()=>{class N{}return N.\u0275prov=(0,y.Yz7)({token:N,providedIn:"root",factory:()=>new Hs((0,y.LFG)(De),window)}),N})();class Hs{constructor(ae,z){this.document=ae,this.window=z,this.offset=()=>[0,0]}setOffset(ae){this.offset=Array.isArray(ae)?()=>ae:ae}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ae){this.supportsScrolling()&&this.window.scrollTo(ae[0],ae[1])}scrollToAnchor(ae){if(!this.supportsScrolling())return;const z=function Ea(N,ae){const z=N.getElementById(ae)||N.getElementsByName(ae)[0];if(z)return z;if("function"==typeof N.createTreeWalker&&N.body&&"function"==typeof N.body.attachShadow){const Te=N.createTreeWalker(N.body,NodeFilter.SHOW_ELEMENT);let Ke=Te.currentNode;for(;Ke;){const Nt=Ke.shadowRoot;if(Nt){const Zt=Nt.getElementById(ae)||Nt.querySelector(`[name="${ae}"]`);if(Zt)return Zt}Ke=Te.nextNode()}}return null}(this.document,ae);z&&(this.scrollToElement(z),z.focus())}setHistoryScrollRestoration(ae){if(this.supportScrollRestoration()){const z=this.window.history;z&&z.scrollRestoration&&(z.scrollRestoration=ae)}}scrollToElement(ae){const z=ae.getBoundingClientRect(),Te=z.left+this.window.pageXOffset,Ke=z.top+this.window.pageYOffset,Nt=this.offset();this.window.scrollTo(Te-Nt[0],Ke-Nt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ae=Gs(this.window.history)||Gs(Object.getPrototypeOf(this.window.history));return!(!ae||!ae.writable&&!ae.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Gs(N){return Object.getOwnPropertyDescriptor(N,"scrollRestoration")}class Is{}},5879:(nn,st,H)=>{"use strict";H.d(st,{$8M:()=>Qa,$WT:()=>Mo,$Z:()=>f0,AFp:()=>Pu,ALo:()=>KT,AaK:()=>Le,AsE:()=>vf,BQk:()=>lo,CHM:()=>pu,CRH:()=>lE,DdM:()=>UT,EJc:()=>GC,EiD:()=>Kh,EpF:()=>Pd,F$t:()=>Od,F4k:()=>Tm,FYo:()=>Xh,FiY:()=>ps,G48:()=>pS,Gf:()=>aE,GfV:()=>Ev,Gpc:()=>vt,HDt:()=>PE,Hsn:()=>hp,JOm:()=>Au,JVY:()=>Wl,JZr:()=>J,KtG:()=>zs,L6k:()=>ka,LAX:()=>Km,LFG:()=>Ar,LSH:()=>Xm,Lbi:()=>dv,Lck:()=>Pw,MAs:()=>au,MMx:()=>PT,MR2:()=>Yh,NdJ:()=>ed,O4$:()=>R,Ojb:()=>e0,OlP:()=>ts,Oqu:()=>mf,P3R:()=>nv,PXZ:()=>sS,Q6J:()=>bm,QGY:()=>gh,Qsj:()=>bv,R0b:()=>Rc,RDi:()=>zm,Rgc:()=>eb,SBq:()=>wd,Sil:()=>qC,Suo:()=>uE,TTD:()=>Ri,TgZ:()=>Dl,VKq:()=>VT,VuI:()=>US,W1O:()=>fE,WLB:()=>$T,X6Q:()=>fS,XFs:()=>dn,Xpm:()=>ro,Xq5:()=>an,Xts:()=>Rp,Y36:()=>dh,YKP:()=>kT,YNc:()=>cy,Yjl:()=>As,Yz7:()=>zn,Z0I:()=>wr,ZZ4:()=>vT,_Bn:()=>AT,_UZ:()=>Es,_c5:()=>kS,_uU:()=>_g,aQg:()=>yT,c2e:()=>ME,cJS:()=>rr,cg1:()=>ky,dDg:()=>tS,dqk:()=>Zr,eBb:()=>Wm,eFA:()=>qE,eJc:()=>eT,ekj:()=>_y,eoX:()=>$E,f3M:()=>Rn,g9A:()=>cv,h0i:()=>u_,hGG:()=>MS,hij:()=>Pc,iGM:()=>oE,ifc:()=>he,ip1:()=>kE,jDz:()=>OT,kL8:()=>i_,kcU:()=>B,lG2:()=>qa,lcZ:()=>ZT,lqb:()=>rh,lri:()=>UE,mCW:()=>qc,n5z:()=>Ah,n_E:()=>Tb,oAB:()=>Fs,oxw:()=>fy,pB0:()=>Gy,q3G:()=>Zo,q4F:()=>wv,qFp:()=>$S,qLn:()=>el,qOj:()=>i,qZA:()=>Md,qzn:()=>Yd,rWj:()=>VE,rg0:()=>Ka,sBO:()=>gS,s_b:()=>wb,soG:()=>Sb,tb:()=>dT,tp0:()=>Vo,uIk:()=>Vs,vHH:()=>Y,vpe:()=>Tp,wAp:()=>Kr,xp6:()=>c0,ynx:()=>nl,z2F:()=>d_,z3N:()=>Cc,zSh:()=>Ed,zs3:()=>ch});var y=H(8645),fe=H(7394),se=H(5619),V=H(5592),Ce=H(3019),De=H(2096),$e=H(3020),Xe=H(4664),et=H(3997);function Se(r){for(let s in r)if(r[s]===Se)return s;throw Error("Could not find renamed property on target object.")}function Re(r,s){for(const u in s)s.hasOwnProperty(u)&&!r.hasOwnProperty(u)&&(r[u]=s[u])}function Le(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Le).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const u=s.indexOf("\n");return-1===u?s:s.substring(0,u)}function wt(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const le=Se({__forward_ref__:Se});function vt(r){return r.__forward_ref__=vt,r.toString=function(){return Le(this())},r}function qe(r){return Tt(r)?r():r}function Tt(r){return"function"==typeof r&&r.hasOwnProperty(le)&&r.__forward_ref__===vt}function je(r){return r&&!!r.\u0275providers}const J="https://g.co/ng/security#xss";class Y extends Error{constructor(s,u){super(function Ee(r,s){return`NG0${Math.abs(r)}${s?": "+s:""}`}(s,u)),this.code=s}}function _e(r){return"string"==typeof r?r:null==r?"":String(r)}function Pe(r,s){throw new Y(-201,!1)}function Lt(r,s){null==r&&function Kt(r,s,u,h){throw new Error(`ASSERTION ERROR: ${r}`+(null==h?"":` [Expected=> ${u} ${h} ${s} <=Actual]`))}(s,r,null,"!=")}function zn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function rr(r){return{providers:r.providers||[],imports:r.imports||[]}}function $n(r){return Yr(r,Mr)||Yr(r,yi)}function wr(r){return null!==$n(r)}function Yr(r,s){return r.hasOwnProperty(s)?r[s]:null}function Hr(r){return r&&(r.hasOwnProperty(Pr)||r.hasOwnProperty(Ir))?r[Pr]:null}const Mr=Se({\u0275prov:Se}),Pr=Se({\u0275inj:Se}),yi=Se({ngInjectableDef:Se}),Ir=Se({ngInjectorDef:Se});var dn=(()=>((dn=dn||{})[dn.Default=0]="Default",dn[dn.Host=1]="Host",dn[dn.Self=2]="Self",dn[dn.SkipSelf=4]="SkipSelf",dn[dn.Optional=8]="Optional",dn))();let Bn;function xr(r){const s=Bn;return Bn=r,s}function sr(r,s,u){const h=$n(r);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&dn.Optional?null:void 0!==s?s:void Pe(Le(r))}const Zr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),On={},mr="__NG_DI_FLAG__",ns="ngTempTokenPath",zi=/\n/gm,Xi="__source";let bi;function Vr(r){const s=bi;return bi=r,s}function os(r,s=dn.Default){if(void 0===bi)throw new Y(-203,!1);return null===bi?sr(r,void 0,s):bi.get(r,s&dn.Optional?null:void 0,s)}function Ar(r,s=dn.Default){return(function Nn(){return Bn}()||os)(qe(r),s)}function Rn(r,s=dn.Default){return Ar(r,tt(s))}function tt(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function ve(r){const s=[];for(let u=0;u<r.length;u++){const h=qe(r[u]);if(Array.isArray(h)){if(0===h.length)throw new Y(900,!1);let p,_=dn.Default;for(let C=0;C<h.length;C++){const k=h[C],j=ye(k);"number"==typeof j?-1===j?p=k.token:_|=j:p=k}s.push(Ar(p,_))}else s.push(Ar(h))}return s}function be(r,s){return r[mr]=s,r.prototype[mr]=s,r}function ye(r){return r[mr]}function Yt(r){return{toString:r}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),he=(()=>{return(r=he||(he={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",he;var r})();const pe={},Ne=[],ct=Se({\u0275cmp:Se}),cn=Se({\u0275dir:Se}),Zn=Se({\u0275pipe:Se}),kr=Se({\u0275mod:Se}),ti=Se({\u0275fac:Se}),Ut=Se({__NG_ELEMENT_ID__:Se}),Et=Se({__NG_ENV_ID__:Se});function Jt(r,s,u){let h=r.length;for(;;){const p=r.indexOf(s,u);if(-1===p)return p;if(0===p||r.charCodeAt(p-1)<=32){const _=s.length;if(p+_===h||r.charCodeAt(p+_)<=32)return p}u=p+1}}function An(r,s,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const _=u[h++],C=u[h++],k=u[h++];r.setAttribute(s,C,k,_)}else{const _=p,C=u[++h];ir(_)?r.setProperty(s,_,C):r.setAttribute(s,_,C),h++}}return h}function Yn(r){return 3===r||4===r||6===r}function ir(r){return 64===r.charCodeAt(0)}function yr(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let u=-1;for(let h=0;h<s.length;h++){const p=s[h];"number"==typeof p?u=p:0===u||Qr(r,u,p,null,-1===u||2===u?s[++h]:null)}}return r}function Qr(r,s,u,h,p){let _=0,C=r.length;if(-1===s)C=-1;else for(;_<r.length;){const k=r[_++];if("number"==typeof k){if(k===s){C=-1;break}if(k>s){C=_-1;break}}}for(;_<r.length;){const k=r[_];if("number"==typeof k)break;if(k===u){if(null===h)return void(null!==p&&(r[_+1]=p));if(h===r[_+1])return void(r[_+2]=p)}_++,null!==h&&_++,null!==p&&_++}-1!==C&&(r.splice(C,0,s),_=C+1),r.splice(_++,0,u),null!==h&&r.splice(_++,0,h),null!==p&&r.splice(_++,0,p)}const fi="ng-template";function pi(r,s,u){let h=0,p=!0;for(;h<r.length;){let _=r[h++];if("string"==typeof _&&p){const C=r[h++];if(u&&"class"===_&&-1!==Jt(C.toLowerCase(),s,0))return!0}else{if(1===_){for(;h<r.length&&"string"==typeof(_=r[h++]);)if(_.toLowerCase()===s)return!0;return!1}"number"==typeof _&&(p=!1)}}return!1}function rs(r){return 4===r.type&&r.value!==fi}function Ks(r,s,u){return s===(4!==r.type||u?r.value:fi)}function $o(r,s,u){let h=4;const p=r.attrs||[],_=function Ss(r){for(let s=0;s<r.length;s++)if(Yn(r[s]))return s;return r.length}(p);let C=!1;for(let k=0;k<s.length;k++){const j=s[k];if("number"!=typeof j){if(!C)if(4&h){if(h=2|1&h,""!==j&&!Ks(r,j,u)||""===j&&1===s.length){if(Ns(h))return!1;C=!0}}else{const ie=8&h?j:s[++k];if(8&h&&null!==r.attrs){if(!pi(r.attrs,ie,u)){if(Ns(h))return!1;C=!0}continue}const Ge=la(8&h?"class":j,p,rs(r),u);if(-1===Ge){if(Ns(h))return!1;C=!0;continue}if(""!==ie){let _t;_t=Ge>_?"":p[Ge+1].toLowerCase();const Rt=8&h?_t:null;if(Rt&&-1!==Jt(Rt,ie,0)||2&h&&ie!==_t){if(Ns(h))return!1;C=!0}}}}else{if(!C&&!Ns(h)&&!Ns(j))return!1;if(C&&Ns(j))continue;C=!1,h=j|1&h}}return Ns(h)||C}function Ns(r){return 0==(1&r)}function la(r,s,u,h){if(null===s)return-1;let p=0;if(h||!u){let _=!1;for(;p<s.length;){const C=s[p];if(C===r)return p;if(3===C||6===C)_=!0;else{if(1===C||2===C){let k=s[++p];for(;"string"==typeof k;)k=s[++p];continue}if(4===C)break;if(0===C){p+=4;continue}}p+=_?1:2}return-1}return function no(r,s){let u=r.indexOf(4);if(u>-1)for(u++;u<r.length;){const h=r[u];if("number"==typeof h)return-1;if(h===s)return u;u++}return-1}(s,r)}function Ls(r,s,u=!1){for(let h=0;h<s.length;h++)if($o(r,s[h],u))return!0;return!1}function oi(r,s){e:for(let u=0;u<s.length;u++){const h=s[u];if(r.length===h.length){for(let p=0;p<r.length;p++)if(r[p]!==h[p])continue e;return!0}}return!1}function fo(r,s){return r?":not("+s.trim()+")":s}function Zs(r){let s=r[0],u=1,h=2,p="",_=!1;for(;u<r.length;){let C=r[u];if("string"==typeof C)if(2&h){const k=r[++u];p+="["+C+(k.length>0?'="'+k+'"':"")+"]"}else 8&h?p+="."+C:4&h&&(p+=" "+C);else""!==p&&!Ns(C)&&(s+=fo(_,p),p=""),h=C,_=_||!Ns(h);u++}return""!==p&&(s+=fo(_,p)),s}function ro(r){return Yt(()=>{const s=Ys(r),u={...s,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||he.Emulated,styles:r.styles||Ne,_:null,schemas:r.schemas||null,tView:null,id:""};mt(u);const h=r.dependencies;return u.directiveDefs=ft(h,!1),u.pipeDefs=ft(h,!0),u.id=function tn(r){let s=0;const u=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(const p of u)s=Math.imul(31,s)+p.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(u),u})}function ba(r){return _r(r)||us(r)}function ju(r){return null!==r}function Fs(r){return Yt(()=>({type:r.type,bootstrap:r.bootstrap||Ne,declarations:r.declarations||Ne,imports:r.imports||Ne,exports:r.exports||Ne,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function as(r,s){if(null==r)return pe;const u={};for(const h in r)if(r.hasOwnProperty(h)){let p=r[h],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),u[p]=h,s&&(s[p]=_)}return u}function qa(r){return Yt(()=>{const s=Ys(r);return mt(s),s})}function As(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function _r(r){return r[ct]||null}function us(r){return r[cn]||null}function Ci(r){return r[Zn]||null}function Mo(r){const s=_r(r)||us(r)||Ci(r);return null!==s&&s.standalone}function is(r,s){const u=r[kr]||null;if(!u&&!0===s)throw new Error(`Type ${Le(r)} does not have '\u0275mod' property.`);return u}function Ys(r){const s={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:r.inputs||pe,exportAs:r.exportAs||null,standalone:!0===r.standalone,signals:!0===r.signals,selectors:r.selectors||Ne,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:as(r.inputs,s),outputs:as(r.outputs)}}function mt(r){r.features?.forEach(s=>s(r))}function ft(r,s){if(!r)return null;const u=s?Ci:ba;return()=>("function"==typeof r?r():r).map(h=>u(h)).filter(ju)}const ln=0,rn=1,Ln=2,Dn=3,Sr=4,$s=5,Ni=6,ls=7,Li=8,Xr=9,Qs=10,br=11,Ji=12,Ra=13,ys=14,qi=15,Yo=16,Go=17,po=18,ta=19,Eu=20,ks=21,Si=22,Ta=23,na=24,Fr=25,Na=1,go=2,Hs=7,Ea=9,Is=11;function _s(r){return Array.isArray(r)&&"object"==typeof r[Na]}function Fi(r){return Array.isArray(r)&&!0===r[Na]}function io(r){return 0!=(4&r.flags)}function js(r){return r.componentOffset>-1}function Po(r){return 1==(1&r.flags)}function cs(r){return!!r.template}function jr(r){return 0!=(512&r[Ln])}function xe(r,s){return r.hasOwnProperty(ti)?r[ti]:null}let Kn=Zr.WeakRef??class qn{constructor(s){this.ref=s}deref(){return this.ref}},Oi=0,Lr=null,ai=!1;function Tr(r){const s=Lr;return Lr=r,s}class Zi{constructor(){this.id=Oi++,this.ref=function lr(r){return new Kn(r)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[s,u]of this.producers){const h=u.producerNode.deref();if(void 0!==h&&u.atTrackingVersion===this.trackingVersion){if(h.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(s),h?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const s=ai;ai=!0;try{for(const[u,h]of this.consumers){const p=h.consumerNode.deref();void 0!==p&&p.trackingVersion===h.atTrackingVersion?p.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),p?.producers.delete(this.id))}}finally{ai=s}}producerAccessed(){if(ai)throw new Error("");if(null===Lr)return;let s=Lr.producers.get(this.id);void 0===s?(s={consumerNode:Lr.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Lr.trackingVersion},Lr.producers.set(this.id,s),this.consumers.set(Lr.id,s)):(s.seenValueVersion=this.valueVersion,s.atTrackingVersion=Lr.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Lr?.consumerAllowSignalWrites}producerPollStatus(s){return this.valueVersion!==s||(this.onProducerUpdateValueVersion(),this.valueVersion!==s)}}let hs=null;function Ka(r){const s=Tr(null);try{return r()}finally{Tr(s)}}const sl=()=>{};class zo extends Zi{constructor(s,u,h){super(),this.watch=s,this.schedule=u,this.dirty=!1,this.cleanupFn=sl,this.registerOnCleanup=p=>{this.cleanupFn=p},this.consumerAllowSignalWrites=h}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const s=Tr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=sl,this.watch(this.registerOnCleanup)}finally{Tr(s)}}cleanup(){this.cleanupFn()}}class Za{constructor(s,u,h){this.previousValue=s,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Ri(){return Qo}function Qo(r){return r.type.prototype.ngOnChanges&&(r.setInput=al),ol}function ol(){const r=Sa(this),s=r?.current;if(s){const u=r.previous;if(u===pe)r.previous=s;else for(let h in s)u[h]=s[h];r.current=null,this.ngOnChanges(s)}}function al(r,s,u,h){const p=this.declaredInputs[u],_=Sa(r)||function hu(r,s){return r[Uu]=s}(r,{previous:pe,current:null}),C=_.current||(_.current={}),k=_.previous,j=k[p];C[p]=new Za(j&&j.currentValue,s,k===pe),r[h]=s}Ri.ngInherit=!0;const Uu="__ngSimpleChanges__";function Sa(r){return r[Uu]||null}const Lo=function(r,s,u){},oo="svg";function Br(r){for(;Array.isArray(r);)r=r[ln];return r}function N(r,s){return Br(s[r])}function ae(r,s){return Br(s[r.index])}function Te(r,s){return r.data[s]}function Ke(r,s){return r[s]}function Nt(r,s){const u=s[r];return _s(u)?u:u[ln]}function Gr(r,s){return null==s?null:r[s]}function zr(r){r[Go]=0}function hr(r){1024&r[Ln]||(r[Ln]|=1024,Jr(r,1))}function ji(r){1024&r[Ln]&&(r[Ln]&=-1025,Jr(r,-1))}function Jr(r,s){let u=r[Dn];if(null===u)return;u[$s]+=s;let h=u;for(u=u[Dn];null!==u&&(1===s&&1===h[$s]||-1===s&&0===h[$s]);)u[$s]+=s,h=u,u=u[Dn]}const Qn={lFrame:Jo(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Nc(){return Qn.bindingsEnabled}function jo(){return null!==Qn.skipHydrationRootTNode}function pn(){return Qn.lFrame.lView}function Er(){return Qn.lFrame.tView}function pu(r){return Qn.lFrame.contextLView=r,r[Li]}function zs(r){return Qn.lFrame.contextLView=null,r}function ao(){let r=Vu();for(;null!==r&&64===r.type;)r=r.parent;return r}function Vu(){return Qn.lFrame.currentTNode}function Ui(r,s){const u=Qn.lFrame;u.currentTNode=r,u.isParent=s}function Js(){return Qn.lFrame.isParent}function Ba(){Qn.lFrame.isParent=!1}function kn(){const r=Qn.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}function ui(){return Qn.lFrame.bindingIndex++}function Ua(r){const s=Qn.lFrame,u=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,u}function Xo(r,s){const u=Qn.lFrame;u.bindingIndex=u.bindingRootIndex=r,Ol(s)}function Ol(r){Qn.lFrame.currentDirectiveIndex=r}function ic(){return Qn.lFrame.currentQueryIndex}function ll(r){Qn.lFrame.currentQueryIndex=r}function Rl(r){const s=r[rn];return 2===s.type?s.declTNode:1===s.type?r[Ni]:null}function $u(r,s,u){if(u&dn.SkipSelf){let p=s,_=r;for(;!(p=p.parent,null!==p||u&dn.Host||(p=Rl(_),null===p||(_=_[ys],10&p.type))););if(null===p)return!1;s=p,r=_}const h=Qn.lFrame=Hu();return h.currentTNode=s,h.lView=r,!0}function Nr(r){const s=Hu(),u=r[rn];Qn.lFrame=s,s.currentTNode=u.firstChild,s.lView=r,s.tView=u,s.contextLView=r,s.bindingIndex=u.bindingStartIndex,s.inI18n=!1}function Hu(){const r=Qn.lFrame,s=null===r?null:r.child;return null===s?Jo(r):s}function Jo(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function gi(){const r=Qn.lFrame;return Qn.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const cr=gi;function ha(){const r=gi();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function qr(){return Qn.lFrame.selectedIndex}function yn(r){Qn.lFrame.selectedIndex=r}function A(){const r=Qn.lFrame;return Te(r.tView,r.selectedIndex)}function R(){Qn.lFrame.currentNamespace=oo}function B(){!function oe(){Qn.lFrame.currentNamespace=null}()}let Oe=!0;function St(){return Oe}function _n(r){Oe=r}function fr(r,s){for(let u=s.directiveStart,h=s.directiveEnd;u<h;u++){const _=r.data[u].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:k,ngAfterViewInit:j,ngAfterViewChecked:ie,ngOnDestroy:we}=_;C&&(r.contentHooks??=[]).push(-u,C),k&&((r.contentHooks??=[]).push(u,k),(r.contentCheckHooks??=[]).push(u,k)),j&&(r.viewHooks??=[]).push(-u,j),ie&&((r.viewHooks??=[]).push(u,ie),(r.viewCheckHooks??=[]).push(u,ie)),null!=we&&(r.destroyHooks??=[]).push(u,we)}}function Mi(r,s,u){Gu(r,s,3,u)}function wo(r,s,u,h){(3&r[Ln])===u&&Gu(r,s,u,h)}function vo(r,s){let u=r[Ln];(3&u)===s&&(u&=8191,u+=1,r[Ln]=u)}function Gu(r,s,u,h){const _=h??-1,C=s.length-1;let k=0;for(let j=void 0!==h?65535&r[Go]:0;j<C;j++)if("number"==typeof s[j+1]){if(k=s[j],null!=h&&k>=h)break}else s[j]<0&&(r[Go]+=65536),(k<_||-1==_)&&(Nl(r,u,s,j),r[Go]=(4294901760&r[Go])+j+2),j++}function Pt(r,s){Lo(4,r,s);const u=Tr(null);try{s.call(r)}finally{Tr(u),Lo(5,r,s)}}function Nl(r,s,u,h){const p=u[h]<0,_=u[h+1],k=r[p?-u[h]:u[h]];p?r[Ln]>>13<r[Go]>>16&&(3&r[Ln])===s&&(r[Ln]+=8192,Pt(k,_)):Pt(k,_)}const Bs=-1;class cl{constructor(s,u,h){this.factory=s,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Co(r){return r!==Bs}function So(r){return 32767&r}function oc(r,s){let u=function sc(r){return r>>16}(r),h=s;for(;u>0;)h=h[ys],u--;return h}let Ms=!0;function ac(r){const s=Ms;return Ms=r,s}const Vi=255,dl=5;let Va=0;const Ya={};function Cf(r,s){const u=Bc(r,s);if(-1!==u)return u;const h=s[rn];h.firstCreatePass&&(r.injectorIndex=s.length,jc(h.data,r),jc(s,null),jc(h.blueprint,null));const p=qu(r,s),_=r.injectorIndex;if(Co(p)){const C=So(p),k=oc(p,s),j=k[rn].data;for(let ie=0;ie<8;ie++)s[_+ie]=k[C+ie]|j[C+ie]}return s[_+8]=p,_}function jc(r,s){r.push(0,0,0,0,0,0,0,0,s)}function Bc(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function qu(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let u=0,h=null,p=s;for(;null!==p;){if(h=Df(p),null===h)return Bs;if(u++,p=p[ys],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return Bs}function Su(r,s,u){!function wf(r,s,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Ut)&&(h=u[Ut]),null==h&&(h=u[Ut]=Va++);const p=h&Vi;s.data[r+(p>>dl)]|=1<<p}(r,s,u)}function Bd(r,s,u){if(u&dn.Optional||void 0!==r)return r;Pe()}function od(r,s,u,h){if(u&dn.Optional&&void 0===h&&(h=null),!(u&(dn.Self|dn.Host))){const p=r[Xr],_=xr(void 0);try{return p?p.get(s,h,u&dn.Optional):sr(s,h,u&dn.Optional)}finally{xr(_)}}return Bd(h,0,u)}function Dh(r,s,u,h=dn.Default,p){if(null!==r){if(2048&s[Ln]&&!(h&dn.Self)){const C=function Do(r,s,u,h,p){let _=r,C=s;for(;null!==_&&null!==C&&2048&C[Ln]&&!(512&C[Ln]);){const k=Ud(_,C,u,h|dn.Self,Ya);if(k!==Ya)return k;let j=_.parent;if(!j){const ie=C[Eu];if(ie){const we=ie.get(u,Ya,h);if(we!==Ya)return we}j=Df(C),C=C[ys]}_=j}return p}(r,s,u,h,Ya);if(C!==Ya)return C}const _=Ud(r,s,u,h,Ya);if(_!==Ya)return _}return od(s,u,h,p)}function Ud(r,s,u,h,p){const _=function Ih(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(Ut)?r[Ut]:void 0;return"number"==typeof s?s>=0?s&Vi:$d:s}(u);if("function"==typeof _){if(!$u(s,r,h))return h&dn.Host?Bd(p,0,h):od(s,u,h,p);try{const C=_(h);if(null!=C||h&dn.Optional)return C;Pe()}finally{cr()}}else if("number"==typeof _){let C=null,k=Bc(r,s),j=Bs,ie=h&dn.Host?s[qi][Ni]:null;for((-1===k||h&dn.SkipSelf)&&(j=-1===k?qu(r,s):s[k+8],j!==Bs&&xh(h,!1)?(C=s[rn],k=So(j),s=oc(j,s)):k=-1);-1!==k;){const we=s[rn];if(Vd(_,k,we.data)){const Ge=Ag(k,s,u,C,h,ie);if(Ge!==Ya)return Ge}j=s[k+8],j!==Bs&&xh(h,s[rn].data[k+8]===ie)&&Vd(_,k,s)?(C=we,k=So(j),s=oc(j,s)):k=-1}}return p}function Ag(r,s,u,h,p,_){const C=s[rn],k=C.data[r+8],we=hl(k,C,u,null==h?js(k)&&Ms:h!=C&&0!=(3&k.type),p&dn.Host&&_===k);return null!==we?uc(s,C,we,k):Ya}function hl(r,s,u,h,p){const _=r.providerIndexes,C=s.data,k=1048575&_,j=r.directiveStart,we=_>>20,_t=p?k+we:r.directiveEnd;for(let Rt=h?k:k+we;Rt<_t;Rt++){const vn=C[Rt];if(Rt<j&&u===vn||Rt>=j&&vn.type===u)return Rt}if(p){const Rt=C[j];if(Rt&&cs(Rt)&&Rt.type===u)return j}return null}function uc(r,s,u,h){let p=r[u];const _=s.data;if(function fs(r){return r instanceof cl}(p)){const C=p;C.resolving&&function ut(r,s){const u=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new Y(-200,`Circular dependency in DI detected for ${r}${u}`)}(function Fe(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():_e(r)}(_[u]));const k=ac(C.canSeeViewProviders);C.resolving=!0;const j=C.injectImpl?xr(C.injectImpl):null;$u(r,h,dn.Default);try{p=r[u]=C.factory(void 0,_,r,h),s.firstCreatePass&&u>=h.directiveStart&&function Hn(r,s,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:_}=s.type.prototype;if(h){const C=Qo(s);(u.preOrderHooks??=[]).push(r,C),(u.preOrderCheckHooks??=[]).push(r,C)}p&&(u.preOrderHooks??=[]).push(0-r,p),_&&((u.preOrderHooks??=[]).push(r,_),(u.preOrderCheckHooks??=[]).push(r,_))}(u,_[u],s)}finally{null!==j&&xr(j),ac(k),C.resolving=!1,cr()}}return p}function Vd(r,s,u){return!!(u[s+(r>>dl)]&1<<r)}function xh(r,s){return!(r&dn.Self||r&dn.Host&&s)}class Du{constructor(s,u){this._tNode=s,this._lView=u}get(s,u,h){return Dh(this._tNode,this._lView,s,tt(h),u)}}function $d(){return new Du(ao(),pn())}function Ah(r){return Yt(()=>{const s=r.prototype.constructor,u=s[ti]||fl(s),h=Object.prototype;let p=Object.getPrototypeOf(r.prototype).constructor;for(;p&&p!==h;){const _=p[ti]||fl(p);if(_&&_!==u)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function fl(r){return Tt(r)?()=>{const s=fl(qe(r));return s&&s()}:xe(r)}function Df(r){const s=r[rn],u=s.type;return 2===u?s.declTNode:1===u?r[Ni]:null}function Qa(r){return function Sf(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const u=r.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const _=u[p];if(Yn(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(_===s)return u[p+1];p+=2}}}return null}(ao(),r)}const Ii="__parameters__";function yo(r,s,u){return Yt(()=>{const h=function xi(r){return function(...u){if(r){const h=r(...u);for(const p in h)this[p]=h[p]}}}(s);function p(..._){if(this instanceof p)return h.apply(this,_),this;const C=new p(..._);return k.annotation=C,k;function k(j,ie,we){const Ge=j.hasOwnProperty(Ii)?j[Ii]:Object.defineProperty(j,Ii,{value:[]})[Ii];for(;Ge.length<=we;)Ge.push(null);return(Ge[we]=Ge[we]||[]).push(C),j}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=r,p.annotationCls=p,p})}function Uo(r,s){r.forEach(u=>Array.isArray(u)?Uo(u,s):s(u))}function xu(r,s,u){s>=r.length?r.push(u):r.splice(s,0,u)}function lc(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function tu(r,s){const u=[];for(let h=0;h<r;h++)u.push(s);return u}function U(r,s,u){let h=Ue(r,s);return h>=0?r[1|h]=u:(h=~h,function ud(r,s,u,h){let p=r.length;if(p==s)r.push(u,h);else if(1===p)r.push(h,r[0]),r[0]=u;else{for(p--,r.push(r[p-1],r[p]);p>s;)r[p]=r[p-2],p--;r[s]=u,r[s+1]=h}}(r,h,s,u)),h}function de(r,s){const u=Ue(r,s);if(u>=0)return r[1|u]}function Ue(r,s){return function Dt(r,s,u){let h=0,p=r.length>>u;for(;p!==h;){const _=h+(p-h>>1),C=r[_<<u];if(s===C)return _<<u;C>s?p=_:h=_+1}return~(p<<u)}(r,s,1)}const ps=be(yo("Optional"),8),Vo=be(yo("SkipSelf"),4);function $l(r){return 128==(128&r.flags)}var Au=(()=>((Au=Au||{})[Au.Important=1]="Important",Au[Au.DashCase=2]="DashCase",Au))();const Ip=/^>|^->|<!--|-->|--!>|<!-$/g,Hl=/(<|>)/,xp="\u200b$1\u200b";const Lh=new Map;let gc=0;const Vc="__ngContext__";function oa(r,s){_s(s)?(r[Vc]=s[ta],function Qu(r){Lh.set(r[ta],r)}(s)):r[Vc]=s}let $c;function ml(r,s){return $c(r,s)}function vc(r){const s=r[Dn];return Fi(s)?s[Dn]:s}function qs(r){return vd(r[Ji])}function fa(r){return vd(r[Sr])}function vd(r){for(;null!==r&&!Fi(r);)r=r[Sr];return r}function yc(r,s,u,h,p){if(null!=h){let _,C=!1;Fi(h)?_=h:_s(h)&&(C=!0,h=h[ln]);const k=Br(h);0===r&&null!==u?null==p?mn(s,u,k):kt(s,u,k,p||null,!0):1===r&&null!==u?kt(s,u,k,p||null,!0):2===r?function yu(r,s,u){const h=Os(r,s);h&&function gt(r,s,u,h){r.removeChild(s,u,h)}(r,h,s,u)}(s,k,C):3===r&&s.destroyNode(k),null!=_&&function Fy(r,s,u,h,p){const _=u[Hs];_!==Br(u)&&yc(s,r,h,_,p);for(let k=Is;k<u.length;k++){const j=u[k];Gc(j[rn],j,r,s,h,_)}}(s,r,_,u,p)}}function _c(r,s){return r.createComment(function Ha(r){return r.replace(Ip,s=>s.replace(Hl,xp))}(s))}function Hc(r,s,u){return r.createElement(s,u)}function Tc(r,s){const u=r[Ea],h=u.indexOf(s);ji(s),u.splice(h,1)}function S(r,s){if(r.length<=Is)return;const u=Is+s,h=r[u];if(h){const p=h[Yo];null!==p&&p!==r&&Tc(p,h),s>0&&(r[u-1][Sr]=h[Sr]);const _=lc(r,Is+s);!function Gl(r,s){Gc(r,s,s[br],2,null,null),s[ln]=null,s[Ni]=null}(h[rn],h);const C=_[po];null!==C&&C.detachView(_[rn]),h[Dn]=null,h[Sr]=null,h[Ln]&=-129}return h}function m(r,s){if(!(256&s[Ln])){const u=s[br];s[Ta]?.destroy(),s[na]?.destroy(),u.destroyNode&&Gc(r,s,u,3,null,null),function Kd(r){let s=r[Ji];if(!s)return b(r[rn],r);for(;s;){let u=null;if(_s(s))u=s[Ji];else{const h=s[Is];h&&(u=h)}if(!u){for(;s&&!s[Sr]&&s!==r;)_s(s)&&b(s[rn],s),s=s[Dn];null===s&&(s=r),_s(s)&&b(s[rn],s),u=s&&s[Sr]}s=u}}(s)}}function b(r,s){if(!(256&s[Ln])){s[Ln]&=-129,s[Ln]|=256,function te(r,s){let u;if(null!=r&&null!=(u=r.destroyHooks))for(let h=0;h<u.length;h+=2){const p=s[u[h]];if(!(p instanceof cl)){const _=u[h+1];if(Array.isArray(_))for(let C=0;C<_.length;C+=2){const k=p[_[C]],j=_[C+1];Lo(4,k,j);try{j.call(k)}finally{Lo(5,k,j)}}else{Lo(4,p,_);try{_.call(p)}finally{Lo(5,p,_)}}}}}(r,s),function x(r,s){const u=r.cleanup,h=s[ls];if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const C=u[_+3];C>=0?h[C]():h[-C].unsubscribe(),_+=2}else u[_].call(h[u[_+1]]);null!==h&&(s[ls]=null);const p=s[ks];if(null!==p){s[ks]=null;for(let _=0;_<p.length;_++)(0,p[_])()}}(r,s),1===s[rn].type&&s[br].destroy();const u=s[Yo];if(null!==u&&Fi(s[Dn])){u!==s[Dn]&&Tc(u,s);const h=s[po];null!==h&&h.detachView(r)}!function Wd(r){Lh.delete(r[ta])}(s)}}function ge(r,s,u){return function Ze(r,s,u){let h=s;for(;null!==h&&40&h.type;)h=(s=h).parent;if(null===h)return u[ln];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:_}=r.data[h.directiveStart+p];if(_===he.None||_===he.Emulated)return null}return ae(h,u)}}(r,s.parent,u)}function kt(r,s,u,h,p){r.insertBefore(s,u,h,p)}function mn(r,s,u){r.appendChild(s,u)}function Pn(r,s,u,h,p){null!==h?kt(r,s,u,h,p):mn(r,s,u)}function Os(r,s){return r.parentNode(s)}function Zd(r,s,u){return Ec(r,s,u)}let pa,_o,zh,_d,Ec=function Hh(r,s,u){return 40&r.type?ae(r,u):null};function aa(r,s,u,h){const p=ge(r,h,s),_=s[br],k=Zd(h.parent||s[Ni],h,s);if(null!=p)if(Array.isArray(u))for(let j=0;j<u.length;j++)Pn(_,p,u[j],k,!1);else Pn(_,p,u,k,!1);void 0!==pa&&pa(_,h,s,u,p)}function ms(r,s){if(null!==s){const u=s.type;if(3&u)return ae(s,r);if(4&u)return Mu(-1,r[s.index]);if(8&u){const h=s.child;if(null!==h)return ms(r,h);{const p=r[s.index];return Fi(p)?Mu(-1,p):Br(p)}}if(32&u)return ml(s,r)()||Br(r[s.index]);{const h=ua(r,s);return null!==h?Array.isArray(h)?h[0]:ms(vc(r[qi]),h):ms(r,s.next)}}return null}function ua(r,s){return null!==s?r[qi][Ni].projection[s.projection]:null}function Mu(r,s){const u=Is+r+1;if(u<s.length){const h=s[u],p=h[rn].firstChild;if(null!==p)return ms(h,p)}return s[Hs]}function yl(r,s,u,h,p,_,C){for(;null!=u;){const k=h[u.index],j=u.type;if(C&&0===s&&(k&&oa(Br(k),h),u.flags|=2),32!=(32&u.flags))if(8&j)yl(r,s,u.child,h,p,_,!1),yc(s,r,p,k,_);else if(32&j){const ie=ml(u,h);let we;for(;we=ie();)yc(s,r,p,we,_);yc(s,r,p,k,_)}else 16&j?Ly(r,s,h,u,p,_):yc(s,r,p,k,_);u=C?u.projectionNext:u.next}}function Gc(r,s,u,h,p,_){yl(u,h,r.firstChild,s,p,_,!1)}function Ly(r,s,u,h,p,_){const C=u[qi],j=C[Ni].projection[h.projection];if(Array.isArray(j))for(let ie=0;ie<j.length;ie++)yc(s,r,p,j[ie],_);else{let ie=j;const we=C[Dn];$l(h)&&(ie.flags|=128),yl(r,s,ie,we,p,_,!0)}}function $m(r,s,u){""===u?r.removeAttribute(s,"class"):r.setAttribute(s,"class",u)}function Hm(r,s,u){const{mergedAttrs:h,classes:p,styles:_}=u;null!==h&&An(r,s,h),null!==p&&$m(r,s,p),null!==_&&function ql(r,s,u){r.setAttribute(s,"style",u)}(r,s,_)}function yd(r){return function Gh(){if(void 0===_o&&(_o=null,Zr.trustedTypes))try{_o=Zr.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return _o}()?.createHTML(r)||r}function zm(r){zh=r}function kp(r){return function Ug(){if(void 0===_d&&(_d=null,Zr.trustedTypes))try{_d=Zr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return _d}()?.createScriptURL(r)||r}class bd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${J})`}}class Mp extends bd{getTypeName(){return"HTML"}}class qm extends bd{getTypeName(){return"Style"}}class Uy extends bd{getTypeName(){return"Script"}}class Vy extends bd{getTypeName(){return"URL"}}class $y extends bd{getTypeName(){return"ResourceURL"}}function Cc(r){return r instanceof bd?r.changingThisBreaksApplicationSecurity:r}function Yd(r,s){const u=function Hy(r){return r instanceof bd&&r.getTypeName()||null}(r);if(null!=u&&u!==s){if("ResourceURL"===u&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${u} (see ${J})`)}return u===s}function Wl(r){return new Mp(r)}function ka(r){return new qm(r)}function Wm(r){return new Uy(r)}function Km(r){return new Vy(r)}function Gy(r){return new $y(r)}class Wh{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const u=(new window.DOMParser).parseFromString(yd(s),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(s):(u.removeChild(u.firstChild),u)}catch{return null}}}class zy{constructor(s){this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(s){const u=this.inertDocument.createElement("template");return u.innerHTML=yd(s),u}}const Vg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qc(r){return(r=String(r)).match(Vg)?r:"unsafe:"+r}function _u(r){const s={};for(const u of r.split(","))s[u]=!0;return s}function Sc(...r){const s={};for(const u of r)for(const h in u)u.hasOwnProperty(h)&&(s[h]=!0);return s}const Lf=_u("area,br,col,hr,img,wbr"),Zm=_u("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$g=_u("rp,rt"),Pp=Sc(Lf,Sc(Zm,_u("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Sc($g,_u("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Sc($g,Zm)),Ff=_u("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Qd=Sc(Ff,_u("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_u("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xd=_u("script,style,template");class f_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let u=s.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(s){const u=s.nodeName.toLowerCase();if(!Pp.hasOwnProperty(u))return this.sanitizedSomething=!0,!Xd.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=s.attributes;for(let p=0;p<h.length;p++){const _=h.item(p),C=_.name,k=C.toLowerCase();if(!Qd.hasOwnProperty(k)){this.sanitizedSomething=!0;continue}let j=_.value;Ff[k]&&(j=qc(j)),this.buf.push(" ",C,'="',Zy(j),'"')}return this.buf.push(">"),!0}endElement(s){const u=s.nodeName.toLowerCase();Pp.hasOwnProperty(u)&&!Lf.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(s){this.buf.push(Zy(s))}checkClobberedElement(s,u){if(u&&(s.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return u}}const Hg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p_=/([^\#-~ |!])/g;function Zy(r){return r.replace(/&/g,"&amp;").replace(Hg,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(p_,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Gg;function Kh(r,s){let u=null;try{Gg=Gg||function zc(r){const s=new zy(r);return function qy(){try{return!!(new window.DOMParser).parseFromString(yd(""),"text/html")}catch{return!1}}()?new Wh(s):s}(r);let h=s?String(s):"";u=Gg.getInertBodyElement(h);let p=5,_=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=_,_=u.innerHTML,u=Gg.getInertBodyElement(h)}while(h!==_);return yd((new f_).sanitizeChildren(Kl(u)||u))}finally{if(u){const h=Kl(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function Kl(r){return"content"in r&&function Td(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Zo=(()=>((Zo=Zo||{})[Zo.NONE=0]="NONE",Zo[Zo.HTML=1]="HTML",Zo[Zo.STYLE=2]="STYLE",Zo[Zo.SCRIPT=3]="SCRIPT",Zo[Zo.URL=4]="URL",Zo[Zo.RESOURCE_URL=5]="RESOURCE_URL",Zo))();function Xm(r){const s=Jd();return s?s.sanitize(Zo.URL,r)||"":Yd(r,"URL")?Cc(r):qc(_e(r))}function Op(r){const s=Jd();if(s)return kp(s.sanitize(Zo.RESOURCE_URL,r)||"");if(Yd(r,"ResourceURL"))return kp(Cc(r));throw new Y(904,!1)}function nv(r,s,u){return function tv(r,s){return"src"===s&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===s&&("base"===r||"link"===r)?Op:Xm}(s,u)(r)}function Jd(){const r=pn();return r&&r[Qs].sanitizer}class ts{constructor(s,u){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=zn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Rp=new ts("ENVIRONMENT_INITIALIZER"),iv=new ts("INJECTOR",-1),Zh=new ts("INJECTOR_DEF_TYPES");class Np{get(s,u=On){if(u===On){const h=new Error(`NullInjectorError: No provider for ${Le(s)}!`);throw h.name="NullInjectorError",h}return u}}function Yh(r){return{\u0275providers:r}}function Qy(...r){return{\u0275providers:sv(0,r),\u0275fromNgModule:!0}}function sv(r,...s){const u=[],h=new Set;let p;return Uo(s,_=>{const C=_;Lp(C,u,[],h)&&(p||=[],p.push(C))}),void 0!==p&&iu(p,u),u}function iu(r,s){for(let u=0;u<r.length;u++){const{providers:p}=r[u];eh(p,_=>{s.push(_)})}}function Lp(r,s,u,h){if(!(r=qe(r)))return!1;let p=null,_=Hr(r);const C=!_&&_r(r);if(_||C){if(C&&!C.standalone)return!1;p=r}else{const j=r.ngModule;if(_=Hr(j),!_)return!1;p=j}const k=h.has(p);if(C){if(k)return!1;if(h.add(p),C.dependencies){const j="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const ie of j)Lp(ie,s,u,h)}}else{if(!_)return!1;{if(null!=_.imports&&!k){let ie;h.add(p);try{Uo(_.imports,we=>{Lp(we,s,u,h)&&(ie||=[],ie.push(we))})}finally{}void 0!==ie&&iu(ie,s)}if(!k){const ie=xe(p)||(()=>new p);s.push({provide:p,useFactory:ie,deps:Ne},{provide:Zh,useValue:p,multi:!0},{provide:Rp,useValue:()=>Ar(p),multi:!0})}const j=_.providers;null==j||k||eh(j,we=>{s.push(we)})}}return p!==r&&void 0!==r.providers}function eh(r,s){for(let u of r)je(u)&&(u=u.\u0275providers),Array.isArray(u)?eh(u,s):s(u)}const Ma=Se({provide:String,useValue:Se});function Wc(r){return null!==r&&"object"==typeof r&&Ma in r}function Ju(r){return"function"==typeof r}const Ed=new ts("Set Injector scope."),Fp={},nh={};let zg;function qg(){return void 0===zg&&(zg=new Np),zg}class rh{}class Wg extends rh{get destroyed(){return this._destroyed}constructor(s,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zl(s,C=>this.processProvider(C)),this.records.set(iv,Bf(void 0,this)),p.has("environment")&&this.records.set(rh,Bf(void 0,this));const _=this.records.get(Ed);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(Zh.multi,Ne,dn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of s)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const u=Vr(this),h=xr(void 0);try{return s()}finally{Vr(u),xr(h)}}get(s,u=On,h=dn.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Et))return s[Et](this);h=tt(h);const p=Vr(this),_=xr(void 0);try{if(!(h&dn.SkipSelf)){let k=this.records.get(s);if(void 0===k){const j=function Kg(r){return"function"==typeof r||"object"==typeof r&&r instanceof ts}(s)&&$n(s);k=j&&this.injectableDefInScope(j)?Bf(jp(s),Fp):null,this.records.set(s,k)}if(null!=k)return this.hydrate(s,k)}return(h&dn.Self?qg():this.parent).get(s,u=h&dn.Optional&&u===On?null:u)}catch(C){if("NullInjectorError"===C.name){if((C[ns]=C[ns]||[]).unshift(Le(s)),p)throw C;return function Ae(r,s,u,h){const p=r[ns];throw s[Xi]&&p.unshift(s[Xi]),r.message=function yt(r,s,u,h=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let p=Le(s);if(Array.isArray(s))p=s.map(Le).join(" -> ");else if("object"==typeof s){let _=[];for(let C in s)if(s.hasOwnProperty(C)){let k=s[C];_.push(C+":"+("string"==typeof k?JSON.stringify(k):Le(k)))}p=`{${_.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${r.replace(zi,"\n  ")}`}("\n"+r.message,p,u,h),r.ngTokenPath=p,r[ns]=null,r}(C,s,"R3InjectorError",this.source)}throw C}finally{xr(_),Vr(p)}}resolveInjectorInitializers(){const s=Vr(this),u=xr(void 0);try{const h=this.get(Rp.multi,Ne,dn.Self);for(const p of h)p()}finally{Vr(s),xr(u)}}toString(){const s=[],u=this.records;for(const h of u.keys())s.push(Le(h));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(s){let u=Ju(s=qe(s))?s:qe(s&&s.provide);const h=function Bp(r){return Wc(r)?Bf(void 0,r.useValue):Bf(uv(r),Fp)}(s);if(Ju(s)||!0!==s.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=Bf(void 0,Fp,!0),p.factory=()=>ve(p.multi),this.records.set(u,p)),u=s,p.multi.push(s)}this.records.set(u,h)}hydrate(s,u){return u.value===Fp&&(u.value=nh,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ib(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(s){if(!s.providedIn)return!1;const u=qe(s.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(s){const u=this._onDestroyHooks.indexOf(s);-1!==u&&this._onDestroyHooks.splice(u,1)}}function jp(r){const s=$n(r),u=null!==s?s.factory:xe(r);if(null!==u)return u;if(r instanceof ts)throw new Y(204,!1);if(r instanceof Function)return function Jy(r){const s=r.length;if(s>0)throw tu(s,"?"),new Y(204,!1);const u=function Cr(r){return r&&(r[Mr]||r[yi])||null}(r);return null!==u?()=>u.factory(r):()=>new r}(r);throw new Y(204,!1)}function uv(r,s,u){let h;if(Ju(r)){const p=qe(r);return xe(p)||jp(p)}if(Wc(r))h=()=>qe(r.useValue);else if(function av(r){return!(!r||!r.useFactory)}(r))h=()=>r.useFactory(...ve(r.deps||[]));else if(function th(r){return!(!r||!r.useExisting)}(r))h=()=>Ar(qe(r.useExisting));else{const p=qe(r&&(r.useClass||r.provide));if(!function lv(r){return!!r.deps}(r))return xe(p)||jp(p);h=()=>new p(...ve(r.deps))}return h}function Bf(r,s,u=!1){return{factory:r,value:s,multi:u?[]:void 0}}function Zl(r,s){for(const u of r)Array.isArray(u)?Zl(u,s):u&&je(u)?Zl(u.\u0275providers,s):s(u)}const Pu=new ts("AppId",{providedIn:"root",factory:()=>Zg}),Zg="ng",cv=new ts("Platform Initializer"),dv=new ts("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),e0=new ts("CSP nonce",{providedIn:"root",factory:()=>function qh(){if(void 0!==zh)return zh;if(typeof document<"u")return document;throw new Y(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let qp=(r,s)=>null;function Xg(r,s){return qp(r,s)}class Hf{}class n0{}class o0{resolveComponentFactory(s){throw function yv(r){const s=Error(`No component factory found for ${Le(r)}.`);return s.ngComponent=r,s}(s)}}let Gf=(()=>{class r{}return r.NULL=new o0,r})();function _v(){return _l(ao(),pn())}function _l(r,s){return new wd(ae(r,s))}let wd=(()=>{class r{constructor(u){this.nativeElement=u}}return r.__NG_ELEMENT_ID__=_v,r})();function Zp(r){return r instanceof wd?r.nativeElement:r}class Xh{}let bv=(()=>{class r{constructor(){this.destroyNode=null}}return r.__NG_ELEMENT_ID__=()=>function Tv(){const r=pn(),u=Nt(ao().index,r);return(_s(u)?u:r)[br]}(),r})(),Jh=(()=>{class r{}return r.\u0275prov=zn({token:r,providedIn:"root",factory:()=>null}),r})();class Ev{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const wv=new Ev("16.1.1"),ef={};function tf(r){for(;r;){r[Ln]|=64;const s=vc(r);if(jr(r)&&!s)return r;r=s}return null}function ga(r){return r.ngOriginalError}class el{constructor(){this._console=console}handleError(s){const u=this._findOriginalError(s);this._console.error("ERROR",s),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(s){let u=s&&ga(s);for(;u&&ga(u);)u=ga(u);return u||null}}const lh=new ts("",{providedIn:"root",factory:()=>!1});function Yc(r){return r instanceof Function?r():r}class em extends Zi{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(s){this._lView=s}onConsumerDependencyMayHaveChanged(){tf(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(s,u,h){const p=Tr(this);this.trackingVersion++;try{s(u,h)}finally{Tr(p)}}destroy(){this.trackingVersion++}}let Kf=null;function Cd(){return Kf??=new em,Kf}function Iv(r,s){return r[s]??Cd()}function Jp(r,s){const u=Cd();u.hasReadASignal&&(r[s]=Kf,u.lView=r,Kf=new em)}const ci={};function c0(r){tm(Er(),pn(),qr()+r,!1)}function tm(r,s,u,h){if(!h)if(3==(3&s[Ln])){const _=r.preOrderCheckHooks;null!==_&&Mi(s,_,u)}else{const _=r.preOrderHooks;null!==_&&wo(s,_,0,u)}yn(u)}function Qc(r,s=null,u=null,h){const p=nm(r,s,u,h);return p.resolveInjectorInitializers(),p}function nm(r,s=null,u=null,h,p=new Set){const _=[u||Ne,Qy(r)];return h=h||("object"==typeof r?void 0:Le(r)),new Wg(_,s||qg(),h||null,p)}let ch=(()=>{class r{static create(u,h){if(Array.isArray(u))return Qc({name:""},h,u,"");{const p=u.name??"";return Qc({name:p},u.parent,u.providers,p)}}}return r.THROW_IF_NOT_FOUND=On,r.NULL=new Np,r.\u0275prov=zn({token:r,providedIn:"any",factory:()=>Ar(iv)}),r.__NG_ELEMENT_ID__=-1,r})();function dh(r,s=dn.Default){const u=pn();return null===u?Ar(r,s):Dh(ao(),u,qe(r),s)}function f0(){throw new Error("invalid")}function rm(r,s,u,h,p,_,C,k,j,ie,we){const Ge=s.blueprint.slice();return Ge[ln]=p,Ge[Ln]=140|h,(null!==ie||r&&2048&r[Ln])&&(Ge[Ln]|=2048),zr(Ge),Ge[Dn]=Ge[ys]=r,Ge[Li]=u,Ge[Qs]=C||r&&r[Qs],Ge[br]=k||r&&r[br],Ge[Xr]=j||r&&r[Xr]||null,Ge[Ni]=_,Ge[ta]=function Fh(){return gc++}(),Ge[Si]=we,Ge[Eu]=ie,Ge[qi]=2==s.type?r[qi]:Ge,Ge}function hh(r,s,u,h,p){let _=r.data[s];if(null===_)_=function eg(r,s,u,h,p){const _=Vu(),C=Js(),j=r.data[s]=function Nv(r,s,u,h,p,_){let C=s?s.injectorIndex:-1,k=0;return jo()&&(k|=128),{type:u,index:h,insertBeforeIndex:null,injectorIndex:C,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:k,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?_:_&&_.parent,u,s,h,p);return null===r.firstChild&&(r.firstChild=j),null!==_&&(C?null==_.child&&null!==j.parent&&(_.child=j):null===_.next&&(_.next=j,j.prev=_)),j}(r,s,u,h,p),function sa(){return Qn.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=u,_.value=h,_.attrs=p;const C=function En(){const r=Qn.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();_.injectorIndex=null===C?-1:C.injectorIndex}return Ui(_,!0),_}function uf(r,s,u,h){if(0===u)return-1;const p=s.length;for(let _=0;_<u;_++)s.push(h),r.blueprint.push(h),r.data.push(null);return p}function im(r,s,u,h,p){const _=Iv(s,Ta),C=qr(),k=2&h;try{if(yn(-1),k&&s.length>Fr&&tm(r,s,Fr,!1),Lo(k?2:0,p),k)_.runInContext(u,h,p);else{const ie=Tr(null);try{u(h,p)}finally{Tr(ie)}}}finally{k&&null===s[Ta]&&Jp(s,Ta),yn(C),Lo(k?3:1,p)}}function Qf(r,s,u){if(io(s)){const h=Tr(null);try{const _=s.directiveEnd;for(let C=s.directiveStart;C<_;C++){const k=r.data[C];k.contentQueries&&k.contentQueries(1,u[C],C)}}finally{Tr(h)}}}function fh(r,s,u){Nc()&&(function C_(r,s,u,h){const p=u.directiveStart,_=u.directiveEnd;js(u)&&function I_(r,s,u){const h=ae(s,r),p=sm(u);let C=16;u.signals?C=4096:u.onPush&&(C=64);const k=ep(r,rm(r,p,null,C,h,s,null,r[Qs].rendererFactory.createRenderer(h,u),null,null,null));r[s.index]=k}(s,u,r.data[p+u.componentOffset]),r.firstCreatePass||Cf(u,s),oa(h,s);const C=u.initialInputs;for(let k=p;k<_;k++){const j=r.data[k],ie=uc(s,r,k,u);oa(ie,s),null!==C&&Hv(0,k-p,ie,j,0,C),cs(j)&&(Nt(u.index,s)[Li]=uc(s,r,k,u))}}(r,s,u,ae(u,s)),64==(64&u.flags)&&b0(r,s,u))}function Dc(r,s,u=ae){const h=s.localNames;if(null!==h){let p=s.index+1;for(let _=0;_<h.length;_+=2){const C=h[_+1],k=-1===C?u(s,r):r[C];r[p++]=k}}}function sm(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=ph(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):s}function ph(r,s,u,h,p,_,C,k,j,ie,we){const Ge=Fr+h,_t=Ge+p,Rt=function Xf(r,s){const u=[];for(let h=0;h<s;h++)u.push(h<r?null:ci);return u}(Ge,_t),vn="function"==typeof ie?ie():ie;return Rt[rn]={type:r,blueprint:Rt,template:u,queries:null,viewQuery:k,declTNode:s,data:Rt.slice().fill(null,Ge),bindingStartIndex:Ge,expandoStartIndex:_t,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:j,consts:vn,incompleteFirstPass:!1,ssrId:we}}let Pv=r=>null;function om(r,s,u,h){for(let p in r)if(r.hasOwnProperty(p)){u=null===u?{}:u;const _=r[p];null===h?m0(u,s,p,_):h.hasOwnProperty(p)&&m0(u,s,h[p],_)}return u}function m0(r,s,u,h){r.hasOwnProperty(u)?r[u].push(s,h):r[u]=[s,h]}function Bv(r,s,u,h){if(Nc()){const p=null===h?null:{"":-1},_=function T0(r,s){const u=r.directiveRegistry;let h=null,p=null;if(u)for(let _=0;_<u.length;_++){const C=u[_];if(Ls(s,C.selectors,!1))if(h||(h=[]),cs(C))if(null!==C.findHostDirectiveDefs){const k=[];p=p||new Map,C.findHostDirectiveDefs(C,k,p),h.unshift(...k,C),Jf(r,s,k.length)}else h.unshift(C),Jf(r,s,0);else p=p||new Map,C.findHostDirectiveDefs?.(C,h,p),h.push(C)}return null===h?null:[h,p]}(r,u);let C,k;null===_?C=k=null:[C,k]=_,null!==C&&Uv(r,s,u,C,p,k),p&&function Vv(r,s,u){if(s){const h=r.localNames=[];for(let p=0;p<s.length;p+=2){const _=u[s[p+1]];if(null==_)throw new Y(-301,!1);h.push(s[p],_)}}}(u,h,p)}u.mergedAttrs=yr(u.mergedAttrs,u.attrs)}function Uv(r,s,u,h,p,_){for(let ie=0;ie<h.length;ie++)Su(Cf(u,s),r,h[ie].type);!function D_(r,s,u){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+u,r.providerIndexes=s}(u,r.data.length,h.length);for(let ie=0;ie<h.length;ie++){const we=h[ie];we.providersResolver&&we.providersResolver(we)}let C=!1,k=!1,j=uf(r,s,h.length,null);for(let ie=0;ie<h.length;ie++){const we=h[ie];u.mergedAttrs=yr(u.mergedAttrs,we.hostAttrs),$v(r,u,s,j,we),am(j,we,p),null!==we.contentQueries&&(u.flags|=4),(null!==we.hostBindings||null!==we.hostAttrs||0!==we.hostVars)&&(u.flags|=64);const Ge=we.type.prototype;!C&&(Ge.ngOnChanges||Ge.ngOnInit||Ge.ngDoCheck)&&((r.preOrderHooks??=[]).push(u.index),C=!0),!k&&(Ge.ngOnChanges||Ge.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(u.index),k=!0),j++}!function v0(r,s,u){const p=s.directiveEnd,_=r.data,C=s.attrs,k=[];let j=null,ie=null;for(let we=s.directiveStart;we<p;we++){const Ge=_[we],_t=u?u.get(Ge):null,vn=_t?_t.outputs:null;j=om(Ge.inputs,we,j,_t?_t.inputs:null),ie=om(Ge.outputs,we,ie,vn);const Mn=null===j||null===C||rs(s)?null:E0(j,we,C);k.push(Mn)}null!==j&&(j.hasOwnProperty("class")&&(s.flags|=8),j.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=k,s.inputs=j,s.outputs=ie}(r,u,_)}function b0(r,s,u){const h=u.directiveStart,p=u.directiveEnd,_=u.index,C=function rc(){return Qn.lFrame.currentDirectiveIndex}();try{yn(_);for(let k=h;k<p;k++){const j=r.data[k],ie=s[k];Ol(k),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&S_(j,ie)}}finally{yn(-1),Ol(C)}}function S_(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function Jf(r,s,u){s.componentOffset=u,(r.components??=[]).push(s.index)}function am(r,s,u){if(u){if(s.exportAs)for(let h=0;h<s.exportAs.length;h++)u[s.exportAs[h]]=r;cs(s)&&(u[""]=r)}}function $v(r,s,u,h,p){r.data[h]=p;const _=p.factory||(p.factory=xe(p.type)),C=new cl(_,cs(p),dh);r.blueprint[h]=C,u[h]=C,function y0(r,s,u,h,p){const _=p.hostBindings;if(_){let C=r.hostBindingOpCodes;null===C&&(C=r.hostBindingOpCodes=[]);const k=~s.index;(function _0(r){let s=r.length;for(;s>0;){const u=r[--s];if("number"==typeof u&&u<0)return u}return 0})(C)!=k&&C.push(k),C.push(u,h,_)}}(r,s,h,uf(r,u,p.hostVars,ci),p)}function Yl(r,s,u,h,p,_){const C=ae(r,s);!function um(r,s,u,h,p,_,C){if(null==_)r.removeAttribute(s,p,u);else{const k=null==C?_e(_):C(_,h||"",p);r.setAttribute(s,p,k,u)}}(s[br],C,_,r.value,u,h,p)}function Hv(r,s,u,h,p,_){const C=_[s];if(null!==C)for(let k=0;k<C.length;)Gv(h,u,C[k++],C[k++],C[k++])}function Gv(r,s,u,h,p){const _=Tr(null);try{const C=r.inputTransforms;null!==C&&C.hasOwnProperty(h)&&(p=C[h].call(s,p)),null!==r.setInput?r.setInput(s,p,u,h):s[h]=p}finally{Tr(_)}}function E0(r,s,u){let h=null,p=0;for(;p<u.length;){const _=u[p];if(0!==_)if(5!==_){if("number"==typeof _)break;if(r.hasOwnProperty(_)){null===h&&(h=[]);const C=r[_];for(let k=0;k<C.length;k+=2)if(C[k]===s){h.push(_,C[k+1],u[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function lm(r,s,u,h){return[r,!0,!1,s,null,0,h,u,null,null,null]}function w0(r,s){const u=r.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const _=u[h+1];if(-1!==_){const C=r.data[_];ll(u[h]),C.contentQueries(2,s[_],_)}}}function ep(r,s){return r[Ji]?r[Ra][Sr]=s:r[Ji]=s,r[Ra]=s,s}function zv(r,s,u){ll(0);const h=Tr(null);try{s(r,u)}finally{Tr(h)}}function S0(r){return r[ls]||(r[ls]=[])}function cm(r){return r.cleanup||(r.cleanup=[])}function dm(r,s){const u=r[Xr],h=u?u.get(el,null):null;h&&h.handleError(s)}function Xc(r,s,u,h,p){for(let _=0;_<u.length;){const C=u[_++],k=u[_++];Gv(r.data[C],s[C],h,k,p)}}function Ic(r,s,u){const h=N(s,r);!function ru(r,s,u){r.setValue(s,u)}(r[br],h,u)}function qv(r,s){const u=Nt(s,r),h=u[rn];!function x_(r,s){for(let u=s.length;u<r.blueprint.length;u++)s.push(r.blueprint[u])}(h,u);const p=u[ln];null!==p&&null===u[Si]&&(u[Si]=Xg(p,u[Xr])),tp(h,u,u[Li])}function tp(r,s,u){Nr(s);try{const h=r.viewQuery;null!==h&&zv(1,h,u);const p=r.template;null!==p&&im(r,s,p,1,u),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&w0(r,s),r.staticViewQueries&&zv(2,r.viewQuery,u);const _=r.components;null!==_&&function Sd(r,s){for(let u=0;u<s.length;u++)qv(r,s[u])}(s,_)}catch(h){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),h}finally{s[Ln]&=-5,ha()}}let Kv=(()=>{class r{constructor(){this.all=new Set,this.queue=new Map}create(u,h,p){const _=typeof Zone>"u"?null:Zone.current,C=new zo(u,ie=>{this.all.has(ie)&&this.queue.set(ie,_)},p);let k;this.all.add(C),C.notify();const j=()=>{C.cleanup(),k?.(),this.all.delete(C),this.queue.delete(C)};return k=h?.onDestroy(j),{destroy:j}}flush(){if(0!==this.queue.size)for(const[u,h]of this.queue)this.queue.delete(u),h?h.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return r.\u0275prov=zn({token:r,providedIn:"root",factory:()=>new r}),r})();function np(r,s,u){let h=u?r.styles:null,p=u?r.classes:null,_=0;if(null!==s)for(let C=0;C<s.length;C++){const k=s[C];"number"==typeof k?_=k:1==_?p=wt(p,k):2==_&&(h=wt(h,k+": "+s[++C]+";"))}u?r.styles=h:r.stylesWithoutHost=h,u?r.classes=p:r.classesWithoutHost=p}function tg(r,s,u,h,p=!1){for(;null!==u;){const _=s[u.index];if(null!==_&&h.push(Br(_)),Fi(_)){for(let k=Is;k<_.length;k++){const j=_[k],ie=j[rn].firstChild;null!==ie&&tg(j[rn],j,ie,h)}_[Hs]!==_[ln]&&h.push(_[Hs])}const C=u.type;if(8&C)tg(r,s,u.child,h);else if(32&C){const k=ml(u,s);let j;for(;j=k();)h.push(j)}else if(16&C){const k=ua(s,u);if(Array.isArray(k))h.push(...k);else{const j=vc(s[qi]);tg(j[rn],j,k,h,!0)}}u=p?u.projectionNext:u.next}return h}function rp(r,s,u,h=!0){const p=s[Qs].rendererFactory;p.begin&&p.begin();try{I0(r,s,r.template,u)}catch(C){throw h&&dm(s,C),C}finally{p.end&&p.end(),s[Qs].effectManager?.flush()}}function I0(r,s,u,h){const p=s[Ln];if(256!=(256&p)){s[Qs].effectManager?.flush(),Nr(s);try{zr(s),function gn(r){return Qn.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==u&&im(r,s,u,2,h);const C=3==(3&p);if(C){const ie=r.preOrderCheckHooks;null!==ie&&Mi(s,ie,null)}else{const ie=r.preOrderHooks;null!==ie&&wo(s,ie,0,null),vo(s,0)}if(function x0(r){for(let s=qs(r);null!==s;s=fa(s)){if(!s[go])continue;const u=s[Ea];for(let h=0;h<u.length;h++){hr(u[h])}}}(s),hm(s,2),null!==r.contentQueries&&w0(r,s),C){const ie=r.contentCheckHooks;null!==ie&&Mi(s,ie)}else{const ie=r.contentHooks;null!==ie&&wo(s,ie,1),vo(s,1)}!function Mv(r,s){const u=r.hostBindingOpCodes;if(null===u)return;const h=Iv(s,na);try{for(let p=0;p<u.length;p++){const _=u[p];if(_<0)yn(~_);else{const C=_,k=u[++p],j=u[++p];Xo(k,C),h.runInContext(j,2,s[C])}}}finally{null===s[na]&&Jp(s,na),yn(-1)}}(r,s);const k=r.components;null!==k&&A0(s,k,0);const j=r.viewQuery;if(null!==j&&zv(2,j,h),C){const ie=r.viewCheckHooks;null!==ie&&Mi(s,ie)}else{const ie=r.viewHooks;null!==ie&&wo(s,ie,2),vo(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[Ln]&=-73,ji(s)}finally{ha()}}}function hm(r,s){for(let u=qs(r);null!==u;u=fa(u))for(let h=Is;h<u.length;h++)Qv(u[h],s)}function Yv(r,s,u){Qv(Nt(s,r),u)}function Qv(r,s){if(!function Jn(r){return 128==(128&r[Ln])}(r))return;const u=r[rn];if(80&r[Ln]&&0===s||1024&r[Ln]||2===s)I0(u,r,u.template,r[Li]);else if(r[$s]>0){hm(r,1);const p=r[rn].components;null!==p&&A0(r,p,1)}}function A0(r,s,u){for(let h=0;h<s.length;h++)Yv(r,s[h],u)}class ng{get rootNodes(){const s=this._lView,u=s[rn];return tg(u,s,u.firstChild,[])}constructor(s,u){this._lView=s,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Li]}set context(s){this._lView[Li]=s}get destroyed(){return 256==(256&this._lView[Ln])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[Dn];if(Fi(s)){const u=s[8],h=u?u.indexOf(this):-1;h>-1&&(S(s,h),lc(u,h))}this._attachedToViewContainer=!1}m(this._lView[rn],this._lView)}onDestroy(s){!function Yi(r,s){if(256==(256&r[Ln]))throw new Y(911,!1);null===r[ks]&&(r[ks]=[]),r[ks].push(s)}(this._lView,s)}markForCheck(){tf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ln]&=-129}reattach(){this._lView[Ln]|=128}detectChanges(){rp(this._lView[rn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ps(r,s){Gc(r,s,s[br],2,null,null)}(this._lView[rn],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=s}}class Xv extends ng{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;rp(s[rn],s,s[Li],!1)}checkNoChanges(){}get context(){return null}}class k0 extends Gf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const u=_r(s);return new rg(u,this.ngModule)}}function fm(r){const s=[];for(let u in r)r.hasOwnProperty(u)&&s.push({propName:r[u],templateName:u});return s}class ey{constructor(s,u){this.injector=s,this.parentInjector=u}get(s,u,h){h=tt(h);const p=this.injector.get(s,ef,h);return p!==ef||u===ef?p:this.parentInjector.get(s,u,h)}}class rg extends n0{get inputs(){return fm(this.componentDef.inputs)}get outputs(){return fm(this.componentDef.outputs)}constructor(s,u){super(),this.componentDef=s,this.ngModule=u,this.componentType=s.type,this.selector=function ya(r){return r.map(Zs).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!u}create(s,u,h,p){let _=(p=p||this.ngModule)instanceof rh?p:p?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const C=_?new ey(s,_):s,k=C.get(Xh,null);if(null===k)throw new Y(407,!1);const we={rendererFactory:k,sanitizer:C.get(Jh,null),effectManager:C.get(Kv,null)},Ge=k.createRenderer(null,this.componentDef),_t=this.componentDef.selectors[0][0]||"div",Rt=h?function p0(r,s,u,h){const _=h.get(lh,!1)||u===he.ShadowDom,C=r.selectRootElement(s,_);return function ma(r){Pv(r)}(C),C}(Ge,h,this.componentDef.encapsulation,C):Hc(Ge,_t,function Jv(r){const s=r.toLowerCase();return"svg"===s?oo:"math"===s?"math":null}(_t)),tr=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Or=ph(0,null,null,1,0,null,null,null,null,null,null),bn=rm(null,Or,null,tr,null,null,we,Ge,C,null,null);let Ai,Cs;Nr(bn);try{const Rs=this.componentDef;let ec,kb=null;Rs.findHostDirectiveDefs?(ec=[],kb=new Map,Rs.findHostDirectiveDefs(Rs,ec,kb),ec.push(Rs)):ec=[Rs];const HS=function sg(r,s){const u=r[rn],h=Fr;return r[h]=s,hh(u,h,2,"#host",null)}(bn,Rt),GS=function ty(r,s,u,h,p,_,C){const k=p[rn];!function ip(r,s,u,h){for(const p of r)s.mergedAttrs=yr(s.mergedAttrs,p.hostAttrs);null!==s.mergedAttrs&&(np(s,s.mergedAttrs,!0),null!==u&&Hm(h,u,s))}(h,r,s,C);let j=null;null!==s&&(j=Xg(s,p[Xr]));const ie=_.rendererFactory.createRenderer(s,u);let we=16;u.signals?we=4096:u.onPush&&(we=64);const Ge=rm(p,sm(u),null,we,p[r.index],r,_,ie,null,null,j);return k.firstCreatePass&&Jf(k,r,h.length-1),ep(p,Ge),p[r.index]=Ge}(HS,Rt,Rs,ec,bn,we,Ge);Cs=Te(Or,Fr),Rt&&function ry(r,s,u,h){if(h)An(r,u,["ng-version",wv.full]);else{const{attrs:p,classes:_}=function _a(r){const s=[],u=[];let h=1,p=2;for(;h<r.length;){let _=r[h];if("string"==typeof _)2===p?""!==_&&s.push(_,r[++h]):8===p&&u.push(_);else{if(!Ns(p))break;p=_}h++}return{attrs:s,classes:u}}(s.selectors[0]);p&&An(r,u,p),_&&_.length>0&&$m(r,u,_.join(" "))}}(Ge,Rs,Rt,h),void 0!==u&&function M0(r,s,u){const h=r.projection=[];for(let p=0;p<s.length;p++){const _=u[p];h.push(null!=_?Array.from(_):null)}}(Cs,this.ngContentSelectors,u),Ai=function ny(r,s,u,h,p,_){const C=ao(),k=p[rn],j=ae(C,p);Uv(k,p,C,u,null,h);for(let we=0;we<u.length;we++)oa(uc(p,k,C.directiveStart+we,C),p);b0(k,p,C),j&&oa(j,p);const ie=uc(p,k,C.directiveStart+C.componentOffset,C);if(r[Li]=p[Li]=ie,null!==_)for(const we of _)we(ie,s);return Qf(k,C,r),ie}(GS,Rs,ec,kb,bn,[c]),tp(Or,bn,null)}finally{ha()}return new ig(this.componentType,Ai,_l(Cs,bn),bn,Cs)}}class ig extends Hf{constructor(s,u,h,p,_){super(),this.location=h,this._rootLView=p,this._tNode=_,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new Xv(p),this.componentType=s}setInput(s,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),u))return;const _=this._rootLView;Xc(_[rn],_,p,s,u),this.previousInputValues.set(s,u),tf(Nt(this._tNode.index,_))}}get injector(){return new Du(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function c(){const r=ao();fr(pn()[rn],r)}function i(r){let s=function t(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),u=!0;const h=[r];for(;s;){let p;if(cs(r))p=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Y(903,!1);p=s.\u0275dir}if(p){if(u){h.push(p);const C=r;C.inputs=f(r.inputs),C.inputTransforms=f(r.inputTransforms),C.declaredInputs=f(r.declaredInputs),C.outputs=f(r.outputs);const k=p.hostBindings;k&&I(r,k);const j=p.viewQuery,ie=p.contentQueries;if(j&&v(r,j),ie&&E(r,ie),Re(r.inputs,p.inputs),Re(r.declaredInputs,p.declaredInputs),Re(r.outputs,p.outputs),null!==p.inputTransforms&&(null===C.inputTransforms&&(C.inputTransforms={}),Re(C.inputTransforms,p.inputTransforms)),cs(p)&&p.data.animation){const we=r.data;we.animation=(we.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let C=0;C<_.length;C++){const k=_[C];k&&k.ngInherit&&k(r),k===i&&(u=!1)}}s=Object.getPrototypeOf(s)}!function l(r){let s=0,u=null;for(let h=r.length-1;h>=0;h--){const p=r[h];p.hostVars=s+=p.hostVars,p.hostAttrs=yr(p.hostAttrs,u=yr(u,p.hostAttrs))}}(h)}function f(r){return r===pe?{}:r===Ne?[]:r}function v(r,s){const u=r.viewQuery;r.viewQuery=u?(h,p)=>{s(h,p),u(h,p)}:s}function E(r,s){const u=r.contentQueries;r.contentQueries=u?(h,p,_)=>{s(h,p,_),u(h,p,_)}:s}function I(r,s){const u=r.hostBindings;r.hostBindings=u?(h,p)=>{s(h,p),u(h,p)}:s}function an(r){const s=r.inputConfig,u={};for(const h in s)if(s.hasOwnProperty(h)){const p=s[h];Array.isArray(p)&&p[2]&&(u[h]=p[2])}r.inputTransforms=u}function Sn(r){return!!Gn(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function Gn(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function mi(r,s,u){return r[s]=u}function Qi(r,s,u){return!Object.is(r[s],u)&&(r[s]=u,!0)}function ea(r,s,u,h){const p=Qi(r,s,u);return Qi(r,s+1,h)||p}function Vs(r,s,u,h){const p=pn();return Qi(p,ui(),s)&&(Er(),Yl(A(),p,r,s,u,h)),Vs}function tl(r,s,u,h,p,_){const k=ea(r,function Vt(){return Qn.lFrame.bindingIndex}(),u,p);return Ua(2),k?s+_e(u)+h+_e(p)+_:ci}function cy(r,s,u,h,p,_,C,k){const j=pn(),ie=Er(),we=r+Fr,Ge=ie.firstCreatePass?function lg(r,s,u,h,p,_,C,k,j){const ie=s.consts,we=hh(s,r,4,C||null,Gr(ie,k));Bv(s,u,we,Gr(ie,j)),fr(s,we);const Ge=we.tView=ph(2,we,h,p,_,s.directiveRegistry,s.pipeRegistry,null,s.schemas,ie,null);return null!==s.queries&&(s.queries.template(s,we),Ge.queries=s.queries.embeddedTView(we)),we}(we,ie,j,s,u,h,p,_,C):ie.data[we];Ui(Ge,!1);const _t=_m(ie,j,Ge,r);St()&&aa(ie,j,_t,Ge),oa(_t,j),ep(j,j[we]=lm(_t,j,_t,Ge)),Po(Ge)&&fh(ie,j,Ge),null!=C&&Dc(j,Ge,k)}let _m=function L0(r,s,u,h){return _n(!0),s[br].createComment("")};function au(r){return Ke(function In(){return Qn.lFrame.contextLView}(),Fr+r)}function bm(r,s,u){const h=pn();return Qi(h,ui(),s)&&function Ou(r,s,u,h,p,_,C,k){const j=ae(s,u);let we,ie=s.inputs;!k&&null!=ie&&(we=ie[h])?(Xc(r,u,we,h,p),js(s)&&function w_(r,s){const u=Nt(s,r);16&u[Ln]||(u[Ln]|=64)}(u,s.index)):3&s.type&&(h=function Lv(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(h),p=null!=C?C(p,s.value||"",h):p,_.setProperty(j,h,p))}(Er(),A(),h,r,s,h[br],u,!1),bm}function kd(r,s,u,h,p){const C=p?"class":"style";Xc(r,u,s.inputs[C],C,h)}function Dl(r,s,u,h){const p=pn(),_=Er(),C=Fr+r,k=p[br],j=_.firstCreatePass?function cg(r,s,u,h,p,_){const C=s.consts,j=hh(s,r,2,h,Gr(C,p));return Bv(s,u,j,Gr(C,_)),null!==j.attrs&&np(j,j.attrs,!1),null!==j.mergedAttrs&&np(j,j.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,j),j}(C,_,p,s,u,h):_.data[C],ie=j0(_,p,j,k,s,r);p[C]=ie;const we=Po(j);return Ui(j,!0),Hm(k,ie,j),32!=(32&j.flags)&&St()&&aa(_,p,ie,j),0===function bs(){return Qn.lFrame.elementDepthCount}()&&oa(ie,p),function ia(){Qn.lFrame.elementDepthCount++}(),we&&(fh(_,p,j),Qf(_,j,p)),null!==h&&Dc(p,j),Dl}function Md(){let r=ao();Js()?Ba():(r=r.parent,Ui(r,!1));const s=r;(function kl(r){return Qn.skipHydrationRootTNode===r})(s)&&function Cu(){Qn.skipHydrationRootTNode=null}(),function ja(){Qn.lFrame.elementDepthCount--}();const u=Er();return u.firstCreatePass&&(fr(u,r),io(r)&&u.queries.elementEnd(r)),null!=s.classesWithoutHost&&function Ld(r){return 0!=(8&r.flags)}(s)&&kd(u,s,pn(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Fc(r){return 0!=(16&r.flags)}(s)&&kd(u,s,pn(),s.stylesWithoutHost,!1),Md}function Es(r,s,u,h){return Dl(r,s,u,h),Md(),Es}let j0=(r,s,u,h,p,_)=>(_n(!0),Hc(h,p,function Me(){return Qn.lFrame.currentNamespace}()));function nl(r,s,u){const h=pn(),p=Er(),_=r+Fr,C=p.firstCreatePass?function B0(r,s,u,h,p){const _=s.consts,C=Gr(_,h),k=hh(s,r,8,"ng-container",C);return null!==C&&np(k,C,!0),Bv(s,u,k,Gr(_,p)),null!==s.queries&&s.queries.elementStart(s,k),k}(_,p,h,s,u):p.data[_];Ui(C,!0);const k=dp(p,h,C,r);return h[_]=k,St()&&aa(p,h,k,C),oa(k,h),Po(C)&&(fh(p,h,C),Qf(p,C,h)),null!=u&&Dc(h,C),nl}function lo(){let r=ao();const s=Er();return Js()?Ba():(r=r.parent,Ui(r,!1)),s.firstCreatePass&&(fr(s,r),io(r)&&s.queries.elementEnd(r)),lo}let dp=(r,s,u,h)=>(_n(!0),_c(s[br],""));function Pd(){return pn()}function gh(r){return!!r&&"function"==typeof r.then}function Tm(r){return!!r&&"function"==typeof r.subscribe}function ed(r,s,u,h){const p=pn(),_=Er(),C=ao();return function Em(r,s,u,h,p,_,C){const k=Po(h),ie=r.firstCreatePass&&cm(r),we=s[Li],Ge=S0(s);let _t=!0;if(3&h.type||C){const Mn=ae(h,s),tr=C?C(Mn):Mn,Or=Ge.length,bn=C?Cs=>C(Br(Cs[h.index])):h.index;let Ai=null;if(!C&&k&&(Ai=function pb(r,s,u,h){const p=r.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const C=p[_];if(C===u&&p[_+1]===h){const k=s[ls],j=p[_+2];return k.length>j?k[j]:null}"string"==typeof C&&(_+=2)}return null}(r,s,p,h.index)),null!==Ai)(Ai.__ngLastListenerFn__||Ai).__ngNextListenerFn__=_,Ai.__ngLastListenerFn__=_,_t=!1;else{_=mh(h,s,we,_,!1);const Cs=u.listen(tr,p,_);Ge.push(_,Cs),ie&&ie.push(p,bn,Or,Or+1)}}else _=mh(h,s,we,_,!1);const Rt=h.outputs;let vn;if(_t&&null!==Rt&&(vn=Rt[p])){const Mn=vn.length;if(Mn)for(let tr=0;tr<Mn;tr+=2){const Rs=s[vn[tr]][vn[tr+1]].subscribe(_),ec=Ge.length;Ge.push(_,Rs),ie&&ie.push(p,h.index,ec,-(ec+1))}}}(_,p,p[br],C,r,s,h),ed}function hg(r,s,u,h){try{return Lo(6,s,u),!1!==u(h)}catch(p){return dm(r,p),!1}finally{Lo(7,s,u)}}function mh(r,s,u,h,p){return function _(C){if(C===Function)return h;tf(r.componentOffset>-1?Nt(r.index,s):s);let j=hg(s,u,h,C),ie=_.__ngNextListenerFn__;for(;ie;)j=hg(s,u,ie,C)&&j,ie=ie.__ngNextListenerFn__;return p&&!1===j&&C.preventDefault(),j}}function fy(r=1){return function Di(r){return(Qn.lFrame.contextLView=function Ef(r,s){for(;r>0;)s=s[ys],r--;return s}(r,Qn.lFrame.contextLView))[Li]}(r)}function fg(r,s){let u=null;const h=function Ho(r){const s=r.attrs;if(null!=s){const u=s.indexOf(5);if(!(1&u))return s[u+1]}return null}(r);for(let p=0;p<s.length;p++){const _=s[p];if("*"!==_){if(null===h?Ls(r,_,!0):oi(h,_))return p}else u=p}return u}function Od(r){const s=pn()[qi][Ni];if(!s.projection){const h=s.projection=tu(r?r.length:1,null),p=h.slice();let _=s.child;for(;null!==_;){const C=r?fg(_,r):0;null!==C&&(p[C]?p[C].projectionNext=_:h[C]=_,p[C]=_),_=_.next}}}function hp(r,s=0,u){const h=pn(),p=Er(),_=hh(p,Fr+r,16,null,u||null);null===_.projection&&(_.projection=s),Ba(),(!h[Si]||jo())&&32!=(32&_.flags)&&function h_(r,s,u){Ly(s[br],0,s,u,ge(r,u,s),Zd(u.parent||s[Ni],u,s))}(p,h,_)}function bu(r,s){return r<<17|s<<2}function Ac(r){return r>>17&32767}function mg(r){return 2|r}function Ql(r){return(131068&r)>>2}function Sm(r,s){return-131069&r|s<<2}function kc(r){return 1|r}function xm(r,s,u,h,p){const _=r[u+1],C=null===s;let k=h?Ac(_):Ql(_),j=!1;for(;0!==k&&(!1===j||C);){const we=r[k+1];N_(r[k],s)&&(j=!0,r[k+1]=h?kc(we):mg(we)),k=h?Ac(we):Ql(we)}j&&(r[u+1]=h?mg(_):kc(_))}function N_(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&Ue(r,s)>=0}function _y(r,s){return function Mc(r,s,u,h){const p=pn(),_=Er(),C=Ua(2);_.firstUpdatePass&&function W0(r,s,u,h){const p=r.data;if(null===p[u+1]){const _=p[qr()],C=function j_(r,s){return s>=r.expandoStartIndex}(r,u);(function V_(r,s){return 0!=(r.flags&(s?8:16))})(_,h)&&null===s&&!C&&(s=!1),s=function B_(r,s,u,h){const p=function Da(r){const s=Qn.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let _=h?s.residualClasses:s.residualStyles;if(null===p)0===(h?s.classBindings:s.styleBindings)&&(u=Tu(u=_h(null,r,s,u,h),s.attrs,h),_=null);else{const C=s.directiveStylingLast;if(-1===C||r[C]!==p)if(u=_h(p,r,s,u,h),null===_){let j=function U_(r,s,u){const h=u?s.classBindings:s.styleBindings;if(0!==Ql(h))return r[Ac(h)]}(r,s,h);void 0!==j&&Array.isArray(j)&&(j=_h(null,r,s,j[1],h),j=Tu(j,s.attrs,h),function gb(r,s,u,h){r[Ac(u?s.classBindings:s.styleBindings)]=h}(r,s,h,j))}else _=function Mm(r,s,u){let h;const p=s.directiveEnd;for(let _=1+s.directiveStylingLast;_<p;_++)h=Tu(h,r[_].hostAttrs,u);return Tu(h,s.attrs,u)}(r,s,h)}return void 0!==_&&(h?s.residualClasses=_:s.residualStyles=_),u}(p,_,s,h),function yh(r,s,u,h,p,_){let C=_?s.classBindings:s.styleBindings,k=Ac(C),j=Ql(C);r[h]=u;let we,ie=!1;if(Array.isArray(u)?(we=u[1],(null===we||Ue(u,we)>0)&&(ie=!0)):we=u,p)if(0!==j){const _t=Ac(r[k+1]);r[h+1]=bu(_t,k),0!==_t&&(r[_t+1]=Sm(r[_t+1],h)),r[k+1]=function Cm(r,s){return 131071&r|s<<17}(r[k+1],h)}else r[h+1]=bu(k,0),0!==k&&(r[k+1]=Sm(r[k+1],h)),k=h;else r[h+1]=bu(j,0),0===k?k=h:r[j+1]=Sm(r[j+1],h),j=h;ie&&(r[h+1]=mg(r[h+1])),xm(r,we,h,!0),xm(r,we,h,!1),function Im(r,s,u,h,p){const _=p?r.residualClasses:r.residualStyles;null!=_&&"string"==typeof s&&Ue(_,s)>=0&&(u[h+1]=kc(u[h+1]))}(s,we,r,h,_),C=bu(k,j),_?s.classBindings=C:s.styleBindings=C}(p,_,s,u,C,h)}}(_,r,C,h),s!==ci&&Qi(p,C,s)&&function Ty(r,s,u,h,p,_,C,k){if(!(3&s.type))return;const j=r.data,ie=j[k+1],we=function R_(r){return 1==(1&r)}(ie)?K0(j,s,u,p,Ql(ie),C):void 0;Rm(we)||(Rm(_)||function wm(r){return 2==(2&r)}(ie)&&(_=K0(j,null,u,p,k,C)),function Vm(r,s,u,h,p){if(s)p?r.addClass(u,h):r.removeClass(u,h);else{let _=-1===h.indexOf("-")?void 0:Au.DashCase;null==p?r.removeStyle(u,h,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=Au.Important),r.setStyle(u,h,p,_))}}(h,C,N(qr(),u),p,_))}(_,_.data[qr()],p,p[br],r,p[C+1]=function mb(r,s){return null==r||""===r||("string"==typeof s?r+=s:"object"==typeof r&&(r=Le(Cc(r)))),r}(s,u),h,C)}(r,s,null,!0),_y}function _h(r,s,u,h,p){let _=null;const C=u.directiveEnd;let k=u.directiveStylingLast;for(-1===k?k=u.directiveStart:k++;k<C&&(_=s[k],h=Tu(h,_.hostAttrs,p),_!==r);)k++;return null!==r&&(u.directiveStylingLast=k),h}function Tu(r,s,u){const h=u?1:2;let p=-1;if(null!==s)for(let _=0;_<s.length;_++){const C=s[_];"number"==typeof C?p=C:p===h&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),U(r,C,!!u||s[++_]))}return void 0===r?null:r}function K0(r,s,u,h,p,_){const C=null===s;let k;for(;p>0;){const j=r[p],ie=Array.isArray(j),we=ie?j[1]:j,Ge=null===we;let _t=u[p+1];_t===ci&&(_t=Ge?Ne:void 0);let Rt=Ge?de(_t,h):we===h?_t:void 0;if(ie&&!Rm(Rt)&&(Rt=de(j,h)),Rm(Rt)&&(k=Rt,C))return k;const vn=r[p+1];p=C?Ac(vn):Ql(vn)}if(null!==s){let j=_?s.residualClasses:s.residualStyles;null!=j&&(k=de(j,h))}return k}function Rm(r){return void 0!==r}function _g(r,s=""){const u=pn(),h=Er(),p=r+Fr,_=h.firstCreatePass?hh(h,p,1,s,null):h.data[p],C=Nm(h,u,_,s,r);u[p]=C,St()&&aa(h,u,C,_),Ui(_,!1)}let Nm=(r,s,u,h,p)=>(_n(!0),function Xn(r,s){return r.createText(s)}(s[br],h));function mf(r){return Pc("",r,""),mf}function Pc(r,s,u){const h=pn(),p=function Ru(r,s,u,h){return Qi(r,ui(),u)?s+_e(u)+h:ci}(h,r,s,u);return p!==ci&&Ic(h,qr(),p),Pc}function vf(r,s,u,h,p){const _=pn(),C=tl(_,r,s,u,h,p);return C!==ci&&Ic(_,qr(),C),vf}const yf=void 0;var r_=["en",[["a","p"],["AM","PM"],yf],[["AM","PM"],yf,yf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yf,"{1} 'at' {0}",yf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function n_(r){const u=Math.floor(Math.abs(r)),h=r.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let _f={};function ky(r){const s=function z_(r){return r.toLowerCase().replace(/_/g,"-")}(r);let u=s_(s);if(u)return u;const h=s.split("-")[0];if(u=s_(h),u)return u;if("en"===h)return r_;throw new Y(701,!1)}function i_(r){return ky(r)[Kr.PluralCase]}function s_(r){return r in _f||(_f[r]=Zr.ng&&Zr.ng.common&&Zr.ng.common.locales&&Zr.ng.common.locales[r]),_f[r]}var Kr=(()=>((Kr=Kr||{})[Kr.LocaleId=0]="LocaleId",Kr[Kr.DayPeriodsFormat=1]="DayPeriodsFormat",Kr[Kr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Kr[Kr.DaysFormat=3]="DaysFormat",Kr[Kr.DaysStandalone=4]="DaysStandalone",Kr[Kr.MonthsFormat=5]="MonthsFormat",Kr[Kr.MonthsStandalone=6]="MonthsStandalone",Kr[Kr.Eras=7]="Eras",Kr[Kr.FirstDayOfWeek=8]="FirstDayOfWeek",Kr[Kr.WeekendRange=9]="WeekendRange",Kr[Kr.DateFormat=10]="DateFormat",Kr[Kr.TimeFormat=11]="TimeFormat",Kr[Kr.DateTimeFormat=12]="DateTimeFormat",Kr[Kr.NumberSymbols=13]="NumberSymbols",Kr[Kr.NumberFormats=14]="NumberFormats",Kr[Kr.CurrencyCode=15]="CurrencyCode",Kr[Kr.CurrencySymbol=16]="CurrencySymbol",Kr[Kr.CurrencyName=17]="CurrencyName",Kr[Kr.Currencies=18]="Currencies",Kr[Kr.Directionality=19]="Directionality",Kr[Kr.PluralCase=20]="PluralCase",Kr[Kr.ExtraData=21]="ExtraData",Kr))();const n="en-US";let Z=n;function Bb(r,s,u,h,p){if(r=qe(r),Array.isArray(r))for(let _=0;_<r.length;_++)Bb(r[_],s,u,h,p);else{const _=Er(),C=pn();let k=Ju(r)?r:qe(r.provide),j=uv(r);const ie=ao(),we=1048575&ie.providerIndexes,Ge=ie.directiveStart,_t=ie.providerIndexes>>20;if(Ju(r)||!r.multi){const Rt=new cl(j,p,dh),vn=Vb(k,s,p?we:we+_t,Ge);-1===vn?(Su(Cf(ie,C),_,k),Ub(_,r,s.length),s.push(k),ie.directiveStart++,ie.directiveEnd++,p&&(ie.providerIndexes+=1048576),u.push(Rt),C.push(Rt)):(u[vn]=Rt,C[vn]=Rt)}else{const Rt=Vb(k,s,we+_t,Ge),vn=Vb(k,s,we,we+_t),tr=vn>=0&&u[vn];if(p&&!tr||!p&&!(Rt>=0&&u[Rt])){Su(Cf(ie,C),_,k);const Or=function Mw(r,s,u,h,p){const _=new cl(r,u,dh);return _.multi=[],_.index=s,_.componentProviders=0,xT(_,p,h&&!u),_}(p?kw:Aw,u.length,p,h,j);!p&&tr&&(u[vn].providerFactory=Or),Ub(_,r,s.length,0),s.push(k),ie.directiveStart++,ie.directiveEnd++,p&&(ie.providerIndexes+=1048576),u.push(Or),C.push(Or)}else Ub(_,r,Rt>-1?Rt:vn,xT(u[p?vn:Rt],j,!p&&h));!p&&h&&tr&&u[vn].componentProviders++}}}function Ub(r,s,u,h){const p=Ju(s),_=function Xy(r){return!!r.useClass}(s);if(p||_){const j=(_?qe(s.useClass):s).prototype.ngOnDestroy;if(j){const ie=r.destroyHooks||(r.destroyHooks=[]);if(!p&&s.multi){const we=ie.indexOf(u);-1===we?ie.push(u,[h,j]):ie[we+1].push(h,j)}else ie.push(u,j)}}}function xT(r,s,u){return u&&r.componentProviders++,r.multi.push(s)-1}function Vb(r,s,u,h){for(let p=u;p<h;p++)if(s[p]===r)return p;return-1}function Aw(r,s,u,h){return $b(this.multi,[])}function kw(r,s,u,h){const p=this.multi;let _;if(this.providerFactory){const C=this.providerFactory.componentProviders,k=uc(u,u[rn],this.providerFactory.index,h);_=k.slice(0,C),$b(p,_);for(let j=C;j<k.length;j++)_.push(k[j])}else _=[],$b(p,_);return _}function $b(r,s){for(let u=0;u<r.length;u++)s.push((0,r[u])());return s}function AT(r,s=[]){return u=>{u.providersResolver=(h,p)=>function xw(r,s,u){const h=Er();if(h.firstCreatePass){const p=cs(r);Bb(u,h.data,h.blueprint,p,!0),Bb(s,h.data,h.blueprint,p,!1)}}(h,p?p(r):r,s)}}class u_{}class kT{}function Pw(r,s){return new Hb(r,s??null,[])}class Hb extends u_{constructor(s,u,h){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new k0(this);const p=is(s);this._bootstrapComponents=Yc(p.bootstrap),this._r3Injector=nm(s,u,[{provide:u_,useValue:this},{provide:Gf,useValue:this.componentFactoryResolver},...h],Le(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Gb extends kT{constructor(s){super(),this.moduleType=s}create(s){return new Hb(this.moduleType,s,[])}}class MT extends u_{constructor(s){super(),this.componentFactoryResolver=new k0(this),this.instance=null;const u=new Wg([...s.providers,{provide:u_,useValue:this},{provide:Gf,useValue:this.componentFactoryResolver}],s.parent||qg(),s.debugName,new Set(["environment"]));this.injector=u,s.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function PT(r,s,u=null){return new MT({providers:r,parent:s,debugName:u,runEnvironmentInitializers:!0}).injector}let Rw=(()=>{class r{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=sv(0,u.type),p=h.length>0?PT([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=zn({token:r,providedIn:"environment",factory:()=>new r(Ar(rh))}),r})();function OT(r){r.getStandaloneInjector=s=>s.get(Rw).getOrCreateStandaloneInjector(r)}function UT(r,s,u){const h=kn()+r,p=pn();return p[h]===ci?mi(p,h,u?s.call(u):s()):function Hi(r,s){return r[s]}(p,h)}function VT(r,s,u,h){return HT(pn(),kn(),r,s,u,h)}function $T(r,s,u,h,p){return function GT(r,s,u,h,p,_,C){const k=s+u;return ea(r,k,p,_)?mi(r,k+2,C?h.call(C,p,_):h(p,_)):X_(r,k+2)}(pn(),kn(),r,s,u,h,p)}function X_(r,s){const u=r[s];return u===ci?void 0:u}function HT(r,s,u,h,p,_){const C=s+u;return Qi(r,C,p)?mi(r,C+1,_?h.call(_,p):h(p)):X_(r,C+1)}function KT(r,s){const u=Er();let h;const p=r+Fr;u.firstCreatePass?(h=function Yw(r,s){if(s)for(let u=s.length-1;u>=0;u--){const h=s[u];if(r===h.name)return h}}(s,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks??=[]).push(p,h.onDestroy)):h=u.data[p];const _=h.factory||(h.factory=xe(h.type)),C=xr(dh);try{const k=ac(!1),j=_();return ac(k),function lp(r,s,u,h){u>=r.data.length&&(r.data[u]=null,r.blueprint[u]=null),s[u]=h}(u,pn(),p,j),j}finally{xr(C)}}function ZT(r,s,u){const h=r+Fr,p=pn(),_=Ke(p,h);return function J_(r,s){return r[rn].data[s].pure}(p,h)?HT(p,kn(),s,_.transform,u,_):_.transform(u)}function qb(r){return s=>{setTimeout(r,void 0,s)}}const Tp=class tC extends y.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,u,h){let p=s,_=u||(()=>null),C=h;if(s&&"object"==typeof s){const j=s;p=j.next?.bind(j),_=j.error?.bind(j),C=j.complete?.bind(j)}this.__isAsync&&(_=qb(_),p&&(p=qb(p)),C&&(C=qb(C)));const k=super.subscribe({next:p,error:_,complete:C});return s instanceof fe.w0&&s.add(k),k}};function nC(){return this._results[Symbol.iterator]()}class Tb{get changes(){return this._changes||(this._changes=new Tp)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Tb.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=nC)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,u){return this._results.reduce(s,u)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,u){const h=this;h.dirty=!1;const p=function Wo(r){return r.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function $a(r,s,u){if(r.length!==s.length)return!1;for(let h=0;h<r.length;h++){let p=r[h],_=s[h];if(u&&(p=u(p),_=u(_)),_!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let eb=(()=>{class r{}return r.__NG_ELEMENT_ID__=sC,r})();const rC=eb,iC=class extends rC{constructor(s,u,h){super(),this._declarationLView=s,this._declarationTContainer=u,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,u){return this.createEmbeddedViewImpl(s,u,null)}createEmbeddedViewImpl(s,u,h){const C=this._declarationTContainer.tView,k=rm(this._declarationLView,C,s,4096&this._declarationLView[Ln]?4096:16,null,C.declTNode,null,null,null,u||null,h||null);k[Yo]=this._declarationLView[this._declarationTContainer.index];const ie=this._declarationLView[po];return null!==ie&&(k[po]=ie.createEmbeddedView(C)),tp(C,k,s),new ng(k)}};function sC(){return Eb(ao(),pn())}function Eb(r,s){return 4&r.type?new iC(s,r,_l(r,s)):null}let wb=(()=>{class r{}return r.__NG_ELEMENT_ID__=hC,r})();function hC(){return tE(ao(),pn())}const fC=wb,JT=class extends fC{constructor(s,u,h){super(),this._lContainer=s,this._hostTNode=u,this._hostLView=h}get element(){return _l(this._hostTNode,this._hostLView)}get injector(){return new Du(this._hostTNode,this._hostLView)}get parentInjector(){const s=qu(this._hostTNode,this._hostLView);if(Co(s)){const u=oc(s,this._hostLView),h=So(s);return new Du(u[rn].data[h+8],u)}return new Du(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const u=eE(this._lContainer);return null!==u&&u[s]||null}get length(){return this._lContainer.length-Is}createEmbeddedView(s,u,h){let p,_;"number"==typeof h?p=h:null!=h&&(p=h.index,_=h.injector);const k=s.createEmbeddedViewImpl(u||{},_,null);return this.insertImpl(k,p,false),k}createComponent(s,u,h,p,_){const C=s&&!function eu(r){return"function"==typeof r}(s);let k;if(C)k=u;else{const Mn=u||{};k=Mn.index,h=Mn.injector,p=Mn.projectableNodes,_=Mn.environmentInjector||Mn.ngModuleRef}const j=C?s:new rg(_r(s)),ie=h||this.parentInjector;if(!_&&null==j.ngModule){const tr=(C?ie:this.parentInjector).get(rh,null);tr&&(_=tr)}_r(j.componentType??{});const Rt=j.create(ie,p,null,_);return this.insertImpl(Rt.hostView,k,false),Rt}insert(s,u){return this.insertImpl(s,u,!1)}insertImpl(s,u,h){const p=s._lView,_=p[rn];if(function es(r){return Fi(r[Dn])}(p)){const j=this.indexOf(s);if(-1!==j)this.detach(j);else{const ie=p[Dn],we=new JT(ie,ie[Ni],ie[Dn]);we.detach(we.indexOf(s))}}const C=this._adjustIndex(u),k=this._lContainer;if(function $h(r,s,u,h){const p=Is+h,_=u.length;h>0&&(u[p-1][Sr]=s),h<_-Is?(s[Sr]=u[p],xu(u,Is+h,s)):(u.push(s),s[Sr]=null),s[Dn]=u;const C=s[Yo];null!==C&&u!==C&&function vl(r,s){const u=r[Ea];s[qi]!==s[Dn][Dn][qi]&&(r[go]=!0),null===u?r[Ea]=[s]:u.push(s)}(C,s);const k=s[po];null!==k&&k.insertView(r),s[Ln]|=128}(_,p,k,C),!h){const j=Mu(C,k),ie=p[br],we=Os(ie,k[Hs]);null!==we&&function bc(r,s,u,h,p,_){h[ln]=p,h[Ni]=s,Gc(r,h,u,1,p,_)}(_,k[Ni],ie,p,we,j)}return s.attachToViewContainerRef(),xu(Kb(k),C,s),s}move(s,u){return this.insert(s,u)}indexOf(s){const u=eE(this._lContainer);return null!==u?u.indexOf(s):-1}remove(s){const u=this._adjustIndex(s,-1),h=S(this._lContainer,u);h&&(lc(Kb(this._lContainer),u),m(h[rn],h))}detach(s){const u=this._adjustIndex(s,-1),h=S(this._lContainer,u);return h&&null!=lc(Kb(this._lContainer),u)?new ng(h):null}_adjustIndex(s,u=0){return s??this.length+u}};function eE(r){return r[8]}function Kb(r){return r[8]||(r[8]=[])}function tE(r,s){let u;const h=s[r.index];return Fi(h)?u=h:(u=lm(h,s,null,r),s[r.index]=u,ep(s,u)),nE(u,s,r,h),new JT(u,r,s)}let nE=function rE(r,s,u,h){if(r[Hs])return;let p;p=8&u.type?Br(h):function pC(r,s){const u=r[br],h=u.createComment(""),p=ae(s,r);return kt(u,Os(u,p),h,function ku(r,s){return r.nextSibling(s)}(u,p),!1),h}(s,u),r[Hs]=p};class Zb{constructor(s){this.queryList=s,this.matches=null}clone(){return new Zb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yb{constructor(s=[]){this.queries=s}createEmbeddedView(s){const u=s.queries;if(null!==u){const h=null!==s.contentQueries?s.contentQueries[0]:u.length,p=[];for(let _=0;_<h;_++){const C=u.getByIndex(_);p.push(this.queries[C.indexInDeclarationView].clone())}return new Yb(p)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let u=0;u<this.queries.length;u++)null!==hE(s,u).matches&&this.queries[u].setDirty()}}class iE{constructor(s,u,h=null){this.predicate=s,this.flags=u,this.read=h}}class Qb{constructor(s=[]){this.queries=s}elementStart(s,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(s,u)}elementEnd(s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(s)}embeddedTView(s){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,_=this.getByIndex(h).embeddedTView(s,p);_&&(_.indexInDeclarationView=h,null!==u?u.push(_):u=[_])}return null!==u?new Qb(u):null}template(s,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(s,u)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Xb{constructor(s,u=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(s,u){this.isApplyingToNode(u)&&this.matchTNode(s,u)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,u){this.elementStart(s,u)}embeddedTView(s,u){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,u),new Xb(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=s.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(s,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const _=h[p];this.matchTNodeWithReadOption(s,u,vC(u,_)),this.matchTNodeWithReadOption(s,u,hl(u,s,_,!1,!1))}else h===eb?4&u.type&&this.matchTNodeWithReadOption(s,u,-1):this.matchTNodeWithReadOption(s,u,hl(u,s,h,!1,!1))}matchTNodeWithReadOption(s,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===wd||p===wb||p===eb&&4&u.type)this.addMatch(u.index,-2);else{const _=hl(u,s,p,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,h)}}addMatch(s,u){null===this.matches?this.matches=[s,u]:this.matches.push(s,u)}}function vC(r,s){const u=r.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===s)return u[h+1];return null}function _C(r,s,u,h){return-1===u?function yC(r,s){return 11&r.type?_l(r,s):4&r.type?Eb(r,s):null}(s,r):-2===u?function bC(r,s,u){return u===wd?_l(s,r):u===eb?Eb(s,r):u===wb?tE(s,r):void 0}(r,s,h):uc(r,r[rn],u,s)}function sE(r,s,u,h){const p=s[po].queries[h];if(null===p.matches){const _=r.data,C=u.matches,k=[];for(let j=0;j<C.length;j+=2){const ie=C[j];k.push(ie<0?null:_C(s,_[ie],C[j+1],u.metadata.read))}p.matches=k}return p.matches}function Jb(r,s,u,h){const p=r.queries.getByIndex(u),_=p.matches;if(null!==_){const C=sE(r,s,p,u);for(let k=0;k<_.length;k+=2){const j=_[k];if(j>0)h.push(C[k/2]);else{const ie=_[k+1],we=s[-j];for(let Ge=Is;Ge<we.length;Ge++){const _t=we[Ge];_t[Yo]===_t[Dn]&&Jb(_t[rn],_t,ie,h)}if(null!==we[Ea]){const Ge=we[Ea];for(let _t=0;_t<Ge.length;_t++){const Rt=Ge[_t];Jb(Rt[rn],Rt,ie,h)}}}}}return h}function oE(r){const s=pn(),u=Er(),h=ic();ll(h+1);const p=hE(u,h);if(r.dirty&&function Zt(r){return 4==(4&r[Ln])}(s)===(2==(2&p.metadata.flags))){if(null===p.matches)r.reset([]);else{const _=p.crossesNgTemplate?Jb(u,s,h,[]):sE(u,s,p,h);r.reset(_,Zp),r.notifyOnChanges()}return!0}return!1}function aE(r,s,u){const h=Er();h.firstCreatePass&&(dE(h,new iE(r,s,u),-1),2==(2&s)&&(h.staticViewQueries=!0)),cE(h,pn(),s)}function uE(r,s,u,h){const p=Er();if(p.firstCreatePass){const _=ao();dE(p,new iE(s,u,h),_.index),function EC(r,s){const u=r.contentQueries||(r.contentQueries=[]);s!==(u.length?u[u.length-1]:-1)&&u.push(r.queries.length-1,s)}(p,r),2==(2&u)&&(p.staticContentQueries=!0)}cE(p,pn(),u)}function lE(){return function TC(r,s){return r[po].queries[s].queryList}(pn(),ic())}function cE(r,s,u){const h=new Tb(4==(4&u));(function Rv(r,s,u,h){const p=S0(s);p.push(u),r.firstCreatePass&&cm(r).push(h,p.length-1)})(r,s,h,h.destroy),null===s[po]&&(s[po]=new Yb),s[po].queries.push(new Zb(h))}function dE(r,s,u){null===r.queries&&(r.queries=new Qb),r.queries.track(new Xb(s,u))}function hE(r,s){return r.queries.getByIndex(s)}function fE(r,s){return Eb(r,s)}function eT(r){return!!is(r)}const kE=new ts("Application Initializer");let sT=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h}),this.appInits=Rn(kE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const p of this.appInits){const _=p();if(gh(_))u.push(_);else if(Tm(_)){const C=new Promise((k,j)=>{_.subscribe({complete:k,error:j})});u.push(C)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=zn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ME=(()=>{class r{log(u){console.log(u)}warn(u){console.warn(u)}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=zn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Sb=new ts("LocaleId",{providedIn:"root",factory:()=>Rn(Sb,dn.Optional|dn.SkipSelf)||function HC(){return typeof $localize<"u"&&$localize.locale||n}()}),GC=new ts("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let PE=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=zn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class zC{constructor(s,u){this.ngModuleFactory=s,this.componentFactories=u}}let qC=(()=>{class r{compileModuleSync(u){return new Gb(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),_=Yc(is(u).declarations).reduce((C,k)=>{const j=_r(k);return j&&C.push(new rg(j)),C},[]);return new zC(h,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=zn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const ZC=(()=>Promise.resolve(0))();function oT(r){typeof Zone>"u"?ZC.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}function NE(...r){}class Rc{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tp(!1),this.onMicrotaskEmpty=new Tp(!1),this.onStable=new Tp(!1),this.onError=new Tp(!1),typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function YC(){let r=Zr.requestAnimationFrame,s=Zr.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u);const h=s[Zone.__symbol__("OriginalDelegate")];h&&(s=h)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function JC(r){const s=()=>{!function XC(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Zr,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,uT(r),r.isCheckStableRunning=!0,aT(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),uT(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,_,C,k)=>{try{return LE(r),u.invokeTask(p,_,C,k)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||r.shouldCoalesceRunChangeDetection)&&s(),FE(r)}},onInvoke:(u,h,p,_,C,k,j)=>{try{return LE(r),u.invoke(p,_,C,k,j)}finally{r.shouldCoalesceRunChangeDetection&&s(),FE(r)}},onHasTask:(u,h,p,_)=>{u.hasTask(p,_),h===p&&("microTask"==_.change?(r._hasPendingMicrotasks=_.microTask,uT(r),aT(r)):"macroTask"==_.change&&(r.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,h,p,_)=>(u.handleError(p,_),r.runOutsideAngular(()=>r.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rc.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(Rc.isInAngularZone())throw new Y(909,!1)}run(s,u,h){return this._inner.run(s,u,h)}runTask(s,u,h,p){const _=this._inner,C=_.scheduleEventTask("NgZoneEvent: "+p,s,QC,NE,NE);try{return _.runTask(C,u,h)}finally{_.cancelTask(C)}}runGuarded(s,u,h){return this._inner.runGuarded(s,u,h)}runOutsideAngular(s){return this._outer.run(s)}}const QC={};function aT(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function uT(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function LE(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function FE(r){r._nesting--,aT(r)}class eS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tp,this.onMicrotaskEmpty=new Tp,this.onStable=new Tp,this.onError=new Tp}run(s,u,h){return s.apply(u,h)}runGuarded(s,u,h){return s.apply(u,h)}runOutsideAngular(s){return s()}runTask(s,u,h,p){return s.apply(u,h)}}const jE=new ts("",{providedIn:"root",factory:BE});function BE(){const r=Rn(Rc);let s=!0;const u=new V.y(p=>{s=r.isStable&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks,r.runOutsideAngular(()=>{p.next(s),p.complete()})}),h=new V.y(p=>{let _;r.runOutsideAngular(()=>{_=r.onStable.subscribe(()=>{Rc.assertNotInAngularZone(),oT(()=>{!s&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks&&(s=!0,p.next(!0))})})});const C=r.onUnstable.subscribe(()=>{Rc.assertInAngularZone(),s&&(s=!1,r.runOutsideAngular(()=>{p.next(!1)}))});return()=>{_.unsubscribe(),C.unsubscribe()}});return(0,Ce.T)(u,h.pipe((0,$e.B)()))}const UE=new ts(""),VE=new ts("");let lT,tS=(()=>{class r{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,lT||(function nS(r){lT=r}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rc.assertNotInAngularZone(),oT(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())oT(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==_),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return r.\u0275fac=function(u){return new(u||r)(Ar(Rc),Ar($E),Ar(VE))},r.\u0275prov=zn({token:r,factory:r.\u0275fac}),r})(),$E=(()=>{class r{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return lT?.findTestabilityInTree(this,u,h)??null}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=zn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),Bm=null;const HE=new ts("AllowMultipleToken"),cT=new ts("PlatformDestroyListeners"),dT=new ts("appBootstrapListener");class sS{constructor(s,u){this.name=s,this.token=u}}function qE(r,s,u=[]){const h=`Platform: ${s}`,p=new ts(h);return(_=[])=>{let C=hT();if(!C||C.injector.get(HE,!1)){const k=[...u,..._,{provide:p,useValue:!0}];r?r(k):function oS(r){if(Bm&&!Bm.get(HE,!1))throw new Y(400,!1);(function GE(){!function da(r){hs=r}(()=>{throw new Y(600,!1)})})(),Bm=r;const s=r.get(KE);(function zE(r){r.get(cv,null)?.forEach(u=>u())})(r)}(function WE(r=[],s){return ch.create({name:s,providers:[{provide:Ed,useValue:"platform"},{provide:cT,useValue:new Set([()=>Bm=null])},...r]})}(k,h))}return function uS(r){const s=hT();if(!s)throw new Y(401,!1);return s}()}}function hT(){return Bm?.get(KE)??null}let KE=(()=>{class r{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function lS(r="zone.js",s){return"noop"===r?new eS:"zone.js"===r?new Rc(s):r}(h?.ngZone,function ZE(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return p.run(()=>{const _=function Ow(r,s,u){return new Hb(r,s,u)}(u.moduleType,this.injector,function ew(r){return[{provide:Rc,useFactory:r},{provide:Rp,multi:!0,useFactory:()=>{const s=Rn(dS,{optional:!0});return()=>s.initialize()}},{provide:JE,useFactory:cS},{provide:jE,useFactory:BE}]}(()=>p)),C=_.injector.get(el,null);return p.runOutsideAngular(()=>{const k=p.onError.subscribe({next:j=>{C.handleError(j)}});_.onDestroy(()=>{Db(this._modules,_),k.unsubscribe()})}),function YE(r,s,u){try{const h=u();return gh(h)?h.catch(p=>{throw s.runOutsideAngular(()=>r.handleError(p)),p}):h}catch(h){throw s.runOutsideAngular(()=>r.handleError(h)),h}}(C,p,()=>{const k=_.injector.get(sT);return k.runInitializers(),k.donePromise.then(()=>(function ue(r){Lt(r,"Expected localeId to be defined"),"string"==typeof r&&(Z=r.toLowerCase().replace(/_/g,"-"))}(_.injector.get(Sb,n)||n),this._moduleDoBootstrap(_),_))})})}bootstrapModule(u,h=[]){const p=QE({},h);return function rS(r,s,u){const h=new Gb(u);return Promise.resolve(h)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(u){const h=u.injector.get(d_);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new Y(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(cT,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(u){return new(u||r)(Ar(ch))},r.\u0275prov=zn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function QE(r,s){return Array.isArray(s)?s.reduce(QE,r):{...r,...s}}let d_=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Rn(JE),this.zoneIsStable=Rn(jE),this.componentTypes=[],this.components=[],this.isStable=Rn(PE).hasPendingTasks.pipe((0,Xe.w)(u=>u?(0,De.of)(!1):this.zoneIsStable),(0,et.x)(),(0,$e.B)()),this._injector=Rn(rh)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const p=u instanceof n0;if(!this._injector.get(sT).done)throw!p&&Mo(u),new Y(405,!1);let C;C=p?u:this._injector.get(Gf).resolveComponentFactory(u),this.componentTypes.push(C.componentType);const k=function iS(r){return r.isBoundToModule}(C)?void 0:this._injector.get(u_),ie=C.create(ch.NULL,[],h||C.selector,k),we=ie.location.nativeElement,Ge=ie.injector.get(UE,null);return Ge?.registerApplication(we),ie.onDestroy(()=>{this.detachView(ie.hostView),Db(this.components,ie),Ge?.unregisterApplication(we)}),this._loadComponent(ie),ie}tick(){if(this._runningTick)throw new Y(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Db(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(dT,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Db(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Y(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=zn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Db(r,s){const u=r.indexOf(s);u>-1&&r.splice(u,1)}const JE=new ts("",{providedIn:"root",factory:()=>Rn(el).handleError.bind(void 0)});function cS(){const r=Rn(Rc),s=Rn(el);return u=>r.runOutsideAngular(()=>s.handleError(u))}let dS=(()=>{class r{constructor(){this.zone=Rn(Rc),this.applicationRef=Rn(d_)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=zn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function fS(){return!1}function pS(){}let gS=(()=>{class r{}return r.__NG_ELEMENT_ID__=mS,r})();function mS(r){return function vS(r,s,u){if(js(r)&&!u){const h=Nt(r.index,s);return new ng(h,h)}return 47&r.type?new ng(s[qi],s):null}(ao(),pn(),16==(16&r))}class iw{constructor(){}supports(s){return Sn(s)}create(s){return new wS(s)}}const ES=(r,s)=>s;class wS{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||ES}forEachItem(s){let u;for(u=this._itHead;null!==u;u=u._next)s(u)}forEachOperation(s){let u=this._itHead,h=this._removalsHead,p=0,_=null;for(;u||h;){const C=!h||u&&u.currentIndex<ow(h,p,_)?u:h,k=ow(C,p,_),j=C.currentIndex;if(C===h)p--,h=h._nextRemoved;else if(u=u._next,null==C.previousIndex)p++;else{_||(_=[]);const ie=k-p,we=j-p;if(ie!=we){for(let _t=0;_t<ie;_t++){const Rt=_t<_.length?_[_t]:_[_t]=0,vn=Rt+_t;we<=vn&&vn<ie&&(_[_t]=Rt+1)}_[C.previousIndex]=we-ie}}k!==j&&s(C,k,j)}}forEachPreviousItem(s){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)s(u)}forEachAddedItem(s){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)s(u)}forEachMovedItem(s){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)s(u)}forEachRemovedItem(s){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)s(u)}forEachIdentityChange(s){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)s(u)}diff(s){if(null==s&&(s=[]),!Sn(s))throw new Y(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let p,_,C,u=this._itHead,h=!1;if(Array.isArray(s)){this.length=s.length;for(let k=0;k<this.length;k++)_=s[k],C=this._trackByFn(k,_),null!==u&&Object.is(u.trackById,C)?(h&&(u=this._verifyReinsertion(u,_,C,k)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,C,k),h=!0),u=u._next}else p=0,function Ht(r,s){if(Array.isArray(r))for(let u=0;u<r.length;u++)s(r[u]);else{const u=r[Symbol.iterator]();let h;for(;!(h=u.next()).done;)s(h.value)}}(s,k=>{C=this._trackByFn(p,k),null!==u&&Object.is(u.trackById,C)?(h&&(u=this._verifyReinsertion(u,k,C,p)),Object.is(u.item,k)||this._addIdentityChange(u,k)):(u=this._mismatch(u,k,C,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,u,h,p){let _;return null===s?_=this._itTail:(_=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(s.item,u)||this._addIdentityChange(s,u),this._reinsertAfter(s,_,p)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(s.item,u)||this._addIdentityChange(s,u),this._moveAfter(s,_,p)):s=this._addAfter(new CS(u,h),_,p),s}_verifyReinsertion(s,u,h,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?s=this._reinsertAfter(_,s._prev,p):s.currentIndex!=p&&(s.currentIndex=p,this._addToMoves(s,p)),s}_truncate(s){for(;null!==s;){const u=s._next;this._addToRemovals(this._unlink(s)),s=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const p=s._prevRemoved,_=s._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(s,u,h),this._addToMoves(s,h),s}_moveAfter(s,u,h){return this._unlink(s),this._insertAfter(s,u,h),this._addToMoves(s,h),s}_addAfter(s,u,h){return this._insertAfter(s,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,u,h){const p=null===u?this._itHead:u._next;return s._next=p,s._prev=u,null===p?this._itTail=s:p._prev=s,null===u?this._itHead=s:u._next=s,null===this._linkedRecords&&(this._linkedRecords=new sw),this._linkedRecords.put(s),s.currentIndex=h,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const u=s._prev,h=s._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,s}_addToMoves(s,u){return s.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sw),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,u){return s.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class CS{constructor(s,u){this.item=s,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SS{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,s))return h;return null}remove(s){const u=s._prevDup,h=s._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class sw{constructor(){this.map=new Map}put(s){const u=s.trackById;let h=this.map.get(u);h||(h=new SS,this.map.set(u,h)),h.add(s)}get(s,u){const p=this.map.get(s);return p?p.get(s,u):null}remove(s){const u=s.trackById;return this.map.get(u).remove(s)&&this.map.delete(u),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ow(r,s,u){const h=r.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+s+p}class aw{constructor(){}supports(s){return s instanceof Map||Gn(s)}create(){return new DS}}class DS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let u;for(u=this._mapHead;null!==u;u=u._next)s(u)}forEachPreviousItem(s){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)s(u)}forEachChangedItem(s){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)s(u)}forEachAddedItem(s){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)s(u)}forEachRemovedItem(s){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)s(u)}diff(s){if(s){if(!(s instanceof Map||Gn(s)))throw new Y(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(s,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,u){if(s){const h=s._prev;return u._next=s,u._prev=h,s._prev=u,h&&(h._next=u),s===this._mapHead&&(this._mapHead=u),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(s,u){if(this._records.has(s)){const p=this._records.get(s);this._maybeAddToChanges(p,u);const _=p._prev,C=p._next;return _&&(_._next=C),C&&(C._prev=_),p._next=null,p._prev=null,p}const h=new IS(s);return this._records.set(s,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,u){Object.is(u,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=u,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,u){s instanceof Map?s.forEach(u):Object.keys(s).forEach(h=>u(s[h],h))}}class IS{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uw(){return new vT([new iw])}let vT=(()=>{class r{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new r(u)}static extend(u){return{provide:r,useFactory:h=>r.create(u,h||uw()),deps:[[r,new Vo,new ps]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new Y(901,!1)}}return r.\u0275prov=zn({token:r,providedIn:"root",factory:uw}),r})();function lw(){return new yT([new aw])}let yT=(()=>{class r{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new r(u)}static extend(u){return{provide:r,useFactory:h=>r.create(u,h||lw()),deps:[[r,new Vo,new ps]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new Y(901,!1)}}return r.\u0275prov=zn({token:r,providedIn:"root",factory:lw}),r})();const kS=qE(null,"core",[]);let MS=(()=>{class r{constructor(u){}}return r.\u0275fac=function(u){return new(u||r)(Ar(d_))},r.\u0275mod=Fs({type:r}),r.\u0275inj=rr({}),r})();function US(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}function $S(r){const s=_r(r);if(!s)return null;const u=new rg(s);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},6223:(nn,st,H)=>{"use strict";H.d(st,{Cf:()=>Tt,F:()=>no,Fj:()=>le,JJ:()=>Cr,JL:()=>Hr,JU:()=>Xe,Kr:()=>Ta,NI:()=>Zs,On:()=>_r,Q7:()=>Is,UX:()=>du,YN:()=>Go,_Y:()=>us,c5:()=>Oo,cw:()=>ve,kI:()=>J,oH:()=>Dn,sg:()=>$s,u5:()=>Ki});var y=H(5879),fe=H(6814),se=H(2459),V=H(9315),Ce=H(7398);let De=(()=>{class ee{constructor(G,ke){this._renderer=G,this._elementRef=ke,this.onChange=Wt=>{},this.onTouched=()=>{}}setProperty(G,ke){this._renderer.setProperty(this._elementRef.nativeElement,G,ke)}registerOnTouched(G){this.onTouched=G}registerOnChange(G){this.onChange=G}setDisabledState(G){this.setProperty("disabled",G)}}return ee.\u0275fac=function(G){return new(G||ee)(y.Y36(y.Qsj),y.Y36(y.SBq))},ee.\u0275dir=y.lG2({type:ee}),ee})(),$e=(()=>{class ee extends De{}return ee.\u0275fac=function(){let K;return function(ke){return(K||(K=y.n5z(ee)))(ke||ee)}}(),ee.\u0275dir=y.lG2({type:ee,features:[y.qOj]}),ee})();const Xe=new y.OlP("NgValueAccessor"),Re={provide:Xe,useExisting:(0,y.Gpc)(()=>le),multi:!0},wt=new y.OlP("CompositionEventMode");let le=(()=>{class ee extends De{constructor(G,ke,Wt){super(G,ke),this._compositionMode=Wt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Le(){const ee=(0,fe.q)()?(0,fe.q)().getUserAgent():"";return/android (\d+)/.test(ee.toLowerCase())}())}writeValue(G){this.setProperty("value",G??"")}_handleInput(G){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(G)}_compositionStart(){this._composing=!0}_compositionEnd(G){this._composing=!1,this._compositionMode&&this.onChange(G)}}return ee.\u0275fac=function(G){return new(G||ee)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(wt,8))},ee.\u0275dir=y.lG2({type:ee,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(G,ke){1&G&&y.NdJ("input",function(Q){return ke._handleInput(Q.target.value)})("blur",function(){return ke.onTouched()})("compositionstart",function(){return ke._compositionStart()})("compositionend",function(Q){return ke._compositionEnd(Q.target.value)})},features:[y._Bn([Re]),y.qOj]}),ee})();function vt(ee){return null==ee||("string"==typeof ee||Array.isArray(ee))&&0===ee.length}function qe(ee){return null!=ee&&"number"==typeof ee.length}const Tt=new y.OlP("NgValidators"),je=new y.OlP("NgAsyncValidators"),Ve=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class J{static min(K){return function Y(ee){return K=>{if(vt(K.value)||vt(ee))return null;const G=parseFloat(K.value);return!isNaN(G)&&G<ee?{min:{min:ee,actual:K.value}}:null}}(K)}static max(K){return function Ee(ee){return K=>{if(vt(K.value)||vt(ee))return null;const G=parseFloat(K.value);return!isNaN(G)&&G>ee?{max:{max:ee,actual:K.value}}:null}}(K)}static required(K){return _e(K)}static requiredTrue(K){return function Fe(ee){return!0===ee.value?null:{required:!0}}(K)}static email(K){return function ut(ee){return vt(ee.value)||Ve.test(ee.value)?null:{email:!0}}(K)}static minLength(K){return function W(ee){return K=>vt(K.value)||!qe(K.value)?null:K.value.length<ee?{minlength:{requiredLength:ee,actualLength:K.value.length}}:null}(K)}static maxLength(K){return function ne(ee){return K=>qe(K.value)&&K.value.length>ee?{maxlength:{requiredLength:ee,actualLength:K.value.length}}:null}(K)}static pattern(K){return Pe(K)}static nullValidator(K){return null}static compose(K){return Qe(K)}static composeAsync(K){return at(K)}}function _e(ee){return vt(ee.value)?{required:!0}:null}function Pe(ee){if(!ee)return bt;let K,G;return"string"==typeof ee?(G="","^"!==ee.charAt(0)&&(G+="^"),G+=ee,"$"!==ee.charAt(ee.length-1)&&(G+="$"),K=new RegExp(G)):(G=ee.toString(),K=ee),ke=>{if(vt(ke.value))return null;const Wt=ke.value;return K.test(Wt)?null:{pattern:{requiredPattern:G,actualValue:Wt}}}}function bt(ee){return null}function Bt(ee){return null!=ee}function $t(ee){return(0,y.QGY)(ee)?(0,se.D)(ee):ee}function Xt(ee){let K={};return ee.forEach(G=>{K=null!=G?{...K,...G}:K}),0===Object.keys(K).length?null:K}function ot(ee,K){return K.map(G=>G(ee))}function rt(ee){return ee.map(K=>function Ye(ee){return!ee.validate}(K)?K:G=>K.validate(G))}function Qe(ee){if(!ee)return null;const K=ee.filter(Bt);return 0==K.length?null:function(G){return Xt(ot(G,K))}}function dt(ee){return null!=ee?Qe(rt(ee)):null}function at(ee){if(!ee)return null;const K=ee.filter(Bt);return 0==K.length?null:function(G){const ke=ot(G,K).map($t);return(0,V.D)(ke).pipe((0,Ce.U)(Xt))}}function Ot(ee){return null!=ee?at(rt(ee)):null}function qt(ee,K){return null===ee?[K]:Array.isArray(ee)?[...ee,K]:[ee,K]}function jt(ee){return ee._rawValidators}function Lt(ee){return ee._rawAsyncValidators}function Kt(ee){return ee?Array.isArray(ee)?ee:[ee]:[]}function wn(ee,K){return Array.isArray(ee)?ee.includes(K):ee===K}function Fn(ee,K){const G=Kt(K);return Kt(ee).forEach(Wt=>{wn(G,Wt)||G.push(Wt)}),G}function jn(ee,K){return Kt(K).filter(G=>!wn(ee,G))}class zn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(K){this._rawValidators=K||[],this._composedValidatorFn=dt(this._rawValidators)}_setAsyncValidators(K){this._rawAsyncValidators=K||[],this._composedAsyncValidatorFn=Ot(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(K){this._onDestroyCallbacks.push(K)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(K=>K()),this._onDestroyCallbacks=[]}reset(K=void 0){this.control&&this.control.reset(K)}hasError(K,G){return!!this.control&&this.control.hasError(K,G)}getError(K,G){return this.control?this.control.getError(K,G):null}}class ur extends zn{get formDirective(){return null}get path(){return null}}class rr extends zn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $n{constructor(K){this._cd=K}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Cr=(()=>{class ee extends $n{constructor(G){super(G)}}return ee.\u0275fac=function(G){return new(G||ee)(y.Y36(rr,2))},ee.\u0275dir=y.lG2({type:ee,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(G,ke){2&G&&y.ekj("ng-untouched",ke.isUntouched)("ng-touched",ke.isTouched)("ng-pristine",ke.isPristine)("ng-dirty",ke.isDirty)("ng-valid",ke.isValid)("ng-invalid",ke.isInvalid)("ng-pending",ke.isPending)},features:[y.qOj]}),ee})(),Hr=(()=>{class ee extends $n{constructor(G){super(G)}}return ee.\u0275fac=function(G){return new(G||ee)(y.Y36(ur,10))},ee.\u0275dir=y.lG2({type:ee,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(G,ke){2&G&&y.ekj("ng-untouched",ke.isUntouched)("ng-touched",ke.isTouched)("ng-pristine",ke.isPristine)("ng-dirty",ke.isDirty)("ng-valid",ke.isValid)("ng-invalid",ke.isInvalid)("ng-pending",ke.isPending)("ng-submitted",ke.isSubmitted)},features:[y.qOj]}),ee})();const gr="VALID",zi="INVALID",di="PENDING",Xi="DISABLED";function bi(ee){return(Ar(ee)?ee.validators:ee)||null}function Vr(ee,K){return(Ar(K)?K.asyncValidators:ee)||null}function Ar(ee){return null!=ee&&!Array.isArray(ee)&&"object"==typeof ee}class tt{constructor(K,G){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(K),this._assignAsyncValidators(G)}get validator(){return this._composedValidatorFn}set validator(K){this._rawValidators=this._composedValidatorFn=K}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(K){this._rawAsyncValidators=this._composedAsyncValidatorFn=K}get parent(){return this._parent}get valid(){return this.status===gr}get invalid(){return this.status===zi}get pending(){return this.status==di}get disabled(){return this.status===Xi}get enabled(){return this.status!==Xi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(K){this._assignValidators(K)}setAsyncValidators(K){this._assignAsyncValidators(K)}addValidators(K){this.setValidators(Fn(K,this._rawValidators))}addAsyncValidators(K){this.setAsyncValidators(Fn(K,this._rawAsyncValidators))}removeValidators(K){this.setValidators(jn(K,this._rawValidators))}removeAsyncValidators(K){this.setAsyncValidators(jn(K,this._rawAsyncValidators))}hasValidator(K){return wn(this._rawValidators,K)}hasAsyncValidator(K){return wn(this._rawAsyncValidators,K)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(K={}){this.touched=!0,this._parent&&!K.onlySelf&&this._parent.markAsTouched(K)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(K=>K.markAllAsTouched())}markAsUntouched(K={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(G=>{G.markAsUntouched({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}markAsDirty(K={}){this.pristine=!1,this._parent&&!K.onlySelf&&this._parent.markAsDirty(K)}markAsPristine(K={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(G=>{G.markAsPristine({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}markAsPending(K={}){this.status=di,!1!==K.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!K.onlySelf&&this._parent.markAsPending(K)}disable(K={}){const G=this._parentMarkedDirty(K.onlySelf);this.status=Xi,this.errors=null,this._forEachChild(ke=>{ke.disable({...K,onlySelf:!0})}),this._updateValue(),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...K,skipPristineCheck:G}),this._onDisabledChange.forEach(ke=>ke(!0))}enable(K={}){const G=this._parentMarkedDirty(K.onlySelf);this.status=gr,this._forEachChild(ke=>{ke.enable({...K,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent}),this._updateAncestors({...K,skipPristineCheck:G}),this._onDisabledChange.forEach(ke=>ke(!1))}_updateAncestors(K){this._parent&&!K.onlySelf&&(this._parent.updateValueAndValidity(K),K.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(K){this._parent=K}getRawValue(){return this.value}updateValueAndValidity(K={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gr||this.status===di)&&this._runAsyncValidator(K.emitEvent)),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!K.onlySelf&&this._parent.updateValueAndValidity(K)}_updateTreeValidity(K={emitEvent:!0}){this._forEachChild(G=>G._updateTreeValidity(K)),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xi:gr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(K){if(this.asyncValidator){this.status=di,this._hasOwnPendingAsyncValidator=!0;const G=$t(this.asyncValidator(this));this._asyncValidationSubscription=G.subscribe(ke=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ke,{emitEvent:K})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(K,G={}){this.errors=K,this._updateControlsErrors(!1!==G.emitEvent)}get(K){let G=K;return null==G||(Array.isArray(G)||(G=G.split(".")),0===G.length)?null:G.reduce((ke,Wt)=>ke&&ke._find(Wt),this)}getError(K,G){const ke=G?this.get(G):this;return ke&&ke.errors?ke.errors[K]:null}hasError(K,G){return!!this.getError(K,G)}get root(){let K=this;for(;K._parent;)K=K._parent;return K}_updateControlsErrors(K){this.status=this._calculateStatus(),K&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(K)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?Xi:this.errors?zi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(di)?di:this._anyControlsHaveStatus(zi)?zi:gr}_anyControlsHaveStatus(K){return this._anyControls(G=>G.status===K)}_anyControlsDirty(){return this._anyControls(K=>K.dirty)}_anyControlsTouched(){return this._anyControls(K=>K.touched)}_updatePristine(K={}){this.pristine=!this._anyControlsDirty(),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}_updateTouched(K={}){this.touched=this._anyControlsTouched(),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}_registerOnCollectionChange(K){this._onCollectionChange=K}_setUpdateStrategy(K){Ar(K)&&null!=K.updateOn&&(this._updateOn=K.updateOn)}_parentMarkedDirty(K){return!K&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(K){return null}_assignValidators(K){this._rawValidators=Array.isArray(K)?K.slice():K,this._composedValidatorFn=function wi(ee){return Array.isArray(ee)?dt(ee):ee||null}(this._rawValidators)}_assignAsyncValidators(K){this._rawAsyncValidators=Array.isArray(K)?K.slice():K,this._composedAsyncValidatorFn=function os(ee){return Array.isArray(ee)?Ot(ee):ee||null}(this._rawAsyncValidators)}}class ve extends tt{constructor(K,G,ke){super(bi(G),Vr(ke,G)),this.controls=K,this._initObservables(),this._setUpdateStrategy(G),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(K,G){return this.controls[K]?this.controls[K]:(this.controls[K]=G,G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange),G)}addControl(K,G,ke={}){this.registerControl(K,G),this.updateValueAndValidity({emitEvent:ke.emitEvent}),this._onCollectionChange()}removeControl(K,G={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],this.updateValueAndValidity({emitEvent:G.emitEvent}),this._onCollectionChange()}setControl(K,G,ke={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],G&&this.registerControl(K,G),this.updateValueAndValidity({emitEvent:ke.emitEvent}),this._onCollectionChange()}contains(K){return this.controls.hasOwnProperty(K)&&this.controls[K].enabled}setValue(K,G={}){(function Rn(ee,K,G){ee._forEachChild((ke,Wt)=>{if(void 0===G[Wt])throw new y.vHH(1002,"")})})(this,0,K),Object.keys(K).forEach(ke=>{(function vs(ee,K,G){const ke=ee.controls;if(!(K?Object.keys(ke):ke).length)throw new y.vHH(1e3,"");if(!ke[G])throw new y.vHH(1001,"")})(this,!0,ke),this.controls[ke].setValue(K[ke],{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G)}patchValue(K,G={}){null!=K&&(Object.keys(K).forEach(ke=>{const Wt=this.controls[ke];Wt&&Wt.patchValue(K[ke],{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G))}reset(K={},G={}){this._forEachChild((ke,Wt)=>{ke.reset(K[Wt],{onlySelf:!0,emitEvent:G.emitEvent})}),this._updatePristine(G),this._updateTouched(G),this.updateValueAndValidity(G)}getRawValue(){return this._reduceChildren({},(K,G,ke)=>(K[ke]=G.getRawValue(),K))}_syncPendingControls(){let K=this._reduceChildren(!1,(G,ke)=>!!ke._syncPendingControls()||G);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){Object.keys(this.controls).forEach(G=>{const ke=this.controls[G];ke&&K(ke,G)})}_setUpControls(){this._forEachChild(K=>{K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(K){for(const[G,ke]of Object.entries(this.controls))if(this.contains(G)&&K(ke))return!0;return!1}_reduceValue(){return this._reduceChildren({},(G,ke,Wt)=>((ke.enabled||this.disabled)&&(G[Wt]=ke.value),G))}_reduceChildren(K,G){let ke=K;return this._forEachChild((Wt,Q)=>{ke=G(ke,Wt,Q)}),ke}_allControlsDisabled(){for(const K of Object.keys(this.controls))if(this.controls[K].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(K){return this.controls.hasOwnProperty(K)?this.controls[K]:null}}const Yt=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Tn}),Tn="always";function pe(ee,K,G=Tn){Zn(ee,K),K.valueAccessor.writeValue(ee.value),(ee.disabled||"always"===G)&&K.valueAccessor.setDisabledState?.(ee.disabled),function ti(ee,K){K.valueAccessor.registerOnChange(G=>{ee._pendingValue=G,ee._pendingChange=!0,ee._pendingDirty=!0,"change"===ee.updateOn&&Et(ee,K)})}(ee,K),function Jt(ee,K){const G=(ke,Wt)=>{K.valueAccessor.writeValue(ke),Wt&&K.viewToModelUpdate(ke)};ee.registerOnChange(G),K._registerOnDestroy(()=>{ee._unregisterOnChange(G)})}(ee,K),function Ut(ee,K){K.valueAccessor.registerOnTouched(()=>{ee._pendingTouched=!0,"blur"===ee.updateOn&&ee._pendingChange&&Et(ee,K),"submit"!==ee.updateOn&&ee.markAsTouched()})}(ee,K),function cn(ee,K){if(K.valueAccessor.setDisabledState){const G=ke=>{K.valueAccessor.setDisabledState(ke)};ee.registerOnDisabledChange(G),K._registerOnDestroy(()=>{ee._unregisterOnDisabledChange(G)})}}(ee,K)}function Ne(ee,K,G=!0){const ke=()=>{};K.valueAccessor&&(K.valueAccessor.registerOnChange(ke),K.valueAccessor.registerOnTouched(ke)),kr(ee,K),ee&&(K._invokeOnDestroyCallbacks(),ee._registerOnCollectionChange(()=>{}))}function ct(ee,K){ee.forEach(G=>{G.registerOnValidatorChange&&G.registerOnValidatorChange(K)})}function Zn(ee,K){const G=jt(ee);null!==K.validator?ee.setValidators(qt(G,K.validator)):"function"==typeof G&&ee.setValidators([G]);const ke=Lt(ee);null!==K.asyncValidator?ee.setAsyncValidators(qt(ke,K.asyncValidator)):"function"==typeof ke&&ee.setAsyncValidators([ke]);const Wt=()=>ee.updateValueAndValidity();ct(K._rawValidators,Wt),ct(K._rawAsyncValidators,Wt)}function kr(ee,K){let G=!1;if(null!==ee){if(null!==K.validator){const Wt=jt(ee);if(Array.isArray(Wt)&&Wt.length>0){const Q=Wt.filter(X=>X!==K.validator);Q.length!==Wt.length&&(G=!0,ee.setValidators(Q))}}if(null!==K.asyncValidator){const Wt=Lt(ee);if(Array.isArray(Wt)&&Wt.length>0){const Q=Wt.filter(X=>X!==K.asyncValidator);Q.length!==Wt.length&&(G=!0,ee.setAsyncValidators(Q))}}}const ke=()=>{};return ct(K._rawValidators,ke),ct(K._rawAsyncValidators,ke),G}function Et(ee,K){ee._pendingDirty&&ee.markAsDirty(),ee.setValue(ee._pendingValue,{emitModelToViewChange:!1}),K.viewToModelUpdate(ee._pendingValue),ee._pendingChange=!1}function An(ee,K){Zn(ee,K)}function rs(ee,K){if(!ee.hasOwnProperty("model"))return!1;const G=ee.model;return!!G.isFirstChange()||!Object.is(K,G.currentValue)}function $o(ee,K){ee._syncPendingControls(),K.forEach(G=>{const ke=G.control;"submit"===ke.updateOn&&ke._pendingChange&&(G.viewToModelUpdate(ke._pendingValue),ke._pendingChange=!1)})}function Ns(ee,K){if(!K)return null;let G,ke,Wt;return Array.isArray(K),K.forEach(Q=>{Q.constructor===le?G=Q:function Ks(ee){return Object.getPrototypeOf(ee.constructor)===$e}(Q)?ke=Q:Wt=Q}),Wt||ke||G||null}const Ho={provide:ur,useExisting:(0,y.Gpc)(()=>no)},Ss=(()=>Promise.resolve())();let no=(()=>{class ee extends ur{constructor(G,ke,Wt){super(),this.callSetDisabledState=Wt,this.submitted=!1,this._directives=new Set,this.ngSubmit=new y.vpe,this.form=new ve({},dt(G),Ot(ke))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(G){Ss.then(()=>{const ke=this._findContainer(G.path);G.control=ke.registerControl(G.name,G.control),pe(G.control,G,this.callSetDisabledState),G.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(G)})}getControl(G){return this.form.get(G.path)}removeControl(G){Ss.then(()=>{const ke=this._findContainer(G.path);ke&&ke.removeControl(G.name),this._directives.delete(G)})}addFormGroup(G){Ss.then(()=>{const ke=this._findContainer(G.path),Wt=new ve({});An(Wt,G),ke.registerControl(G.name,Wt),Wt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(G){Ss.then(()=>{const ke=this._findContainer(G.path);ke&&ke.removeControl(G.name)})}getFormGroup(G){return this.form.get(G.path)}updateModel(G,ke){Ss.then(()=>{this.form.get(G.path).setValue(ke)})}setValue(G){this.control.setValue(G)}onSubmit(G){return this.submitted=!0,$o(this.form,this._directives),this.ngSubmit.emit(G),"dialog"===G?.target?.method}onReset(){this.resetForm()}resetForm(G=void 0){this.form.reset(G),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(G){return G.pop(),G.length?this.form.get(G):this.form}}return ee.\u0275fac=function(G){return new(G||ee)(y.Y36(Tt,10),y.Y36(je,10),y.Y36(Yt,8))},ee.\u0275dir=y.lG2({type:ee,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(G,ke){1&G&&y.NdJ("submit",function(Q){return ke.onSubmit(Q)})("reset",function(){return ke.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Ho]),y.qOj]}),ee})();function oi(ee,K){const G=ee.indexOf(K);G>-1&&ee.splice(G,1)}function fo(ee){return"object"==typeof ee&&null!==ee&&2===Object.keys(ee).length&&"value"in ee&&"disabled"in ee}const Zs=class extends tt{constructor(K=null,G,ke){super(bi(G),Vr(ke,G)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(K),this._setUpdateStrategy(G),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ar(G)&&(G.nonNullable||G.initialValueIsDefault)&&(this.defaultValue=fo(K)?K.value:K)}setValue(K,G={}){this.value=this._pendingValue=K,this._onChange.length&&!1!==G.emitModelToViewChange&&this._onChange.forEach(ke=>ke(this.value,!1!==G.emitViewToModelChange)),this.updateValueAndValidity(G)}patchValue(K,G={}){this.setValue(K,G)}reset(K=this.defaultValue,G={}){this._applyFormState(K),this.markAsPristine(G),this.markAsUntouched(G),this.setValue(this.value,G),this._pendingChange=!1}_updateValue(){}_anyControls(K){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(K){this._onChange.push(K)}_unregisterOnChange(K){oi(this._onChange,K)}registerOnDisabledChange(K){this._onDisabledChange.push(K)}_unregisterOnDisabledChange(K){oi(this._onDisabledChange,K)}_forEachChild(K){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(K){fo(K)?(this.value=this._pendingValue=K.value,K.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=K}},qa={provide:rr,useExisting:(0,y.Gpc)(()=>_r)},As=(()=>Promise.resolve())();let _r=(()=>{class ee extends rr{constructor(G,ke,Wt,Q,X,xe){super(),this._changeDetectorRef=X,this.callSetDisabledState=xe,this.control=new Zs,this._registered=!1,this.name="",this.update=new y.vpe,this._parent=G,this._setValidators(ke),this._setAsyncValidators(Wt),this.valueAccessor=Ns(0,Q)}ngOnChanges(G){if(this._checkForErrors(),!this._registered||"name"in G){if(this._registered&&(this._checkName(),this.formDirective)){const ke=G.name.previousValue;this.formDirective.removeControl({name:ke,path:this._getPath(ke)})}this._setUpControl()}"isDisabled"in G&&this._updateDisabled(G),rs(G,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(G){this.viewModel=G,this.update.emit(G)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pe(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(G){As.then(()=>{this.control.setValue(G,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(G){const ke=G.isDisabled.currentValue,Wt=0!==ke&&(0,y.VuI)(ke);As.then(()=>{Wt&&!this.control.disabled?this.control.disable():!Wt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(G){return this._parent?function he(ee,K){return[...K.path,ee]}(G,this._parent):[G]}}return ee.\u0275fac=function(G){return new(G||ee)(y.Y36(ur,9),y.Y36(Tt,10),y.Y36(je,10),y.Y36(Xe,10),y.Y36(y.sBO,8),y.Y36(Yt,8))},ee.\u0275dir=y.lG2({type:ee,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[y._Bn([qa]),y.qOj,y.TTD]}),ee})(),us=(()=>{class ee{}return ee.\u0275fac=function(G){return new(G||ee)},ee.\u0275dir=y.lG2({type:ee,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ee})(),mt=(()=>{class ee{}return ee.\u0275fac=function(G){return new(G||ee)},ee.\u0275mod=y.oAB({type:ee}),ee.\u0275inj=y.cJS({}),ee})();const rn=new y.OlP("NgModelWithFormControlWarning"),Ln={provide:rr,useExisting:(0,y.Gpc)(()=>Dn)};let Dn=(()=>{class ee extends rr{set isDisabled(G){}constructor(G,ke,Wt,Q,X){super(),this._ngModelWarningConfig=Q,this.callSetDisabledState=X,this.update=new y.vpe,this._ngModelWarningSent=!1,this._setValidators(G),this._setAsyncValidators(ke),this.valueAccessor=Ns(0,Wt)}ngOnChanges(G){if(this._isControlChanged(G)){const ke=G.form.previousValue;ke&&Ne(ke,this,!1),pe(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}rs(G,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ne(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(G){this.viewModel=G,this.update.emit(G)}_isControlChanged(G){return G.hasOwnProperty("form")}}return ee._ngModelWarningSentOnce=!1,ee.\u0275fac=function(G){return new(G||ee)(y.Y36(Tt,10),y.Y36(je,10),y.Y36(Xe,10),y.Y36(rn,8),y.Y36(Yt,8))},ee.\u0275dir=y.lG2({type:ee,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[y._Bn([Ln]),y.qOj,y.TTD]}),ee})();const Sr={provide:ur,useExisting:(0,y.Gpc)(()=>$s)};let $s=(()=>{class ee extends ur{constructor(G,ke,Wt){super(),this.callSetDisabledState=Wt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(G),this._setAsyncValidators(ke)}ngOnChanges(G){this._checkFormPresent(),G.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(G){const ke=this.form.get(G.path);return pe(ke,G,this.callSetDisabledState),ke.updateValueAndValidity({emitEvent:!1}),this.directives.push(G),ke}getControl(G){return this.form.get(G.path)}removeControl(G){Ne(G.control||null,G,!1),function la(ee,K){const G=ee.indexOf(K);G>-1&&ee.splice(G,1)}(this.directives,G)}addFormGroup(G){this._setUpFormContainer(G)}removeFormGroup(G){this._cleanUpFormContainer(G)}getFormGroup(G){return this.form.get(G.path)}addFormArray(G){this._setUpFormContainer(G)}removeFormArray(G){this._cleanUpFormContainer(G)}getFormArray(G){return this.form.get(G.path)}updateModel(G,ke){this.form.get(G.path).setValue(ke)}onSubmit(G){return this.submitted=!0,$o(this.form,this.directives),this.ngSubmit.emit(G),"dialog"===G?.target?.method}onReset(){this.resetForm()}resetForm(G=void 0){this.form.reset(G),this.submitted=!1}_updateDomValue(){this.directives.forEach(G=>{const ke=G.control,Wt=this.form.get(G.path);ke!==Wt&&(Ne(ke||null,G),(ee=>ee instanceof Zs)(Wt)&&(pe(Wt,G,this.callSetDisabledState),G.control=Wt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(G){const ke=this.form.get(G.path);An(ke,G),ke.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(G){if(this.form){const ke=this.form.get(G.path);ke&&function Yn(ee,K){return kr(ee,K)}(ke,G)&&ke.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Zn(this.form,this),this._oldForm&&kr(this._oldForm,this)}_checkFormPresent(){}}return ee.\u0275fac=function(G){return new(G||ee)(y.Y36(Tt,10),y.Y36(je,10),y.Y36(Yt,8))},ee.\u0275dir=y.lG2({type:ee,selectors:[["","formGroup",""]],hostBindings:function(G,ke){1&G&&y.NdJ("submit",function(Q){return ke.onSubmit(Q)})("reset",function(){return ke.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Sr]),y.qOj,y.TTD]}),ee})();const Ra={provide:Xe,useExisting:(0,y.Gpc)(()=>Yo),multi:!0};function ys(ee,K){return null==ee?`${K}`:(K&&"object"==typeof K&&(K="Object"),`${ee}: ${K}`.slice(0,50))}let Yo=(()=>{class ee extends $e{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(G){this._compareWith=G}writeValue(G){this.value=G;const Wt=ys(this._getOptionId(G),G);this.setProperty("value",Wt)}registerOnChange(G){this.onChange=ke=>{this.value=this._getOptionValue(ke),G(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(G){for(const ke of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ke),G))return ke;return null}_getOptionValue(G){const ke=function qi(ee){return ee.split(":")[0]}(G);return this._optionMap.has(ke)?this._optionMap.get(ke):G}}return ee.\u0275fac=function(){let K;return function(ke){return(K||(K=y.n5z(ee)))(ke||ee)}}(),ee.\u0275dir=y.lG2({type:ee,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(G,ke){1&G&&y.NdJ("change",function(Q){return ke.onChange(Q.target.value)})("blur",function(){return ke.onTouched()})},inputs:{compareWith:"compareWith"},features:[y._Bn([Ra]),y.qOj]}),ee})(),Go=(()=>{class ee{constructor(G,ke,Wt){this._element=G,this._renderer=ke,this._select=Wt,this._select&&(this.id=this._select._registerOption())}set ngValue(G){null!=this._select&&(this._select._optionMap.set(this.id,G),this._setElementValue(ys(this.id,G)),this._select.writeValue(this._select.value))}set value(G){this._setElementValue(G),this._select&&this._select.writeValue(this._select.value)}_setElementValue(G){this._renderer.setProperty(this._element.nativeElement,"value",G)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ee.\u0275fac=function(G){return new(G||ee)(y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(Yo,9))},ee.\u0275dir=y.lG2({type:ee,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ee})();const po={provide:Xe,useExisting:(0,y.Gpc)(()=>Si),multi:!0};function ta(ee,K){return null==ee?`${K}`:("string"==typeof K&&(K=`'${K}'`),K&&"object"==typeof K&&(K="Object"),`${ee}: ${K}`.slice(0,50))}let Si=(()=>{class ee extends $e{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(G){this._compareWith=G}writeValue(G){let ke;if(this.value=G,Array.isArray(G)){const Wt=G.map(Q=>this._getOptionId(Q));ke=(Q,X)=>{Q._setSelected(Wt.indexOf(X.toString())>-1)}}else ke=(Wt,Q)=>{Wt._setSelected(!1)};this._optionMap.forEach(ke)}registerOnChange(G){this.onChange=ke=>{const Wt=[],Q=ke.selectedOptions;if(void 0!==Q){const X=Q;for(let xe=0;xe<X.length;xe++){const ht=this._getOptionValue(X[xe].value);Wt.push(ht)}}else{const X=ke.options;for(let xe=0;xe<X.length;xe++){const We=X[xe];if(We.selected){const ht=this._getOptionValue(We.value);Wt.push(ht)}}}this.value=Wt,G(Wt)}}_registerOption(G){const ke=(this._idCounter++).toString();return this._optionMap.set(ke,G),ke}_getOptionId(G){for(const ke of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ke)._value,G))return ke;return null}_getOptionValue(G){const ke=function Eu(ee){return ee.split(":")[0]}(G);return this._optionMap.has(ke)?this._optionMap.get(ke)._value:G}}return ee.\u0275fac=function(){let K;return function(ke){return(K||(K=y.n5z(ee)))(ke||ee)}}(),ee.\u0275dir=y.lG2({type:ee,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(G,ke){1&G&&y.NdJ("change",function(Q){return ke.onChange(Q.target)})("blur",function(){return ke.onTouched()})},inputs:{compareWith:"compareWith"},features:[y._Bn([po]),y.qOj]}),ee})(),Ta=(()=>{class ee{constructor(G,ke,Wt){this._element=G,this._renderer=ke,this._select=Wt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(G){null!=this._select&&(this._value=G,this._setElementValue(ta(this.id,G)),this._select.writeValue(this._select.value))}set value(G){this._select?(this._value=G,this._setElementValue(ta(this.id,G)),this._select.writeValue(this._select.value)):this._setElementValue(G)}_setElementValue(G){this._renderer.setProperty(this._element.nativeElement,"value",G)}_setSelected(G){this._renderer.setProperty(this._element.nativeElement,"selected",G)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ee.\u0275fac=function(G){return new(G||ee)(y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(Si,9))},ee.\u0275dir=y.lG2({type:ee,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ee})(),Pi=(()=>{class ee{constructor(){this._validator=bt}ngOnChanges(G){if(this.inputName in G){const ke=this.normalizeInput(G[this.inputName].currentValue);this._enabled=this.enabled(ke),this._validator=this._enabled?this.createValidator(ke):bt,this._onChange&&this._onChange()}}validate(G){return this._validator(G)}registerOnValidatorChange(G){this._onChange=G}enabled(G){return null!=G}}return ee.\u0275fac=function(G){return new(G||ee)},ee.\u0275dir=y.lG2({type:ee,features:[y.TTD]}),ee})();const Ea={provide:Tt,useExisting:(0,y.Gpc)(()=>Is),multi:!0};let Is=(()=>{class ee extends Pi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=y.VuI,this.createValidator=G=>_e}enabled(G){return G}}return ee.\u0275fac=function(){let K;return function(ke){return(K||(K=y.n5z(ee)))(ke||ee)}}(),ee.\u0275dir=y.lG2({type:ee,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(G,ke){2&G&&y.uIk("required",ke._enabled?"":null)},inputs:{required:"required"},features:[y._Bn([Ea]),y.qOj]}),ee})();const jr={provide:Tt,useExisting:(0,y.Gpc)(()=>Oo),multi:!0};let Oo=(()=>{class ee extends Pi{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=G=>G,this.createValidator=G=>Pe(G)}}return ee.\u0275fac=function(){let K;return function(ke){return(K||(K=y.n5z(ee)))(ke||ee)}}(),ee.\u0275dir=y.lG2({type:ee,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(G,ke){2&G&&y.uIk("pattern",ke._enabled?ke.pattern:null)},inputs:{pattern:"pattern"},features:[y._Bn([jr]),y.qOj]}),ee})(),wa=(()=>{class ee{}return ee.\u0275fac=function(G){return new(G||ee)},ee.\u0275mod=y.oAB({type:ee}),ee.\u0275inj=y.cJS({imports:[mt]}),ee})(),Ki=(()=>{class ee{static withConfig(G){return{ngModule:ee,providers:[{provide:Yt,useValue:G.callSetDisabledState??Tn}]}}}return ee.\u0275fac=function(G){return new(G||ee)},ee.\u0275mod=y.oAB({type:ee}),ee.\u0275inj=y.cJS({imports:[wa]}),ee})(),du=(()=>{class ee{static withConfig(G){return{ngModule:ee,providers:[{provide:rn,useValue:G.warnOnNgModelWithFormControl??"always"},{provide:Yt,useValue:G.callSetDisabledState??Tn}]}}}return ee.\u0275fac=function(G){return new(G||ee)},ee.\u0275mod=y.oAB({type:ee}),ee.\u0275inj=y.cJS({imports:[wa]}),ee})()},6593:(nn,st,H)=>{"use strict";H.d(st,{Dx:()=>Pr,H7:()=>zi,b2:()=>wr,q6:()=>zn});var y=H(5879),fe=H(6814);class se extends fe.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class V extends se{static makeCurrent(){(0,fe.HT)(new V)}onAndCancel(be,ye,Ae){return be.addEventListener(ye,Ae),()=>{be.removeEventListener(ye,Ae)}}dispatchEvent(be,ye){be.dispatchEvent(ye)}remove(be){be.parentNode&&be.parentNode.removeChild(be)}createElement(be,ye){return(ye=ye||this.getDefaultDocument()).createElement(be)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(be){return be.nodeType===Node.ELEMENT_NODE}isShadowRoot(be){return be instanceof DocumentFragment}getGlobalEventTarget(be,ye){return"window"===ye?window:"document"===ye?be:"body"===ye?be.body:null}getBaseHref(be){const ye=function De(){return Ce=Ce||document.querySelector("base"),Ce?Ce.getAttribute("href"):null}();return null==ye?null:function Xe(ve){$e=$e||document.createElement("a"),$e.setAttribute("href",ve);const be=$e.pathname;return"/"===be.charAt(0)?be:`/${be}`}(ye)}resetBaseElement(){Ce=null}getUserAgent(){return window.navigator.userAgent}getCookie(be){return(0,fe.Mx)(document.cookie,be)}}let $e,Ce=null,Se=(()=>{class ve{build(){return new XMLHttpRequest}}return ve.\u0275fac=function(ye){return new(ye||ve)},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const Re=new y.OlP("EventManagerPlugins");let Le=(()=>{class ve{constructor(ye,Ae){this._zone=Ae,this._eventNameToPlugin=new Map,ye.forEach(yt=>{yt.manager=this}),this._plugins=ye.slice().reverse()}addEventListener(ye,Ae,yt){return this._findPluginFor(Ae).addEventListener(ye,Ae,yt)}getZone(){return this._zone}_findPluginFor(ye){let Ae=this._eventNameToPlugin.get(ye);if(Ae)return Ae;if(Ae=this._plugins.find(Yt=>Yt.supports(ye)),!Ae)throw new y.vHH(5101,!1);return this._eventNameToPlugin.set(ye,Ae),Ae}}return ve.\u0275fac=function(ye){return new(ye||ve)(y.LFG(Re),y.LFG(y.R0b))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class wt{constructor(be){this._doc=be}}const le="ng-app-id";let vt=(()=>{class ve{constructor(ye,Ae,yt,Yt={}){this.doc=ye,this.appId=Ae,this.nonce=yt,this.platformId=Yt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,fe.PM)(Yt),this.resetHostNodes()}addStyles(ye){for(const Ae of ye)1===this.changeUsageCount(Ae,1)&&this.onStyleAdded(Ae)}removeStyles(ye){for(const Ae of ye)this.changeUsageCount(Ae,-1)<=0&&this.onStyleRemoved(Ae)}ngOnDestroy(){const ye=this.styleNodesInDOM;ye&&(ye.forEach(Ae=>Ae.remove()),ye.clear());for(const Ae of this.getAllStyles())this.onStyleRemoved(Ae);this.resetHostNodes()}addHost(ye){this.hostNodes.add(ye);for(const Ae of this.getAllStyles())this.addStyleToHost(ye,Ae)}removeHost(ye){this.hostNodes.delete(ye)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(ye){for(const Ae of this.hostNodes)this.addStyleToHost(Ae,ye)}onStyleRemoved(ye){const Ae=this.styleRef;Ae.get(ye)?.elements?.forEach(yt=>yt.remove()),Ae.delete(ye)}collectServerRenderedStyles(){const ye=this.doc.head?.querySelectorAll(`style[${le}="${this.appId}"]`);if(ye?.length){const Ae=new Map;return ye.forEach(yt=>{null!=yt.textContent&&Ae.set(yt.textContent,yt)}),Ae}return null}changeUsageCount(ye,Ae){const yt=this.styleRef;if(yt.has(ye)){const Yt=yt.get(ye);return Yt.usage+=Ae,Yt.usage}return yt.set(ye,{usage:Ae,elements:[]}),Ae}getStyleElement(ye,Ae){const yt=this.styleNodesInDOM,Yt=yt?.get(Ae);if(Yt?.parentNode===ye)return yt.delete(Ae),Yt.removeAttribute(le),Yt;{const Tn=this.doc.createElement("style");return this.nonce&&Tn.setAttribute("nonce",this.nonce),Tn.textContent=Ae,this.platformIsServer&&Tn.setAttribute(le,this.appId),Tn}}addStyleToHost(ye,Ae){const yt=this.getStyleElement(ye,Ae);ye.appendChild(yt);const Yt=this.styleRef,Tn=Yt.get(Ae)?.elements;Tn?Tn.push(yt):Yt.set(Ae,{elements:[yt],usage:1})}resetHostNodes(){const ye=this.hostNodes;ye.clear(),ye.add(this.doc.head)}}return ve.\u0275fac=function(ye){return new(ye||ve)(y.LFG(fe.K0),y.LFG(y.AFp),y.LFG(y.Ojb,8),y.LFG(y.Lbi))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const qe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tt=/%COMP%/g,Ee=new y.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ut(ve,be){return be.map(ye=>ye.replace(Tt,ve))}let W=(()=>{class ve{constructor(ye,Ae,yt,Yt,Tn,he,pe,Ne=null){this.eventManager=ye,this.sharedStylesHost=Ae,this.appId=yt,this.removeStylesOnCompDestory=Yt,this.doc=Tn,this.platformId=he,this.ngZone=pe,this.nonce=Ne,this.rendererByCompId=new Map,this.platformIsServer=(0,fe.PM)(he),this.defaultRenderer=new ne(ye,Tn,pe,this.platformIsServer)}createRenderer(ye,Ae){if(!ye||!Ae)return this.defaultRenderer;this.platformIsServer&&Ae.encapsulation===y.ifc.ShadowDom&&(Ae={...Ae,encapsulation:y.ifc.Emulated});const yt=this.getOrCreateRenderer(ye,Ae);return yt instanceof ot?yt.applyToHost(ye):yt instanceof Xt&&yt.applyStyles(),yt}getOrCreateRenderer(ye,Ae){const yt=this.rendererByCompId;let Yt=yt.get(Ae.id);if(!Yt){const Tn=this.doc,he=this.ngZone,pe=this.eventManager,Ne=this.sharedStylesHost,ct=this.removeStylesOnCompDestory,cn=this.platformIsServer;switch(Ae.encapsulation){case y.ifc.Emulated:Yt=new ot(pe,Ne,Ae,this.appId,ct,Tn,he,cn);break;case y.ifc.ShadowDom:return new $t(pe,Ne,ye,Ae,Tn,he,this.nonce,cn);default:Yt=new Xt(pe,Ne,Ae,ct,Tn,he,cn)}Yt.onDestroy=()=>yt.delete(Ae.id),yt.set(Ae.id,Yt)}return Yt}ngOnDestroy(){this.rendererByCompId.clear()}}return ve.\u0275fac=function(ye){return new(ye||ve)(y.LFG(Le),y.LFG(vt),y.LFG(y.AFp),y.LFG(Ee),y.LFG(fe.K0),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(y.Ojb))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();class ne{constructor(be,ye,Ae,yt){this.eventManager=be,this.doc=ye,this.ngZone=Ae,this.platformIsServer=yt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(be,ye){return ye?this.doc.createElementNS(qe[ye]||ye,be):this.doc.createElement(be)}createComment(be){return this.doc.createComment(be)}createText(be){return this.doc.createTextNode(be)}appendChild(be,ye){(Bt(be)?be.content:be).appendChild(ye)}insertBefore(be,ye,Ae){be&&(Bt(be)?be.content:be).insertBefore(ye,Ae)}removeChild(be,ye){be&&be.removeChild(ye)}selectRootElement(be,ye){let Ae="string"==typeof be?this.doc.querySelector(be):be;if(!Ae)throw new y.vHH(5104,!1);return ye||(Ae.textContent=""),Ae}parentNode(be){return be.parentNode}nextSibling(be){return be.nextSibling}setAttribute(be,ye,Ae,yt){if(yt){ye=yt+":"+ye;const Yt=qe[yt];Yt?be.setAttributeNS(Yt,ye,Ae):be.setAttribute(ye,Ae)}else be.setAttribute(ye,Ae)}removeAttribute(be,ye,Ae){if(Ae){const yt=qe[Ae];yt?be.removeAttributeNS(yt,ye):be.removeAttribute(`${Ae}:${ye}`)}else be.removeAttribute(ye)}addClass(be,ye){be.classList.add(ye)}removeClass(be,ye){be.classList.remove(ye)}setStyle(be,ye,Ae,yt){yt&(y.JOm.DashCase|y.JOm.Important)?be.style.setProperty(ye,Ae,yt&y.JOm.Important?"important":""):be.style[ye]=Ae}removeStyle(be,ye,Ae){Ae&y.JOm.DashCase?be.style.removeProperty(ye):be.style[ye]=""}setProperty(be,ye,Ae){be[ye]=Ae}setValue(be,ye){be.nodeValue=ye}listen(be,ye,Ae){if("string"==typeof be&&!(be=(0,fe.q)().getGlobalEventTarget(this.doc,be)))throw new Error(`Unsupported event target ${be} for event ${ye}`);return this.eventManager.addEventListener(be,ye,this.decoratePreventDefault(Ae))}decoratePreventDefault(be){return ye=>{if("__ngUnwrap__"===ye)return be;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>be(ye)):be(ye))&&ye.preventDefault()}}}function Bt(ve){return"TEMPLATE"===ve.tagName&&void 0!==ve.content}class $t extends ne{constructor(be,ye,Ae,yt,Yt,Tn,he,pe){super(be,Yt,Tn,pe),this.sharedStylesHost=ye,this.hostEl=Ae,this.shadowRoot=Ae.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ne=ut(yt.id,yt.styles);for(const ct of Ne){const cn=document.createElement("style");he&&cn.setAttribute("nonce",he),cn.textContent=ct,this.shadowRoot.appendChild(cn)}}nodeOrShadowRoot(be){return be===this.hostEl?this.shadowRoot:be}appendChild(be,ye){return super.appendChild(this.nodeOrShadowRoot(be),ye)}insertBefore(be,ye,Ae){return super.insertBefore(this.nodeOrShadowRoot(be),ye,Ae)}removeChild(be,ye){return super.removeChild(this.nodeOrShadowRoot(be),ye)}parentNode(be){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(be)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Xt extends ne{constructor(be,ye,Ae,yt,Yt,Tn,he,pe){super(be,Yt,Tn,he),this.sharedStylesHost=ye,this.removeStylesOnCompDestory=yt,this.rendererUsageCount=0,this.styles=pe?ut(pe,Ae.styles):Ae.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class ot extends Xt{constructor(be,ye,Ae,yt,Yt,Tn,he,pe){const Ne=yt+"-"+Ae.id;super(be,ye,Ae,Yt,Tn,he,pe,Ne),this.contentAttr=function _e(ve){return"_ngcontent-%COMP%".replace(Tt,ve)}(Ne),this.hostAttr=function Fe(ve){return"_nghost-%COMP%".replace(Tt,ve)}(Ne)}applyToHost(be){this.applyStyles(),this.setAttribute(be,this.hostAttr,"")}createElement(be,ye){const Ae=super.createElement(be,ye);return super.setAttribute(Ae,this.contentAttr,""),Ae}}let Ye=(()=>{class ve extends wt{constructor(ye){super(ye)}supports(ye){return!0}addEventListener(ye,Ae,yt){return ye.addEventListener(Ae,yt,!1),()=>this.removeEventListener(ye,Ae,yt)}removeEventListener(ye,Ae,yt){return ye.removeEventListener(Ae,yt)}}return ve.\u0275fac=function(ye){return new(ye||ve)(y.LFG(fe.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const rt=["alt","control","meta","shift"],Qe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dt={alt:ve=>ve.altKey,control:ve=>ve.ctrlKey,meta:ve=>ve.metaKey,shift:ve=>ve.shiftKey};let at=(()=>{class ve extends wt{constructor(ye){super(ye)}supports(ye){return null!=ve.parseEventName(ye)}addEventListener(ye,Ae,yt){const Yt=ve.parseEventName(Ae),Tn=ve.eventCallback(Yt.fullKey,yt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,fe.q)().onAndCancel(ye,Yt.domEventName,Tn))}static parseEventName(ye){const Ae=ye.toLowerCase().split("."),yt=Ae.shift();if(0===Ae.length||"keydown"!==yt&&"keyup"!==yt)return null;const Yt=ve._normalizeKey(Ae.pop());let Tn="",he=Ae.indexOf("code");if(he>-1&&(Ae.splice(he,1),Tn="code."),rt.forEach(Ne=>{const ct=Ae.indexOf(Ne);ct>-1&&(Ae.splice(ct,1),Tn+=Ne+".")}),Tn+=Yt,0!=Ae.length||0===Yt.length)return null;const pe={};return pe.domEventName=yt,pe.fullKey=Tn,pe}static matchEventFullKeyCode(ye,Ae){let yt=Qe[ye.key]||ye.key,Yt="";return Ae.indexOf("code.")>-1&&(yt=ye.code,Yt="code."),!(null==yt||!yt)&&(yt=yt.toLowerCase()," "===yt?yt="space":"."===yt&&(yt="dot"),rt.forEach(Tn=>{Tn!==yt&&(0,dt[Tn])(ye)&&(Yt+=Tn+".")}),Yt+=yt,Yt===Ae)}static eventCallback(ye,Ae,yt){return Yt=>{ve.matchEventFullKeyCode(Yt,ye)&&yt.runGuarded(()=>Ae(Yt))}}static _normalizeKey(ye){return"esc"===ye?"escape":ye}}return ve.\u0275fac=function(ye){return new(ye||ve)(y.LFG(fe.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const zn=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:fe.bD},{provide:y.g9A,useValue:function Kt(){V.makeCurrent()},multi:!0},{provide:fe.K0,useFactory:function Fn(){return(0,y.RDi)(document),document},deps:[]}]),ur=new y.OlP(""),rr=[{provide:y.rWj,useClass:class et{addToWindow(be){y.dqk.getAngularTestability=(Ae,yt=!0)=>{const Yt=be.findTestabilityInTree(Ae,yt);if(null==Yt)throw new y.vHH(5103,!1);return Yt},y.dqk.getAllAngularTestabilities=()=>be.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>be.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(Ae=>{const yt=y.dqk.getAllAngularTestabilities();let Yt=yt.length,Tn=!1;const he=function(pe){Tn=Tn||pe,Yt--,0==Yt&&Ae(Tn)};yt.forEach(function(pe){pe.whenStable(he)})})}findTestabilityInTree(be,ye,Ae){return null==ye?null:be.getTestability(ye)??(Ae?(0,fe.q)().isShadowRoot(ye)?this.findTestabilityInTree(be,ye.host,!0):this.findTestabilityInTree(be,ye.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],$n=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function wn(){return new y.qLn},deps:[]},{provide:Re,useClass:Ye,multi:!0,deps:[fe.K0,y.R0b,y.Lbi]},{provide:Re,useClass:at,multi:!0,deps:[fe.K0]},W,vt,Le,{provide:y.FYo,useExisting:W},{provide:fe.JF,useClass:Se,deps:[]},[]];let wr=(()=>{class ve{constructor(ye){}static withServerTransition(ye){return{ngModule:ve,providers:[{provide:y.AFp,useValue:ye.appId}]}}}return ve.\u0275fac=function(ye){return new(ye||ve)(y.LFG(ur,12))},ve.\u0275mod=y.oAB({type:ve}),ve.\u0275inj=y.cJS({providers:[...$n,...rr],imports:[fe.ez,y.hGG]}),ve})(),Pr=(()=>{class ve{constructor(ye){this._doc=ye}getTitle(){return this._doc.title}setTitle(ye){this._doc.title=ye||""}}return ve.\u0275fac=function(ye){return new(ye||ve)(y.LFG(fe.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:function(ye){let Ae=null;return Ae=ye?new ye:function Mr(){return new Pr((0,y.LFG)(fe.K0))}(),Ae},providedIn:"root"}),ve})();typeof window<"u"&&window;let zi=(()=>{class ve{}return ve.\u0275fac=function(ye){return new(ye||ve)},ve.\u0275prov=y.Yz7({token:ve,factory:function(ye){let Ae=null;return Ae=ye?new(ye||ve):y.LFG(Xi),Ae},providedIn:"root"}),ve})(),Xi=(()=>{class ve extends zi{constructor(ye){super(),this._doc=ye}sanitize(ye,Ae){if(null==Ae)return null;switch(ye){case y.q3G.NONE:return Ae;case y.q3G.HTML:return(0,y.qzn)(Ae,"HTML")?(0,y.z3N)(Ae):(0,y.EiD)(this._doc,String(Ae)).toString();case y.q3G.STYLE:return(0,y.qzn)(Ae,"Style")?(0,y.z3N)(Ae):Ae;case y.q3G.SCRIPT:if((0,y.qzn)(Ae,"Script"))return(0,y.z3N)(Ae);throw new y.vHH(5200,!1);case y.q3G.URL:return(0,y.qzn)(Ae,"URL")?(0,y.z3N)(Ae):(0,y.mCW)(String(Ae));case y.q3G.RESOURCE_URL:if((0,y.qzn)(Ae,"ResourceURL"))return(0,y.z3N)(Ae);throw new y.vHH(5201,!1);default:throw new y.vHH(5202,!1)}}bypassSecurityTrustHtml(ye){return(0,y.JVY)(ye)}bypassSecurityTrustStyle(ye){return(0,y.L6k)(ye)}bypassSecurityTrustScript(ye){return(0,y.eBb)(ye)}bypassSecurityTrustUrl(ye){return(0,y.LAX)(ye)}bypassSecurityTrustResourceUrl(ye){return(0,y.pB0)(ye)}}return ve.\u0275fac=function(ye){return new(ye||ve)(y.LFG(fe.K0))},ve.\u0275prov=y.Yz7({token:ve,factory:function(ye){let Ae=null;return Ae=ye?new ye:function di(ve){return new Xi(ve.get(fe.K0))}(y.LFG(y.zs3)),Ae},providedIn:"root"}),ve})()},8076:(nn,st,H)=>{"use strict";H.d(st,{gz:()=>Dn,m2:()=>oi,F0:()=>bs,rH:()=>ja,Od:()=>Nc,Bz:()=>ic,lC:()=>Ji});var y=H(5879),fe=H(5592),se=H(4674),Ce=H(2459),De=H(2096),$e=H(5619),Xe=H(2572),et=H(6973),Se=H(5211),Re=H(4829);function Le(A){return new fe.y(R=>{(0,Re.Xf)(A()).subscribe(R)})}var wt=H(8407);function le(A,R){const D=(0,se.m)(A)?A:()=>A,B=oe=>oe.error(D());return new fe.y(R?oe=>R.schedule(B,0,oe):B)}var vt=H(6232),qe=H(7394),Tt=H(9360),je=H(8251);function Ve(){return(0,Tt.e)((A,R)=>{let D=null;A._refCount++;const B=(0,je.x)(R,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(D=null);const oe=A._connection,Me=D;D=null,oe&&(!Me||oe===Me)&&oe.unsubscribe(),R.unsubscribe()});A.subscribe(B),B.closed||(D=A.connect())})}class J extends fe.y{constructor(R,D){super(),this.source=R,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,Tt.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new qe.w0;const D=this.getSubject();R.add(this.source.subscribe((0,je.x)(D,void 0,()=>{this._teardown(),D.complete()},B=>{this._teardown(),D.error(B)},()=>this._teardown()))),R.closed&&(this._connection=null,R=qe.w0.EMPTY)}return R}refCount(){return Ve()(this)}}var Y=H(8645),Ee=H(6814),_e=H(7398),Fe=H(4664),ut=H(8180),W=H(7921),ne=H(2181),Pe=H(1631),bt=H(1374);function Bt(A,R){return(0,se.m)(R)?(0,Pe.z)(A,R,1):(0,Pe.z)(A,1)}var $t=H(9397);function Xt(A){return(0,Tt.e)((R,D)=>{let Me,B=null,oe=!1;B=R.subscribe((0,je.x)(D,void 0,void 0,Oe=>{Me=(0,Re.Xf)(A(Oe,Xt(A)(R))),B?(B.unsubscribe(),B=null,Me.subscribe(D)):oe=!0})),oe&&(B.unsubscribe(),B=null,Me.subscribe(D))})}var ot=H(6699),Ye=H(3572);function rt(A){return A<=0?()=>vt.E:(0,Tt.e)((R,D)=>{let B=[];R.subscribe((0,je.x)(D,oe=>{B.push(oe),A<B.length&&B.shift()},()=>{for(const oe of B)D.next(oe);D.complete()},void 0,()=>{B=null}))})}var Qe=H(3026),dt=H(2737),Ot=H(975);function qt(A){return(0,Tt.e)((R,D)=>{try{R.subscribe(D)}finally{D.add(A)}})}var jt=H(7537),Lt=H(6593);const Kt="primary",wn=Symbol("RouteTitle");class Fn{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const D=this.params[R];return Array.isArray(D)?D[0]:D}return null}getAll(R){if(this.has(R)){const D=this.params[R];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function jn(A){return new Fn(A)}function zn(A,R,D){const B=D.path.split("/");if(B.length>A.length||"full"===D.pathMatch&&(R.hasChildren()||B.length<A.length))return null;const oe={};for(let Me=0;Me<B.length;Me++){const Oe=B[Me],St=A[Me];if(Oe.startsWith(":"))oe[Oe.substring(1)]=St;else if(Oe!==St.path)return null}return{consumed:A.slice(0,B.length),posParams:oe}}function rr(A,R){const D=A?Object.keys(A):void 0,B=R?Object.keys(R):void 0;if(!D||!B||D.length!=B.length)return!1;let oe;for(let Me=0;Me<D.length;Me++)if(oe=D[Me],!$n(A[oe],R[oe]))return!1;return!0}function $n(A,R){if(Array.isArray(A)&&Array.isArray(R)){if(A.length!==R.length)return!1;const D=[...A].sort(),B=[...R].sort();return D.every((oe,Me)=>B[Me]===oe)}return A===R}function wr(A){return A.length>0?A[A.length-1]:null}function Yr(A){return function V(A){return!!A&&(A instanceof fe.y||(0,se.m)(A.lift)&&(0,se.m)(A.subscribe))}(A)?A:(0,y.QGY)(A)?(0,Ce.D)(Promise.resolve(A)):(0,De.of)(A)}const Cr={exact:function yi(A,R,D){if(!_i(A.segments,R.segments)||!Nn(A.segments,R.segments,D)||A.numberOfChildren!==R.numberOfChildren)return!1;for(const B in R.children)if(!A.children[B]||!yi(A.children[B],R.children[B],D))return!1;return!0},subset:dn},Hr={exact:function Pr(A,R){return rr(A,R)},subset:function Ir(A,R){return Object.keys(R).length<=Object.keys(A).length&&Object.keys(R).every(D=>$n(A[D],R[D]))},ignored:()=>!0};function Mr(A,R,D){return Cr[D.paths](A.root,R.root,D.matrixParams)&&Hr[D.queryParams](A.queryParams,R.queryParams)&&!("exact"===D.fragment&&A.fragment!==R.fragment)}function dn(A,R,D){return Bn(A,R,R.segments,D)}function Bn(A,R,D,B){if(A.segments.length>D.length){const oe=A.segments.slice(0,D.length);return!(!_i(oe,D)||R.hasChildren()||!Nn(oe,D,B))}if(A.segments.length===D.length){if(!_i(A.segments,D)||!Nn(A.segments,D,B))return!1;for(const oe in R.children)if(!A.children[oe]||!dn(A.children[oe],R.children[oe],B))return!1;return!0}{const oe=D.slice(0,A.segments.length),Me=D.slice(A.segments.length);return!!(_i(A.segments,oe)&&Nn(A.segments,oe,B)&&A.children[Kt])&&Bn(A.children[Kt],R,Me,B)}}function Nn(A,R,D){return R.every((B,oe)=>Hr[D](A[oe].parameters,B.parameters))}class xr{constructor(R=new sr([],{}),D={},B=null){this.root=R,this.queryParams=D,this.fragment=B}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return mr.serialize(this)}}class sr{constructor(R,D){this.segments=R,this.children=D,this.parent=null,Object.values(D).forEach(B=>B.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ns(this)}}class Gi{constructor(R,D){this.path=R,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=jn(this.parameters)),this._parameterMap}toString(){return os(this)}}function _i(A,R){return A.length===R.length&&A.every((D,B)=>D.path===R[B].path)}let Rr=(()=>{class A{}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:function(){return new On},providedIn:"root"}),A})();class On{parse(R){const D=new Tn(R);return new xr(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(R){const D=`/${gr(R.root,!0)}`,B=function vs(A){const R=Object.keys(A).map(D=>{const B=A[D];return Array.isArray(B)?B.map(oe=>`${di(D)}=${di(oe)}`).join("&"):`${di(D)}=${di(B)}`}).filter(D=>!!D);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${D}${B}${"string"==typeof R.fragment?`#${function Xi(A){return encodeURI(A)}(R.fragment)}`:""}`}}const mr=new On;function ns(A){return A.segments.map(R=>os(R)).join("/")}function gr(A,R){if(!A.hasChildren())return ns(A);if(R){const D=A.children[Kt]?gr(A.children[Kt],!1):"",B=[];return Object.entries(A.children).forEach(([oe,Me])=>{oe!==Kt&&B.push(`${oe}:${gr(Me,!1)}`)}),B.length>0?`${D}(${B.join("//")})`:D}{const D=function Ws(A,R){let D=[];return Object.entries(A.children).forEach(([B,oe])=>{B===Kt&&(D=D.concat(R(oe,B)))}),Object.entries(A.children).forEach(([B,oe])=>{B!==Kt&&(D=D.concat(R(oe,B)))}),D}(A,(B,oe)=>oe===Kt?[gr(A.children[Kt],!1)]:[`${oe}:${gr(B,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Kt]?`${ns(A)}/${D[0]}`:`${ns(A)}/(${D.join("//")})`}}function zi(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function di(A){return zi(A).replace(/%3B/gi,";")}function bi(A){return zi(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wi(A){return decodeURIComponent(A)}function Vr(A){return wi(A.replace(/\+/g,"%20"))}function os(A){return`${bi(A.path)}${function Ar(A){return Object.keys(A).map(R=>`;${bi(R)}=${bi(A[R])}`).join("")}(A.parameters)}`}const Rn=/^[^\/()?;#]+/;function tt(A){const R=A.match(Rn);return R?R[0]:""}const ve=/^[^\/()?;=#]+/,ye=/^[^=?&#]+/,yt=/^[^&#]+/;class Tn{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sr([],{}):new sr([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let B={};return this.peekStartsWith("(")&&(B=this.parseParens(!1)),(R.length>0||Object.keys(D).length>0)&&(B[Kt]=new sr(R,D)),B}parseSegment(){const R=tt(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(R),new Gi(wi(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const D=function be(A){const R=A.match(ve);return R?R[0]:""}(this.remaining);if(!D)return;this.capture(D);let B="";if(this.consumeOptional("=")){const oe=tt(this.remaining);oe&&(B=oe,this.capture(B))}R[wi(D)]=wi(B)}parseQueryParam(R){const D=function Ae(A){const R=A.match(ye);return R?R[0]:""}(this.remaining);if(!D)return;this.capture(D);let B="";if(this.consumeOptional("=")){const Oe=function Yt(A){const R=A.match(yt);return R?R[0]:""}(this.remaining);Oe&&(B=Oe,this.capture(B))}const oe=Vr(D),Me=Vr(B);if(R.hasOwnProperty(oe)){let Oe=R[oe];Array.isArray(Oe)||(Oe=[Oe],R[oe]=Oe),Oe.push(Me)}else R[oe]=Me}parseParens(R){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const B=tt(this.remaining),oe=this.remaining[B.length];if("/"!==oe&&")"!==oe&&";"!==oe)throw new y.vHH(4010,!1);let Me;B.indexOf(":")>-1?(Me=B.slice(0,B.indexOf(":")),this.capture(Me),this.capture(":")):R&&(Me=Kt);const Oe=this.parseChildren();D[Me]=1===Object.keys(Oe).length?Oe[Kt]:new sr([],Oe),this.consumeOptional("//")}return D}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new y.vHH(4011,!1)}}function he(A){return A.segments.length>0?new sr([],{[Kt]:A}):A}function pe(A){const R={};for(const B of Object.keys(A.children)){const Me=pe(A.children[B]);if(B===Kt&&0===Me.segments.length&&Me.hasChildren())for(const[Oe,St]of Object.entries(Me.children))R[Oe]=St;else(Me.segments.length>0||Me.hasChildren())&&(R[B]=Me)}return function Ne(A){if(1===A.numberOfChildren&&A.children[Kt]){const R=A.children[Kt];return new sr(A.segments.concat(R.segments),R.children)}return A}(new sr(A.segments,R))}function ct(A){return A instanceof xr}function Zn(A){let R;const oe=he(function D(Me){const Oe={};for(const _n of Me.children){const Hn=D(_n);Oe[_n.outlet]=Hn}const St=new sr(Me.url,Oe);return Me===A&&(R=St),St}(A.root));return R??oe}function kr(A,R,D,B){let oe=A;for(;oe.parent;)oe=oe.parent;if(0===R.length)return Et(oe,oe,oe,D,B);const Me=function Yn(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new An(!0,0,A);let R=0,D=!1;const B=A.reduce((oe,Me,Oe)=>{if("object"==typeof Me&&null!=Me){if(Me.outlets){const St={};return Object.entries(Me.outlets).forEach(([_n,Hn])=>{St[_n]="string"==typeof Hn?Hn.split("/"):Hn}),[...oe,{outlets:St}]}if(Me.segmentPath)return[...oe,Me.segmentPath]}return"string"!=typeof Me?[...oe,Me]:0===Oe?(Me.split("/").forEach((St,_n)=>{0==_n&&"."===St||(0==_n&&""===St?D=!0:".."===St?R++:""!=St&&oe.push(St))}),oe):[...oe,Me]},[]);return new An(D,R,B)}(R);if(Me.toRoot())return Et(oe,oe,new sr([],{}),D,B);const Oe=function yr(A,R,D){if(A.isAbsolute)return new ir(R,!0,0);if(!D)return new ir(R,!1,NaN);if(null===D.parent)return new ir(D,!0,0);const B=ti(A.commands[0])?0:1;return function Qr(A,R,D){let B=A,oe=R,Me=D;for(;Me>oe;){if(Me-=oe,B=B.parent,!B)throw new y.vHH(4005,!1);oe=B.segments.length}return new ir(B,!1,oe-Me)}(D,D.segments.length-1+B,A.numberOfDoubleDots)}(Me,oe,A),St=Oe.processChildren?rs(Oe.segmentGroup,Oe.index,Me.commands):pi(Oe.segmentGroup,Oe.index,Me.commands);return Et(oe,Oe.segmentGroup,St,D,B)}function ti(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Ut(A){return"object"==typeof A&&null!=A&&A.outlets}function Et(A,R,D,B,oe){let Oe,Me={};B&&Object.entries(B).forEach(([_n,Hn])=>{Me[_n]=Array.isArray(Hn)?Hn.map(fr=>`${fr}`):`${Hn}`}),Oe=A===R?D:Jt(A,R,D);const St=he(pe(Oe));return new xr(St,Me,oe)}function Jt(A,R,D){const B={};return Object.entries(A.children).forEach(([oe,Me])=>{B[oe]=Me===R?D:Jt(Me,R,D)}),new sr(A.segments,B)}class An{constructor(R,D,B){if(this.isAbsolute=R,this.numberOfDoubleDots=D,this.commands=B,R&&B.length>0&&ti(B[0]))throw new y.vHH(4003,!1);const oe=B.find(Ut);if(oe&&oe!==wr(B))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ir{constructor(R,D,B){this.segmentGroup=R,this.processChildren=D,this.index=B}}function pi(A,R,D){if(A||(A=new sr([],{})),0===A.segments.length&&A.hasChildren())return rs(A,R,D);const B=function Ks(A,R,D){let B=0,oe=R;const Me={match:!1,pathIndex:0,commandIndex:0};for(;oe<A.segments.length;){if(B>=D.length)return Me;const Oe=A.segments[oe],St=D[B];if(Ut(St))break;const _n=`${St}`,Hn=B<D.length-1?D[B+1]:null;if(oe>0&&void 0===_n)break;if(_n&&Hn&&"object"==typeof Hn&&void 0===Hn.outlets){if(!Ls(_n,Hn,Oe))return Me;B+=2}else{if(!Ls(_n,{},Oe))return Me;B++}oe++}return{match:!0,pathIndex:oe,commandIndex:B}}(A,R,D),oe=D.slice(B.commandIndex);if(B.match&&B.pathIndex<A.segments.length){const Me=new sr(A.segments.slice(0,B.pathIndex),{});return Me.children[Kt]=new sr(A.segments.slice(B.pathIndex),A.children),rs(Me,0,oe)}return B.match&&0===oe.length?new sr(A.segments,{}):B.match&&!A.hasChildren()?$o(A,R,D):B.match?rs(A,0,oe):$o(A,R,D)}function rs(A,R,D){if(0===D.length)return new sr(A.segments,{});{const B=function fi(A){return Ut(A[0])?A[0].outlets:{[Kt]:A}}(D),oe={};if(!B[Kt]&&A.children[Kt]&&1===A.numberOfChildren&&0===A.children[Kt].segments.length){const Me=rs(A.children[Kt],R,D);return new sr(A.segments,Me.children)}return Object.entries(B).forEach(([Me,Oe])=>{"string"==typeof Oe&&(Oe=[Oe]),null!==Oe&&(oe[Me]=pi(A.children[Me],R,Oe))}),Object.entries(A.children).forEach(([Me,Oe])=>{void 0===B[Me]&&(oe[Me]=Oe)}),new sr(A.segments,oe)}}function $o(A,R,D){const B=A.segments.slice(0,R);let oe=0;for(;oe<D.length;){const Me=D[oe];if(Ut(Me)){const _n=Ns(Me.outlets);return new sr(B,_n)}if(0===oe&&ti(D[0])){B.push(new Gi(A.segments[R].path,la(D[0]))),oe++;continue}const Oe=Ut(Me)?Me.outlets[Kt]:`${Me}`,St=oe<D.length-1?D[oe+1]:null;Oe&&St&&ti(St)?(B.push(new Gi(Oe,la(St))),oe+=2):(B.push(new Gi(Oe,{})),oe++)}return new sr(B,{})}function Ns(A){const R={};return Object.entries(A).forEach(([D,B])=>{"string"==typeof B&&(B=[B]),null!==B&&(R[D]=$o(new sr([],{}),0,B))}),R}function la(A){const R={};return Object.entries(A).forEach(([D,B])=>R[D]=`${B}`),R}function Ls(A,R,D){return A==D.path&&rr(R,D.parameters)}const Ho="imperative";class Ss{constructor(R,D){this.id=R,this.url=D}}class no extends Ss{constructor(R,D,B="imperative",oe=null){super(R,D),this.type=0,this.navigationTrigger=B,this.restoredState=oe}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oi extends Ss{constructor(R,D,B){super(R,D),this.urlAfterRedirects=B,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fo extends Ss{constructor(R,D,B,oe){super(R,D),this.reason=B,this.code=oe,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zs extends Ss{constructor(R,D,B,oe){super(R,D),this.reason=B,this.code=oe,this.type=16}}class ya extends Ss{constructor(R,D,B,oe){super(R,D),this.error=B,this.target=oe,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _a extends Ss{constructor(R,D,B,oe){super(R,D),this.urlAfterRedirects=B,this.state=oe,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ro extends Ss{constructor(R,D,B,oe){super(R,D),this.urlAfterRedirects=B,this.state=oe,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ds extends Ss{constructor(R,D,B,oe,Me){super(R,D),this.urlAfterRedirects=B,this.state=oe,this.shouldActivate=Me,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ba extends Ss{constructor(R,D,B,oe){super(R,D),this.urlAfterRedirects=B,this.state=oe,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ju extends Ss{constructor(R,D,B,oe){super(R,D),this.urlAfterRedirects=B,this.state=oe,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fs{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class za{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class as{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qa{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class As{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _r{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class us{constructor(R,D,B){this.routerEvent=R,this.position=D,this.anchor=B,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Mo{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new is,this.attachRef=null}}let is=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(D,B){const oe=this.getOrCreateContext(D);oe.outlet=B,this.contexts.set(D,oe)}onChildOutletDestroyed(D){const B=this.getContext(D);B&&(B.outlet=null,B.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let B=this.getContext(D);return B||(B=new Mo,this.contexts.set(D,B)),B}getContext(D){return this.contexts.get(D)||null}}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();class Ys{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const D=this.pathFromRoot(R);return D.length>1?D[D.length-2]:null}children(R){const D=mt(R,this._root);return D?D.children.map(B=>B.value):[]}firstChild(R){const D=mt(R,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(R){const D=ft(R,this._root);return D.length<2?[]:D[D.length-2].children.map(oe=>oe.value).filter(oe=>oe!==R)}pathFromRoot(R){return ft(R,this._root).map(D=>D.value)}}function mt(A,R){if(A===R.value)return R;for(const D of R.children){const B=mt(A,D);if(B)return B}return null}function ft(A,R){if(A===R.value)return[R];for(const D of R.children){const B=ft(A,D);if(B.length)return B.unshift(R),B}return[]}class Ct{constructor(R,D){this.value=R,this.children=D}toString(){return`TreeNode(${this.value})`}}function tn(A){const R={};return A&&A.children.forEach(D=>R[D.value.outlet]=D),R}class ln extends Ys{constructor(R,D){super(R),this.snapshot=D,Li(this,R)}toString(){return this.snapshot.toString()}}function rn(A,R){const D=function Ln(A,R){const Oe=new Ni([],{},{},"",{},Kt,R,null,{});return new ls("",new Ct(Oe,[]))}(0,R),B=new $e.X([new Gi("",{})]),oe=new $e.X({}),Me=new $e.X({}),Oe=new $e.X({}),St=new $e.X(""),_n=new Dn(B,oe,Oe,St,Me,Kt,R,D.root);return _n.snapshot=D.root,new ln(new Ct(_n,[]),D)}class Dn{constructor(R,D,B,oe,Me,Oe,St,_n){this.urlSubject=R,this.paramsSubject=D,this.queryParamsSubject=B,this.fragmentSubject=oe,this.dataSubject=Me,this.outlet=Oe,this.component=St,this._futureSnapshot=_n,this.title=this.dataSubject?.pipe((0,_e.U)(Hn=>Hn[wn]))??(0,De.of)(void 0),this.url=R,this.params=D,this.queryParams=B,this.fragment=oe,this.data=Me}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_e.U)(R=>jn(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_e.U)(R=>jn(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Sr(A,R="emptyOnly"){const D=A.pathFromRoot;let B=0;if("always"!==R)for(B=D.length-1;B>=1;){const oe=D[B],Me=D[B-1];if(oe.routeConfig&&""===oe.routeConfig.path)B--;else{if(Me.component)break;B--}}return function $s(A){return A.reduce((R,D)=>({params:{...R.params,...D.params},data:{...R.data,...D.data},resolve:{...D.data,...R.resolve,...D.routeConfig?.data,...D._resolvedData}}),{params:{},data:{},resolve:{}})}(D.slice(B))}class Ni{get title(){return this.data?.[wn]}constructor(R,D,B,oe,Me,Oe,St,_n,Hn){this.url=R,this.params=D,this.queryParams=B,this.fragment=oe,this.data=Me,this.outlet=Oe,this.component=St,this.routeConfig=_n,this._resolve=Hn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(B=>B.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ls extends Ys{constructor(R,D){super(D),this.url=R,Li(this,D)}toString(){return Xr(this._root)}}function Li(A,R){R.value._routerState=A,R.children.forEach(D=>Li(A,D))}function Xr(A){const R=A.children.length>0?` { ${A.children.map(Xr).join(", ")} } `:"";return`${A.value}${R}`}function Qs(A){if(A.snapshot){const R=A.snapshot,D=A._futureSnapshot;A.snapshot=D,rr(R.queryParams,D.queryParams)||A.queryParamsSubject.next(D.queryParams),R.fragment!==D.fragment&&A.fragmentSubject.next(D.fragment),rr(R.params,D.params)||A.paramsSubject.next(D.params),function ur(A,R){if(A.length!==R.length)return!1;for(let D=0;D<A.length;++D)if(!rr(A[D],R[D]))return!1;return!0}(R.url,D.url)||A.urlSubject.next(D.url),rr(R.data,D.data)||A.dataSubject.next(D.data)}else A.snapshot=A._futureSnapshot,A.dataSubject.next(A._futureSnapshot.data)}function br(A,R){const D=rr(A.params,R.params)&&function Zr(A,R){return _i(A,R)&&A.every((D,B)=>rr(D.parameters,R[B].parameters))}(A.url,R.url);return D&&!(!A.parent!=!R.parent)&&(!A.parent||br(A.parent,R.parent))}let Ji=(()=>{class A{constructor(){this.activated=null,this._activatedRoute=null,this.name=Kt,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(is),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb),this.inputBinder=(0,y.f3M)(ys,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(D){if(D.name){const{firstChange:B,previousValue:oe}=D.name;if(B)return;this.isTrackedInParentContexts(oe)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(oe)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(D){return this.parentContexts.getContext(D)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const D=this.parentContexts.getContext(this.name);D?.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,!1);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,B){this.activated=D,this._activatedRoute=B,this.location.insert(D.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,B){if(this.isActivated)throw new y.vHH(4013,!1);this._activatedRoute=D;const oe=this.location,Oe=D.snapshot.component,St=this.parentContexts.getOrCreateContext(this.name).children,_n=new Ra(D,St,oe.injector);this.activated=oe.createComponent(Oe,{index:oe.length,injector:_n,environmentInjector:B??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(D){return new(D||A)},A.\u0275dir=y.lG2({type:A,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]}),A})();class Ra{constructor(R,D,B){this.route=R,this.childContexts=D,this.parent=B}get(R,D){return R===Dn?this.route:R===is?this.childContexts:this.parent.get(R,D)}}const ys=new y.OlP("");let qi=(()=>{class A{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(D){this.unsubscribeFromRouteData(D),this.subscribeToRouteData(D)}unsubscribeFromRouteData(D){this.outletDataSubscriptions.get(D)?.unsubscribe(),this.outletDataSubscriptions.delete(D)}subscribeToRouteData(D){const{activatedRoute:B}=D,oe=(0,Xe.a)([B.queryParams,B.params,B.data]).pipe((0,Fe.w)(([Me,Oe,St],_n)=>(St={...Me,...Oe,...St},0===_n?(0,De.of)(St):Promise.resolve(St)))).subscribe(Me=>{if(!D.isActivated||!D.activatedComponentRef||D.activatedRoute!==B||null===B.component)return void this.unsubscribeFromRouteData(D);const Oe=(0,y.qFp)(B.component);if(Oe)for(const{templateName:St}of Oe.inputs)D.activatedComponentRef.setInput(St,Me[St]);else this.unsubscribeFromRouteData(D)});this.outletDataSubscriptions.set(D,oe)}}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac}),A})();function Go(A,R,D){if(D&&A.shouldReuseRoute(R.value,D.value.snapshot)){const B=D.value;B._futureSnapshot=R.value;const oe=function po(A,R,D){return R.children.map(B=>{for(const oe of D.children)if(A.shouldReuseRoute(B.value,oe.value.snapshot))return Go(A,B,oe);return Go(A,B)})}(A,R,D);return new Ct(B,oe)}{if(A.shouldAttach(R.value)){const Me=A.retrieve(R.value);if(null!==Me){const Oe=Me.route;return Oe.value._futureSnapshot=R.value,Oe.children=R.children.map(St=>Go(A,St)),Oe}}const B=function ta(A){return new Dn(new $e.X(A.url),new $e.X(A.params),new $e.X(A.queryParams),new $e.X(A.fragment),new $e.X(A.data),A.outlet,A.component,A)}(R.value),oe=R.children.map(Me=>Go(A,Me));return new Ct(B,oe)}}const Eu="ngNavigationCancelingError";function ks(A,R){const{redirectTo:D,navigationBehaviorOptions:B}=ct(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,oe=Si(!1,0,R);return oe.url=D,oe.navigationBehaviorOptions=B,oe}function Si(A,R,D){const B=new Error("NavigationCancelingError: "+(A||""));return B[Eu]=!0,B.cancellationCode=R,D&&(B.url=D),B}function Ta(A){return na(A)&&ct(A.url)}function na(A){return A&&A[Eu]}let Fr=(()=>{class A{}return A.\u0275fac=function(D){return new(D||A)},A.\u0275cmp=y.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(D,B){1&D&&y._UZ(0,"router-outlet")},dependencies:[Ji],encapsulation:2}),A})();function _s(A){const R=A.children&&A.children.map(_s),D=R?{...A,children:R}:{...A};return!D.component&&!D.loadComponent&&(R||D.loadChildren)&&D.outlet&&D.outlet!==Kt&&(D.component=Fr),D}function Fi(A){return A.outlet||Kt}function js(A){if(!A)return null;if(A.routeConfig?._injector)return A.routeConfig._injector;for(let R=A.parent;R;R=R.parent){const D=R.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class jr{constructor(R,D,B,oe,Me){this.routeReuseStrategy=R,this.futureState=D,this.currState=B,this.forwardEvent=oe,this.inputBindingEnabled=Me}activate(R){const D=this.futureState._root,B=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,B,R),Qs(this.futureState.root),this.activateChildRoutes(D,B,R)}deactivateChildRoutes(R,D,B){const oe=tn(D);R.children.forEach(Me=>{const Oe=Me.value.outlet;this.deactivateRoutes(Me,oe[Oe],B),delete oe[Oe]}),Object.values(oe).forEach(Me=>{this.deactivateRouteAndItsChildren(Me,B)})}deactivateRoutes(R,D,B){const oe=R.value,Me=D?D.value:null;if(oe===Me)if(oe.component){const Oe=B.getContext(oe.outlet);Oe&&this.deactivateChildRoutes(R,D,Oe.children)}else this.deactivateChildRoutes(R,D,B);else Me&&this.deactivateRouteAndItsChildren(D,B)}deactivateRouteAndItsChildren(R,D){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,D):this.deactivateRouteAndOutlet(R,D)}detachAndStoreRouteSubtree(R,D){const B=D.getContext(R.value.outlet),oe=B&&R.value.component?B.children:D,Me=tn(R);for(const Oe of Object.keys(Me))this.deactivateRouteAndItsChildren(Me[Oe],oe);if(B&&B.outlet){const Oe=B.outlet.detach(),St=B.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:Oe,route:R,contexts:St})}}deactivateRouteAndOutlet(R,D){const B=D.getContext(R.value.outlet),oe=B&&R.value.component?B.children:D,Me=tn(R);for(const Oe of Object.keys(Me))this.deactivateRouteAndItsChildren(Me[Oe],oe);B&&(B.outlet&&(B.outlet.deactivate(),B.children.onOutletDeactivated()),B.attachRef=null,B.route=null)}activateChildRoutes(R,D,B){const oe=tn(D);R.children.forEach(Me=>{this.activateRoutes(Me,oe[Me.value.outlet],B),this.forwardEvent(new _r(Me.value.snapshot))}),R.children.length&&this.forwardEvent(new qa(R.value.snapshot))}activateRoutes(R,D,B){const oe=R.value,Me=D?D.value:null;if(Qs(oe),oe===Me)if(oe.component){const Oe=B.getOrCreateContext(oe.outlet);this.activateChildRoutes(R,D,Oe.children)}else this.activateChildRoutes(R,D,B);else if(oe.component){const Oe=B.getOrCreateContext(oe.outlet);if(this.routeReuseStrategy.shouldAttach(oe.snapshot)){const St=this.routeReuseStrategy.retrieve(oe.snapshot);this.routeReuseStrategy.store(oe.snapshot,null),Oe.children.onOutletReAttached(St.contexts),Oe.attachRef=St.componentRef,Oe.route=St.route.value,Oe.outlet&&Oe.outlet.attach(St.componentRef,St.route.value),Qs(St.route.value),this.activateChildRoutes(R,null,Oe.children)}else{const St=js(oe.snapshot);Oe.attachRef=null,Oe.route=oe,Oe.injector=St,Oe.outlet&&Oe.outlet.activateWith(oe,Oe.injector),this.activateChildRoutes(R,null,Oe.children)}}else this.activateChildRoutes(R,null,B)}}class Oo{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class ca{constructor(R,D){this.component=R,this.route=D}}function Bu(A,R,D){const B=A._root;return Wa(B,R?R._root:null,D,[B.value])}function wa(A,R){const D=Symbol(),B=R.get(A,D);return B===D?"function"!=typeof A||(0,y.Z0I)(A)?R.get(A):A:B}function Wa(A,R,D,B,oe={canDeactivateChecks:[],canActivateChecks:[]}){const Me=tn(R);return A.children.forEach(Oe=>{(function Wi(A,R,D,B,oe={canDeactivateChecks:[],canActivateChecks:[]}){const Me=A.value,Oe=R?R.value:null,St=D?D.getContext(A.value.outlet):null;if(Oe&&Me.routeConfig===Oe.routeConfig){const _n=function To(A,R,D){if("function"==typeof D)return D(A,R);switch(D){case"pathParamsChange":return!_i(A.url,R.url);case"pathParamsOrQueryParamsChange":return!_i(A.url,R.url)||!rr(A.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!br(A,R)||!rr(A.queryParams,R.queryParams);default:return!br(A,R)}}(Oe,Me,Me.routeConfig.runGuardsAndResolvers);_n?oe.canActivateChecks.push(new Oo(B)):(Me.data=Oe.data,Me._resolvedData=Oe._resolvedData),Wa(A,R,Me.component?St?St.children:null:D,B,oe),_n&&St&&St.outlet&&St.outlet.isActivated&&oe.canDeactivateChecks.push(new ca(St.outlet.component,Oe))}else Oe&&Ca(R,St,oe),oe.canActivateChecks.push(new Oo(B)),Wa(A,null,Me.component?St?St.children:null:D,B,oe)})(Oe,Me[Oe.value.outlet],D,B.concat([Oe.value]),oe),delete Me[Oe.value.outlet]}),Object.entries(Me).forEach(([Oe,St])=>Ca(St,D.getContext(Oe),oe)),oe}function Ca(A,R,D){const B=tn(A),oe=A.value;Object.entries(B).forEach(([Me,Oe])=>{Ca(Oe,oe.component?R?R.children.getContext(Me):null:R,D)}),D.canDeactivateChecks.push(new ca(oe.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,oe))}function Ro(A){return"function"==typeof A}function ke(A){return A instanceof et.K||"EmptyError"===A?.name}const Wt=Symbol("INITIAL_VALUE");function Q(){return(0,Fe.w)(A=>(0,Xe.a)(A.map(R=>R.pipe((0,ut.q)(1),(0,W.O)(Wt)))).pipe((0,_e.U)(R=>{for(const D of R)if(!0!==D){if(D===Wt)return Wt;if(!1===D||D instanceof xr)return D}return!0}),(0,ne.h)(R=>R!==Wt),(0,ut.q)(1)))}function ni(A){return(0,wt.z)((0,$t.b)(R=>{if(ct(R))throw ks(0,R)}),(0,_e.U)(R=>!0===R))}class Lr{constructor(R){this.segmentGroup=R||null}}class ai{constructor(R){this.urlTree=R}}function Tr(A){return le(new Lr(A))}function Zi(A){return le(new ai(A))}class so{constructor(R,D){this.urlSerializer=R,this.urlTree=D}noMatchError(R){return new y.vHH(4002,!1)}lineralizeSegments(R,D){let B=[],oe=D.root;for(;;){if(B=B.concat(oe.segments),0===oe.numberOfChildren)return(0,De.of)(B);if(oe.numberOfChildren>1||!oe.children[Kt])return le(new y.vHH(4e3,!1));oe=oe.children[Kt]}}applyRedirectCommands(R,D,B){return this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),R,B)}applyRedirectCreateUrlTree(R,D,B,oe){const Me=this.createSegmentGroup(R,D.root,B,oe);return new xr(Me,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(R,D){const B={};return Object.entries(R).forEach(([oe,Me])=>{if("string"==typeof Me&&Me.startsWith(":")){const St=Me.substring(1);B[oe]=D[St]}else B[oe]=Me}),B}createSegmentGroup(R,D,B,oe){const Me=this.createSegments(R,D.segments,B,oe);let Oe={};return Object.entries(D.children).forEach(([St,_n])=>{Oe[St]=this.createSegmentGroup(R,_n,B,oe)}),new sr(Me,Oe)}createSegments(R,D,B,oe){return D.map(Me=>Me.path.startsWith(":")?this.findPosParam(R,Me,oe):this.findOrReturn(Me,B))}findPosParam(R,D,B){const oe=B[D.path.substring(1)];if(!oe)throw new y.vHH(4001,!1);return oe}findOrReturn(R,D){let B=0;for(const oe of D){if(oe.path===R.path)return D.splice(B),oe;B++}return R}}const ki={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xs(A,R,D,B,oe){const Me=Eo(A,R,D);return Me.matched?(B=function Pi(A,R){return A.providers&&!A._injector&&(A._injector=(0,y.MMx)(A.providers,R,`Route: ${A.path}`)),A._injector??R}(R,B),function Oi(A,R,D,B){const oe=R.canMatch;if(!oe||0===oe.length)return(0,De.of)(!0);const Me=oe.map(Oe=>{const St=wa(Oe,A);return Yr(function ee(A){return A&&Ro(A.canMatch)}(St)?St.canMatch(R,D):A.runInContext(()=>St(R,D)))});return(0,De.of)(Me).pipe(Q(),ni())}(B,R,D).pipe((0,_e.U)(Oe=>!0===Oe?Me:{...ki}))):(0,De.of)(Me)}function Eo(A,R,D){if(""===R.path)return"full"===R.pathMatch&&(A.hasChildren()||D.length>0)?{...ki}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const oe=(R.matcher||zn)(D,A,R);if(!oe)return{...ki};const Me={};Object.entries(oe.posParams??{}).forEach(([St,_n])=>{Me[St]=_n.path});const Oe=oe.consumed.length>0?{...Me,...oe.consumed[oe.consumed.length-1].parameters}:Me;return{matched:!0,consumedSegments:oe.consumed,remainingSegments:D.slice(oe.consumed.length),parameters:Oe,positionalParamSegments:oe.posParams??{}}}function hs(A,R,D,B){return D.length>0&&function $r(A,R,D){return D.some(B=>il(A,R,B)&&Fi(B)!==Kt)}(A,D,B)?{segmentGroup:new sr(R,da(B,new sr(D,A.children))),slicedSegments:[]}:0===D.length&&function mo(A,R,D){return D.some(B=>il(A,R,B))}(A,D,B)?{segmentGroup:new sr(A.segments,Fa(A,0,D,B,A.children)),slicedSegments:D}:{segmentGroup:new sr(A.segments,A.children),slicedSegments:D}}function Fa(A,R,D,B,oe){const Me={};for(const Oe of B)if(il(A,D,Oe)&&!oe[Fi(Oe)]){const St=new sr([],{});Me[Fi(Oe)]=St}return{...oe,...Me}}function da(A,R){const D={};D[Kt]=R;for(const B of A)if(""===B.path&&Fi(B)!==Kt){const oe=new sr([],{});D[Fi(B)]=oe}return D}function il(A,R,D){return(!(A.hasChildren()||R.length>0)||"full"!==D.pathMatch)&&""===D.path}class zo{constructor(R,D,B,oe,Me,Oe,St){this.injector=R,this.configLoader=D,this.rootComponentType=B,this.config=oe,this.urlTree=Me,this.paramsInheritanceStrategy=Oe,this.urlSerializer=St,this.allowRedirects=!0,this.applyRedirects=new so(this.urlSerializer,this.urlTree)}noMatchError(R){return new y.vHH(4002,!1)}recognize(){const R=hs(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,Kt).pipe(Xt(D=>{if(D instanceof ai)return this.allowRedirects=!1,this.urlTree=D.urlTree,this.match(D.urlTree);throw D instanceof Lr?this.noMatchError(D):D}),(0,_e.U)(D=>{const B=new Ni([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Kt,this.rootComponentType,null,{}),oe=new Ct(B,D),Me=new ls("",oe),Oe=function cn(A,R,D=null,B=null){return kr(Zn(A),R,D,B)}(B,[],this.urlTree.queryParams,this.urlTree.fragment);return Oe.queryParams=this.urlTree.queryParams,Me.url=this.urlSerializer.serialize(Oe),this.inheritParamsAndData(Me._root),{state:Me,tree:Oe}}))}match(R){return this.processSegmentGroup(this.injector,this.config,R.root,Kt).pipe(Xt(B=>{throw B instanceof Lr?this.noMatchError(B):B}))}inheritParamsAndData(R){const D=R.value,B=Sr(D,this.paramsInheritanceStrategy);D.params=Object.freeze(B.params),D.data=Object.freeze(B.data),R.children.forEach(oe=>this.inheritParamsAndData(oe))}processSegmentGroup(R,D,B,oe){return 0===B.segments.length&&B.hasChildren()?this.processChildren(R,D,B):this.processSegment(R,D,B,B.segments,oe,!0)}processChildren(R,D,B){const oe=[];for(const Me of Object.keys(B.children))"primary"===Me?oe.unshift(Me):oe.push(Me);return(0,Ce.D)(oe).pipe(Bt(Me=>{const Oe=B.children[Me],St=function io(A,R){const D=A.filter(B=>Fi(B)===R);return D.push(...A.filter(B=>Fi(B)!==R)),D}(D,Me);return this.processSegmentGroup(R,St,Oe,Me)}),(0,ot.R)((Me,Oe)=>(Me.push(...Oe),Me)),(0,Ye.d)(null),function at(A,R){const D=arguments.length>=2;return B=>B.pipe(A?(0,ne.h)((oe,Me)=>A(oe,Me,B)):dt.y,rt(1),D?(0,Ye.d)(R):(0,Qe.T)(()=>new et.K))}(),(0,Pe.z)(Me=>{if(null===Me)return Tr(B);const Oe=Qo(Me);return function Za(A){A.sort((R,D)=>R.value.outlet===Kt?-1:D.value.outlet===Kt?1:R.value.outlet.localeCompare(D.value.outlet))}(Oe),(0,De.of)(Oe)}))}processSegment(R,D,B,oe,Me,Oe){return(0,Ce.D)(D).pipe(Bt(St=>this.processSegmentAgainstRoute(St._injector??R,D,St,B,oe,Me,Oe).pipe(Xt(_n=>{if(_n instanceof Lr)return(0,De.of)(null);throw _n}))),(0,bt.P)(St=>!!St),Xt(St=>{if(ke(St))return function Ka(A,R,D){return 0===R.length&&!A.children[D]}(B,oe,Me)?(0,De.of)([]):Tr(B);throw St}))}processSegmentAgainstRoute(R,D,B,oe,Me,Oe,St){return function Al(A,R,D,B){return!!(Fi(A)===B||B!==Kt&&il(R,D,A))&&("**"===A.path||Eo(R,A,D).matched)}(B,oe,Me,Oe)?void 0===B.redirectTo?this.matchSegmentAgainstRoute(R,oe,B,Me,Oe,St):St&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,oe,D,B,Me,Oe):Tr(oe):Tr(oe)}expandSegmentAgainstRouteUsingRedirect(R,D,B,oe,Me,Oe){return"**"===oe.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,B,oe,Oe):this.expandRegularSegmentAgainstRouteUsingRedirect(R,D,B,oe,Me,Oe)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,D,B,oe){const Me=this.applyRedirects.applyRedirectCommands([],B.redirectTo,{});return B.redirectTo.startsWith("/")?Zi(Me):this.applyRedirects.lineralizeSegments(B,Me).pipe((0,Pe.z)(Oe=>{const St=new sr(Oe,{});return this.processSegment(R,D,St,Oe,oe,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,D,B,oe,Me,Oe){const{matched:St,consumedSegments:_n,remainingSegments:Hn,positionalParamSegments:fr}=Eo(D,oe,Me);if(!St)return Tr(D);const Mi=this.applyRedirects.applyRedirectCommands(_n,oe.redirectTo,fr);return oe.redirectTo.startsWith("/")?Zi(Mi):this.applyRedirects.lineralizeSegments(oe,Mi).pipe((0,Pe.z)(wo=>this.processSegment(R,B,D,wo.concat(Hn),Oe,!1)))}matchSegmentAgainstRoute(R,D,B,oe,Me,Oe){let St;if("**"===B.path){const _n=oe.length>0?wr(oe).parameters:{},Hn=new Ni(oe,_n,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,al(B),Fi(B),B.component??B._loadedComponent??null,B,Uu(B));St=(0,De.of)({snapshot:Hn,consumedSegments:[],remainingSegments:[]}),D.children={}}else St=xs(D,B,oe,R).pipe((0,_e.U)(({matched:_n,consumedSegments:Hn,remainingSegments:fr,parameters:Mi})=>_n?{snapshot:new Ni(Hn,Mi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,al(B),Fi(B),B.component??B._loadedComponent??null,B,Uu(B)),consumedSegments:Hn,remainingSegments:fr}:null));return St.pipe((0,Fe.w)(_n=>null===_n?Tr(D):this.getChildConfig(R=B._injector??R,B,oe).pipe((0,Fe.w)(({routes:Hn})=>{const fr=B._loadedInjector??R,{snapshot:Mi,consumedSegments:wo,remainingSegments:vo}=_n,{segmentGroup:Gu,slicedSegments:Pt}=hs(D,wo,vo,Hn);if(0===Pt.length&&Gu.hasChildren())return this.processChildren(fr,Hn,Gu).pipe((0,_e.U)(Bs=>null===Bs?null:[new Ct(Mi,Bs)]));if(0===Hn.length&&0===Pt.length)return(0,De.of)([new Ct(Mi,[])]);const Nl=Fi(B)===Me;return this.processSegment(fr,Hn,Gu,Pt,Nl?Kt:Me,!0).pipe((0,_e.U)(Bs=>[new Ct(Mi,Bs)]))}))))}getChildConfig(R,D,B){return D.children?(0,De.of)({routes:D.children,injector:R}):D.loadChildren?void 0!==D._loadedRoutes?(0,De.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function lr(A,R,D,B){const oe=R.canLoad;if(void 0===oe||0===oe.length)return(0,De.of)(!0);const Me=oe.map(Oe=>{const St=wa(Oe,A);return Yr(function cu(A){return A&&Ro(A.canLoad)}(St)?St.canLoad(R,D):A.runInContext(()=>St(R,D)))});return(0,De.of)(Me).pipe(Q(),ni())}(R,D,B).pipe((0,Pe.z)(oe=>oe?this.configLoader.loadChildren(R,D).pipe((0,$t.b)(Me=>{D._loadedRoutes=Me.routes,D._loadedInjector=Me.injector})):function Xs(A){return le(Si(!1,3))}())):(0,De.of)({routes:[],injector:R})}}function Ri(A){const R=A.value.routeConfig;return R&&""===R.path}function Qo(A){const R=[],D=new Set;for(const B of A){if(!Ri(B)){R.push(B);continue}const oe=R.find(Me=>B.value.routeConfig===Me.value.routeConfig);void 0!==oe?(oe.children.push(...B.children),D.add(oe)):R.push(B)}for(const B of D){const oe=Qo(B.children);R.push(new Ct(B.value,oe))}return R.filter(B=>!D.has(B))}function al(A){return A.data||{}}function Uu(A){return A.resolve||{}}function ul(A){return"string"==typeof A.title||null===A.title}function Br(A){return(0,Fe.w)(R=>{const D=A(R);return D?(0,Ce.D)(D).pipe((0,_e.U)(()=>R)):(0,De.of)(R)})}const ra=new y.OlP("ROUTES");let N=(()=>{class A{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,De.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const B=Yr(D.loadComponent()).pipe((0,_e.U)(z),(0,$t.b)(Me=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=Me}),qt(()=>{this.componentLoaders.delete(D)})),oe=new J(B,()=>new Y.x).pipe(Ve());return this.componentLoaders.set(D,oe),oe}loadChildren(D,B){if(this.childrenLoaders.get(B))return this.childrenLoaders.get(B);if(B._loadedRoutes)return(0,De.of)({routes:B._loadedRoutes,injector:B._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(B);const Me=this.loadModuleFactoryOrRoutes(B.loadChildren).pipe((0,_e.U)(St=>{this.onLoadEndListener&&this.onLoadEndListener(B);let _n,Hn;return Array.isArray(St)?Hn=St:(_n=St.create(D).injector,Hn=_n.get(ra,[],y.XFs.Self|y.XFs.Optional).flat()),{routes:Hn.map(_s),injector:_n}}),qt(()=>{this.childrenLoaders.delete(B)})),Oe=new J(Me,()=>new Y.x).pipe(Ve());return this.childrenLoaders.set(B,Oe),Oe}loadModuleFactoryOrRoutes(D){return Yr(D()).pipe((0,_e.U)(z),(0,Pe.z)(B=>B instanceof y.YKP||Array.isArray(B)?(0,De.of)(B):(0,Ce.D)(this.compiler.compileModuleAsync(B))))}}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function z(A){return function ae(A){return A&&"object"==typeof A&&"default"in A}(A)?A.default:A}let Te=(()=>{class A{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Y.x,this.configLoader=(0,y.f3M)(N),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(Rr),this.rootContexts=(0,y.f3M)(is),this.inputBindingEnabled=null!==(0,y.f3M)(ys,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,De.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=oe=>this.events.next(new za(oe)),this.configLoader.onLoadStartListener=oe=>this.events.next(new Fs(oe))}complete(){this.transitions?.complete()}handleNavigationRequest(D){const B=++this.navigationId;this.transitions?.next({...this.transitions.value,...D,id:B})}setupNavigations(D){return this.transitions=new $e.X({id:0,currentUrlTree:D.currentUrlTree,currentRawUrl:D.currentUrlTree,extractedUrl:D.urlHandlingStrategy.extract(D.currentUrlTree),urlAfterRedirects:D.urlHandlingStrategy.extract(D.currentUrlTree),rawUrl:D.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ho,restoredState:null,currentSnapshot:D.routerState.snapshot,targetSnapshot:null,currentRouterState:D.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ne.h)(B=>0!==B.id),(0,_e.U)(B=>({...B,extractedUrl:D.urlHandlingStrategy.extract(B.rawUrl)})),(0,Fe.w)(B=>{let oe=!1,Me=!1;return(0,De.of)(B).pipe((0,$t.b)(Oe=>{this.currentNavigation={id:Oe.id,initialUrl:Oe.rawUrl,extractedUrl:Oe.extractedUrl,trigger:Oe.source,extras:Oe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Fe.w)(Oe=>{const St=D.browserUrlTree.toString(),_n=!D.navigated||Oe.extractedUrl.toString()!==St||St!==D.currentUrlTree.toString();if(!_n&&"reload"!==(Oe.extras.onSameUrlNavigation??D.onSameUrlNavigation)){const fr="";return this.events.next(new Zs(Oe.id,D.serializeUrl(B.rawUrl),fr,0)),D.rawUrlTree=Oe.rawUrl,Oe.resolve(null),vt.E}if(D.urlHandlingStrategy.shouldProcessUrl(Oe.rawUrl))return Ke(Oe.source)&&(D.browserUrlTree=Oe.extractedUrl),(0,De.of)(Oe).pipe((0,Fe.w)(fr=>{const Mi=this.transitions?.getValue();return this.events.next(new no(fr.id,this.urlSerializer.serialize(fr.extractedUrl),fr.source,fr.restoredState)),Mi!==this.transitions?.getValue()?vt.E:Promise.resolve(fr)}),function Sa(A,R,D,B,oe,Me){return(0,Pe.z)(Oe=>function sl(A,R,D,B,oe,Me,Oe="emptyOnly"){return new zo(A,R,D,B,oe,Oe,Me).recognize()}(A,R,D,B,Oe.extractedUrl,oe,Me).pipe((0,_e.U)(({state:St,tree:_n})=>({...Oe,targetSnapshot:St,urlAfterRedirects:_n}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,D.config,this.urlSerializer,D.paramsInheritanceStrategy),(0,$t.b)(fr=>{if(B.targetSnapshot=fr.targetSnapshot,B.urlAfterRedirects=fr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:fr.urlAfterRedirects},"eager"===D.urlUpdateStrategy){if(!fr.extras.skipLocationChange){const wo=D.urlHandlingStrategy.merge(fr.urlAfterRedirects,fr.rawUrl);D.setBrowserUrl(wo,fr)}D.browserUrlTree=fr.urlAfterRedirects}const Mi=new _a(fr.id,this.urlSerializer.serialize(fr.extractedUrl),this.urlSerializer.serialize(fr.urlAfterRedirects),fr.targetSnapshot);this.events.next(Mi)}));if(_n&&D.urlHandlingStrategy.shouldProcessUrl(D.rawUrlTree)){const{id:fr,extractedUrl:Mi,source:wo,restoredState:vo,extras:Gu}=Oe,Pt=new no(fr,this.urlSerializer.serialize(Mi),wo,vo);this.events.next(Pt);const Nl=rn(0,this.rootComponentType).snapshot;return B={...Oe,targetSnapshot:Nl,urlAfterRedirects:Mi,extras:{...Gu,skipLocationChange:!1,replaceUrl:!1}},(0,De.of)(B)}{const fr="";return this.events.next(new Zs(Oe.id,D.serializeUrl(B.extractedUrl),fr,1)),D.rawUrlTree=Oe.rawUrl,Oe.resolve(null),vt.E}}),(0,$t.b)(Oe=>{const St=new ro(Oe.id,this.urlSerializer.serialize(Oe.extractedUrl),this.urlSerializer.serialize(Oe.urlAfterRedirects),Oe.targetSnapshot);this.events.next(St)}),(0,_e.U)(Oe=>B={...Oe,guards:Bu(Oe.targetSnapshot,Oe.currentSnapshot,this.rootContexts)}),function X(A,R){return(0,Pe.z)(D=>{const{targetSnapshot:B,currentSnapshot:oe,guards:{canActivateChecks:Me,canDeactivateChecks:Oe}}=D;return 0===Oe.length&&0===Me.length?(0,De.of)({...D,guardsResult:!0}):function xe(A,R,D,B){return(0,Ce.D)(A).pipe((0,Pe.z)(oe=>function Kn(A,R,D,B,oe){const Me=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!Me||0===Me.length)return(0,De.of)(!0);const Oe=Me.map(St=>{const _n=js(R)??oe,Hn=wa(St,_n);return Yr(function du(A){return A&&Ro(A.canDeactivate)}(Hn)?Hn.canDeactivate(A,R,D,B):_n.runInContext(()=>Hn(A,R,D,B))).pipe((0,bt.P)())});return(0,De.of)(Oe).pipe(Q())}(oe.component,oe.route,D,R,B)),(0,bt.P)(oe=>!0!==oe,!0))}(Oe,B,oe,A).pipe((0,Pe.z)(St=>St&&function La(A){return"boolean"==typeof A}(St)?function We(A,R,D,B){return(0,Ce.D)(R).pipe(Bt(oe=>(0,Se.z)(function Mt(A,R){return null!==A&&R&&R(new as(A)),(0,De.of)(!0)}(oe.route.parent,B),function ht(A,R){return null!==A&&R&&R(new As(A)),(0,De.of)(!0)}(oe.route,B),function qn(A,R,D){const B=R[R.length-1],Me=R.slice(0,R.length-1).reverse().map(Oe=>function lu(A){const R=A.routeConfig?A.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:A,guards:R}:null}(Oe)).filter(Oe=>null!==Oe).map(Oe=>Le(()=>{const St=Oe.guards.map(_n=>{const Hn=js(Oe.node)??D,fr=wa(_n,Hn);return Yr(function Ki(A){return A&&Ro(A.canActivateChild)}(fr)?fr.canActivateChild(B,A):Hn.runInContext(()=>fr(B,A))).pipe((0,bt.P)())});return(0,De.of)(St).pipe(Q())}));return(0,De.of)(Me).pipe(Q())}(A,oe.path,D),function hn(A,R,D){const B=R.routeConfig?R.routeConfig.canActivate:null;if(!B||0===B.length)return(0,De.of)(!0);const oe=B.map(Me=>Le(()=>{const Oe=js(R)??D,St=wa(Me,Oe);return Yr(function xl(A){return A&&Ro(A.canActivate)}(St)?St.canActivate(R,A):Oe.runInContext(()=>St(R,A))).pipe((0,bt.P)())}));return(0,De.of)(oe).pipe(Q())}(A,oe.route,D))),(0,bt.P)(oe=>!0!==oe,!0))}(B,Me,A,R):(0,De.of)(St)),(0,_e.U)(St=>({...D,guardsResult:St})))})}(this.environmentInjector,Oe=>this.events.next(Oe)),(0,$t.b)(Oe=>{if(B.guardsResult=Oe.guardsResult,ct(Oe.guardsResult))throw ks(0,Oe.guardsResult);const St=new Ds(Oe.id,this.urlSerializer.serialize(Oe.extractedUrl),this.urlSerializer.serialize(Oe.urlAfterRedirects),Oe.targetSnapshot,!!Oe.guardsResult);this.events.next(St)}),(0,ne.h)(Oe=>!!Oe.guardsResult||(D.restoreHistory(Oe),this.cancelNavigationTransition(Oe,"",3),!1)),Br(Oe=>{if(Oe.guards.canActivateChecks.length)return(0,De.of)(Oe).pipe((0,$t.b)(St=>{const _n=new ba(St.id,this.urlSerializer.serialize(St.extractedUrl),this.urlSerializer.serialize(St.urlAfterRedirects),St.targetSnapshot);this.events.next(_n)}),(0,Fe.w)(St=>{let _n=!1;return(0,De.of)(St).pipe(function hu(A,R){return(0,Pe.z)(D=>{const{targetSnapshot:B,guards:{canActivateChecks:oe}}=D;if(!oe.length)return(0,De.of)(D);let Me=0;return(0,Ce.D)(oe).pipe(Bt(Oe=>function No(A,R,D,B){const oe=A.routeConfig,Me=A._resolve;return void 0!==oe?.title&&!ul(oe)&&(Me[wn]=oe.title),function fu(A,R,D,B){const oe=function Lo(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===oe.length)return(0,De.of)({});const Me={};return(0,Ce.D)(oe).pipe((0,Pe.z)(Oe=>function oo(A,R,D,B){const oe=js(R)??B,Me=wa(A,oe);return Yr(Me.resolve?Me.resolve(R,D):oe.runInContext(()=>Me(R,D)))}(A[Oe],R,D,B).pipe((0,bt.P)(),(0,$t.b)(St=>{Me[Oe]=St}))),rt(1),(0,Ot.h)(Me),Xt(Oe=>ke(Oe)?vt.E:le(Oe)))}(Me,A,R,B).pipe((0,_e.U)(Oe=>(A._resolvedData=Oe,A.data=Sr(A,D).resolve,oe&&ul(oe)&&(A.data[wn]=oe.title),null)))}(Oe.route,B,A,R)),(0,$t.b)(()=>Me++),rt(1),(0,Pe.z)(Oe=>Me===oe.length?(0,De.of)(D):vt.E))})}(D.paramsInheritanceStrategy,this.environmentInjector),(0,$t.b)({next:()=>_n=!0,complete:()=>{_n||(D.restoreHistory(St),this.cancelNavigationTransition(St,"",2))}}))}),(0,$t.b)(St=>{const _n=new ju(St.id,this.urlSerializer.serialize(St.extractedUrl),this.urlSerializer.serialize(St.urlAfterRedirects),St.targetSnapshot);this.events.next(_n)}))}),Br(Oe=>{const St=_n=>{const Hn=[];_n.routeConfig?.loadComponent&&!_n.routeConfig._loadedComponent&&Hn.push(this.configLoader.loadComponent(_n.routeConfig).pipe((0,$t.b)(fr=>{_n.component=fr}),(0,_e.U)(()=>{})));for(const fr of _n.children)Hn.push(...St(fr));return Hn};return(0,Xe.a)(St(Oe.targetSnapshot.root)).pipe((0,Ye.d)(),(0,ut.q)(1))}),Br(()=>this.afterPreactivation()),(0,_e.U)(Oe=>{const St=function Yo(A,R,D){const B=Go(A,R._root,D?D._root:void 0);return new ln(B,R)}(D.routeReuseStrategy,Oe.targetSnapshot,Oe.currentRouterState);return B={...Oe,targetRouterState:St}}),(0,$t.b)(Oe=>{D.currentUrlTree=Oe.urlAfterRedirects,D.rawUrlTree=D.urlHandlingStrategy.merge(Oe.urlAfterRedirects,Oe.rawUrl),D.routerState=Oe.targetRouterState,"deferred"===D.urlUpdateStrategy&&(Oe.extras.skipLocationChange||D.setBrowserUrl(D.rawUrlTree,Oe),D.browserUrlTree=Oe.urlAfterRedirects)}),((A,R,D,B)=>(0,_e.U)(oe=>(new jr(R,oe.targetRouterState,oe.currentRouterState,D,B).activate(A),oe)))(this.rootContexts,D.routeReuseStrategy,Oe=>this.events.next(Oe),this.inputBindingEnabled),(0,ut.q)(1),(0,$t.b)({next:Oe=>{oe=!0,this.lastSuccessfulNavigation=this.currentNavigation,D.navigated=!0,this.events.next(new oi(Oe.id,this.urlSerializer.serialize(Oe.extractedUrl),this.urlSerializer.serialize(D.currentUrlTree))),D.titleStrategy?.updateTitle(Oe.targetRouterState.snapshot),Oe.resolve(!0)},complete:()=>{oe=!0}}),qt(()=>{oe||Me||this.cancelNavigationTransition(B,"",1),this.currentNavigation?.id===B.id&&(this.currentNavigation=null)}),Xt(Oe=>{if(Me=!0,na(Oe)){Ta(Oe)||(D.navigated=!0,D.restoreHistory(B,!0));const St=new fo(B.id,this.urlSerializer.serialize(B.extractedUrl),Oe.message,Oe.cancellationCode);if(this.events.next(St),Ta(Oe)){const _n=D.urlHandlingStrategy.merge(Oe.url,D.rawUrlTree),Hn={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===D.urlUpdateStrategy||Ke(B.source)};D.scheduleNavigation(_n,Ho,null,Hn,{resolve:B.resolve,reject:B.reject,promise:B.promise})}else B.resolve(!1)}else{D.restoreHistory(B,!0);const St=new ya(B.id,this.urlSerializer.serialize(B.extractedUrl),Oe,B.targetSnapshot??void 0);this.events.next(St);try{B.resolve(D.errorHandler(Oe))}catch(_n){B.reject(_n)}}return vt.E}))}))}cancelNavigationTransition(D,B,oe){const Me=new fo(D.id,this.urlSerializer.serialize(D.extractedUrl),B,oe);this.events.next(Me),D.resolve(!1)}}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Ke(A){return A!==Ho}let Nt=(()=>{class A{buildTitle(D){let B,oe=D.root;for(;void 0!==oe;)B=this.getResolvedTitleForRoute(oe)??B,oe=oe.children.find(Me=>Me.outlet===Kt);return B}getResolvedTitleForRoute(D){return D.data[wn]}}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:function(){return(0,y.f3M)(Zt)},providedIn:"root"}),A})(),Zt=(()=>{class A extends Nt{constructor(D){super(),this.title=D}updateTitle(D){const B=this.buildTitle(D);void 0!==B&&this.title.setTitle(B)}}return A.\u0275fac=function(D){return new(D||A)(y.LFG(Lt.Dx))},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Jn=(()=>{class A{}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:function(){return(0,y.f3M)(Gr)},providedIn:"root"}),A})();class es{shouldDetach(R){return!1}store(R,D){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,D){return R.routeConfig===D.routeConfig}}let Gr=(()=>{class A extends es{}return A.\u0275fac=function(){let R;return function(B){return(R||(R=y.n5z(A)))(B||A)}}(),A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const zr=new y.OlP("",{providedIn:"root",factory:()=>({})});let hr=(()=>{class A{}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:function(){return(0,y.f3M)(ji)},providedIn:"root"}),A})(),ji=(()=>{class A{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,B){return D}}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();var Jr=(()=>((Jr=Jr||{})[Jr.COMPLETE=0]="COMPLETE",Jr[Jr.FAILED=1]="FAILED",Jr[Jr.REDIRECTING=2]="REDIRECTING",Jr))();function Yi(A,R){A.events.pipe((0,ne.h)(D=>D instanceof oi||D instanceof fo||D instanceof ya||D instanceof Zs),(0,_e.U)(D=>D instanceof oi||D instanceof Zs?Jr.COMPLETE:D instanceof fo&&(0===D.code||1===D.code)?Jr.REDIRECTING:Jr.FAILED),(0,ne.h)(D=>D!==Jr.REDIRECTING),(0,ut.q)(1)).subscribe(()=>{R()})}function vr(A){throw A}function Qn(A,R,D){return R.parse("/")}const qo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bs=(()=>{class A{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this.options=(0,y.f3M)(zr,{optional:!0})||{},this.pendingTasks=(0,y.f3M)(y.HDt),this.errorHandler=this.options.errorHandler||vr,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Qn,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(hr),this.routeReuseStrategy=(0,y.f3M)(Jn),this.titleStrategy=(0,y.f3M)(Nt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,y.f3M)(ra,{optional:!0})?.flat()??[],this.navigationTransitions=(0,y.f3M)(Te),this.urlSerializer=(0,y.f3M)(Rr),this.location=(0,y.f3M)(Ee.Ye),this.componentInputBindingEnabled=!!(0,y.f3M)(ys,{optional:!0}),this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new xr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=rn(0,null),this.navigationTransitions.setupNavigations(this).subscribe(D=>{this.lastSuccessfulId=D.id,this.currentPageId=this.browserPageId??0},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}resetRootComponentType(D){this.routerState.root.component=D,this.navigationTransitions.rootComponentType=D}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const D=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ho,D)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const B="popstate"===D.type?"popstate":"hashchange";"popstate"===B&&setTimeout(()=>{this.navigateToSyncWithBrowser(D.url,B,D.state)},0)}))}navigateToSyncWithBrowser(D,B,oe){const Me={replaceUrl:!0},Oe=oe?.navigationId?oe:null;if(oe){const _n={...oe};delete _n.navigationId,delete _n.\u0275routerPageId,0!==Object.keys(_n).length&&(Me.state=_n)}const St=this.parseUrl(D);this.scheduleNavigation(St,B,Oe,Me)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(D){this.config=D.map(_s),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,B={}){const{relativeTo:oe,queryParams:Me,fragment:Oe,queryParamsHandling:St,preserveFragment:_n}=B,Hn=_n?this.currentUrlTree.fragment:Oe;let Mi,fr=null;switch(St){case"merge":fr={...this.currentUrlTree.queryParams,...Me};break;case"preserve":fr=this.currentUrlTree.queryParams;break;default:fr=Me||null}null!==fr&&(fr=this.removeEmptyProps(fr));try{Mi=Zn(oe?oe.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof D[0]||!D[0].startsWith("/"))&&(D=[]),Mi=this.currentUrlTree.root}return kr(Mi,D,fr,Hn??null)}navigateByUrl(D,B={skipLocationChange:!1}){const oe=ct(D)?D:this.parseUrl(D),Me=this.urlHandlingStrategy.merge(oe,this.rawUrlTree);return this.scheduleNavigation(Me,Ho,null,B)}navigate(D,B={skipLocationChange:!1}){return function ia(A){for(let R=0;R<A.length;R++)if(null==A[R])throw new y.vHH(4008,!1)}(D),this.navigateByUrl(this.createUrlTree(D,B),B)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let B;try{B=this.urlSerializer.parse(D)}catch(oe){B=this.malformedUriErrorHandler(oe,this.urlSerializer,D)}return B}isActive(D,B){let oe;if(oe=!0===B?{...qo}:!1===B?{...Fo}:B,ct(D))return Mr(this.currentUrlTree,D,oe);const Me=this.parseUrl(D);return Mr(this.currentUrlTree,Me,oe)}removeEmptyProps(D){return Object.keys(D).reduce((B,oe)=>{const Me=D[oe];return null!=Me&&(B[oe]=Me),B},{})}scheduleNavigation(D,B,oe,Me,Oe){if(this.disposed)return Promise.resolve(!1);let St,_n,Hn;Oe?(St=Oe.resolve,_n=Oe.reject,Hn=Oe.promise):Hn=new Promise((Mi,wo)=>{St=Mi,_n=wo});const fr=this.pendingTasks.add();return Yi(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(fr))}),this.navigationTransitions.handleNavigationRequest({source:B,restoredState:oe,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:D,extras:Me,resolve:St,reject:_n,promise:Hn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Hn.catch(Mi=>Promise.reject(Mi))}setBrowserUrl(D,B){const oe=this.urlSerializer.serialize(D);if(this.location.isCurrentPathEqualTo(oe)||B.extras.replaceUrl){const Oe={...B.extras.state,...this.generateNgRouterState(B.id,this.browserPageId)};this.location.replaceState(oe,"",Oe)}else{const Me={...B.extras.state,...this.generateNgRouterState(B.id,(this.browserPageId??0)+1)};this.location.go(oe,"",Me)}}restoreHistory(D,B=!1){if("computed"===this.canceledNavigationResolution){const Me=this.currentPageId-(this.browserPageId??this.currentPageId);0!==Me?this.location.historyGo(Me):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Me&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(B&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(D,B){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:B}:{navigationId:D}}}return A.\u0275fac=function(D){return new(D||A)},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ja=(()=>{class A{constructor(D,B,oe,Me,Oe,St){this.router=D,this.route=B,this.tabIndexAttribute=oe,this.renderer=Me,this.el=Oe,this.locationStrategy=St,this.href=null,this.commands=null,this.onChanges=new Y.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const _n=Oe.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_n||"area"===_n,this.isAnchorElement?this.subscription=D.events.subscribe(Hn=>{Hn instanceof oi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(D){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",D)}ngOnChanges(D){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(D,B,oe,Me,Oe){return!!(null===this.urlTree||this.isAnchorElement&&(0!==D||B||oe||Me||Oe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const D=null===this.href?null:(0,y.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",D)}applyAttributeValue(D,B){const oe=this.renderer,Me=this.el.nativeElement;null!==B?oe.setAttribute(Me,D,B):oe.removeAttribute(Me,D)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(D){return new(D||A)(y.Y36(bs),y.Y36(Dn),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(Ee.S$))},A.\u0275dir=y.lG2({type:A,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(D,B){1&D&&y.NdJ("click",function(Me){return B.onClick(Me.button,Me.ctrlKey,Me.shiftKey,Me.altKey,Me.metaKey)}),2&D&&y.uIk("target",B.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",y.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",y.VuI],replaceUrl:["replaceUrl","replaceUrl",y.VuI],routerLink:"routerLink"},standalone:!0,features:[y.Xq5,y.TTD]}),A})(),Nc=(()=>{class A{get isActive(){return this._isActive}constructor(D,B,oe,Me,Oe){this.router=D,this.element=B,this.renderer=oe,this.cdr=Me,this.link=Oe,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new y.vpe,this.routerEventsSubscription=D.events.subscribe(St=>{St instanceof oi&&this.update()})}ngAfterContentInit(){(0,De.of)(this.links.changes,(0,De.of)(null)).pipe((0,jt.J)()).subscribe(D=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const D=[...this.links.toArray(),this.link].filter(B=>!!B).map(B=>B.onChanges);this.linkInputChangesSubscription=(0,Ce.D)(D).pipe((0,jt.J)()).subscribe(B=>{this._isActive!==this.isLinkActive(this.router)(B)&&this.update()})}set routerLinkActive(D){const B=Array.isArray(D)?D:D.split(" ");this.classes=B.filter(oe=>!!oe)}ngOnChanges(D){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const D=this.hasActiveLinks();this._isActive!==D&&(this._isActive=D,this.cdr.markForCheck(),this.classes.forEach(B=>{D?this.renderer.addClass(this.element.nativeElement,B):this.renderer.removeClass(this.element.nativeElement,B)}),D&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(D))})}isLinkActive(D){const B=function jo(A){return!!A.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return oe=>!!oe.urlTree&&D.isActive(oe.urlTree,B)}hasActiveLinks(){const D=this.isLinkActive(this.router);return this.link&&D(this.link)||this.links.some(D)}}return A.\u0275fac=function(D){return new(D||A)(y.Y36(bs),y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(y.sBO),y.Y36(ja,8))},A.\u0275dir=y.lG2({type:A,selectors:[["","routerLinkActive",""]],contentQueries:function(D,B,oe){if(1&D&&y.Suo(oe,ja,5),2&D){let Me;y.iGM(Me=y.CRH())&&(B.links=Me)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[y.TTD]}),A})();class kl{}let sd=(()=>{class A{constructor(D,B,oe,Me,Oe){this.router=D,this.injector=oe,this.preloadingStrategy=Me,this.loader=Oe}setUpPreloading(){this.subscription=this.router.events.pipe((0,ne.h)(D=>D instanceof oi),Bt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,B){const oe=[];for(const Me of B){Me.providers&&!Me._injector&&(Me._injector=(0,y.MMx)(Me.providers,D,`Route: ${Me.path}`));const Oe=Me._injector??D,St=Me._loadedInjector??Oe;(Me.loadChildren&&!Me._loadedRoutes&&void 0===Me.canLoad||Me.loadComponent&&!Me._loadedComponent)&&oe.push(this.preloadConfig(Oe,Me)),(Me.children||Me._loadedRoutes)&&oe.push(this.processRoutes(St,Me.children??Me._loadedRoutes))}return(0,Ce.D)(oe).pipe((0,jt.J)())}preloadConfig(D,B){return this.preloadingStrategy.preload(B,()=>{let oe;oe=B.loadChildren&&void 0===B.canLoad?this.loader.loadChildren(D,B):(0,De.of)(null);const Me=oe.pipe((0,Pe.z)(Oe=>null===Oe?(0,De.of)(void 0):(B._loadedRoutes=Oe.routes,B._loadedInjector=Oe.injector,this.processRoutes(Oe.injector??D,Oe.routes))));if(B.loadComponent&&!B._loadedComponent){const Oe=this.loader.loadComponent(B);return(0,Ce.D)([Me,Oe]).pipe((0,jt.J)())}return Me})}}return A.\u0275fac=function(D){return new(D||A)(y.LFG(bs),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(kl),y.LFG(N))},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Cu=new y.OlP("");let pn=(()=>{class A{constructor(D,B,oe,Me,Oe={}){this.urlSerializer=D,this.transitions=B,this.viewportScroller=oe,this.zone=Me,this.options=Oe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Oe.scrollPositionRestoration=Oe.scrollPositionRestoration||"disabled",Oe.anchorScrolling=Oe.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof no?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof oi?(this.lastId=D.id,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.urlAfterRedirects).fragment)):D instanceof Zs&&0===D.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof us&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,B){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new us(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,B))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return A.\u0275fac=function(D){y.$Z()},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac}),A})();function zs(A,R){return{\u0275kind:A,\u0275providers:R}}function Js(){const A=(0,y.f3M)(y.zs3);return R=>{const D=A.get(y.z2F);if(R!==D.components[0])return;const B=A.get(bs),oe=A.get(Ba);1===A.get(In)&&B.initialNavigation(),A.get(Vt,null,y.XFs.Optional)?.setUpPreloading(),A.get(Cu,null,y.XFs.Optional)?.init(),B.resetRootComponentType(D.componentTypes[0]),oe.closed||(oe.next(),oe.complete(),oe.unsubscribe())}}const Ba=new y.OlP("",{factory:()=>new Y.x}),In=new y.OlP("",{providedIn:"root",factory:()=>1}),Vt=new y.OlP("");function gn(A){return zs(0,[{provide:Vt,useExisting:sd},{provide:kl,useExisting:A}])}const rc=new y.OlP("ROUTER_FORROOT_GUARD"),Ol=[Ee.Ye,{provide:Rr,useClass:On},bs,is,{provide:Dn,useFactory:function pu(A){return A.routerState.root},deps:[bs]},N,[]];function Da(){return new y.PXZ("Router",bs)}let ic=(()=>{class A{constructor(D){}static forRoot(D,B){return{ngModule:A,providers:[Ol,[],{provide:ra,multi:!0,useValue:D},{provide:rc,useFactory:Nr,deps:[[bs,new y.FiY,new y.tp0]]},{provide:zr,useValue:B||{}},B?.useHash?{provide:Ee.S$,useClass:Ee.Do}:{provide:Ee.S$,useClass:Ee.b0},{provide:Cu,useFactory:()=>{const A=(0,y.f3M)(Ee.EM),R=(0,y.f3M)(y.R0b),D=(0,y.f3M)(zr),B=(0,y.f3M)(Te),oe=(0,y.f3M)(Rr);return D.scrollOffset&&A.setOffset(D.scrollOffset),new pn(oe,B,A,R,D)}},B?.preloadingStrategy?gn(B.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:Da},B?.initialNavigation?Hu(B):[],B?.bindToComponentInputs?zs(8,[qi,{provide:ys,useExisting:qi}]).\u0275providers:[],[{provide:Jo,useFactory:Js},{provide:y.tb,multi:!0,useExisting:Jo}]]}}static forChild(D){return{ngModule:A,providers:[{provide:ra,multi:!0,useValue:D}]}}}return A.\u0275fac=function(D){return new(D||A)(y.LFG(rc,8))},A.\u0275mod=y.oAB({type:A}),A.\u0275inj=y.cJS({}),A})();function Nr(A){return"guarded"}function Hu(A){return["disabled"===A.initialNavigation?zs(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const R=(0,y.f3M)(bs);return()=>{R.setUpLocationChangeListener()}}},{provide:In,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?zs(2,[{provide:In,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:R=>{const D=R.get(Ee.V_,Promise.resolve());return()=>D.then(()=>new Promise(B=>{const oe=R.get(bs),Me=R.get(Ba);Yi(oe,()=>{B(!0)}),R.get(Te).afterPreactivation=()=>(B(!0),Me.closed?(0,De.of)(void 0):Me),oe.initialNavigation()}))}}]).\u0275providers:[]]}const Jo=new y.OlP("")},3106:(nn,st,H)=>{"use strict";H.d(st,{Z:()=>vt});var y=H(9058),fe=H(4537),se=H(534),V=H(7879);class Ce{constructor(Tt,je){this._delegate=Tt,this.firebase=je,(0,se._addComponent)(Tt,new fe.wA("app-compat",()=>this,"PUBLIC")),this.container=Tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Tt){this._delegate.automaticDataCollectionEnabled=Tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Tt=>{this._delegate.checkDestroyed(),Tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,se.deleteApp)(this._delegate)))}_getService(Tt,je=se._DEFAULT_ENTRY_NAME){var Ve;this._delegate.checkDestroyed();const J=this._delegate.container.getProvider(Tt);return!J.isInitialized()&&"EXPLICIT"===(null===(Ve=J.getComponent())||void 0===Ve?void 0:Ve.instantiationMode)&&J.initialize(),J.getImmediate({identifier:je})}_removeServiceInstance(Tt,je=se._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Tt).clearInstance(je)}_addComponent(Tt){(0,se._addComponent)(this._delegate,Tt)}_addOrOverwriteComponent(Tt){(0,se._addOrOverwriteComponent)(this._delegate,Tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const $e=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Se=function et(){const qe=function Xe(qe){const Tt={},je={__esModule:!0,initializeApp:function Y(ut,W={}){const ne=se.initializeApp(ut,W);if((0,y.r3)(Tt,ne.name))return Tt[ne.name];const Pe=new qe(ne,je);return Tt[ne.name]=Pe,Pe},app:J,registerVersion:se.registerVersion,setLogLevel:se.setLogLevel,onLog:se.onLog,apps:null,SDK_VERSION:se.SDK_VERSION,INTERNAL:{registerComponent:function _e(ut){const W=ut.name,ne=W.replace("-compat","");if(se._registerComponent(ut)&&"PUBLIC"===ut.type){const Pe=(bt=J())=>{if("function"!=typeof bt[ne])throw $e.create("invalid-app-argument",{appName:W});return bt[ne]()};void 0!==ut.serviceProps&&(0,y.ZB)(Pe,ut.serviceProps),je[ne]=Pe,qe.prototype[ne]=function(...bt){return this._getService.bind(this,W).apply(this,ut.multipleInstances?bt:[])}}return"PUBLIC"===ut.type?je[ne]:null},removeApp:function Ve(ut){delete Tt[ut]},useAsService:function Fe(ut,W){return"serverAuth"===W?null:W},modularAPIs:se}};function J(ut){if(!(0,y.r3)(Tt,ut=ut||se._DEFAULT_ENTRY_NAME))throw $e.create("no-app",{appName:ut});return Tt[ut]}return je.default=je,Object.defineProperty(je,"apps",{get:function Ee(){return Object.keys(Tt).map(ut=>Tt[ut])}}),J.App=qe,je}(Ce);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:et,extendNamespace:function Tt(je){(0,y.ZB)(qe,je)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),qe}(),Re=new V.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){Re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&Re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const vt=Se;!function le(qe){(0,se.registerVersion)("@firebase/app-compat","0.2.13",qe)}()},534:(nn,st,H)=>{"use strict";H.r(st),H.d(st,{FirebaseError:()=>V.ZR,SDK_VERSION:()=>gr,_DEFAULT_ENTRY_NAME:()=>dn,_addComponent:()=>sr,_addOrOverwriteComponent:()=>Gi,_apps:()=>Nn,_clearComponents:()=>Rr,_components:()=>xr,_getProvider:()=>_i,_registerComponent:()=>Zr,_removeServiceInstance:()=>Ws,deleteApp:()=>bi,getApp:()=>di,getApps:()=>Xi,initializeApp:()=>zi,onLog:()=>os,registerVersion:()=>Vr,setLogLevel:()=>Ar});var y=H(5861),fe=H(4537),se=H(7879),V=H(9058);const Ce=(Ut,Et)=>Et.some(Jt=>Ut instanceof Jt);let De,$e;const Se=new WeakMap,Re=new WeakMap,Le=new WeakMap,wt=new WeakMap,le=new WeakMap;let Tt={get(Ut,Et,Jt){if(Ut instanceof IDBTransaction){if("done"===Et)return Re.get(Ut);if("objectStoreNames"===Et)return Ut.objectStoreNames||Le.get(Ut);if("store"===Et)return Jt.objectStoreNames[1]?void 0:Jt.objectStore(Jt.objectStoreNames[0])}return Y(Ut[Et])},set:(Ut,Et,Jt)=>(Ut[Et]=Jt,!0),has:(Ut,Et)=>Ut instanceof IDBTransaction&&("done"===Et||"store"===Et)||Et in Ut};function J(Ut){return"function"==typeof Ut?function Ve(Ut){return Ut!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function et(){return $e||($e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ut)?function(...Et){return Ut.apply(Ee(this),Et),Y(Se.get(this))}:function(...Et){return Y(Ut.apply(Ee(this),Et))}:function(Et,...Jt){const An=Ut.call(Ee(this),Et,...Jt);return Le.set(An,Et.sort?Et.sort():[Et]),Y(An)}}(Ut):(Ut instanceof IDBTransaction&&function qe(Ut){if(Re.has(Ut))return;const Et=new Promise((Jt,An)=>{const Yn=()=>{Ut.removeEventListener("complete",ir),Ut.removeEventListener("error",yr),Ut.removeEventListener("abort",yr)},ir=()=>{Jt(),Yn()},yr=()=>{An(Ut.error||new DOMException("AbortError","AbortError")),Yn()};Ut.addEventListener("complete",ir),Ut.addEventListener("error",yr),Ut.addEventListener("abort",yr)});Re.set(Ut,Et)}(Ut),Ce(Ut,function Xe(){return De||(De=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ut,Tt):Ut)}function Y(Ut){if(Ut instanceof IDBRequest)return function vt(Ut){const Et=new Promise((Jt,An)=>{const Yn=()=>{Ut.removeEventListener("success",ir),Ut.removeEventListener("error",yr)},ir=()=>{Jt(Y(Ut.result)),Yn()},yr=()=>{An(Ut.error),Yn()};Ut.addEventListener("success",ir),Ut.addEventListener("error",yr)});return Et.then(Jt=>{Jt instanceof IDBCursor&&Se.set(Jt,Ut)}).catch(()=>{}),le.set(Et,Ut),Et}(Ut);if(wt.has(Ut))return wt.get(Ut);const Et=J(Ut);return Et!==Ut&&(wt.set(Ut,Et),le.set(Et,Ut)),Et}const Ee=Ut=>le.get(Ut),ut=["get","getKey","getAll","getAllKeys","count"],W=["put","add","delete","clear"],ne=new Map;function Pe(Ut,Et){if(!(Ut instanceof IDBDatabase)||Et in Ut||"string"!=typeof Et)return;if(ne.get(Et))return ne.get(Et);const Jt=Et.replace(/FromIndex$/,""),An=Et!==Jt,Yn=W.includes(Jt);if(!(Jt in(An?IDBIndex:IDBObjectStore).prototype)||!Yn&&!ut.includes(Jt))return;const ir=function(){var yr=(0,y.Z)(function*(Qr,...fi){const pi=this.transaction(Qr,Yn?"readwrite":"readonly");let rs=pi.store;return An&&(rs=rs.index(fi.shift())),(yield Promise.all([rs[Jt](...fi),Yn&&pi.done]))[0]});return function(fi){return yr.apply(this,arguments)}}();return ne.set(Et,ir),ir}!function je(Ut){Tt=Ut(Tt)}(Ut=>({...Ut,get:(Et,Jt,An)=>Pe(Et,Jt)||Ut.get(Et,Jt,An),has:(Et,Jt)=>!!Pe(Et,Jt)||Ut.has(Et,Jt)}));class bt{constructor(Et){this.container=Et}getPlatformInfoString(){return this.container.getProviders().map(Jt=>{if(function Bt(Ut){const Et=Ut.getComponent();return"VERSION"===Et?.type}(Jt)){const An=Jt.getImmediate();return`${An.library}/${An.version}`}return null}).filter(Jt=>Jt).join(" ")}}const $t="@firebase/app",ot=new se.Yd("@firebase/app"),dn="[DEFAULT]",Bn={[$t]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nn=new Map,xr=new Map;function sr(Ut,Et){try{Ut.container.addComponent(Et)}catch(Jt){ot.debug(`Component ${Et.name} failed to register with FirebaseApp ${Ut.name}`,Jt)}}function Gi(Ut,Et){Ut.container.addOrOverwriteComponent(Et)}function Zr(Ut){const Et=Ut.name;if(xr.has(Et))return ot.debug(`There were multiple attempts to register component ${Et}.`),!1;xr.set(Et,Ut);for(const Jt of Nn.values())sr(Jt,Ut);return!0}function _i(Ut,Et){const Jt=Ut.container.getProvider("heartbeat").getImmediate({optional:!0});return Jt&&Jt.triggerHeartbeat(),Ut.container.getProvider(Et)}function Ws(Ut,Et,Jt=dn){_i(Ut,Et).clearInstance(Jt)}function Rr(){xr.clear()}const mr=new V.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ns{constructor(Et,Jt,An){this._isDeleted=!1,this._options=Object.assign({},Et),this._config=Object.assign({},Jt),this._name=Jt.name,this._automaticDataCollectionEnabled=Jt.automaticDataCollectionEnabled,this._container=An,this.container.addComponent(new fe.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Et){this.checkDestroyed(),this._automaticDataCollectionEnabled=Et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Et){this._isDeleted=Et}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}const gr="9.23.0";function zi(Ut,Et={}){let Jt=Ut;"object"!=typeof Et&&(Et={name:Et});const An=Object.assign({name:dn,automaticDataCollectionEnabled:!1},Et),Yn=An.name;if("string"!=typeof Yn||!Yn)throw mr.create("bad-app-name",{appName:String(Yn)});if(Jt||(Jt=(0,V.aH)()),!Jt)throw mr.create("no-options");const ir=Nn.get(Yn);if(ir){if((0,V.vZ)(Jt,ir.options)&&(0,V.vZ)(An,ir.config))return ir;throw mr.create("duplicate-app",{appName:Yn})}const yr=new fe.H0(Yn);for(const fi of xr.values())yr.addComponent(fi);const Qr=new ns(Jt,An,yr);return Nn.set(Yn,Qr),Qr}function di(Ut=dn){const Et=Nn.get(Ut);if(!Et&&Ut===dn&&(0,V.aH)())return zi();if(!Et)throw mr.create("no-app",{appName:Ut});return Et}function Xi(){return Array.from(Nn.values())}function bi(Ut){return wi.apply(this,arguments)}function wi(){return(wi=(0,y.Z)(function*(Ut){const Et=Ut.name;Nn.has(Et)&&(Nn.delete(Et),yield Promise.all(Ut.container.getProviders().map(Jt=>Jt.delete())),Ut.isDeleted=!0)})).apply(this,arguments)}function Vr(Ut,Et,Jt){var An;let Yn=null!==(An=Bn[Ut])&&void 0!==An?An:Ut;Jt&&(Yn+=`-${Jt}`);const ir=Yn.match(/\s|\//),yr=Et.match(/\s|\//);if(ir||yr){const Qr=[`Unable to register library "${Yn}" with version "${Et}":`];return ir&&Qr.push(`library name "${Yn}" contains illegal characters (whitespace or "/")`),ir&&yr&&Qr.push("and"),yr&&Qr.push(`version name "${Et}" contains illegal characters (whitespace or "/")`),void ot.warn(Qr.join(" "))}Zr(new fe.wA(`${Yn}-version`,()=>({library:Yn,version:Et}),"VERSION"))}function os(Ut,Et){if(null!==Ut&&"function"!=typeof Ut)throw mr.create("invalid-log-argument");(0,se.Am)(Ut,Et)}function Ar(Ut){(0,se.Ub)(Ut)}const vs="firebase-heartbeat-database",Rn=1,tt="firebase-heartbeat-store";let ve=null;function be(){return ve||(ve=function _e(Ut,Et,{blocked:Jt,upgrade:An,blocking:Yn,terminated:ir}={}){const yr=indexedDB.open(Ut,Et),Qr=Y(yr);return An&&yr.addEventListener("upgradeneeded",fi=>{An(Y(yr.result),fi.oldVersion,fi.newVersion,Y(yr.transaction),fi)}),Jt&&yr.addEventListener("blocked",fi=>Jt(fi.oldVersion,fi.newVersion,fi)),Qr.then(fi=>{ir&&fi.addEventListener("close",()=>ir()),Yn&&fi.addEventListener("versionchange",pi=>Yn(pi.oldVersion,pi.newVersion,pi))}).catch(()=>{}),Qr}(vs,Rn,{upgrade:(Ut,Et)=>{0===Et&&Ut.createObjectStore(tt)}}).catch(Ut=>{throw mr.create("idb-open",{originalErrorMessage:Ut.message})})),ve}function Ae(){return(Ae=(0,y.Z)(function*(Ut){try{return yield(yield be()).transaction(tt).objectStore(tt).get(Tn(Ut))}catch(Et){if(Et instanceof V.ZR)ot.warn(Et.message);else{const Jt=mr.create("idb-get",{originalErrorMessage:Et?.message});ot.warn(Jt.message)}}})).apply(this,arguments)}function yt(Ut,Et){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,y.Z)(function*(Ut,Et){try{const An=(yield be()).transaction(tt,"readwrite");yield An.objectStore(tt).put(Et,Tn(Ut)),yield An.done}catch(Jt){if(Jt instanceof V.ZR)ot.warn(Jt.message);else{const An=mr.create("idb-set",{originalErrorMessage:Jt?.message});ot.warn(An.message)}}})).apply(this,arguments)}function Tn(Ut){return`${Ut.name}!${Ut.options.appId}`}class Ne{constructor(Et){this.container=Et,this._heartbeatsCache=null;const Jt=this.container.getProvider("app").getImmediate();this._storage=new Zn(Jt),this._heartbeatsCachePromise=this._storage.read().then(An=>(this._heartbeatsCache=An,An))}triggerHeartbeat(){var Et=this;return(0,y.Z)(function*(){const An=Et.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Yn=ct();if(null===Et._heartbeatsCache&&(Et._heartbeatsCache=yield Et._heartbeatsCachePromise),Et._heartbeatsCache.lastSentHeartbeatDate!==Yn&&!Et._heartbeatsCache.heartbeats.some(ir=>ir.date===Yn))return Et._heartbeatsCache.heartbeats.push({date:Yn,agent:An}),Et._heartbeatsCache.heartbeats=Et._heartbeatsCache.heartbeats.filter(ir=>{const yr=new Date(ir.date).valueOf();return Date.now()-yr<=2592e6}),Et._storage.overwrite(Et._heartbeatsCache)})()}getHeartbeatsHeader(){var Et=this;return(0,y.Z)(function*(){if(null===Et._heartbeatsCache&&(yield Et._heartbeatsCachePromise),null===Et._heartbeatsCache||0===Et._heartbeatsCache.heartbeats.length)return"";const Jt=ct(),{heartbeatsToSend:An,unsentEntries:Yn}=function cn(Ut,Et=1024){const Jt=[];let An=Ut.slice();for(const Yn of Ut){const ir=Jt.find(yr=>yr.agent===Yn.agent);if(ir){if(ir.dates.push(Yn.date),kr(Jt)>Et){ir.dates.pop();break}}else if(Jt.push({agent:Yn.agent,dates:[Yn.date]}),kr(Jt)>Et){Jt.pop();break}An=An.slice(1)}return{heartbeatsToSend:Jt,unsentEntries:An}}(Et._heartbeatsCache.heartbeats),ir=(0,V.L)(JSON.stringify({version:2,heartbeats:An}));return Et._heartbeatsCache.lastSentHeartbeatDate=Jt,Yn.length>0?(Et._heartbeatsCache.heartbeats=Yn,yield Et._storage.overwrite(Et._heartbeatsCache)):(Et._heartbeatsCache.heartbeats=[],Et._storage.overwrite(Et._heartbeatsCache)),ir})()}}function ct(){return(new Date).toISOString().substring(0,10)}class Zn{constructor(Et){this.app=Et,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,V.hl)()&&(0,V.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Et=this;return(0,y.Z)(function*(){return(yield Et._canUseIndexedDBPromise)&&(yield function ye(Ut){return Ae.apply(this,arguments)}(Et.app))||{heartbeats:[]}})()}overwrite(Et){var Jt=this;return(0,y.Z)(function*(){var An;if(yield Jt._canUseIndexedDBPromise){const ir=yield Jt.read();return yt(Jt.app,{lastSentHeartbeatDate:null!==(An=Et.lastSentHeartbeatDate)&&void 0!==An?An:ir.lastSentHeartbeatDate,heartbeats:Et.heartbeats})}})()}add(Et){var Jt=this;return(0,y.Z)(function*(){var An;if(yield Jt._canUseIndexedDBPromise){const ir=yield Jt.read();return yt(Jt.app,{lastSentHeartbeatDate:null!==(An=Et.lastSentHeartbeatDate)&&void 0!==An?An:ir.lastSentHeartbeatDate,heartbeats:[...ir.heartbeats,...Et.heartbeats]})}})()}}function kr(Ut){return(0,V.L)(JSON.stringify({version:2,heartbeats:Ut})).length}!function ti(Ut){Zr(new fe.wA("platform-logger",Et=>new bt(Et),"PRIVATE")),Zr(new fe.wA("heartbeat",Et=>new Ne(Et),"PRIVATE")),Vr($t,"0.9.13",Ut),Vr($t,"0.9.13","esm2017"),Vr("fire-js","")}("")},4537:(nn,st,H)=>{"use strict";H.d(st,{H0:()=>Xe,wA:()=>se});var y=H(5861),fe=H(9058);class se{constructor(Se,Re,Le){this.name=Se,this.instanceFactory=Re,this.type=Le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Se){return this.instantiationMode=Se,this}setMultipleInstances(Se){return this.multipleInstances=Se,this}setServiceProps(Se){return this.serviceProps=Se,this}setInstanceCreatedCallback(Se){return this.onInstanceCreated=Se,this}}const V="[DEFAULT]";class Ce{constructor(Se,Re){this.name=Se,this.container=Re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Se){const Re=this.normalizeInstanceIdentifier(Se);if(!this.instancesDeferred.has(Re)){const Le=new fe.BH;if(this.instancesDeferred.set(Re,Le),this.isInitialized(Re)||this.shouldAutoInitialize())try{const wt=this.getOrInitializeService({instanceIdentifier:Re});wt&&Le.resolve(wt)}catch{}}return this.instancesDeferred.get(Re).promise}getImmediate(Se){var Re;const Le=this.normalizeInstanceIdentifier(Se?.identifier),wt=null!==(Re=Se?.optional)&&void 0!==Re&&Re;if(!this.isInitialized(Le)&&!this.shouldAutoInitialize()){if(wt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Le})}catch(le){if(wt)return null;throw le}}getComponent(){return this.component}setComponent(Se){if(Se.name!==this.name)throw Error(`Mismatching Component ${Se.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Se,this.shouldAutoInitialize()){if(function $e(et){return"EAGER"===et.instantiationMode}(Se))try{this.getOrInitializeService({instanceIdentifier:V})}catch{}for(const[Re,Le]of this.instancesDeferred.entries()){const wt=this.normalizeInstanceIdentifier(Re);try{const le=this.getOrInitializeService({instanceIdentifier:wt});Le.resolve(le)}catch{}}}}clearInstance(Se=V){this.instancesDeferred.delete(Se),this.instancesOptions.delete(Se),this.instances.delete(Se)}delete(){var Se=this;return(0,y.Z)(function*(){const Re=Array.from(Se.instances.values());yield Promise.all([...Re.filter(Le=>"INTERNAL"in Le).map(Le=>Le.INTERNAL.delete()),...Re.filter(Le=>"_delete"in Le).map(Le=>Le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Se=V){return this.instances.has(Se)}getOptions(Se=V){return this.instancesOptions.get(Se)||{}}initialize(Se={}){const{options:Re={}}=Se,Le=this.normalizeInstanceIdentifier(Se.instanceIdentifier);if(this.isInitialized(Le))throw Error(`${this.name}(${Le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const wt=this.getOrInitializeService({instanceIdentifier:Le,options:Re});for(const[le,vt]of this.instancesDeferred.entries())Le===this.normalizeInstanceIdentifier(le)&&vt.resolve(wt);return wt}onInit(Se,Re){var Le;const wt=this.normalizeInstanceIdentifier(Re),le=null!==(Le=this.onInitCallbacks.get(wt))&&void 0!==Le?Le:new Set;le.add(Se),this.onInitCallbacks.set(wt,le);const vt=this.instances.get(wt);return vt&&Se(vt,wt),()=>{le.delete(Se)}}invokeOnInitCallbacks(Se,Re){const Le=this.onInitCallbacks.get(Re);if(Le)for(const wt of Le)try{wt(Se,Re)}catch{}}getOrInitializeService({instanceIdentifier:Se,options:Re={}}){let Le=this.instances.get(Se);if(!Le&&this.component&&(Le=this.component.instanceFactory(this.container,{instanceIdentifier:(et=Se,et===V?void 0:et),options:Re}),this.instances.set(Se,Le),this.instancesOptions.set(Se,Re),this.invokeOnInitCallbacks(Le,Se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Se,Le)}catch{}var et;return Le||null}normalizeInstanceIdentifier(Se=V){return this.component?this.component.multipleInstances?Se:V:Se}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xe{constructor(Se){this.name=Se,this.providers=new Map}addComponent(Se){const Re=this.getProvider(Se.name);if(Re.isComponentSet())throw new Error(`Component ${Se.name} has already been registered with ${this.name}`);Re.setComponent(Se)}addOrOverwriteComponent(Se){this.getProvider(Se.name).isComponentSet()&&this.providers.delete(Se.name),this.addComponent(Se)}getProvider(Se){if(this.providers.has(Se))return this.providers.get(Se);const Re=new Ce(Se,this);return this.providers.set(Se,Re),Re}getProviders(){return Array.from(this.providers.values())}}},7879:(nn,st,H)=>{"use strict";H.d(st,{Am:()=>et,Ub:()=>Xe,Yd:()=>$e,in:()=>fe});const y=[];var fe=(()=>((fe=fe||{})[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe))();const se={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},V=fe.INFO,Ce={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},De=(Se,Re,...Le)=>{if(Re<Se.logLevel)return;const wt=(new Date).toISOString(),le=Ce[Re];if(!le)throw new Error(`Attempted to log a message with an invalid logType (value: ${Re})`);console[le](`[${wt}]  ${Se.name}:`,...Le)};class $e{constructor(Re){this.name=Re,this._logLevel=V,this._logHandler=De,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(Re){if(!(Re in fe))throw new TypeError(`Invalid value "${Re}" assigned to \`logLevel\``);this._logLevel=Re}setLogLevel(Re){this._logLevel="string"==typeof Re?se[Re]:Re}get logHandler(){return this._logHandler}set logHandler(Re){if("function"!=typeof Re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Re}get userLogHandler(){return this._userLogHandler}set userLogHandler(Re){this._userLogHandler=Re}debug(...Re){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...Re),this._logHandler(this,fe.DEBUG,...Re)}log(...Re){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...Re),this._logHandler(this,fe.VERBOSE,...Re)}info(...Re){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...Re),this._logHandler(this,fe.INFO,...Re)}warn(...Re){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...Re),this._logHandler(this,fe.WARN,...Re)}error(...Re){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...Re),this._logHandler(this,fe.ERROR,...Re)}}function Xe(Se){y.forEach(Re=>{Re.setLogLevel(Se)})}function et(Se,Re){for(const Le of y){let wt=null;Re&&Re.level&&(wt=se[Re.level]),Le.userLogHandler=null===Se?null:(le,vt,...qe)=>{const Tt=qe.map(je=>{if(null==je)return null;if("string"==typeof je)return je;if("number"==typeof je||"boolean"==typeof je)return je.toString();if(je instanceof Error)return je.message;try{return JSON.stringify(je)}catch{return null}}).filter(je=>je).join(" ");vt>=(wt??le.logLevel)&&Se({level:fe[vt].toLowerCase(),message:Tt,args:qe,type:le.name})}}}},3182:(nn,st,H)=>{"use strict";H.d(st,{C6:()=>y.getApps,Mq:()=>y.getApp});var y=H(534);(0,y.registerVersion)("firebase","9.23.0","app")},7142:(nn,st,H)=>{"use strict";H.d(st,{Z:()=>y.Z});var y=H(3106);y.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(nn,st,H)=>{"use strict";H.r(st);var y=H(5861),fe=H(3106),se=H(9058),V=H(534),Ce=H(7582),De=H(7879),$e=H(4537);const et={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const vt=function wt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},qe=function le(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Tt=new se.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ve=new De.Yd("@firebase/auth");function Y(S,...m){Ve.logLevel<=De.in.ERROR&&Ve.error(`Auth (${V.SDK_VERSION}): ${S}`,...m)}function Ee(S,...m){throw W(S,...m)}function _e(S,...m){return W(S,...m)}function Fe(S,m,b){const x=Object.assign(Object.assign({},qe()),{[m]:b});return new se.LL("auth","Firebase",x).create(m,{appName:S.name})}function ut(S,m,b){if(!(m instanceof b))throw b.name!==m.constructor.name&&Ee(S,"argument-error"),Fe(S,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function W(S,...m){if("string"!=typeof S){const b=m[0],x=[...m.slice(1)];return x[0]&&(x[0].appName=S.name),S._errorFactory.create(b,...x)}return Tt.create(S,...m)}function ne(S,m,...b){if(!S)throw W(m,...b)}function Pe(S){const m="INTERNAL ASSERTION FAILED: "+S;throw Y(m),new Error(m)}function bt(S,m){S||Pe(m)}function Bt(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.href)||""}function $t(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.protocol)||null}class rt{constructor(m,b){this.shortDelay=m,this.longDelay=b,bt(b>m,"Short delay should be less than long delay!"),this.isMobile=(0,se.uI)()||(0,se.b$)()}get(){return function ot(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($t()||(0,se.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qe(S,m){bt(S.emulator,"Emulator should always be set here");const{url:b}=S.emulator;return m?`${b}${m.startsWith("/")?m.slice(1):m}`:b}class dt{static initialize(m,b,x){this.fetchImpl=m,b&&(this.headersImpl=b),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const at={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ot=new rt(3e4,6e4);function qt(S,m){return S.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:S.tenantId}):m}function jt(S,m,b,x){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,y.Z)(function*(S,m,b,x,te={}){return Kt(S,te,(0,y.Z)(function*(){let ge={},Ze={};x&&("GET"===m?Ze=x:ge={body:JSON.stringify(x)});const kt=(0,se.xO)(Object.assign({key:S.config.apiKey},Ze)).slice(1),mn=yield S._getAdditionalHeaders();return mn["Content-Type"]="application/json",S.languageCode&&(mn["X-Firebase-Locale"]=S.languageCode),dt.fetch()(zn(S,S.config.apiHost,b,kt),Object.assign({method:m,headers:mn,referrerPolicy:"no-referrer"},ge))}))})).apply(this,arguments)}function Kt(S,m,b){return wn.apply(this,arguments)}function wn(){return(wn=(0,y.Z)(function*(S,m,b){S._canInitEmulator=!1;const x=Object.assign(Object.assign({},at),m);try{const te=new ur(S),ge=yield Promise.race([b(),te.promise]);te.clearNetworkTimeout();const Ze=yield ge.json();if("needConfirmation"in Ze)throw rr(S,"account-exists-with-different-credential",Ze);if(ge.ok&&!("errorMessage"in Ze))return Ze;{const kt=ge.ok?Ze.errorMessage:Ze.error.message,[mn,Pn]=kt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===mn)throw rr(S,"credential-already-in-use",Ze);if("EMAIL_EXISTS"===mn)throw rr(S,"email-already-in-use",Ze);if("USER_DISABLED"===mn)throw rr(S,"user-disabled",Ze);const gt=x[mn]||mn.toLowerCase().replace(/[_\s]+/g,"-");if(Pn)throw Fe(S,gt,Pn);Ee(S,gt)}}catch(te){if(te instanceof se.ZR)throw te;Ee(S,"network-request-failed",{message:String(te)})}})).apply(this,arguments)}function Fn(S,m,b,x){return jn.apply(this,arguments)}function jn(){return(jn=(0,y.Z)(function*(S,m,b,x,te={}){const ge=yield jt(S,m,b,x,te);return"mfaPendingCredential"in ge&&Ee(S,"multi-factor-auth-required",{_serverResponse:ge}),ge})).apply(this,arguments)}function zn(S,m,b,x){const te=`${m}${b}?${x}`;return S.config.emulator?Qe(S.config,te):`${S.config.apiScheme}://${te}`}class ur{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((b,x)=>{this.timer=setTimeout(()=>x(_e(this.auth,"network-request-failed")),Ot.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rr(S,m,b){const x={appName:S.name};b.email&&(x.email=b.email),b.phoneNumber&&(x.phoneNumber=b.phoneNumber);const te=_e(S,m,x);return te.customData._tokenResponse=b,te}function wr(){return(wr=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Cr(){return(Cr=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Mr(){return(Mr=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Pr(S){if(S)try{const m=new Date(Number(S));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function dn(){return(dn=(0,y.Z)(function*(S,m=!1){const b=(0,se.m9)(S),x=yield b.getIdToken(m),te=Nn(x);ne(te&&te.exp&&te.auth_time&&te.iat,b.auth,"internal-error");const ge="object"==typeof te.firebase?te.firebase:void 0,Ze=ge?.sign_in_provider;return{claims:te,token:x,authTime:Pr(Bn(te.auth_time)),issuedAtTime:Pr(Bn(te.iat)),expirationTime:Pr(Bn(te.exp)),signInProvider:Ze||null,signInSecondFactor:ge?.sign_in_second_factor||null}})).apply(this,arguments)}function Bn(S){return 1e3*Number(S)}function Nn(S){const[m,b,x]=S.split(".");if(void 0===m||void 0===b||void 0===x)return Y("JWT malformed, contained fewer than 3 sections"),null;try{const te=(0,se.tV)(b);return te?JSON.parse(te):(Y("Failed to decode base64 JWT payload"),null)}catch(te){return Y("Caught error parsing JWT payload as JSON",te?.toString()),null}}function sr(S,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,y.Z)(function*(S,m,b=!1){if(b)return m;try{return yield m}catch(x){throw x instanceof se.ZR&&function Zr({code:S}){return"auth/user-disabled"===S||"auth/user-token-expired"===S}(x)&&S.auth.currentUser===S&&(yield S.auth.signOut()),x}})).apply(this,arguments)}class _i{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var b;if(m){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const te=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,te)}}schedule(m=!1){var b=this;if(!this.isRunning)return;const x=this.getInterval(m);this.timerId=setTimeout((0,y.Z)(function*(){yield b.iteration()}),x)}iteration(){var m=this;return(0,y.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===b?.code&&m.schedule(!0))}m.schedule()})()}}class Ws{constructor(m,b){this.createdAt=m,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pr(this.lastLoginAt),this.creationTime=Pr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rr(S){return On.apply(this,arguments)}function On(){return On=(0,y.Z)(function*(S){var m;const b=S.auth,x=yield S.getIdToken(),te=yield sr(S,function Hr(S,m){return Mr.apply(this,arguments)}(b,{idToken:x}));ne(te?.users.length,b,"internal-error");const ge=te.users[0];S._notifyReloadListener(ge);const Ze=null!==(m=ge.providerUserInfo)&&void 0!==m&&m.length?function zi(S){return S.map(m=>{var{providerId:b}=m,x=(0,Ce._T)(m,["providerId"]);return{providerId:b,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(ge.providerUserInfo):[],kt=function gr(S,m){return[...S.filter(x=>!m.some(te=>te.providerId===x.providerId)),...m]}(S.providerData,Ze),gt=!!S.isAnonymous&&!(S.email&&ge.passwordHash||kt?.length),ar={uid:ge.localId,displayName:ge.displayName||null,photoURL:ge.photoUrl||null,email:ge.email||null,emailVerified:ge.emailVerified||!1,phoneNumber:ge.phoneNumber||null,tenantId:ge.tenantId||null,providerData:kt,metadata:new Ws(ge.createdAt,ge.lastLoginAt),isAnonymous:gt};Object.assign(S,ar)}),On.apply(this,arguments)}function ns(){return(ns=(0,y.Z)(function*(S){const m=(0,se.m9)(S);yield Rr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Xi(){return(Xi=(0,y.Z)(function*(S,m){const b=yield Kt(S,{},(0,y.Z)(function*(){const x=(0,se.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:te,apiKey:ge}=S.config,Ze=zn(S,te,"/v1/token",`key=${ge}`),kt=yield S._getAdditionalHeaders();return kt["Content-Type"]="application/x-www-form-urlencoded",dt.fetch()(Ze,{method:"POST",headers:kt,body:x})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class bi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ne(m.idToken,"internal-error"),ne(typeof m.idToken<"u","internal-error"),ne(typeof m.refreshToken<"u","internal-error");const b="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function xr(S){const m=Nn(S);return ne(m,"internal-error"),ne(typeof m.exp<"u","internal-error"),ne(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,b)}getToken(m,b=!1){var x=this;return(0,y.Z)(function*(){return ne(!x.accessToken||x.refreshToken,m,"user-token-expired"),b||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(m,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,b){var x=this;return(0,y.Z)(function*(){const{accessToken:te,refreshToken:ge,expiresIn:Ze}=yield function di(S,m){return Xi.apply(this,arguments)}(m,b);x.updateTokensAndExpiration(te,ge,Number(Ze))})()}updateTokensAndExpiration(m,b,x){this.refreshToken=b||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(m,b){const{refreshToken:x,accessToken:te,expirationTime:ge}=b,Ze=new bi;return x&&(ne("string"==typeof x,"internal-error",{appName:m}),Ze.refreshToken=x),te&&(ne("string"==typeof te,"internal-error",{appName:m}),Ze.accessToken=te),ge&&(ne("number"==typeof ge,"internal-error",{appName:m}),Ze.expirationTime=ge),Ze}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new bi,this.toJSON())}_performRefresh(){return Pe("not implemented")}}function wi(S,m){ne("string"==typeof S||typeof S>"u","internal-error",{appName:m})}class Vr{constructor(m){var{uid:b,auth:x,stsTokenManager:te}=m,ge=(0,Ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _i(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=x,this.stsTokenManager=te,this.accessToken=te.accessToken,this.displayName=ge.displayName||null,this.email=ge.email||null,this.emailVerified=ge.emailVerified||!1,this.phoneNumber=ge.phoneNumber||null,this.photoURL=ge.photoURL||null,this.isAnonymous=ge.isAnonymous||!1,this.tenantId=ge.tenantId||null,this.providerData=ge.providerData?[...ge.providerData]:[],this.metadata=new Ws(ge.createdAt||void 0,ge.lastLoginAt||void 0)}getIdToken(m){var b=this;return(0,y.Z)(function*(){const x=yield sr(b,b.stsTokenManager.getToken(b.auth,m));return ne(x,b.auth,"internal-error"),b.accessToken!==x&&(b.accessToken=x,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),x})()}getIdTokenResult(m){return function Ir(S){return dn.apply(this,arguments)}(this,m)}reload(){return function mr(S){return ns.apply(this,arguments)}(this)}_assign(m){this!==m&&(ne(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(b=>Object.assign({},b)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const b=new Vr(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return b.metadata._copy(this.metadata),b}_onReload(m){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,b=!1){var x=this;return(0,y.Z)(function*(){let te=!1;m.idToken&&m.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(m),te=!0),b&&(yield Rr(x)),yield x.auth._persistUserIfCurrent(x),te&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var m=this;return(0,y.Z)(function*(){const b=yield m.getIdToken();return yield sr(m,function $n(S,m){return wr.apply(this,arguments)}(m.auth,{idToken:b})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,b){var x,te,ge,Ze,kt,mn,Pn,gt;const ar=null!==(x=b.displayName)&&void 0!==x?x:void 0,Os=null!==(te=b.email)&&void 0!==te?te:void 0,ku=null!==(ge=b.phoneNumber)&&void 0!==ge?ge:void 0,Zd=null!==(Ze=b.photoURL)&&void 0!==Ze?Ze:void 0,Hh=null!==(kt=b.tenantId)&&void 0!==kt?kt:void 0,Ec=null!==(mn=b._redirectEventId)&&void 0!==mn?mn:void 0,pa=null!==(Pn=b.createdAt)&&void 0!==Pn?Pn:void 0,zl=null!==(gt=b.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:aa,emailVerified:ms,isAnonymous:ua,providerData:Mu,stsTokenManager:yu}=b;ne(aa&&yu,m,"internal-error");const Of=bi.fromJSON(this.name,yu);ne("string"==typeof aa,m,"internal-error"),wi(ar,m.name),wi(Os,m.name),ne("boolean"==typeof ms,m,"internal-error"),ne("boolean"==typeof ua,m,"internal-error"),wi(ku,m.name),wi(Zd,m.name),wi(Hh,m.name),wi(Ec,m.name),wi(pa,m.name),wi(zl,m.name);const yl=new Vr({uid:aa,auth:m,email:Os,emailVerified:ms,displayName:ar,isAnonymous:ua,photoURL:Zd,phoneNumber:ku,tenantId:Hh,stsTokenManager:Of,createdAt:pa,lastLoginAt:zl});return Mu&&Array.isArray(Mu)&&(yl.providerData=Mu.map(Gc=>Object.assign({},Gc))),Ec&&(yl._redirectEventId=Ec),yl}static _fromIdTokenResponse(m,b,x=!1){return(0,y.Z)(function*(){const te=new bi;te.updateFromServerResponse(b);const ge=new Vr({uid:b.localId,auth:m,stsTokenManager:te,isAnonymous:x});return yield Rr(ge),ge})()}}const os=new Map;function Ar(S){bt(S instanceof Function,"Expected a class definition");let m=os.get(S);return m?(bt(m instanceof S,"Instance stored in cache mismatched with class"),m):(m=new S,os.set(S,m),m)}const Rn=(()=>{class S{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(b,x){var te=this;return(0,y.Z)(function*(){te.storage[b]=x})()}_get(b){var x=this;return(0,y.Z)(function*(){const te=x.storage[b];return void 0===te?null:te})()}_remove(b){var x=this;return(0,y.Z)(function*(){delete x.storage[b]})()}_addListener(b,x){}_removeListener(b,x){}}return S.type="NONE",S})();function tt(S,m,b){return`firebase:${S}:${m}:${b}`}class ve{constructor(m,b,x){this.persistence=m,this.auth=b,this.userKey=x;const{config:te,name:ge}=this.auth;this.fullUserKey=tt(this.userKey,te.apiKey,ge),this.fullPersistenceKey=tt("persistence",te.apiKey,ge),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,y.Z)(function*(){const b=yield m.persistence._get(m.fullUserKey);return b?Vr._fromJSON(m.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var b=this;return(0,y.Z)(function*(){if(b.persistence===m)return;const x=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=m,x?b.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,b,x="authUser"){return(0,y.Z)(function*(){if(!b.length)return new ve(Ar(Rn),m,x);const te=(yield Promise.all(b.map(function(){var Pn=(0,y.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Pn.apply(this,arguments)}}()))).filter(Pn=>Pn);let ge=te[0]||Ar(Rn);const Ze=tt(x,m.config.apiKey,m.name);let kt=null;for(const Pn of b)try{const gt=yield Pn._get(Ze);if(gt){const ar=Vr._fromJSON(m,gt);Pn!==ge&&(kt=ar),ge=Pn;break}}catch{}const mn=te.filter(Pn=>Pn._shouldAllowMigration);return ge._shouldAllowMigration&&mn.length?(ge=mn[0],kt&&(yield ge._set(Ze,kt.toJSON())),yield Promise.all(b.map(function(){var Pn=(0,y.Z)(function*(gt){if(gt!==ge)try{yield gt._remove(Ze)}catch{}});return function(gt){return Pn.apply(this,arguments)}}())),new ve(ge,m,x)):new ve(ge,m,x)})()}}function be(S){const m=S.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Yt(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(ye(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(he(m))return"Blackberry";if(pe(m))return"Webos";if(Ae(m))return"Safari";if((m.includes("chrome/")||yt(m))&&!m.includes("edge/"))return"Chrome";if(Tn(m))return"Android";{const x=S.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===x?.length)return x[1]}return"Other"}function ye(S=(0,se.z$)()){return/firefox\//i.test(S)}function Ae(S=(0,se.z$)()){const m=S.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function yt(S=(0,se.z$)()){return/crios\//i.test(S)}function Yt(S=(0,se.z$)()){return/iemobile/i.test(S)}function Tn(S=(0,se.z$)()){return/android/i.test(S)}function he(S=(0,se.z$)()){return/blackberry/i.test(S)}function pe(S=(0,se.z$)()){return/webos/i.test(S)}function Ne(S=(0,se.z$)()){return/iphone|ipad|ipod/i.test(S)||/macintosh/i.test(S)&&/mobile/i.test(S)}function kr(S=(0,se.z$)()){return Ne(S)||Tn(S)||pe(S)||he(S)||/windows phone/i.test(S)||Yt(S)}function Ut(S,m=[]){let b;switch(S){case"Browser":b=be((0,se.z$)());break;case"Worker":b=`${be((0,se.z$)())}-${S}`;break;default:b=S}const x=m.length?m.join(","):"FirebaseCore-web";return`${b}/JsCore/${V.SDK_VERSION}/${x}`}function Jt(){return(Jt=(0,y.Z)(function*(S){return(yield jt(S,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function An(S,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,y.Z)(function*(S,m){return jt(S,"GET","/v2/recaptchaConfig",qt(S,m))})).apply(this,arguments)}function ir(S){return void 0!==S&&void 0!==S.getResponse}function yr(S){return void 0!==S&&void 0!==S.enterprise}class Qr{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(b=>"EMAIL_PASSWORD_PROVIDER"===b.provider&&"OFF"!==b.enforcementState)}}function pi(S){return new Promise((m,b)=>{const x=document.createElement("script");x.setAttribute("src",S),x.onload=m,x.onerror=te=>{const ge=_e("internal-error");ge.customData=te,b(ge)},x.type="text/javascript",x.charset="UTF-8",function fi(){var S,m;return null!==(m=null===(S=document.getElementsByTagName("head"))||void 0===S?void 0:S[0])&&void 0!==m?m:document}().appendChild(x)})}function rs(S){return`__${S}${Math.floor(1e6*Math.random())}`}class la{constructor(m){this.type="recaptcha-enterprise",this.auth=oi(m)}verify(m="verify",b=!1){var x=this;return(0,y.Z)(function*(){function ge(){return ge=(0,y.Z)(function*(kt){if(!b){if(null==kt.tenantId&&null!=kt._agentRecaptchaConfig)return kt._agentRecaptchaConfig.siteKey;if(null!=kt.tenantId&&void 0!==kt._tenantRecaptchaConfigs[kt.tenantId])return kt._tenantRecaptchaConfigs[kt.tenantId].siteKey}return new Promise(function(){var mn=(0,y.Z)(function*(Pn,gt){An(kt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ar=>{if(void 0!==ar.recaptchaKey){const Os=new Qr(ar);return null==kt.tenantId?kt._agentRecaptchaConfig=Os:kt._tenantRecaptchaConfigs[kt.tenantId]=Os,Pn(Os.siteKey)}gt(new Error("recaptcha Enterprise site key undefined"))}).catch(ar=>{gt(ar)})});return function(Pn,gt){return mn.apply(this,arguments)}}())}),ge.apply(this,arguments)}function Ze(kt,mn,Pn){const gt=window.grecaptcha;yr(gt)?gt.enterprise.ready(()=>{gt.enterprise.execute(kt,{action:m}).then(ar=>{mn(ar)}).catch(()=>{mn("NO_RECAPTCHA")})}):Pn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((kt,mn)=>{(function te(kt){return ge.apply(this,arguments)})(x.auth).then(Pn=>{if(!b&&yr(window.grecaptcha))Ze(Pn,kt,mn);else{if(typeof window>"u")return void mn(new Error("RecaptchaVerifier is only supported in browser"));pi("https://www.google.com/recaptcha/enterprise.js?render="+Pn).then(()=>{Ze(Pn,kt,mn)}).catch(gt=>{mn(gt)})}}).catch(Pn=>{mn(Pn)})})})()}}function Ls(S,m,b){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,y.Z)(function*(S,m,b,x=!1){const te=new la(S);let ge;try{ge=yield te.verify(b)}catch{ge=yield te.verify(b,!0)}const Ze=Object.assign({},m);return Object.assign(Ze,x?{captchaResp:ge}:{captchaResponse:ge}),Object.assign(Ze,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ze,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ze})).apply(this,arguments)}class Ss{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,b){const x=ge=>new Promise((Ze,kt)=>{try{Ze(m(ge))}catch(mn){kt(mn)}});x.onAbort=b,this.queue.push(x);const te=this.queue.length-1;return()=>{this.queue[te]=()=>Promise.resolve()}}runMiddleware(m){var b=this;return(0,y.Z)(function*(){if(b.auth.currentUser===m)return;const x=[];try{for(const te of b.queue)yield te(m),te.onAbort&&x.push(te.onAbort)}catch(te){x.reverse();for(const ge of x)try{ge()}catch{}throw b.auth._errorFactory.create("login-blocked",{originalMessage:te?.message})}})()}}class no{constructor(m,b,x,te){this.app=m,this.heartbeatServiceProvider=b,this.appCheckServiceProvider=x,this.config=te,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fo(this),this.idTokenSubscription=new fo(this),this.beforeStateQueue=new Ss(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=te.sdkClientVersion}_initializeWithPersistence(m,b){var x=this;return b&&(this._popupRedirectResolver=Ar(b)),this._initializationPromise=this.queue((0,y.Z)(function*(){var te,ge;if(!x._deleted&&(x.persistenceManager=yield ve.create(x,m),!x._deleted)){if(null!==(te=x._popupRedirectResolver)&&void 0!==te&&te._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(b),x.lastNotifiedUid=(null===(ge=x.currentUser)||void 0===ge?void 0:ge.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,y.Z)(function*(){if(m._deleted)return;const b=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||b){if(m.currentUser&&b&&m.currentUser.uid===b.uid)return m._currentUser._assign(b),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(b,!0)}})()}initializeCurrentUser(m){var b=this;return(0,y.Z)(function*(){var x;const te=yield b.assertedPersistence.getCurrentUser();let ge=te,Ze=!1;if(m&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const kt=null===(x=b.redirectUser)||void 0===x?void 0:x._redirectEventId,mn=ge?._redirectEventId,Pn=yield b.tryRedirectSignIn(m);(!kt||kt===mn)&&Pn?.user&&(ge=Pn.user,Ze=!0)}if(!ge)return b.directlySetCurrentUser(null);if(!ge._redirectEventId){if(Ze)try{yield b.beforeStateQueue.runMiddleware(ge)}catch(kt){ge=te,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(kt))}return ge?b.reloadAndSetCurrentUserOrClear(ge):b.directlySetCurrentUser(null)}return ne(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===ge._redirectEventId?b.directlySetCurrentUser(ge):b.reloadAndSetCurrentUserOrClear(ge)})()}tryRedirectSignIn(m){var b=this;return(0,y.Z)(function*(){let x=null;try{x=yield b._popupRedirectResolver._completeRedirectFn(b,m,!0)}catch{yield b._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(m){var b=this;return(0,y.Z)(function*(){try{yield Rr(m)}catch(x){if("auth/network-request-failed"!==x?.code)return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Ye(){if(typeof navigator>"u")return null;const S=navigator;return S.languages&&S.languages[0]||S.language||null}()}_delete(){var m=this;return(0,y.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var b=this;return(0,y.Z)(function*(){const x=m?(0,se.m9)(m):null;return x&&ne(x.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(x&&x._clone(b))})()}_updateCurrentUser(m,b=!1){var x=this;return(0,y.Z)(function*(){if(!x._deleted)return m&&ne(x.tenantId===m.tenantId,x,"tenant-id-mismatch"),b||(yield x.beforeStateQueue.runMiddleware(m)),x.queue((0,y.Z)(function*(){yield x.directlySetCurrentUser(m),x.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,y.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var b=this;return this.queue((0,y.Z)(function*(){yield b.assertedPersistence.setPersistence(Ar(m))}))}initializeRecaptchaConfig(){var m=this;return(0,y.Z)(function*(){const b=yield An(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),x=new Qr(b);null==m.tenantId?m._agentRecaptchaConfig=x:m._tenantRecaptchaConfigs[m.tenantId]=x,x.emailPasswordEnabled&&new la(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new se.LL("auth","Firebase",m())}onAuthStateChanged(m,b,x){return this.registerStateListener(this.authStateSubscription,m,b,x)}beforeAuthStateChanged(m,b){return this.beforeStateQueue.pushCallback(m,b)}onIdTokenChanged(m,b,x){return this.registerStateListener(this.idTokenSubscription,m,b,x)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,b){var x=this;return(0,y.Z)(function*(){const te=yield x.getOrInitRedirectPersistenceManager(b);return null===m?te.removeCurrentUser():te.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var b=this;return(0,y.Z)(function*(){if(!b.redirectPersistenceManager){const x=m&&Ar(m)||b._popupRedirectResolver;ne(x,b,"argument-error"),b.redirectPersistenceManager=yield ve.create(b,[Ar(x._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(m){var b=this;return(0,y.Z)(function*(){var x,te;return b._isInitialized&&(yield b.queue((0,y.Z)(function*(){}))),(null===(x=b._currentUser)||void 0===x?void 0:x._redirectEventId)===m?b._currentUser:(null===(te=b.redirectUser)||void 0===te?void 0:te._redirectEventId)===m?b.redirectUser:null})()}_persistUserIfCurrent(m){var b=this;return(0,y.Z)(function*(){if(m===b.currentUser)return b.queue((0,y.Z)(function*(){return b.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(b=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,b,x,te){if(this._deleted)return()=>{};const ge="function"==typeof b?b:b.next.bind(b),Ze=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(Ze,this,"internal-error"),Ze.then(()=>ge(this.currentUser)),"function"==typeof b?m.addObserver(b,x,te):m.addObserver(b)}directlySetCurrentUser(m){var b=this;return(0,y.Z)(function*(){b.currentUser&&b.currentUser!==m&&b._currentUser._stopProactiveRefresh(),m&&b.isProactiveRefreshEnabled&&m._startProactiveRefresh(),b.currentUser=m,m?yield b.assertedPersistence.setCurrentUser(m):yield b.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Ut(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,y.Z)(function*(){var b;const x={"X-Client-Version":m.clientVersion};m.app.options.appId&&(x["X-Firebase-gmpid"]=m.app.options.appId);const te=yield null===(b=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();te&&(x["X-Firebase-Client"]=te);const ge=yield m._getAppCheckToken();return ge&&(x["X-Firebase-AppCheck"]=ge),x})()}_getAppCheckToken(){var m=this;return(0,y.Z)(function*(){var b;const x=yield null===(b=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getToken();return x?.error&&function J(S,...m){Ve.logLevel<=De.in.WARN&&Ve.warn(`Auth (${V.SDK_VERSION}): ${S}`,...m)}(`Error while retrieving App Check token: ${x.error}`),x?.token})()}}function oi(S){return(0,se.m9)(S)}class fo{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,se.ne)(b=>this.observer=b)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ro(S){const m=S.indexOf(":");return m<0?"":S.substr(0,m+1)}function ba(S){if(!S)return null;const m=Number(S);return isNaN(m)?null:m}class Fs{constructor(m,b){this.providerId=m,this.signInMethod=b}toJSON(){return Pe("not implemented")}_getIdTokenResponse(m){return Pe("not implemented")}_linkToIdToken(m,b){return Pe("not implemented")}_getReauthenticationResolver(m){return Pe("not implemented")}}function za(S,m){return as.apply(this,arguments)}function as(){return(as=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:resetPassword",qt(S,m))})).apply(this,arguments)}function qa(S,m){return As.apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function us(){return(us=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:update",qt(S,m))})).apply(this,arguments)}function Ci(S,m){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,y.Z)(function*(S,m){return Fn(S,"POST","/v1/accounts:signInWithPassword",qt(S,m))})).apply(this,arguments)}function is(S,m){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:sendOobCode",qt(S,m))})).apply(this,arguments)}function ft(){return(ft=(0,y.Z)(function*(S,m){return is(S,m)})).apply(this,arguments)}function Ct(S,m){return tn.apply(this,arguments)}function tn(){return(tn=(0,y.Z)(function*(S,m){return is(S,m)})).apply(this,arguments)}function ln(S,m){return rn.apply(this,arguments)}function rn(){return(rn=(0,y.Z)(function*(S,m){return is(S,m)})).apply(this,arguments)}function Dn(){return(Dn=(0,y.Z)(function*(S,m){return is(S,m)})).apply(this,arguments)}function $s(){return($s=(0,y.Z)(function*(S,m){return Fn(S,"POST","/v1/accounts:signInWithEmailLink",qt(S,m))})).apply(this,arguments)}function ls(){return(ls=(0,y.Z)(function*(S,m){return Fn(S,"POST","/v1/accounts:signInWithEmailLink",qt(S,m))})).apply(this,arguments)}class Li extends Fs{constructor(m,b,x,te=null){super("password",x),this._email=m,this._password=b,this._tenantId=te}static _fromEmailAndPassword(m,b){return new Li(m,b,"password")}static _fromEmailAndCode(m,b,x=null){return new Li(m,b,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const b="string"==typeof m?JSON.parse(m):m;if(b?.email&&b?.password){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(m){var b=this;return(0,y.Z)(function*(){var x;switch(b.signInMethod){case"password":const te={returnSecureToken:!0,email:b._email,password:b._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=m._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const ge=yield Ls(m,te,"signInWithPassword");return Ci(m,ge)}return Ci(m,te).catch(function(){var ge=(0,y.Z)(function*(Ze){if("auth/missing-recaptcha-token"===Ze.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const kt=yield Ls(m,te,"signInWithPassword");return Ci(m,kt)}return Promise.reject(Ze)});return function(Ze){return ge.apply(this,arguments)}}());case"emailLink":return function Sr(S,m){return $s.apply(this,arguments)}(m,{email:b._email,oobCode:b._password});default:Ee(m,"internal-error")}})()}_linkToIdToken(m,b){var x=this;return(0,y.Z)(function*(){switch(x.signInMethod){case"password":return qa(m,{idToken:b,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function Ni(S,m){return ls.apply(this,arguments)}(m,{idToken:b,email:x._email,oobCode:x._password});default:Ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Xr(S,m){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,y.Z)(function*(S,m){return Fn(S,"POST","/v1/accounts:signInWithIdp",qt(S,m))})).apply(this,arguments)}class Ji extends Fs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const b=new Ji(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(b.idToken=m.idToken),m.accessToken&&(b.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(b.nonce=m.nonce),m.pendingToken&&(b.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(b.accessToken=m.oauthToken,b.secret=m.oauthTokenSecret):Ee("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const b="string"==typeof m?JSON.parse(m):m,{providerId:x,signInMethod:te}=b,ge=(0,Ce._T)(b,["providerId","signInMethod"]);if(!x||!te)return null;const Ze=new Ji(x,te);return Ze.idToken=ge.idToken||void 0,Ze.accessToken=ge.accessToken||void 0,Ze.secret=ge.secret,Ze.nonce=ge.nonce,Ze.pendingToken=ge.pendingToken||null,Ze}_getIdTokenResponse(m){return Xr(m,this.buildRequest())}_linkToIdToken(m,b){const x=this.buildRequest();return x.idToken=b,Xr(m,x)}_getReauthenticationResolver(m){const b=this.buildRequest();return b.autoCreate=!1,Xr(m,b)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),m.postBody=(0,se.xO)(b)}return m}}function ys(){return(ys=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:sendVerificationCode",qt(S,m))})).apply(this,arguments)}function Yo(){return(Yo=(0,y.Z)(function*(S,m){return Fn(S,"POST","/v1/accounts:signInWithPhoneNumber",qt(S,m))})).apply(this,arguments)}function po(){return(po=(0,y.Z)(function*(S,m){const b=yield Fn(S,"POST","/v1/accounts:signInWithPhoneNumber",qt(S,m));if(b.temporaryProof)throw rr(S,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const ta={USER_NOT_FOUND:"user-not-found"};function ks(){return(ks=(0,y.Z)(function*(S,m){return Fn(S,"POST","/v1/accounts:signInWithPhoneNumber",qt(S,Object.assign(Object.assign({},m),{operation:"REAUTH"})),ta)})).apply(this,arguments)}class Si extends Fs{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,b){return new Si({verificationId:m,verificationCode:b})}static _fromTokenResponse(m,b){return new Si({phoneNumber:m,temporaryProof:b})}_getIdTokenResponse(m){return function qi(S,m){return Yo.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,b){return function Go(S,m){return po.apply(this,arguments)}(m,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Eu(S,m){return ks.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:b,verificationId:x,verificationCode:te}=this.params;return m&&b?{temporaryProof:m,phoneNumber:b}:{sessionInfo:x,code:te}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:b,verificationCode:x,phoneNumber:te,temporaryProof:ge}=m;return x||b||te||ge?new Si({verificationId:b,verificationCode:x,phoneNumber:te,temporaryProof:ge}):null}}class Fr{constructor(m){var b,x,te,ge,Ze,kt;const mn=(0,se.zd)((0,se.pd)(m)),Pn=null!==(b=mn.apiKey)&&void 0!==b?b:null,gt=null!==(x=mn.oobCode)&&void 0!==x?x:null,ar=function Ta(S){switch(S){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(te=mn.mode)&&void 0!==te?te:null);ne(Pn&&gt&&ar,"argument-error"),this.apiKey=Pn,this.operation=ar,this.code=gt,this.continueUrl=null!==(ge=mn.continueUrl)&&void 0!==ge?ge:null,this.languageCode=null!==(Ze=mn.languageCode)&&void 0!==Ze?Ze:null,this.tenantId=null!==(kt=mn.tenantId)&&void 0!==kt?kt:null}static parseLink(m){const b=function na(S){const m=(0,se.zd)((0,se.pd)(S)).link,b=m?(0,se.zd)((0,se.pd)(m)).deep_link_id:null,x=(0,se.zd)((0,se.pd)(S)).deep_link_id;return(x?(0,se.zd)((0,se.pd)(x)).link:null)||x||b||m||S}(m);try{return new Fr(b)}catch{return null}}}let Na=(()=>{class S{constructor(){this.providerId=S.PROVIDER_ID}static credential(b,x){return Li._fromEmailAndPassword(b,x)}static credentialWithLink(b,x){const te=Fr.parseLink(x);return ne(te,"argument-error"),Li._fromEmailAndCode(b,te.code,te.tenantId)}}return S.PROVIDER_ID="password",S.EMAIL_PASSWORD_SIGN_IN_METHOD="password",S.EMAIL_LINK_SIGN_IN_METHOD="emailLink",S})();class go{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Hs extends go{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Gs extends Hs{static credentialFromJSON(m){const b="string"==typeof m?JSON.parse(m):m;return ne("providerId"in b&&"signInMethod"in b,"argument-error"),Ji._fromParams(b)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ne(m.idToken||m.accessToken,"argument-error"),Ji._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Gs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Gs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:x,oauthTokenSecret:te,pendingToken:ge,nonce:Ze,providerId:kt}=m;if(!x&&!te&&!b&&!ge||!kt)return null;try{return new Gs(kt)._credential({idToken:b,accessToken:x,nonce:Ze,pendingToken:ge})}catch{return null}}}let Ea=(()=>{class S extends Hs{constructor(){super("facebook.com")}static credential(b){return Ji._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return S.credentialFromTaggedObject(b)}static credentialFromError(b){return S.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return S.credential(b.oauthAccessToken)}catch{return null}}}return S.FACEBOOK_SIGN_IN_METHOD="facebook.com",S.PROVIDER_ID="facebook.com",S})(),uu=(()=>{class S extends Hs{constructor(){super("google.com"),this.addScope("profile")}static credential(b,x){return Ji._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:x})}static credentialFromResult(b){return S.credentialFromTaggedObject(b)}static credentialFromError(b){return S.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:x,oauthAccessToken:te}=b;if(!x&&!te)return null;try{return S.credential(x,te)}catch{return null}}}return S.GOOGLE_SIGN_IN_METHOD="google.com",S.PROVIDER_ID="google.com",S})(),Is=(()=>{class S extends Hs{constructor(){super("github.com")}static credential(b){return Ji._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return S.credentialFromTaggedObject(b)}static credentialFromError(b){return S.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return S.credential(b.oauthAccessToken)}catch{return null}}}return S.GITHUB_SIGN_IN_METHOD="github.com",S.PROVIDER_ID="github.com",S})();class _s extends Fs{constructor(m,b){super(m,m),this.pendingToken=b}_getIdTokenResponse(m){return Xr(m,this.buildRequest())}_linkToIdToken(m,b){const x=this.buildRequest();return x.idToken=b,Xr(m,x)}_getReauthenticationResolver(m){const b=this.buildRequest();return b.autoCreate=!1,Xr(m,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const b="string"==typeof m?JSON.parse(m):m,{providerId:x,signInMethod:te,pendingToken:ge}=b;return x&&te&&ge&&x===te?new _s(x,ge):null}static _create(m,b){return new _s(m,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class io extends go{constructor(m){ne(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return io.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return io.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const b=_s.fromJSON(m);return ne(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:b,providerId:x}=m;if(!b||!x)return null;try{return _s._create(x,b)}catch{return null}}}let js=(()=>{class S extends Hs{constructor(){super("twitter.com")}static credential(b,x){return Ji._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:x})}static credentialFromResult(b){return S.credentialFromTaggedObject(b)}static credentialFromError(b){return S.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:x,oauthTokenSecret:te}=b;if(!x||!te)return null;try{return S.credential(x,te)}catch{return null}}}return S.TWITTER_SIGN_IN_METHOD="twitter.com",S.PROVIDER_ID="twitter.com",S})();function Po(S,m){return cs.apply(this,arguments)}function cs(){return(cs=(0,y.Z)(function*(S,m){return Fn(S,"POST","/v1/accounts:signUp",qt(S,m))})).apply(this,arguments)}class jr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,b,x,te=!1){return(0,y.Z)(function*(){const ge=yield Vr._fromIdTokenResponse(m,x,te),Ze=Oo(x);return new jr({user:ge,providerId:Ze,_tokenResponse:x,operationType:b})})()}static _forOperation(m,b,x){return(0,y.Z)(function*(){yield m._updateTokensIfNecessary(x,!0);const te=Oo(x);return new jr({user:m,providerId:te,_tokenResponse:x,operationType:b})})()}}function Oo(S){return S.providerId?S.providerId:"phoneNumber"in S?"phone":null}function Bu(){return(Bu=(0,y.Z)(function*(S){var m;const b=oi(S);if(yield b._initializationPromise,null!==(m=b.currentUser)&&void 0!==m&&m.isAnonymous)return new jr({user:b.currentUser,providerId:null,operationType:"signIn"});const x=yield Po(b,{returnSecureToken:!0}),te=yield jr._fromIdTokenResponse(b,"signIn",x,!0);return yield b._updateCurrentUser(te.user),te})).apply(this,arguments)}class lu extends se.ZR{constructor(m,b,x,te){var ge;super(b.code,b.message),this.operationType=x,this.user=te,Object.setPrototypeOf(this,lu.prototype),this.customData={appName:m.name,tenantId:null!==(ge=m.tenantId)&&void 0!==ge?ge:void 0,_serverResponse:b.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(m,b,x,te){return new lu(m,b,x,te)}}function wa(S,m,b,x){return("reauthenticate"===m?b._getReauthenticationResolver(S):b._getIdTokenResponse(S)).catch(ge=>{throw"auth/multi-factor-auth-required"===ge.code?lu._fromErrorAndOperation(S,ge,m,x):ge})}function Wa(S){return new Set(S.map(({providerId:m})=>m).filter(m=>!!m))}function To(){return To=(0,y.Z)(function*(S,m){const b=(0,se.m9)(S);yield La(!0,b,m);const{providerUserInfo:x}=yield function Yr(S,m){return Cr.apply(this,arguments)}(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[m]}),te=Wa(x||[]);return b.providerData=b.providerData.filter(ge=>te.has(ge.providerId)),te.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b}),To.apply(this,arguments)}function Ca(S,m){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,y.Z)(function*(S,m,b=!1){const x=yield sr(S,m._linkToIdToken(S.auth,yield S.getIdToken()),b);return jr._forOperation(S,"link",x)})).apply(this,arguments)}function La(S,m,b){return cu.apply(this,arguments)}function cu(){return(cu=(0,y.Z)(function*(S,m,b){yield Rr(m);const te=!1===S?"provider-already-linked":"no-such-provider";ne(Wa(m.providerData).has(b)===S,m.auth,te)})).apply(this,arguments)}function xl(S,m){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,y.Z)(function*(S,m,b=!1){const{auth:x}=S,te="reauthenticate";try{const ge=yield sr(S,wa(x,te,m,S),b);ne(ge.idToken,x,"internal-error");const Ze=Nn(ge.idToken);ne(Ze,x,"internal-error");const{sub:kt}=Ze;return ne(S.uid===kt,x,"user-mismatch"),jr._forOperation(S,te,ge)}catch(ge){throw"auth/user-not-found"===ge?.code&&Ee(x,"user-mismatch"),ge}})).apply(this,arguments)}function du(S,m){return ee.apply(this,arguments)}function ee(){return(ee=(0,y.Z)(function*(S,m,b=!1){const x="signIn",te=yield wa(S,x,m),ge=yield jr._fromIdTokenResponse(S,x,te);return b||(yield S._updateCurrentUser(ge.user)),ge})).apply(this,arguments)}function K(S,m){return G.apply(this,arguments)}function G(){return(G=(0,y.Z)(function*(S,m){return du(oi(S),m)})).apply(this,arguments)}function ke(S,m){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,y.Z)(function*(S,m){const b=(0,se.m9)(S);return yield La(!1,b,m.providerId),Ca(b,m)})).apply(this,arguments)}function Q(S,m){return X.apply(this,arguments)}function X(){return(X=(0,y.Z)(function*(S,m){return xl((0,se.m9)(S),m)})).apply(this,arguments)}function We(){return(We=(0,y.Z)(function*(S,m){return Fn(S,"POST","/v1/accounts:signInWithCustomToken",qt(S,m))})).apply(this,arguments)}function Mt(){return Mt=(0,y.Z)(function*(S,m){const b=oi(S),x=yield function xe(S,m){return We.apply(this,arguments)}(b,{token:m,returnSecureToken:!0}),te=yield jr._fromIdTokenResponse(b,"signIn",x);return yield b._updateCurrentUser(te.user),te}),Mt.apply(this,arguments)}class hn{constructor(m,b){this.factorId=m,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(m,b){return"phoneInfo"in b?qn._fromServerResponse(m,b):"totpInfo"in b?Kn._fromServerResponse(m,b):Ee(m,"internal-error")}}class qn extends hn{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,b){return new qn(b)}}class Kn extends hn{constructor(m){super("totp",m)}static _fromServerResponse(m,b){return new Kn(b)}}function lr(S,m,b){var x;ne((null===(x=b.url)||void 0===x?void 0:x.length)>0,S,"invalid-continue-uri"),ne(typeof b.dynamicLinkDomain>"u"||b.dynamicLinkDomain.length>0,S,"invalid-dynamic-link-domain"),m.continueUrl=b.url,m.dynamicLinkDomain=b.dynamicLinkDomain,m.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(ne(b.iOS.bundleId.length>0,S,"missing-ios-bundle-id"),m.iOSBundleId=b.iOS.bundleId),b.android&&(ne(b.android.packageName.length>0,S,"missing-android-pkg-name"),m.androidInstallApp=b.android.installApp,m.androidMinimumVersionCode=b.android.minimumVersion,m.androidPackageName=b.android.packageName)}function Oi(){return Oi=(0,y.Z)(function*(S,m,b){var x;const te=oi(S),ge={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=te._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Ze=yield Ls(te,ge,"getOobCode",!0);b&&lr(te,Ze,b),yield Ct(te,Ze)}else b&&lr(te,ge,b),yield Ct(te,ge).catch(function(){var Ze=(0,y.Z)(function*(kt){if("auth/missing-recaptcha-token"!==kt.code)return Promise.reject(kt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const mn=yield Ls(te,ge,"getOobCode",!0);b&&lr(te,mn,b),yield Ct(te,mn)}});return function(kt){return Ze.apply(this,arguments)}}())}),Oi.apply(this,arguments)}function ai(){return(ai=(0,y.Z)(function*(S,m,b){yield za((0,se.m9)(S),{oobCode:m,newPassword:b})})).apply(this,arguments)}function Zi(){return Zi=(0,y.Z)(function*(S,m){yield function _r(S,m){return us.apply(this,arguments)}((0,se.m9)(S),{oobCode:m})}),Zi.apply(this,arguments)}function ds(S,m){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,y.Z)(function*(S,m){const b=(0,se.m9)(S),x=yield za(b,{oobCode:m}),te=x.requestType;switch(ne(te,b,"internal-error"),te){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(x.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(x.mfaInfo,b,"internal-error");default:ne(x.email,b,"internal-error")}let ge=null;return x.mfaInfo&&(ge=hn._fromServerResponse(oi(b),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:ge},operation:te}})).apply(this,arguments)}function ki(){return(ki=(0,y.Z)(function*(S,m){const{data:b}=yield ds((0,se.m9)(S),m);return b.email})).apply(this,arguments)}function Eo(){return Eo=(0,y.Z)(function*(S,m,b){var x;const te=oi(S),ge={returnSecureToken:!0,email:m,password:b,clientType:"CLIENT_TYPE_WEB"};let Ze;if(null!==(x=te._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Pn=yield Ls(te,ge,"signUpPassword");Ze=Po(te,Pn)}else Ze=Po(te,ge).catch(function(){var Pn=(0,y.Z)(function*(gt){if("auth/missing-recaptcha-token"===gt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ar=yield Ls(te,ge,"signUpPassword");return Po(te,ar)}return Promise.reject(gt)});return function(gt){return Pn.apply(this,arguments)}}());const kt=yield Ze.catch(Pn=>Promise.reject(Pn)),mn=yield jr._fromIdTokenResponse(te,"signIn",kt);return yield te._updateCurrentUser(mn.user),mn}),Eo.apply(this,arguments)}function da(){return da=(0,y.Z)(function*(S,m,b){var x;const te=oi(S),ge={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function Ze(kt,mn){ne(mn.handleCodeInApp,te,"argument-error"),mn&&lr(te,kt,mn)}if(null!==(x=te._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const kt=yield Ls(te,ge,"getOobCode",!0);Ze(kt,b),yield ln(te,kt)}else Ze(ge,b),yield ln(te,ge).catch(function(){var kt=(0,y.Z)(function*(mn){if("auth/missing-recaptcha-token"!==mn.code)return Promise.reject(mn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Pn=yield Ls(te,ge,"getOobCode",!0);Ze(Pn,b),yield ln(te,Pn)}});return function(mn){return kt.apply(this,arguments)}}())}),da.apply(this,arguments)}function il(){return(il=(0,y.Z)(function*(S,m,b){const x=(0,se.m9)(S),te=Na.credentialWithLink(m,b||Bt());return ne(te._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),K(x,te)})).apply(this,arguments)}function Ka(){return(Ka=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:createAuthUri",qt(S,m))})).apply(this,arguments)}function zo(){return zo=(0,y.Z)(function*(S,m){const x={identifier:m,continueUri:$t()?Bt():"http://localhost"},{signinMethods:te}=yield function Al(S,m){return Ka.apply(this,arguments)}((0,se.m9)(S),x);return te||[]}),zo.apply(this,arguments)}function Ri(){return Ri=(0,y.Z)(function*(S,m){const b=(0,se.m9)(S),te={requestType:"VERIFY_EMAIL",idToken:yield S.getIdToken()};m&&lr(b.auth,te,m);const{email:ge}=yield function mt(S,m){return ft.apply(this,arguments)}(b.auth,te);ge!==S.email&&(yield S.reload())}),Ri.apply(this,arguments)}function ol(){return ol=(0,y.Z)(function*(S,m,b){const x=(0,se.m9)(S),ge={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield S.getIdToken(),newEmail:m};b&&lr(x.auth,ge,b);const{email:Ze}=yield function Ln(S,m){return Dn.apply(this,arguments)}(x.auth,ge);Ze!==S.email&&(yield S.reload())}),ol.apply(this,arguments)}function Uu(){return(Uu=(0,y.Z)(function*(S,m){return jt(S,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function hu(){return hu=(0,y.Z)(function*(S,{displayName:m,photoURL:b}){if(void 0===m&&void 0===b)return;const x=(0,se.m9)(S),ge={idToken:yield x.getIdToken(),displayName:m,photoUrl:b,returnSecureToken:!0},Ze=yield sr(x,function al(S,m){return Uu.apply(this,arguments)}(x.auth,ge));x.displayName=Ze.displayName||null,x.photoURL=Ze.photoUrl||null;const kt=x.providerData.find(({providerId:mn})=>"password"===mn);kt&&(kt.displayName=x.displayName,kt.photoURL=x.photoURL),yield x._updateTokensIfNecessary(Ze)}),hu.apply(this,arguments)}function Lo(S,m,b){return oo.apply(this,arguments)}function oo(){return(oo=(0,y.Z)(function*(S,m,b){const{auth:x}=S,ge={idToken:yield S.getIdToken(),returnSecureToken:!0};m&&(ge.email=m),b&&(ge.password=b);const Ze=yield sr(S,qa(x,ge));yield S._updateTokensIfNecessary(Ze,!0)})).apply(this,arguments)}class Br{constructor(m,b,x={}){this.isNewUser=m,this.providerId=b,this.profile=x}}class ra extends Br{constructor(m,b,x,te){super(m,b,x),this.username=te}}class N extends Br{constructor(m,b){super(m,"facebook.com",b)}}class ae extends ra{constructor(m,b){super(m,"github.com",b,"string"==typeof b?.login?b?.login:null)}}class z extends Br{constructor(m,b){super(m,"google.com",b)}}class Te extends ra{constructor(m,b,x){super(m,"twitter.com",b,x)}}function Ke(S){const{user:m,_tokenResponse:b}=S;return m.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function ul(S){var m,b;if(!S)return null;const{providerId:x}=S,te=S.rawUserInfo?JSON.parse(S.rawUserInfo):{},ge=S.isNewUser||"identitytoolkit#SignupNewUserResponse"===S.kind;if(!x&&S?.idToken){const Ze=null===(b=null===(m=Nn(S.idToken))||void 0===m?void 0:m.firebase)||void 0===b?void 0:b.sign_in_provider;if(Ze)return new Br(ge,"anonymous"!==Ze&&"custom"!==Ze?Ze:null)}if(!x)return null;switch(x){case"facebook.com":return new N(ge,te);case"github.com":return new ae(ge,te);case"google.com":return new z(ge,te);case"twitter.com":return new Te(ge,te,S.screenName||null);case"custom":case"anonymous":return new Br(ge,null);default:return new Br(ge,x,te)}}(b)}class vr{constructor(m,b,x){this.type=m,this.credential=b,this.auth=x}static _fromIdtoken(m,b){return new vr("enroll",m,b)}static _fromMfaPendingCredential(m){return new vr("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var b,x;if(m?.multiFactorSession){if(null!==(b=m.multiFactorSession)&&void 0!==b&&b.pendingCredential)return vr._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(x=m.multiFactorSession)&&void 0!==x&&x.idToken)return vr._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Qn{constructor(m,b,x){this.session=m,this.hints=b,this.signInResolver=x}static _fromError(m,b){const x=oi(m),te=b.customData._serverResponse,ge=(te.mfaInfo||[]).map(kt=>hn._fromServerResponse(x,kt));ne(te.mfaPendingCredential,x,"internal-error");const Ze=vr._fromMfaPendingCredential(te.mfaPendingCredential);return new Qn(Ze,ge,function(){var kt=(0,y.Z)(function*(mn){const Pn=yield mn._process(x,Ze);delete te.mfaInfo,delete te.mfaPendingCredential;const gt=Object.assign(Object.assign({},te),{idToken:Pn.idToken,refreshToken:Pn.refreshToken});switch(b.operationType){case"signIn":const ar=yield jr._fromIdTokenResponse(x,b.operationType,gt);return yield x._updateCurrentUser(ar.user),ar;case"reauthenticate":return ne(b.user,x,"internal-error"),jr._forOperation(b.user,b.operationType,gt);default:Ee(x,"internal-error")}});return function(mn){return kt.apply(this,arguments)}}())}resolveSignIn(m){var b=this;return(0,y.Z)(function*(){return b.signInResolver(m)})()}}class jo{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(x=>hn._fromServerResponse(m.auth,x)))})}static _fromUser(m){return new jo(m)}getSession(){var m=this;return(0,y.Z)(function*(){return vr._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,b){var x=this;return(0,y.Z)(function*(){const te=m,ge=yield x.getSession(),Ze=yield sr(x.user,te._process(x.user.auth,ge,b));return yield x.user._updateTokensIfNecessary(Ze),x.user.reload()})()}unenroll(m){var b=this;return(0,y.Z)(function*(){const x="string"==typeof m?m:m.uid,te=yield b.user.getIdToken();try{const ge=yield sr(b.user,function Nc(S,m){return jt(S,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(S,m))}(b.user.auth,{idToken:te,mfaEnrollmentId:x}));b.enrolledFactors=b.enrolledFactors.filter(({uid:Ze})=>Ze!==x),yield b.user._updateTokensIfNecessary(ge),yield b.user.reload()}catch(ge){throw ge}})()}}const kl=new WeakMap,Ml="__sak";class sd{constructor(m,b){this.storageRetriever=m,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(Ml,"1"),this.storage.removeItem(Ml),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,b){return this.storage.setItem(m,JSON.stringify(b)),Promise.resolve()}_get(m){const b=this.storage.getItem(m);return Promise.resolve(b?JSON.parse(b):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const zs=(()=>{class S extends sd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,x)=>this.onStorageEvent(b,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cu(){const S=(0,se.z$)();return Ae(S)||Ne(S)}()&&function ti(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=kr(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const x of Object.keys(this.listeners)){const te=this.storage.getItem(x),ge=this.localCache[x];te!==ge&&b(x,ge,te)}}onStorageEvent(b,x=!1){if(!b.key)return void this.forAllChangedKeys((kt,mn,Pn)=>{this.notifyListeners(kt,Pn)});const te=b.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const kt=this.storage.getItem(te);if(b.newValue!==kt)null!==b.newValue?this.storage.setItem(te,b.newValue):this.storage.removeItem(te);else if(this.localCache[te]===b.newValue&&!x)return}const ge=()=>{const kt=this.storage.getItem(te);!x&&this.localCache[te]===kt||this.notifyListeners(te,kt)},Ze=this.storage.getItem(te);!function Zn(){return(0,se.w1)()&&10===document.documentMode}()||Ze===b.newValue||b.newValue===b.oldValue?ge():setTimeout(ge,10)}notifyListeners(b,x){this.localCache[b]=x;const te=this.listeners[b];if(te)for(const ge of Array.from(te))ge(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,x,te)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:x,newValue:te}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(x)}_removeListener(b,x){this.listeners[b]&&(this.listeners[b].delete(x),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,x){var te=()=>super._set,ge=this;return(0,y.Z)(function*(){yield te().call(ge,b,x),ge.localCache[b]=JSON.stringify(x)})()}_get(b){var x=()=>super._get,te=this;return(0,y.Z)(function*(){const ge=yield x().call(te,b);return te.localCache[b]=JSON.stringify(ge),ge})()}_remove(b){var x=()=>super._remove,te=this;return(0,y.Z)(function*(){yield x().call(te,b),delete te.localCache[b]})()}}return S.type="LOCAL",S})(),Vu=(()=>{class S extends sd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,x){}_removeListener(b,x){}}return S.type="SESSION",S})();let Ui=(()=>{class S{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const x=this.receivers.find(ge=>ge.isListeningto(b));if(x)return x;const te=new S(b);return this.receivers.push(te),te}isListeningto(b){return this.eventTarget===b}handleEvent(b){var x=this;return(0,y.Z)(function*(){const te=b,{eventId:ge,eventType:Ze,data:kt}=te.data,mn=x.handlersMap[Ze];if(!mn?.size)return;te.ports[0].postMessage({status:"ack",eventId:ge,eventType:Ze});const Pn=Array.from(mn).map(function(){var ar=(0,y.Z)(function*(Os){return Os(te.origin,kt)});return function(Os){return ar.apply(this,arguments)}}()),gt=yield function En(S){return Promise.all(S.map(function(){var m=(0,y.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(x){return{fulfilled:!1,reason:x}}});return function(b){return m.apply(this,arguments)}}()))}(Pn);te.ports[0].postMessage({status:"done",eventId:ge,eventType:Ze,response:gt})})()}_subscribe(b,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(x)}_unsubscribe(b,x){this.handlersMap[b]&&x&&this.handlersMap[b].delete(x),(!x||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return S.receivers=[],S})();function Js(S="",m=10){let b="";for(let x=0;x<m;x++)b+=Math.floor(10*Math.random());return S+b}class Ba{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,b,x=50){var te=this;return(0,y.Z)(function*(){const ge=typeof MessageChannel<"u"?new MessageChannel:null;if(!ge)throw new Error("connection_unavailable");let Ze,kt;return new Promise((mn,Pn)=>{const gt=Js("",20);ge.port1.start();const ar=setTimeout(()=>{Pn(new Error("unsupported_event"))},x);kt={messageChannel:ge,onMessage(Os){const ku=Os;if(ku.data.eventId===gt)switch(ku.data.status){case"ack":clearTimeout(ar),Ze=setTimeout(()=>{Pn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ze),mn(ku.data.response);break;default:clearTimeout(ar),clearTimeout(Ze),Pn(new Error("invalid_response"))}}},te.handlers.add(kt),ge.port1.addEventListener("message",kt.onMessage),te.target.postMessage({eventType:m,eventId:gt,data:b},[ge.port2])}).finally(()=>{kt&&te.removeMessageHandler(kt)})})()}}function In(){return window}function nc(){return typeof In().WorkerGlobalScope<"u"&&"function"==typeof In().importScripts}function Vt(){return(Vt=(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ua="firebaseLocalStorageDb",Pl="firebaseLocalStorage",Xo="fbase_key";class rc{constructor(m){this.request=m}toPromise(){return new Promise((m,b)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function Ol(S,m){return S.transaction([Pl],m?"readwrite":"readonly").objectStore(Pl)}function ic(){const S=indexedDB.open(Ua,1);return new Promise((m,b)=>{S.addEventListener("error",()=>{b(S.error)}),S.addEventListener("upgradeneeded",()=>{const x=S.result;try{x.createObjectStore(Pl,{keyPath:Xo})}catch(te){b(te)}}),S.addEventListener("success",(0,y.Z)(function*(){const x=S.result;x.objectStoreNames.contains(Pl)?m(x):(x.close(),yield function Da(){const S=indexedDB.deleteDatabase(Ua);return new rc(S).toPromise()}(),m(yield ic()))}))})}function ll(S,m,b){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,y.Z)(function*(S,m,b){const x=Ol(S,!0).put({[Xo]:m,value:b});return new rc(x).toPromise()})).apply(this,arguments)}function Nr(){return(Nr=(0,y.Z)(function*(S,m){const b=Ol(S,!1).get(m),x=yield new rc(b).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function Hu(S,m){const b=Ol(S,!0).delete(m);return new rc(b).toPromise()}const ha=(()=>{class S{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,y.Z)(function*(){return b.db||(b.db=yield ic()),b.db})()}_withRetries(b){var x=this;return(0,y.Z)(function*(){let te=0;for(;;)try{const ge=yield x._openDb();return yield b(ge)}catch(ge){if(te++>3)throw ge;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,y.Z)(function*(){return nc()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,y.Z)(function*(){b.receiver=Ui._getInstance(function ui(){return nc()?self:null}()),b.receiver._subscribe("keyChanged",function(){var x=(0,y.Z)(function*(te,ge){return{keyProcessed:(yield b._poll()).includes(ge.key)}});return function(te,ge){return x.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var x=(0,y.Z)(function*(te,ge){return["keyChanged"]});return function(te,ge){return x.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,y.Z)(function*(){var x,te;if(b.activeServiceWorker=yield function kn(){return Vt.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new Ba(b.activeServiceWorker);const ge=yield b.sender._send("ping",{},800);ge&&null!==(x=ge[0])&&void 0!==x&&x.fulfilled&&null!==(te=ge[0])&&void 0!==te&&te.value.includes("keyChanged")&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var x=this;return(0,y.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function gn(){var S;return(null===(S=navigator?.serviceWorker)||void 0===S?void 0:S.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:b},x.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const b=yield ic();return yield ll(b,Ml,"1"),yield Hu(b,Ml),!0}catch{}return!1})()}_withPendingWrite(b){var x=this;return(0,y.Z)(function*(){x.pendingWrites++;try{yield b()}finally{x.pendingWrites--}})()}_set(b,x){var te=this;return(0,y.Z)(function*(){return te._withPendingWrite((0,y.Z)(function*(){return yield te._withRetries(ge=>ll(ge,b,x)),te.localCache[b]=x,te.notifyServiceWorker(b)}))})()}_get(b){var x=this;return(0,y.Z)(function*(){const te=yield x._withRetries(ge=>function $u(S,m){return Nr.apply(this,arguments)}(ge,b));return x.localCache[b]=te,te})()}_remove(b){var x=this;return(0,y.Z)(function*(){return x._withPendingWrite((0,y.Z)(function*(){return yield x._withRetries(te=>Hu(te,b)),delete x.localCache[b],x.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,y.Z)(function*(){const x=yield b._withRetries(Ze=>{const kt=Ol(Ze,!1).getAll();return new rc(kt).toPromise()});if(!x)return[];if(0!==b.pendingWrites)return[];const te=[],ge=new Set;for(const{fbase_key:Ze,value:kt}of x)ge.add(Ze),JSON.stringify(b.localCache[Ze])!==JSON.stringify(kt)&&(b.notifyListeners(Ze,kt),te.push(Ze));for(const Ze of Object.keys(b.localCache))b.localCache[Ze]&&!ge.has(Ze)&&(b.notifyListeners(Ze,null),te.push(Ze));return te})()}notifyListeners(b,x){this.localCache[b]=x;const te=this.listeners[b];if(te)for(const ge of Array.from(te))ge(x)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(x)}_removeListener(b,x){this.listeners[b]&&(this.listeners[b].delete(x),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return S.type="LOCAL",S})(),R=1e12;class D{constructor(m){this.auth=m,this.counter=R,this._widgets=new Map}render(m,b){const x=this.counter;return this._widgets.set(x,new B(m,this.auth.name,b||{})),this.counter++,x}reset(m){var b;const x=m||R;null===(b=this._widgets.get(x))||void 0===b||b.delete(),this._widgets.delete(x)}getResponse(m){var b;return(null===(b=this._widgets.get(m||R))||void 0===b?void 0:b.getResponse())||""}execute(m){var b=this;return(0,y.Z)(function*(){var x;return null===(x=b._widgets.get(m||R))||void 0===x||x.execute(),""})()}}class B{constructor(m,b,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const te="string"==typeof m?document.getElementById(m):m;ne(te,"argument-error",{appName:b}),this.container=te,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oe(S){const m=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<S;x++)m.push(b.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":b}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Me=rs("rcb"),Oe=new rt(3e4,6e4);class _n{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=In().grecaptcha)||void 0===m||!m.render)}load(m,b=""){return ne(function Hn(S){return S.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(S)}(b),m,"argument-error"),this.shouldResolveImmediately(b)&&ir(In().grecaptcha)?Promise.resolve(In().grecaptcha):new Promise((x,te)=>{const ge=In().setTimeout(()=>{te(_e(m,"network-request-failed"))},Oe.get());In()[Me]=()=>{In().clearTimeout(ge),delete In()[Me];const kt=In().grecaptcha;if(!kt||!ir(kt))return void te(_e(m,"internal-error"));const mn=kt.render;kt.render=(Pn,gt)=>{const ar=mn(Pn,gt);return this.counter++,ar},this.hostLanguage=b,x(kt)},pi(`https://www.google.com/recaptcha/api.js??${(0,se.xO)({onload:Me,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(ge),te(_e(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var b;return!(null===(b=In().grecaptcha)||void 0===b||!b.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fr{load(m){return(0,y.Z)(function*(){return new D(m)})()}clearedOneInstance(){}}const Mi="recaptcha",wo={theme:"light",type:"image"};class vo{constructor(m,b=Object.assign({},wo),x){this.parameters=b,this.type=Mi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=oi(x),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const te="string"==typeof m?document.getElementById(m):m;ne(te,this.auth,"argument-error"),this.container=te,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fr:new _n,this.validateStartingState()}verify(){var m=this;return(0,y.Z)(function*(){m.assertNotDestroyed();const b=yield m.render(),x=m.getAssertedRecaptcha();return x.getResponse(b)||new Promise(ge=>{const Ze=kt=>{kt&&(m.tokenChangeListeners.delete(Ze),ge(kt))};m.tokenChangeListeners.add(Ze),m.isInvisible&&x.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return b=>{if(this.tokenChangeListeners.forEach(x=>x(b)),"function"==typeof m)m(b);else if("string"==typeof m){const x=In()[m];"function"==typeof x&&x(b)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,y.Z)(function*(){if(yield m.init(),!m.widgetId){let b=m.container;if(!m.isInvisible){const x=document.createElement("div");b.appendChild(x),b=x}m.widgetId=m.getAssertedRecaptcha().render(b,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,y.Z)(function*(){ne($t()&&!nc(),m.auth,"internal-error"),yield function Gu(){let S=null;return new Promise(m=>{"complete"!==document.readyState?(S=()=>m(),window.addEventListener("load",S)):m()}).catch(m=>{throw S&&window.removeEventListener("load",S),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const b=yield function Et(S){return Jt.apply(this,arguments)}(m.auth);ne(b,m.auth,"internal-error"),m.parameters.sitekey=b})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pt{constructor(m,b){this.verificationId=m,this.onConfirmation=b}confirm(m){const b=Si._fromVerification(this.verificationId,m);return this.onConfirmation(b)}}function Bs(){return(Bs=(0,y.Z)(function*(S,m,b){const x=oi(S),te=yield un(x,m,(0,se.m9)(b));return new Pt(te,ge=>K(x,ge))})).apply(this,arguments)}function fs(){return(fs=(0,y.Z)(function*(S,m,b){const x=(0,se.m9)(S);yield La(!1,x,"phone");const te=yield un(x.auth,m,(0,se.m9)(b));return new Pt(te,ge=>ke(x,ge))})).apply(this,arguments)}function Lc(){return(Lc=(0,y.Z)(function*(S,m,b){const x=(0,se.m9)(S),te=yield un(x.auth,m,(0,se.m9)(b));return new Pt(te,ge=>Q(x,ge))})).apply(this,arguments)}function un(S,m,b){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,y.Z)(function*(S,m,b){var x;const te=yield b.verify();try{let ge;if(ne("string"==typeof te,S,"argument-error"),ne(b.type===Mi,S,"argument-error"),ge="string"==typeof m?{phoneNumber:m}:m,"session"in ge){const Ze=ge.session;if("phoneNumber"in ge)return ne("enroll"===Ze.type,S,"internal-error"),(yield function Fo(S,m){return jt(S,"POST","/v2/accounts/mfaEnrollment:start",qt(S,m))}(S,{idToken:Ze.credential,phoneEnrollmentInfo:{phoneNumber:ge.phoneNumber,recaptchaToken:te}})).phoneSessionInfo.sessionInfo;{ne("signin"===Ze.type,S,"internal-error");const kt=(null===(x=ge.multiFactorHint)||void 0===x?void 0:x.uid)||ge.multiFactorUid;return ne(kt,S,"missing-multi-factor-info"),(yield function Di(S,m){return jt(S,"POST","/v2/accounts/mfaSignIn:start",qt(S,m))}(S,{mfaPendingCredential:Ze.credential,mfaEnrollmentId:kt,phoneSignInInfo:{recaptchaToken:te}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ze}=yield function Ra(S,m){return ys.apply(this,arguments)}(S,{phoneNumber:ge.phoneNumber,recaptchaToken:te});return Ze}}finally{b._reset()}}),Ld.apply(this,arguments)}function Fd(){return(Fd=(0,y.Z)(function*(S,m){yield Ca((0,se.m9)(S),m)})).apply(this,arguments)}let Ia=(()=>{class S{constructor(b){this.providerId=S.PROVIDER_ID,this.auth=oi(b)}verifyPhoneNumber(b,x){return un(this.auth,b,(0,se.m9)(x))}static credential(b,x){return Si._fromVerification(b,x)}static credentialFromResult(b){return S.credentialFromTaggedObject(b)}static credentialFromError(b){return S.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:x,temporaryProof:te}=b;return x&&te?Si._fromTokenResponse(x,te):null}}return S.PROVIDER_ID="phone",S.PHONE_SIGN_IN_METHOD="phone",S})();function Co(S,m){return m?Ar(m):(ne(S._popupRedirectResolver,S,"argument-error"),S._popupRedirectResolver)}class So extends Fs{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Xr(m,this._buildIdpRequest())}_linkToIdToken(m,b){return Xr(m,this._buildIdpRequest(b))}_getReauthenticationResolver(m){return Xr(m,this._buildIdpRequest())}_buildIdpRequest(m){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(b.idToken=m),b}}function sc(S){return du(S.auth,new So(S),S.bypassAuthState)}function oc(S){const{auth:m,user:b}=S;return ne(b,m,"internal-error"),xl(b,new So(S),S.bypassAuthState)}function Ms(S){return ac.apply(this,arguments)}function ac(){return(ac=(0,y.Z)(function*(S){const{auth:m,user:b}=S;return ne(b,m,"internal-error"),Ca(b,new So(S),S.bypassAuthState)})).apply(this,arguments)}class jd{constructor(m,b,x,te,ge=!1){this.auth=m,this.resolver=x,this.user=te,this.bypassAuthState=ge,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var m=this;return new Promise(function(){var b=(0,y.Z)(function*(x,te){m.pendingPromise={resolve:x,reject:te};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(ge){m.reject(ge)}});return function(x,te){return b.apply(this,arguments)}}())}onAuthEvent(m){var b=this;return(0,y.Z)(function*(){const{urlResponse:x,sessionId:te,postBody:ge,tenantId:Ze,error:kt,type:mn}=m;if(kt)return void b.reject(kt);const Pn={auth:b.auth,requestUri:x,sessionId:te,tenantId:Ze||void 0,postBody:ge||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(mn)(Pn))}catch(gt){b.reject(gt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return sc;case"linkViaPopup":case"linkViaRedirect":return Ms;case"reauthViaPopup":case"reauthViaRedirect":return oc;default:Ee(this.auth,"internal-error")}}resolve(m){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vi=new rt(2e3,1e4);function Va(){return(Va=(0,y.Z)(function*(S,m,b){const x=oi(S);ut(S,m,go);const te=Co(x,b);return new Bc(x,"signInViaPopup",m,te).executeNotNull()})).apply(this,arguments)}function wf(){return(wf=(0,y.Z)(function*(S,m,b){const x=(0,se.m9)(S);ut(x.auth,m,go);const te=Co(x.auth,b);return new Bc(x.auth,"reauthViaPopup",m,te,x).executeNotNull()})).apply(this,arguments)}function jc(){return(jc=(0,y.Z)(function*(S,m,b){const x=(0,se.m9)(S);ut(x.auth,m,go);const te=Co(x.auth,b);return new Bc(x.auth,"linkViaPopup",m,te,x).executeNotNull()})).apply(this,arguments)}let Bc=(()=>{class S extends jd{constructor(b,x,te,ge,Ze){super(b,x,ge,Ze),this.provider=te,this.authWindow=null,this.pollId=null,S.currentPopupAction&&S.currentPopupAction.cancel(),S.currentPopupAction=this}executeNotNull(){var b=this;return(0,y.Z)(function*(){const x=yield b.execute();return ne(x,b.auth,"internal-error"),x})()}onExecution(){var b=this;return(0,y.Z)(function*(){bt(1===b.filter.length,"Popup operations only handle one event");const x=Js();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],x),b.authWindow.associatedEvent=x,b.resolver._originValidation(b.auth).catch(te=>{b.reject(te)}),b.resolver._isIframeWebStorageSupported(b.auth,te=>{te||b.reject(_e(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,S.currentPopupAction=null}pollUserCancellation(){const b=()=>{var x,te;this.pollId=null!==(te=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==te&&te.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(b,Vi.get())};b()}}return S.currentPopupAction=null,S})();const qu="pendingRedirect",Su=new Map;class Sf extends jd{constructor(m,b,x=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,x),this.eventId=null}execute(){var m=()=>super.execute,b=this;return(0,y.Z)(function*(){let x=Su.get(b.auth._key());if(!x){try{const ge=(yield function Bd(S,m){return od.apply(this,arguments)}(b.resolver,b.auth))?yield m().call(b):null;x=()=>Promise.resolve(ge)}catch(te){x=()=>Promise.reject(te)}Su.set(b.auth._key(),x)}return b.bypassAuthState||Su.set(b.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(m){var b=()=>super.onAuthEvent,x=this;return(0,y.Z)(function*(){if("signInViaRedirect"===m.type)return b().call(x,m);if("unknown"!==m.type){if(m.eventId){const te=yield x.auth._redirectUserForId(m.eventId);if(te)return x.user=te,b().call(x,m);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function od(){return(od=(0,y.Z)(function*(S,m){const b=Ih(m),x=uc(S);if(!(yield x._isAvailable()))return!1;const te="true"===(yield x._get(b));return yield x._remove(b),te})).apply(this,arguments)}function Dh(S,m){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,y.Z)(function*(S,m){return uc(S)._set(Ih(m),"true")})).apply(this,arguments)}function hl(S,m){Su.set(S._key(),m)}function uc(S){return Ar(S._redirectPersistence)}function Ih(S){return tt(qu,S.config.apiKey,S.name)}function Vd(S,m,b){return function xh(S,m,b){return Du.apply(this,arguments)}(S,m,b)}function Du(){return(Du=(0,y.Z)(function*(S,m,b){const x=oi(S);ut(S,m,go),yield x._initializationPromise;const te=Co(x,b);return yield Dh(te,x),te._openRedirect(x,m,"signInViaRedirect")})).apply(this,arguments)}function $d(S,m,b){return function Ah(S,m,b){return fl.apply(this,arguments)}(S,m,b)}function fl(){return(fl=(0,y.Z)(function*(S,m,b){const x=(0,se.m9)(S);ut(x.auth,m,go),yield x.auth._initializationPromise;const te=Co(x.auth,b);yield Dh(te,x.auth);const ge=yield xi(x);return te._openRedirect(x.auth,m,"reauthViaRedirect",ge)})).apply(this,arguments)}function Do(S,m,b){return function Df(S,m,b){return Qa.apply(this,arguments)}(S,m,b)}function Qa(){return(Qa=(0,y.Z)(function*(S,m,b){const x=(0,se.m9)(S);ut(x.auth,m,go),yield x.auth._initializationPromise;const te=Co(x.auth,b);yield La(!1,x,m.providerId),yield Dh(te,x.auth);const ge=yield xi(x);return te._openRedirect(x.auth,m,"linkViaRedirect",ge)})).apply(this,arguments)}function Ii(){return(Ii=(0,y.Z)(function*(S,m){return yield oi(S)._initializationPromise,Xa(S,m,!1)})).apply(this,arguments)}function Xa(S,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,y.Z)(function*(S,m,b=!1){const x=oi(S),te=Co(x,m),Ze=yield new Sf(x,te,b).execute();return Ze&&!b&&(delete Ze.user._redirectEventId,yield x._persistUserIfCurrent(Ze.user),yield x._setRedirectUser(null,m)),Ze})).apply(this,arguments)}function xi(S){return yo.apply(this,arguments)}function yo(){return(yo=(0,y.Z)(function*(S){const m=Js(`${S.uid}:::`);return S._redirectEventId=m,yield S.auth._setRedirectUser(S),yield S.auth._persistUserIfCurrent(S),m})).apply(this,arguments)}class ss{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let b=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(m,x)&&(b=!0,this.sendToConsumer(m,x),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Us(S){switch(S.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ri(S);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=m,b=!0)),b}sendToConsumer(m,b){var x;if(m.error&&!ri(m)){const te=(null===(x=m.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";b.onError(_e(this.auth,te))}else b.onAuthEvent(m)}isEventForConsumer(m,b){const x=null===b.eventId||!!m.eventId&&m.eventId===b.eventId;return b.filter.includes(m.type)&&x}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hd(m))}saveEventToCache(m){this.cachedEventUids.add(Hd(m)),this.lastProcessedEventTime=Date.now()}}function Hd(S){return[S.type,S.eventId,S.sessionId,S.tenantId].filter(m=>m).join("-")}function ri({type:S,error:m}){return"unknown"===S&&"auth/no-auth-event"===m?.code}function If(S){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,y.Z)(function*(S,m={}){return jt(S,"GET","/v1/projects",m)})).apply(this,arguments)}const Bo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ja=/^https?/;function Wu(){return(Wu=(0,y.Z)(function*(S){if(S.config.emulator)return;const{authorizedDomains:m}=yield If(S);for(const b of m)try{if(eo(b))return}catch{}Ee(S,"unauthorized-domain")})).apply(this,arguments)}function eo(S){const m=Bt(),{protocol:b,hostname:x}=new URL(m);if(S.startsWith("chrome-extension://")){const Ze=new URL(S);return""===Ze.hostname&&""===x?"chrome-extension:"===b&&S.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===b&&Ze.hostname===x}if(!Ja.test(b))return!1;if(Bo.test(S))return x===S;const te=S.replace(/\./g,"\\.");return new RegExp("^(.+\\."+te+"|"+te+")$","i").test(x)}const xf=new rt(3e4,6e4);function eu(){const S=In().___jsl;if(S?.H)for(const m of Object.keys(S.H))if(S.H[m].r=S.H[m].r||[],S.H[m].L=S.H[m].L||[],S.H[m].r=[...S.H[m].L],S.CP)for(let b=0;b<S.CP.length;b++)S.CP[b]=null}let Wo=null;const xu=new rt(5e3,15e3),lc="__/auth/iframe",tu="emulator/auth/iframe",Fl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ad=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ud(S){const m=S.config;ne(m.authDomain,S,"auth-domain-config-required");const b=m.emulator?Qe(m,tu):`https://${S.config.authDomain}/${lc}`,x={apiKey:m.apiKey,appName:S.name,v:V.SDK_VERSION},te=ad.get(S.config.apiHost);te&&(x.eid=te);const ge=S._getFrameworks();return ge.length&&(x.fw=ge.join(",")),`${b}?${(0,se.xO)(x).slice(1)}`}function U(){return U=(0,y.Z)(function*(S){const m=yield function Uo(S){return Wo=Wo||function $a(S){return new Promise((m,b)=>{var x,te,ge;function Ze(){eu(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{eu(),b(_e(S,"network-request-failed"))},timeout:xf.get()})}if(null!==(te=null===(x=In().gapi)||void 0===x?void 0:x.iframes)&&void 0!==te&&te.Iframe)m(gapi.iframes.getContext());else{if(null===(ge=In().gapi)||void 0===ge||!ge.load){const kt=rs("iframefcb");return In()[kt]=()=>{gapi.load?Ze():b(_e(S,"network-request-failed"))},pi(`https://apis.google.com/js/api.js?onload=${kt}`).catch(mn=>b(mn))}Ze()}}).catch(m=>{throw Wo=null,m})}(S),Wo}(S),b=In().gapi;return ne(b,S,"internal-error"),m.open({where:document.body,url:ud(S),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fl,dontclear:!0},x=>new Promise(function(){var te=(0,y.Z)(function*(ge,Ze){yield x.restyle({setHideOnLeave:!1});const kt=_e(S,"network-request-failed"),mn=In().setTimeout(()=>{Ze(kt)},xu.get());function Pn(){In().clearTimeout(mn),ge(x)}x.ping(Pn).then(Pn,()=>{Ze(kt)})});return function(ge,Ze){return te.apply(this,arguments)}}()))}),U.apply(this,arguments)}const de={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Un{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Wr="__/auth/handler",ei="emulator/auth/handler",xa=encodeURIComponent("fac");function Ur(S,m,b,x,te,ge){return jl.apply(this,arguments)}function jl(){return(jl=(0,y.Z)(function*(S,m,b,x,te,ge){ne(S.config.authDomain,S,"auth-domain-config-required"),ne(S.config.apiKey,S,"invalid-api-key");const Ze={apiKey:S.config.apiKey,appName:S.name,authType:b,redirectUrl:x,v:V.SDK_VERSION,eventId:te};if(m instanceof go){m.setDefaultLanguage(S.languageCode),Ze.providerId=m.providerId||"",(0,se.xb)(m.getCustomParameters())||(Ze.customParameters=JSON.stringify(m.getCustomParameters()));for(const[gt,ar]of Object.entries(ge||{}))Ze[gt]=ar}if(m instanceof Hs){const gt=m.getScopes().filter(ar=>""!==ar);gt.length>0&&(Ze.scopes=gt.join(","))}S.tenantId&&(Ze.tid=S.tenantId);const kt=Ze;for(const gt of Object.keys(kt))void 0===kt[gt]&&delete kt[gt];const mn=yield S._getAppCheckToken(),Pn=mn?`#${xa}=${encodeURIComponent(mn)}`:"";return`${function ps({config:S}){return S.emulator?Qe(S,ei):`https://${S.authDomain}/${Wr}`}(S)}?${(0,se.xO)(kt).slice(1)}${Pn}`})).apply(this,arguments)}const Aa="webStorageSupport",mu=class Vo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vu,this._completeRedirectFn=Xa,this._overrideRedirectResult=hl}_openPopup(m,b,x,te){var ge=this;return(0,y.Z)(function*(){var Ze;bt(null===(Ze=ge.eventManagers[m._key()])||void 0===Ze?void 0:Ze.manager,"_initialize() not called before _openPopup()");const kt=yield Ur(m,b,x,Bt(),te);return function Vn(S,m,b,x=500,te=600){const ge=Math.max((window.screen.availHeight-te)/2,0).toString(),Ze=Math.max((window.screen.availWidth-x)/2,0).toString();let kt="";const mn=Object.assign(Object.assign({},de),{width:x.toString(),height:te.toString(),top:ge,left:Ze}),Pn=(0,se.z$)().toLowerCase();b&&(kt=yt(Pn)?"_blank":b),ye(Pn)&&(m=m||"http://localhost",mn.scrollbars="yes");const gt=Object.entries(mn).reduce((Os,[ku,Zd])=>`${Os}${ku}=${Zd},`,"");if(function cn(S=(0,se.z$)()){var m;return Ne(S)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Pn)&&"_self"!==kt)return function dr(S,m){const b=document.createElement("a");b.href=S,b.target=m;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(x)}(m||"",kt),new Un(null);const ar=window.open(m||"",kt,gt);ne(ar,S,"popup-blocked");try{ar.focus()}catch{}return new Un(ar)}(m,kt,Js())})()}_openRedirect(m,b,x,te){var ge=this;return(0,y.Z)(function*(){return yield ge._originValidation(m),function or(S){In().location.href=S}(yield Ur(m,b,x,Bt(),te)),new Promise(()=>{})})()}_initialize(m){const b=m._key();if(this.eventManagers[b]){const{manager:te,promise:ge}=this.eventManagers[b];return te?Promise.resolve(te):(bt(ge,"If manager is not set, promise should be"),ge)}const x=this.initAndGetManager(m);return this.eventManagers[b]={promise:x},x.catch(()=>{delete this.eventManagers[b]}),x}initAndGetManager(m){var b=this;return(0,y.Z)(function*(){const x=yield function P(S){return U.apply(this,arguments)}(m),te=new ss(m);return x.register("authEvent",ge=>(ne(ge?.authEvent,m,"invalid-auth-event"),{status:te.onEvent(ge.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[m._key()]={manager:te},b.iframes[m._key()]=x,te})()}_isIframeWebStorageSupported(m,b){this.iframes[m._key()].send(Aa,{type:Aa},te=>{var ge;const Ze=null===(ge=te?.[0])||void 0===ge?void 0:ge[Aa];void 0!==Ze&&b(!!Ze),Ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const b=m._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function kh(S){return Wu.apply(this,arguments)}(m)),this.originValidationPromises[b]}get _shouldInitProactively(){return kr()||Ae()||Ne()}};class Ku{constructor(m){this.factorId=m}_process(m,b,x){switch(b.type){case"enroll":return this._finalizeEnroll(m,b.credential,x);case"signin":return this._finalizeSignIn(m,b.credential);default:return Pe("unexpected MultiFactorSessionType")}}}class Mh extends Ku{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Mh(m)}_finalizeEnroll(m,b,x){return function bs(S,m){return jt(S,"POST","/v2/accounts/mfaEnrollment:finalize",qt(S,m))}(m,{idToken:b,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,b){return function Ef(S,m){return jt(S,"POST","/v2/accounts/mfaSignIn:finalize",qt(S,m))}(m,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ld=(()=>{class S{constructor(){}static assertion(b){return Mh._fromCredential(b)}}return S.FACTOR_ID="phone",S})();var Bl="@firebase/auth";class kg{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var b=this;return(0,y.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const b=this.auth.onIdTokenChanged(x=>{m(x?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,b),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const b=this.internalListeners.get(m);b&&(this.internalListeners.delete(m),b(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cc(){return window}(0,se.Pz)("authIdTokenMaxAge"),function Af(S){(0,V._registerComponent)(new $e.wA("auth",(m,{options:b})=>{const x=m.getProvider("app").getImmediate(),te=m.getProvider("heartbeat"),ge=m.getProvider("app-check-internal"),{apiKey:Ze,authDomain:kt}=x.options;ne(Ze&&!Ze.includes(":"),"invalid-api-key",{appName:x.name});const mn={apiKey:Ze,authDomain:kt,clientPlatform:S,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ut(S)},Pn=new no(x,te,ge,mn);return function ya(S,m){const b=m?.persistence||[],x=(Array.isArray(b)?b:[b]).map(Ar);m?.errorMap&&S._updateErrorMap(m.errorMap),S._initializeWithPersistence(x,m?.popupRedirectResolver)}(Pn,b),Pn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,b,x)=>{m.getProvider("auth-internal").initialize()})),(0,V._registerComponent)(new $e.wA("auth-internal",m=>{const b=oi(m.getProvider("auth").getImmediate());return new kg(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,V.registerVersion)(Bl,"0.23.2",function Ep(S){switch(S){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(S)),(0,V.registerVersion)(Bl,"0.23.2","esm2017")}("Browser");function Og(){return Og=(0,y.Z)(function*(S,m,b){var x;const{BuildInfo:te}=cc();bt(m.sessionId,"AuthEvent did not contain a session ID");const ge=yield function Ng(S){return zd.apply(this,arguments)}(m.sessionId),Ze={};return Ne()?Ze.ibi=te.packageName:Tn()?Ze.apn=te.packageName:Ee(S,"operation-not-supported-in-this-environment"),te.displayName&&(Ze.appDisplayName=te.displayName),Ze.sessionId=ge,Ur(S,b,m.type,void 0,null!==(x=m.eventId)&&void 0!==x?x:void 0,Ze)}),Og.apply(this,arguments)}function Rh(){return(Rh=(0,y.Z)(function*(S){const{BuildInfo:m}=cc(),b={};Ne()?b.iosBundleId=m.packageName:Tn()?b.androidPackageName=m.packageName:Ee(S,"operation-not-supported-in-this-environment"),yield If(S,b)})).apply(this,arguments)}function Uc(){return(Uc=(0,y.Z)(function*(S,m,b){const{cordova:x}=cc();let te=()=>{};try{yield new Promise((ge,Ze)=>{let kt=null;function mn(){var ar;ge();const Os=null===(ar=x.plugins.browsertab)||void 0===ar?void 0:ar.close;"function"==typeof Os&&Os(),"function"==typeof b?.close&&b.close()}function Pn(){kt||(kt=window.setTimeout(()=>{Ze(_e(S,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===document?.visibilityState&&Pn()}m.addPassiveListener(mn),document.addEventListener("resume",Pn,!1),Tn()&&document.addEventListener("visibilitychange",gt,!1),te=()=>{m.removePassiveListener(mn),document.removeEventListener("resume",Pn,!1),document.removeEventListener("visibilitychange",gt,!1),kt&&window.clearTimeout(kt)}})}finally{te()}})).apply(this,arguments)}function zd(){return(zd=(0,y.Z)(function*(S){const m=function dc(S){if(bt(/[0-9a-zA-Z]+/.test(S),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(S);const m=new ArrayBuffer(S.length),b=new Uint8Array(m);for(let x=0;x<S.length;x++)b[x]=S.charCodeAt(x);return b}(S),b=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(b)).map(te=>te.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class cd extends ss{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(b=>b(m)),super.onEvent(m)}initialized(){var m=this;return(0,y.Z)(function*(){yield m.initPromise})()}}function hc(S){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,y.Z)(function*(S){const m=yield dd()._get(fc(S));return m&&(yield dd()._remove(fc(S))),m})).apply(this,arguments)}function Ko(){const S=[];for(let b=0;b<20;b++){const x=Math.floor(62*Math.random());S.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(x))}return S.join("")}function dd(){return Ar(zs)}function fc(S){return tt("authEvent",S.config.apiKey,S.name)}function pc(S){if(!S?.includes("?"))return{};const[m,...b]=S.split("?");return(0,se.zd)(b.join("?"))}const Au=class qd{constructor(){this._redirectPersistence=Vu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xa,this._overrideRedirectResult=hl}_initialize(m){var b=this;return(0,y.Z)(function*(){const x=m._key();let te=b.eventManagers.get(x);return te||(te=new cd(m),b.eventManagers.set(x,te),b.attachCallbackListeners(m,te)),te})()}_openPopup(m){Ee(m,"operation-not-supported-in-this-environment")}_openRedirect(m,b,x,te){var ge=this;return(0,y.Z)(function*(){!function Mf(S){var m,b,x,te,ge,Ze,kt,mn,Pn,gt;const ar=cc();ne("function"==typeof(null===(m=ar?.universalLinks)||void 0===m?void 0:m.subscribe),S,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(b=ar?.BuildInfo)||void 0===b?void 0:b.packageName)<"u",S,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(ge=null===(te=null===(x=ar?.cordova)||void 0===x?void 0:x.plugins)||void 0===te?void 0:te.browsertab)||void 0===ge?void 0:ge.openUrl),S,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(mn=null===(kt=null===(Ze=ar?.cordova)||void 0===Ze?void 0:Ze.plugins)||void 0===kt?void 0:kt.browsertab)||void 0===mn?void 0:mn.isAvailable),S,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(gt=null===(Pn=ar?.cordova)||void 0===Pn?void 0:Pn.InAppBrowser)||void 0===gt?void 0:gt.open),S,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const Ze=yield ge._initialize(m);yield Ze.initialized(),Ze.resetRedirect(),function Ag(){Su.clear()}(),yield ge._originValidation(m);const kt=function Dp(S,m,b=null){return{type:m,eventId:b,urlResponse:null,sessionId:Ko(),postBody:null,tenantId:S.tenantId,error:_e(S,"no-auth-event")}}(m,x,te);yield function Fg(S,m){return dd()._set(fc(S),m)}(m,kt);const mn=yield function Pg(S,m,b){return Og.apply(this,arguments)}(m,kt,b),Pn=yield function Ul(S){const{cordova:m}=cc();return new Promise(b=>{m.plugins.browsertab.isAvailable(x=>{let te=null;x?m.plugins.browsertab.openUrl(S):te=m.InAppBrowser.open(S,function ct(S=(0,se.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(S)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(S)}()?"_blank":"_system","location=yes"),b(te)})})}(mn);return function Gd(S,m,b){return Uc.apply(this,arguments)}(m,Ze,Pn)})()}_isIframeWebStorageSupported(m,b){throw new Error("Method not implemented.")}_originValidation(m){const b=m._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Rg(S){return Rh.apply(this,arguments)}(m)),this.originValidationPromises[b]}attachCallbackListeners(m,b){const{universalLinks:x,handleOpenURL:te,BuildInfo:ge}=cc(),Ze=setTimeout((0,y.Z)(function*(){yield hc(m),b.onEvent(Ip())}),500),kt=function(){var gt=(0,y.Z)(function*(ar){clearTimeout(Ze);const Os=yield hc(m);let ku=null;Os&&ar?.url&&(ku=function Vl(S,m){var b,x;const te=function Nh(S){const m=pc(S),b=m.link?decodeURIComponent(m.link):void 0,x=pc(b).link,te=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return pc(te).link||te||x||b||S}(m);if(te.includes("/__/auth/callback")){const ge=pc(te),Ze=ge.firebaseError?function Yu(S){try{return JSON.parse(S)}catch{return null}}(decodeURIComponent(ge.firebaseError)):null,kt=null===(x=null===(b=Ze?.code)||void 0===b?void 0:b.split("auth/"))||void 0===x?void 0:x[1],mn=kt?_e(kt):null;return mn?{type:S.type,eventId:S.eventId,tenantId:S.tenantId,error:mn,urlResponse:null,sessionId:null,postBody:null}:{type:S.type,eventId:S.eventId,tenantId:S.tenantId,sessionId:S.sessionId,urlResponse:te,postBody:null}}return null}(Os,ar.url)),b.onEvent(ku||Ip())});return function(Os){return gt.apply(this,arguments)}}();typeof x<"u"&&"function"==typeof x.subscribe&&x.subscribe(null,kt);const mn=te,Pn=`${ge.packageName.toLowerCase()}://`;cc().handleOpenURL=function(){var gt=(0,y.Z)(function*(ar){if(ar.toLowerCase().startsWith(Pn)&&kt({url:ar}),"function"==typeof mn)try{mn(ar)}catch(Os){console.error(Os)}});return function(ar){return gt.apply(this,arguments)}}()}};function Ip(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function gc(){var S;return(null===(S=self?.location)||void 0===S?void 0:S.protocol)||null}function Qu(S=(0,se.z$)()){return!("file:"!==gc()&&"ionic:"!==gc()&&"capacitor:"!==gc()||!S.toLowerCase().match(/iphone|ipad|ipod|android/))}function li(){try{const S=self.localStorage,m=Js();if(S)return S.setItem(m,"1"),S.removeItem(m),!function nu(S=(0,se.z$)()){return function Wd(){return(0,se.w1)()&&11===document?.documentMode}()||function jg(S=(0,se.z$)()){return/Edge\/\d+/.test(S)}(S)}()||(0,se.hl)()}catch{return Bh()&&(0,se.hl)()}return!1}function Bh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vc(){return(function Fh(){return"http:"===gc()||"https:"===gc()}()||(0,se.ru)()||Qu())&&!function jh(){return(0,se.b$)()||(0,se.UG)()}()&&li()&&!Bh()}function oa(){return Qu()&&typeof document<"u"}function fd(){return(fd=(0,y.Z)(function*(){return!!oa()&&new Promise(S=>{const m=setTimeout(()=>{S(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),S(!0)})})})).apply(this,arguments)}const vu={LOCAL:"local",NONE:"none",SESSION:"session"},Xu=ne,Pf="persistence";function mc(S){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,y.Z)(function*(S){yield S._initializationPromise;const m=Ap(),b=tt(Pf,S.config.apiKey,S.name);m&&m.setItem(b,S._getPersistence())})).apply(this,arguments)}function Ap(){var S;try{return(null===(S=function pd(){return typeof window<"u"?window:null}())||void 0===S?void 0:S.sessionStorage)||null}catch{return null}}const $c=ne;class ml{constructor(){this.browserResolver=Ar(mu),this.cordovaResolver=Ar(Au),this.underlyingResolver=null,this._redirectPersistence=Vu,this._completeRedirectFn=Xa,this._overrideRedirectResult=hl}_initialize(m){var b=this;return(0,y.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,b,x,te){var ge=this;return(0,y.Z)(function*(){return yield ge.selectUnderlyingResolver(),ge.assertedUnderlyingResolver._openPopup(m,b,x,te)})()}_openRedirect(m,b,x,te){var ge=this;return(0,y.Z)(function*(){return yield ge.selectUnderlyingResolver(),ge.assertedUnderlyingResolver._openRedirect(m,b,x,te)})()}_isIframeWebStorageSupported(m,b){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,b)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return oa()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $c(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,y.Z)(function*(){if(m.underlyingResolver)return;const b=yield function hd(){return fd.apply(this,arguments)}();m.underlyingResolver=b?m.cordovaResolver:m.browserResolver})()}}function Vh(S){return S.unwrap()}function Bg(S){return qs(S)}function qs(S){const{_tokenResponse:m}=S instanceof se.ZR?S.customData:S;if(!m)return null;if(!(S instanceof se.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Ia.credentialFromResult(S);const b=m.providerId;if(!b||b===et.PASSWORD)return null;let x;switch(b){case et.GOOGLE:x=uu;break;case et.FACEBOOK:x=Ea;break;case et.GITHUB:x=Is;break;case et.TWITTER:x=js;break;default:const{oauthIdToken:te,oauthAccessToken:ge,oauthTokenSecret:Ze,pendingToken:kt,nonce:mn}=m;return ge||Ze||te||kt?kt?b.startsWith("saml.")?_s._create(b,kt):Ji._fromParams({providerId:b,signInMethod:b,pendingToken:kt,idToken:te,accessToken:ge}):new Gs(b).credential({idToken:te,accessToken:ge,rawNonce:mn}):null}return S instanceof se.ZR?x.credentialFromError(S):x.credentialFromResult(S)}function fa(S,m){return m.catch(b=>{throw b instanceof se.ZR&&function Um(S,m){var b;const x=null===(b=m.customData)||void 0===b?void 0:b._tokenResponse;if("auth/multi-factor-auth-required"===m?.code)m.resolver=new Xn(S,function qo(S,m){var b;const x=(0,se.m9)(S),te=m;return ne(m.customData.operationType,x,"argument-error"),ne(null===(b=te.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,x,"argument-error"),Qn._fromError(x,te)}(S,m));else if(x){const te=qs(m),ge=m;te&&(ge.credential=te,ge.tenantId=x.tenantId||void 0,ge.email=x.email||void 0,ge.phoneNumber=x.phoneNumber||void 0)}}(S,b),b}).then(b=>{const te=b.user;return{operationType:b.operationType,credential:Bg(b),additionalUserInfo:Ke(b),user:ru.getOrCreate(te)}})}function vd(S,m){return yc.apply(this,arguments)}function yc(){return(yc=(0,y.Z)(function*(S,m){const b=yield m;return{verificationId:b.verificationId,confirm:x=>fa(S,b.confirm(x))}})).apply(this,arguments)}class Xn{constructor(m,b){this.resolver=b,this.auth=function vc(S){return S.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return fa(Vh(this.auth),this.resolver.resolveSignIn(m))}}class ru{constructor(m){this._delegate=m,this.multiFactor=function wu(S){const m=(0,se.m9)(S);return kl.has(m)||kl.set(m,jo._fromUser(m)),kl.get(m)}(m)}static getOrCreate(m){return ru.USER_MAP.has(m)||ru.USER_MAP.set(m,new ru(m)),ru.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var b=this;return(0,y.Z)(function*(){return fa(b.auth,ke(b._delegate,m))})()}linkWithPhoneNumber(m,b){var x=this;return(0,y.Z)(function*(){return vd(x.auth,function cl(S,m,b){return fs.apply(this,arguments)}(x._delegate,m,b))})()}linkWithPopup(m){var b=this;return(0,y.Z)(function*(){return fa(b.auth,function Cf(S,m,b){return jc.apply(this,arguments)}(b._delegate,m,ml))})()}linkWithRedirect(m){var b=this;return(0,y.Z)(function*(){return yield mc(oi(b.auth)),Do(b._delegate,m,ml)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var b=this;return(0,y.Z)(function*(){return fa(b.auth,Q(b._delegate,m))})()}reauthenticateWithPhoneNumber(m,b){return vd(this.auth,function zu(S,m,b){return Lc.apply(this,arguments)}(this._delegate,m,b))}reauthenticateWithPopup(m){return fa(this.auth,function Ya(S,m,b){return wf.apply(this,arguments)}(this._delegate,m,ml))}reauthenticateWithRedirect(m){var b=this;return(0,y.Z)(function*(){return yield mc(oi(b.auth)),$d(b._delegate,m,ml)})()}sendEmailVerification(m){return function Za(S,m){return Ri.apply(this,arguments)}(this._delegate,m)}unlink(m){var b=this;return(0,y.Z)(function*(){return yield function Wi(S,m){return To.apply(this,arguments)}(b._delegate,m),b})()}updateEmail(m){return function No(S,m){return Lo((0,se.m9)(S),m,null)}(this._delegate,m)}updatePassword(m){return function fu(S,m){return Lo((0,se.m9)(S),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function Fc(S,m){return Fd.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function Sa(S,m){return hu.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,b){return function Qo(S,m,b){return ol.apply(this,arguments)}(this._delegate,m,b)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ru.USER_MAP=new WeakMap;const _c=ne;let Hc=(()=>{class S{constructor(b,x){if(this.app=b,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:te}=b.options;_c(te,"invalid-api-key",{appName:b.name}),_c(te,"invalid-api-key",{appName:b.name});const ge=typeof window<"u"?ml:void 0;this._delegate=x.initialize({options:{persistence:bc(te,b.name),popupRedirectResolver:ge}}),this._delegate._updateErrorMap(vt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ru.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(b){this._delegate.languageCode=b}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(b){this._delegate.tenantId=b}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(b,x){!function _a(S,m,b){const x=oi(S);ne(x._canInitEmulator,x,"emulator-config-failed"),ne(/^https?:\/\//.test(m),x,"invalid-emulator-scheme");const te=!!b?.disableWarnings,ge=ro(m),{host:Ze,port:kt}=function Ds(S){const m=ro(S),b=/(\/\/)?([^?#/]+)/.exec(S.substr(m.length));if(!b)return{host:"",port:null};const x=b[2].split("@").pop()||"",te=/^(\[[^\]]+\])(:|$)/.exec(x);if(te){const ge=te[1];return{host:ge,port:ba(x.substr(ge.length+1))}}{const[ge,Ze]=x.split(":");return{host:ge,port:ba(Ze)}}}(m);x.config.emulator={url:`${ge}//${Ze}${null===kt?"":`:${kt}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:Ze,port:kt,protocol:ge.replace(":",""),options:Object.freeze({disableWarnings:te})}),te||function ju(){function S(){const m=document.createElement("p"),b=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",S):S())}()}(this._delegate,b,x)}applyActionCode(b){return function Tr(S,m){return Zi.apply(this,arguments)}(this._delegate,b)}checkActionCode(b){return ds(this._delegate,b)}confirmPasswordReset(b,x){return function Lr(S,m,b){return ai.apply(this,arguments)}(this._delegate,b,x)}createUserWithEmailAndPassword(b,x){var te=this;return(0,y.Z)(function*(){return fa(te._delegate,function xs(S,m,b){return Eo.apply(this,arguments)}(te._delegate,b,x))})()}fetchProvidersForEmail(b){return this.fetchSignInMethodsForEmail(b)}fetchSignInMethodsForEmail(b){return function sl(S,m){return zo.apply(this,arguments)}(this._delegate,b)}isSignInWithEmailLink(b){return function $r(S,m){const b=Fr.parseLink(m);return"EMAIL_SIGNIN"===b?.operation}(0,b)}getRedirectResult(){var b=this;return(0,y.Z)(function*(){_c(Vc(),b._delegate,"operation-not-supported-in-this-environment");const x=yield function Ll(S,m){return Ii.apply(this,arguments)}(b._delegate,ml);return x?fa(b._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(b){!function Hl(S,m){oi(S)._logFramework(m)}(this._delegate,b)}onAuthStateChanged(b,x,te){const{next:ge,error:Ze,complete:kt}=Gl(b,x,te);return this._delegate.onAuthStateChanged(ge,Ze,kt)}onIdTokenChanged(b,x,te){const{next:ge,error:Ze,complete:kt}=Gl(b,x,te);return this._delegate.onIdTokenChanged(ge,Ze,kt)}sendSignInLinkToEmail(b,x){return function Fa(S,m,b){return da.apply(this,arguments)}(this._delegate,b,x)}sendPasswordResetEmail(b,x){return function ni(S,m,b){return Oi.apply(this,arguments)}(this._delegate,b,x||void 0)}setPersistence(b){var x=this;return(0,y.Z)(function*(){let te;switch(function gd(S,m){Xu(Object.values(vu).includes(m),S,"invalid-persistence-type"),(0,se.b$)()?Xu(m!==vu.SESSION,S,"unsupported-persistence-type"):(0,se.UG)()?Xu(m===vu.NONE,S,"unsupported-persistence-type"):Bh()?Xu(m===vu.NONE||m===vu.LOCAL&&(0,se.hl)(),S,"unsupported-persistence-type"):Xu(m===vu.NONE||li(),S,"unsupported-persistence-type")}(x._delegate,b),b){case vu.SESSION:te=Vu;break;case vu.LOCAL:te=(yield Ar(ha)._isAvailable())?ha:zs;break;case vu.NONE:te=Rn;break;default:return Ee("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(te)})()}signInAndRetrieveDataWithCredential(b){return this.signInWithCredential(b)}signInAnonymously(){return fa(this._delegate,function ca(S){return Bu.apply(this,arguments)}(this._delegate))}signInWithCredential(b){return fa(this._delegate,K(this._delegate,b))}signInWithCustomToken(b){return fa(this._delegate,function ht(S,m){return Mt.apply(this,arguments)}(this._delegate,b))}signInWithEmailAndPassword(b,x){return fa(this._delegate,function hs(S,m,b){return K((0,se.m9)(S),Na.credential(m,b))}(this._delegate,b,x))}signInWithEmailLink(b,x){return fa(this._delegate,function mo(S,m,b){return il.apply(this,arguments)}(this._delegate,b,x))}signInWithPhoneNumber(b,x){return vd(this._delegate,function Nl(S,m,b){return Bs.apply(this,arguments)}(this._delegate,b,x))}signInWithPopup(b){var x=this;return(0,y.Z)(function*(){return _c(Vc(),x._delegate,"operation-not-supported-in-this-environment"),fa(x._delegate,function dl(S,m,b){return Va.apply(this,arguments)}(x._delegate,b,ml))})()}signInWithRedirect(b){var x=this;return(0,y.Z)(function*(){return _c(Vc(),x._delegate,"operation-not-supported-in-this-environment"),yield mc(x._delegate),Vd(x._delegate,b,ml)})()}updateCurrentUser(b){return this._delegate.updateCurrentUser(b)}verifyPasswordResetCode(b){return function so(S,m){return ki.apply(this,arguments)}(this._delegate,b)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return S.Persistence=vu,S})();function Gl(S,m,b){let x=S;"function"!=typeof S&&({next:x,error:m,complete:b}=S);const te=x;return{next:Ze=>te(Ze&&ru.getOrCreate(Ze)),error:m,complete:b}}function bc(S,m){const b=function md(S,m){const b=Ap();if(!b)return[];const x=tt(Pf,S,m);switch(b.getItem(x)){case vu.NONE:return[Rn];case vu.LOCAL:return[ha,Vu];case vu.SESSION:return[Vu];default:return[]}}(S,m);if(typeof self<"u"&&!b.includes(ha)&&b.push(ha),typeof window<"u")for(const x of[zs,Vu])b.includes(x)||b.push(x);return b.includes(Rn)||b.push(Rn),b}class Ps{constructor(){this.providerId="phone",this._delegate=new Ia(Vh(fe.Z.auth()))}static credential(m,b){return Ia.credential(m,b)}verifyPhoneNumber(m,b){return this._delegate.verifyPhoneNumber(m,b)}unwrap(){return this._delegate}}Ps.PHONE_SIGN_IN_METHOD=Ia.PHONE_SIGN_IN_METHOD,Ps.PROVIDER_ID=Ia.PROVIDER_ID;const Kd=ne;class $h{constructor(m,b,x=fe.Z.app()){var te;Kd(null===(te=x.options)||void 0===te?void 0:te.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new vo(m,b,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tc(S){S.INTERNAL.registerComponent(new $e.wA("auth-compat",m=>{const b=m.getProvider("app-compat").getImmediate(),x=m.getProvider("auth");return new Hc(b,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Na,FacebookAuthProvider:Ea,GithubAuthProvider:Is,GoogleAuthProvider:uu,OAuthProvider:Gs,SAMLAuthProvider:io,PhoneAuthProvider:Ps,PhoneMultiFactorGenerator:ld,RecaptchaVerifier:$h,TwitterAuthProvider:js,Auth:Hc,AuthCredential:Fs,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),S.registerVersion("@firebase/auth-compat","0.4.2")}(fe.Z)},3735:(nn,st,H)=>{"use strict";H.d(st,{Z6:()=>qe,np:()=>vt});var y=H(5861),fe=H(5879),se=H(6814),V=H(6223);const Ce=new fe.OlP("ngx-mask config"),De=new fe.OlP("new ngx-mask config"),$e=new fe.OlP("initial ngx-mask config"),Xe={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,leadZero:!1,triggerOnMaskChange:!1,maskFilled:new fe.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},et=["Hh:m0:s0","Hh:m0","m0:s0"],Se=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let Re=(()=>{class je{constructor(){this._config=(0,fe.f3M)(Ce),this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.hiddenInput=this._config.hiddenInput,this.clearIfNotMatch=this._config.clearIfNotMatch,this.specialCharacters=this._config.specialCharacters,this.patterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime,this.leadZero=this._config.leadZero,this._shift=new Set,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this.deletedSpecialCharacter=!1,this._formatWithSeparators=(J,Y,Ee,_e)=>{let Fe=[],ut="";if(Array.isArray(Ee)){const Bt=new RegExp(Ee.map($t=>"[\\^$.|?*+()".indexOf($t)>=0?`\\${$t}`:$t).join("|"));Fe=J.split(Bt),ut=J.match(Bt)?.[0]??""}else Fe=J.split(Ee),ut=Ee;const W=Fe.length>1?`${ut}${Fe[1]}`:"";let ne=Fe[0]??"";const Pe=this.separatorLimit.replace(/\s/g,"");Pe&&+Pe&&(ne="-"===ne[0]?`-${ne.slice(1,ne.length).slice(0,Pe.length)}`:ne.slice(0,Pe.length));const bt=/(\d+)(\d{3})/;for(;Y&&bt.test(ne);)ne=ne.replace(bt,"$1"+Y+"$2");return void 0===_e?ne+W:0===_e?ne:ne+W.substring(0,_e+1)},this.percentage=J=>Number(J)>=0&&Number(J)<=100,this.getPrecision=J=>{const Y=J.split(".");return Y.length>1?Number(Y[Y.length-1]):1/0},this.checkAndRemoveSuffix=J=>{for(let Y=this.suffix?.length-1;Y>=0;Y--){const Ee=this.suffix.substring(Y,this.suffix?.length);if(J.includes(Ee)&&Y!==this.suffix?.length-1&&(Y-1<0||!J.includes(this.suffix.substring(Y-1,this.suffix?.length))))return J.replace(Ee,"")}return J},this.checkInputPrecision=(J,Y,Ee)=>{if(Y<1/0){if(Array.isArray(Ee)){const W=Ee.find(ne=>ne!==this.thousandSeparator);Ee=W||Ee[0]}const _e=new RegExp(this._charToRegExpExpression(Ee)+`\\d{${Y}}.*$`),Fe=J.match(_e),ut=(Fe&&Fe[0]?.length)??0;ut-1>Y&&(J=J.substring(0,J.length-(ut-1-Y))),0===Y&&this._compareOrIncludes(J[J.length-1],Ee,this.thousandSeparator)&&(J=J.substring(0,J.length-1))}return J}}applyMaskWithPattern(J,Y){const[Ee,_e]=Y;return this.customPattern=_e,this.applyMask(J,Ee)}applyMask(J,Y,Ee=0,_e=!1,Fe=!1,ut=(()=>{})){if(!Y||"string"!=typeof J)return"";let W=0,ne="",Pe=!1,bt=!1,Bt=1,$t=!1;J.slice(0,this.prefix.length)===this.prefix&&(J=J.slice(this.prefix.length,J.length)),this.suffix&&J?.length>0&&(J=this.checkAndRemoveSuffix(J)),"("===J&&this.prefix&&(J="");const Xt=J.toString().split("");if(this.allowNegativeNumbers&&"-"===J.slice(W,W+1)&&(ne+=J.slice(W,W+1)),"IP"===Y){const at=J.split(".");this.ipError=this._validIP(at),Y="099.099.099.099"}const ot=[];for(let at=0;at<J.length;at++)J[at]?.match("\\d")&&ot.push(J[at]??"");if("CPF_CNPJ"===Y&&(this.cpfCnpjError=11!==ot.length&&14!==ot.length,Y=ot.length>11?"00.000.000/0000-00":"000.000.000-00"),Y.startsWith("percent")){if(J.match("[a-z]|[A-Z]")||J.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){J=this._stripToDecimal(J);const Ot=this.getPrecision(Y);J=this.checkInputPrecision(J,Ot,this.decimalMarker)}if(J.indexOf(".")>0&&!this.percentage(J.substring(0,J.indexOf(".")))){let Ot=J.substring(0,J.indexOf(".")-1);this.allowNegativeNumbers&&"-"===J.slice(W,W+1)&&(Ot=J.substring(0,J.indexOf("."))),J=`${Ot}${J.substring(J.indexOf("."),J.length)}`}let at="";at=this.allowNegativeNumbers&&"-"===J.slice(W,W+1)?J.slice(W+1,W+J.length):J,ne=this.percentage(at)?this._splitPercentZero(J):this._splitPercentZero(J.substring(0,J.length-1))}else if(Y.startsWith("separator")){(J.match("[w\u0430-\u044f\u0410-\u042f]")||J.match("[\u0401\u0451\u0410-\u044f]")||J.match("[a-z]|[A-Z]")||J.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||J.match("[^A-Za-z0-9,]"))&&(J=this._stripToDecimal(J)),J=J.length>1&&"0"===J[0]&&J[1]!==this.thousandSeparator&&!this._compareOrIncludes(J[1],this.decimalMarker,this.thousandSeparator)&&!Fe?J.slice(0,J.length-1):J,Fe&&(J=this._compareOrIncludes(J[J.length-1],this.decimalMarker,this.thousandSeparator)?J.slice(0,J.length-1):J);const at=this._charToRegExpExpression(this.thousandSeparator);let Ot='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(at,"");if(Array.isArray(this.decimalMarker))for(const Fn of this.decimalMarker)Ot=Ot.replace(this._charToRegExpExpression(Fn),"");else Ot=Ot.replace(this._charToRegExpExpression(this.decimalMarker),"");const qt=new RegExp("["+Ot+"]");(J.match(qt)||1===J.length&&this._compareOrIncludes(J,this.decimalMarker,this.thousandSeparator))&&(J=J.substring(0,J.length-1));const jt=this.getPrecision(Y),Lt=(J=this.checkInputPrecision(J,jt,this.decimalMarker)).replace(new RegExp(at,"g"),"");ne=this._formatWithSeparators(Lt,this.thousandSeparator,this.decimalMarker,jt);const Kt=ne.indexOf(",")-J.indexOf(","),wn=ne.length-J.length;if(wn>0&&ne[Ee]!==this.thousandSeparator){bt=!0;let Fn=0;do{this._shift.add(Ee+Fn),Fn++}while(Fn<wn)}else 0!==Kt&&Ee>0&&!(ne.indexOf(",")>=Ee&&Ee>3)||!(ne.indexOf(".")>=Ee&&Ee>3)&&wn<=0?(this._shift.clear(),bt=!0,Bt=wn,this._shift.add(Ee+=wn)):this._shift.clear()}else for(let at=0,Ot=Xt[0];at<Xt.length&&W!==Y.length;at++,Ot=Xt[at]??"")if(this._checkSymbolMask(Ot,Y[W]??"")&&"?"===Y[W+1])ne+=Ot,W+=2;else if("*"===Y[W+1]&&Pe&&this._checkSymbolMask(Ot,Y[W+2]??""))ne+=Ot,W+=3,Pe=!1;else if(this._checkSymbolMask(Ot,Y[W]??"")&&"*"===Y[W+1])ne+=Ot,Pe=!0;else if("?"===Y[W+1]&&this._checkSymbolMask(Ot,Y[W+2]??""))ne+=Ot,W+=3;else if(this._checkSymbolMask(Ot,Y[W]??"")){if("H"===Y[W]&&Number(Ot)>2){Ee+=1,W+=1,this._shiftStep(Y,W,Xt.length),at--,this.leadZeroDateTime&&(ne+="0");continue}if("h"===Y[W]&&("2"===ne&&Number(Ot)>3||("2"===ne.slice(W-2,W)||"2"===ne.slice(W-3,W)||"2"===ne.slice(W-4,W)||"2"===ne.slice(W-1,W))&&Number(Ot)>3&&W>10)){Ee+=1,W+=1,at--;continue}if(("m"===Y[W]||"s"===Y[W])&&Number(Ot)>5){Ee+=1,W+=1,this._shiftStep(Y,W,Xt.length),at--,this.leadZeroDateTime&&(ne+="0");continue}const qt=31,jt=J[W],Lt=J[W+1],Kt=J[W+2],wn=J[W-1],Fn=J[W-2],jn=J[W-3],zn=J.slice(W-3,W-1),ur=J.slice(W-1,W+1),rr=J.slice(W,W+2),$n=J.slice(W-2,W);if("d"===Y[W]){const wr="M0"===Y.slice(0,2),Yr="M0"===Y.slice(0,2)&&this.specialCharacters.includes(Fn);if(Number(Ot)>3&&this.leadZeroDateTime||!wr&&(Number(rr)>qt||Number(ur)>qt||this.specialCharacters.includes(Lt))||(Yr?Number(ur)>qt||!this.specialCharacters.includes(jt)&&this.specialCharacters.includes(Kt)||this.specialCharacters.includes(jt):Number(rr)>qt||this.specialCharacters.includes(Lt))){Ee+=1,W+=1,this._shiftStep(Y,W,Xt.length),at--,this.leadZeroDateTime&&(ne+="0");continue}}if("M"===Y[W]){const Yr=0===W&&(Number(Ot)>2||Number(rr)>12||this.specialCharacters.includes(Lt)),Cr=Y.slice(W+2,W+3),Hr=zn.includes(Cr)&&(this.specialCharacters.includes(Fn)&&Number(ur)>12&&!this.specialCharacters.includes(jt)||this.specialCharacters.includes(jt)||this.specialCharacters.includes(jn)&&Number($n)>12&&!this.specialCharacters.includes(wn)||this.specialCharacters.includes(wn)),Mr=Number(zn)<=qt&&!this.specialCharacters.includes(zn)&&this.specialCharacters.includes(wn)&&(Number(rr)>12||this.specialCharacters.includes(Lt)),Pr=Number(rr)>12&&5===W||this.specialCharacters.includes(Lt)&&5===W,yi=Number(zn)>qt&&!this.specialCharacters.includes(zn)&&!this.specialCharacters.includes($n)&&Number($n)>12,Ir=Number(zn)<=qt&&!this.specialCharacters.includes(zn)&&!this.specialCharacters.includes(wn)&&Number(ur)>12;if(Number(Ot)>1&&this.leadZeroDateTime||Yr||Hr||Ir||yi||Mr||Pr){Ee+=1,W+=1,this._shiftStep(Y,W,Xt.length),at--,this.leadZeroDateTime&&(ne+="0");continue}}ne+=Ot,W++}else" "===Ot&&" "===Y[W]||"/"===Ot&&"/"===Y[W]?(ne+=Ot,W++):-1!==this.specialCharacters.indexOf(Y[W]??"")?(ne+=Y[W],W++,this._shiftStep(Y,W,Xt.length),at--):"9"===Y[W]&&this.showMaskTyped?this._shiftStep(Y,W,Xt.length):this.patterns[Y[W]??""]&&this.patterns[Y[W]??""]?.optional?(Xt[W]&&"099.099.099.099"!==Y&&"000.000.000-00"!==Y&&"00.000.000/0000-00"!==Y&&!Y.match(/^9+\.0+$/)&&!this.patterns[Y[W]??""]?.optional&&(ne+=Xt[W]),Y.includes("9*")&&Y.includes("0*")&&W++,W++,at--):"*"===this.maskExpression[W+1]&&this._findSpecialChar(this.maskExpression[W+2]??"")&&this._findSpecialChar(Ot)===this.maskExpression[W+2]&&Pe||"?"===this.maskExpression[W+1]&&this._findSpecialChar(this.maskExpression[W+2]??"")&&this._findSpecialChar(Ot)===this.maskExpression[W+2]&&Pe?(W+=3,ne+=Ot):this.showMaskTyped&&this.specialCharacters.indexOf(Ot)<0&&Ot!==this.placeHolderCharacter&&($t=!0);ne.length+1===Y.length&&-1!==this.specialCharacters.indexOf(Y[Y.length-1]??"")&&(ne+=Y[Y.length-1]);let Ye=Ee+1;for(;this._shift.has(Ye);)Bt++,Ye++;let rt=_e&&!Y.startsWith("separator")?W:this._shift.has(Ee)?Bt:0;$t&&rt--,ut(rt,bt),Bt<0&&this._shift.clear();let Qe=!1;Fe&&(Qe=Xt.every(at=>this.specialCharacters.includes(at)));let dt=`${this.prefix}${Qe?"":ne}${this.suffix}`;return 0===ne.length&&(dt=this.dropSpecialCharacters?`${ne}`:`${this.prefix}${ne}`),dt}_findSpecialChar(J){return this.specialCharacters.find(Y=>Y===J)}_checkSymbolMask(J,Y){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[Y]?.pattern&&this.patterns[Y]?.pattern.test(J))??!1}_stripToDecimal(J){return J.split("").filter((Y,Ee)=>{const _e="string"==typeof this.decimalMarker?Y===this.decimalMarker:this.decimalMarker.includes(Y);return Y.match("^-?\\d")||Y===this.thousandSeparator||_e||"-"===Y&&0===Ee&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(J){return J&&(" "===J?"\\s":"[\\^$.|?*+()".indexOf(J)>=0?`\\${J}`:J)}_shiftStep(J,Y,Ee){const _e=/[*?]/g.test(J.slice(0,Y))?Ee:Y;this._shift.add(_e+this.prefix.length||0)}_compareOrIncludes(J,Y,Ee){return Array.isArray(Y)?Y.filter(_e=>_e!==Ee).includes(J):J===Y}_validIP(J){return!(4===J.length&&!J.some((Y,Ee)=>J.length!==Ee+1?""===Y||Number(Y)>255:""===Y||Number(Y.substring(0,3))>255))}_splitPercentZero(J){const Y=J.indexOf(".");if(-1===Y){const Ee=parseInt(J,10);return isNaN(Ee)?"":Ee.toString()}{const Ee=parseInt(J.substring(0,Y),10),_e=J.substring(Y+1),Fe=isNaN(Ee)?"":Ee.toString();return""===Fe?"":Fe+"."+_e}}}return je.\u0275fac=function(J){return new(J||je)},je.\u0275prov=fe.Yz7({token:je,factory:je.\u0275fac}),je})(),Le=(()=>{class je extends Re{constructor(){super(...arguments),this.isNumberValue=!1,this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this._maskExpressionArray=[],this.triggerOnMaskChange=!1,this.onChange=J=>{},this.document=(0,fe.f3M)(se.K0),this._config=(0,fe.f3M)(Ce),this._elementRef=(0,fe.f3M)(fe.SBq,{optional:!0}),this._renderer=(0,fe.f3M)(fe.Qsj,{optional:!0})}applyMask(J,Y,Ee=0,_e=!1,Fe=!1,ut=(()=>{})){if(!Y)return J!==this.actualValue?this.actualValue:J;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(J||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(J||"#")),!J&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const W=J&&"number"==typeof this.selStart?J[this.selStart]??"":"";let ne="";if(void 0!==this.hiddenInput&&!this.writingValue){let $t=this.actualValue.split("");"object"==typeof this.selStart&&"object"==typeof this.selEnd?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):""!==J&&$t.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(J.length>$t.length?$t.splice(this.selStart,0,W):J.length<$t.length&&($t.length-J.length==1?$t.splice(this.selStart-1,1):$t.splice(this.selStart,this.selEnd-this.selStart))):$t=[],this.showMaskTyped&&(this.hiddenInput||(J=this.removeMask(J))),ne=this.actualValue.length&&$t.length<=J.length?this.shiftTypedSymbols($t.join("")):J}_e&&this.hiddenInput&&(ne=J),this.deletedSpecialCharacter&&Ee&&(this.specialCharacters.includes(this.actualValue.slice(Ee,Ee+1))?Ee+=1:"M0"!==Y.slice(Ee-1,Ee+1)&&(Ee-=2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&(J=this.removeMask(J)),ne=ne&&ne.length?ne:J;const Pe=super.applyMask(ne,Y,Ee,_e,Fe,ut);if(this.actualValue=this.getActualValue(Pe),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.specialCharacters=this.specialCharacters.filter($t=>!this._compareOrIncludes($t,this.decimalMarker,this.thousandSeparator))),this.formControlResult(Pe),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput&&Pe&&Pe.length?this.hideInput(Pe,this.maskExpression):Pe;const bt=Pe.length,Bt=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const $t=this._numberSkipedSymbols(Pe);return Pe+Bt.slice(bt+$t)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?Pe+Bt:Pe+Bt.slice(bt)}_numberSkipedSymbols(J){const Y=/(^|\D)(\d\D)/g;let Ee=Y.exec(J),_e=0;for(;null!=Ee;)_e+=1,Ee=Y.exec(J);return _e}applyValueChanges(J,Y,Ee,_e=(()=>{})){const Fe=this._elementRef?.nativeElement;Fe&&(Fe.value=this.applyMask(Fe.value,this.maskExpression,J,Y,Ee,_e),Fe!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(J,Y){return J.split("").map((Ee,_e)=>this.patterns&&this.patterns[Y[_e]??""]&&this.patterns[Y[_e]??""]?.symbol?this.patterns[Y[_e]??""]?.symbol:Ee).join("")}getActualValue(J){const Y=J.split("").filter((Ee,_e)=>{const Fe=this.maskExpression[_e]??"";return this._checkSymbolMask(Ee,Fe)||this.specialCharacters.includes(Fe)&&Ee===Fe});return Y.join("")===J?Y.join(""):J}shiftTypedSymbols(J){let Y="";return(J&&J.split("").map((_e,Fe)=>{if(this.specialCharacters.includes(J[Fe+1]??"")&&J[Fe+1]!==this.maskExpression[Fe+1])return Y=_e,J[Fe+1];if(Y.length){const ut=Y;return Y="",ut}return _e})||[]).join("")}numberToString(J){return!J&&0!==J||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith("separator")&&this.separatorLimit.length>14&&String(J).length>14?String(J):Number(J).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace("/-/","-")}showMaskInInput(J){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(J){if("IP"===this.maskExpression)return this._checkForIp(J);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(J)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const J=this._elementRef?.nativeElement;J&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==J.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(J.value,this.maskExpression))}set formElementProperty([J,Y]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,J,Y))}checkSpecialCharAmount(J){return J.split("").filter(Ee=>this._findSpecialChar(Ee)).length}removeMask(J){return this._removeMask(this._removeSuffix(this._removePrefix(J)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(J){if("#"===J)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const Y=[];for(let Ee=0;Ee<J.length;Ee++){const _e=J[Ee]??"";_e&&_e.match("\\d")&&Y.push(_e)}return Y.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:Y.length>3&&Y.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:Y.length>6&&Y.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(J){const Y=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,Ee=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===J)return Y;const _e=[];for(let Fe=0;Fe<J.length;Fe++){const ut=J[Fe]??"";ut&&ut.match("\\d")&&_e.push(ut)}return _e.length<=3?Y.slice(_e.length,Y.length):_e.length>3&&_e.length<=6?Y.slice(_e.length+1,Y.length):_e.length>6&&_e.length<=9?Y.slice(_e.length+2,Y.length):_e.length>9&&_e.length<11?Y.slice(_e.length+3,Y.length):11===_e.length?"":12===_e.length?Ee.slice(17===J.length?16:15,Ee.length):_e.length>12&&_e.length<=14?Ee.slice(_e.length+4,Ee.length):""}_getActiveElement(J=this.document){const Y=J?.activeElement?.shadowRoot;return Y?.activeElement?this._getActiveElement(Y):J.activeElement}formControlResult(J){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(J)),this.dropSpecialCharacters)))):this.onChange(this._toNumber(this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===J?this._checkSymbols(this._removeSuffix(this._removePrefix(J))):J))}_toNumber(J){if(!this.isNumberValue||""===J||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters))return J;if(String(J).length>16&&this.separatorLimit.length>14)return String(J);const Y=Number(J);return Number.isNaN(Y)?J:Y}_removeMask(J,Y){return this.maskExpression.startsWith("percent")&&J.includes(".")?J:J&&J.replace(this._regExpForRemove(Y),"")}_removePrefix(J){return this.prefix?J&&J.replace(this.prefix,""):J}_removeSuffix(J){return this.suffix?J&&J.replace(this.suffix,""):J}_retrieveSeparatorValue(J){const Y=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(Ee=>this.dropSpecialCharacters.includes(Ee)):this.specialCharacters;return this._removeMask(J,Y)}_regExpForRemove(J){return new RegExp(J.map(Y=>`\\${Y}`).join("|"),"gi")}_replaceDecimalMarkerToDot(J){const Y=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return J.replace(this._regExpForRemove(Y),".")}_checkSymbols(J){if(""===J)return J;const Y=this._retrieveSeparatorPrecision(this.maskExpression),Ee=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(J));return this.isNumberValue&&Y?J===this.decimalMarker?null:this.separatorLimit.length>14?String(Ee):this._checkPrecision(this.maskExpression,Ee):Ee}_retrieveSeparatorPrecision(J){const Y=J.match(new RegExp("^separator\\.([^d]*)"));return Y?Number(Y[1]):null}_checkPrecision(J,Y){const Ee=J.slice(10,11);return J.indexOf("2")>0||this.leadZero&&Number(Ee)>1?this.leadZero?Number(Y).toFixed(Number(Ee)):Number(Y).toFixed(2):this.numberToString(Y)}_repeatPatternSymbols(J){return J.match(/{[0-9]+}/)&&J.split("").reduce((Y,Ee,_e)=>{if(this._start="{"===Ee?_e:this._start,"}"!==Ee)return this._findSpecialChar(Ee)?Y+Ee:Y;this._end=_e;const Fe=Number(J.slice(this._start+1,this._end)),ut=new Array(Fe+1).join(J[this._start-1]);if(J.slice(0,this._start).length>1&&J.includes("S")){const W=J.slice(0,this._start-1);return W.includes("{")?Y+ut:W+Y+ut}return Y+ut},"")||J}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}}return je.\u0275fac=function(){let Ve;return function(Y){return(Ve||(Ve=fe.n5z(je)))(Y||je)}}(),je.\u0275prov=fe.Yz7({token:je,factory:je.\u0275fac}),je})();function wt(){const je=(0,fe.f3M)($e),Ve=(0,fe.f3M)(De);return Ve instanceof Function?{...je,...Ve()}:{...je,...Ve}}function vt(je){return(0,fe.MR2)(function le(je){return[{provide:De,useValue:je},{provide:$e,useValue:Xe},{provide:Ce,useFactory:wt},Le]}(je))}let qe=(()=>{class je{constructor(){this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.leadZero=null,this.triggerOnMaskChange=null,this.maskFilled=new fe.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this._isComposing=!1,this.document=(0,fe.f3M)(se.K0),this._maskService=(0,fe.f3M)(Le,{self:!0}),this._config=(0,fe.f3M)(Ce),this.onChange=J=>{},this.onTouch=()=>{}}ngOnChanges(J){const{maskExpression:Y,specialCharacters:Ee,patterns:_e,prefix:Fe,suffix:ut,thousandSeparator:W,decimalMarker:ne,dropSpecialCharacters:Pe,hiddenInput:bt,showMaskTyped:Bt,placeHolderCharacter:$t,shownMaskExpression:Xt,showTemplate:ot,clearIfNotMatch:Ye,validation:rt,separatorLimit:Qe,allowNegativeNumbers:dt,leadZeroDateTime:at,leadZero:Ot,triggerOnMaskChange:qt}=J;if(Y&&(Y.currentValue!==Y.previousValue&&!Y.firstChange&&(this._maskService.maskChanged=!0),dt&&(this._maskService.allowNegativeNumbers=dt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(jt=>"-"!==jt))),Y.currentValue&&Y.currentValue.split("||").length>1?(this._maskExpressionArray=Y.currentValue.split("||").sort((jt,Lt)=>jt.length-Lt.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=Y.currentValue||"",this._maskService.maskExpression=this._maskValue)),Ee){if(!Ee.currentValue||!Array.isArray(Ee.currentValue))return;this._maskService.specialCharacters=Ee.currentValue||[]}_e&&_e.currentValue&&(this._maskService.patterns=_e.currentValue),Fe&&(this._maskService.prefix=Fe.currentValue),ut&&(this._maskService.suffix=ut.currentValue),W&&(this._maskService.thousandSeparator=W.currentValue),ne&&(this._maskService.decimalMarker=ne.currentValue),Pe&&(this._maskService.dropSpecialCharacters=Pe.currentValue),bt&&(this._maskService.hiddenInput=bt.currentValue),Bt&&(this._maskService.showMaskTyped=Bt.currentValue),$t&&(this._maskService.placeHolderCharacter=$t.currentValue),Xt&&(this._maskService.shownMaskExpression=Xt.currentValue),ot&&(this._maskService.showTemplate=ot.currentValue),Ye&&(this._maskService.clearIfNotMatch=Ye.currentValue),rt&&(this._maskService.validation=rt.currentValue),Qe&&(this._maskService.separatorLimit=Qe.currentValue),at&&(this._maskService.leadZeroDateTime=at.currentValue),Ot&&(this._maskService.leadZero=Ot.currentValue),qt&&(this._maskService.triggerOnMaskChange=qt.currentValue),this._applyMask()}validate({value:J}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(J);if(this._maskService.cpfCnpjError)return this._createValidationError(J);if(this._maskValue.startsWith("separator")||Se.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(et.includes(this._maskValue))return this._validateTime(J);if(J&&J.toString().length>=1){let Y=0;if(this._maskValue.startsWith("percent"))return null;for(const Ee in this._maskService.patterns)if(this._maskService.patterns[Ee]?.optional&&(this._maskValue.indexOf(Ee)!==this._maskValue.lastIndexOf(Ee)?Y+=this._maskValue.split("").filter(Fe=>Fe===Ee).join("").length:-1!==this._maskValue.indexOf(Ee)&&Y++,-1!==this._maskValue.indexOf(Ee)&&J.toString().length>=this._maskValue.indexOf(Ee)||Y===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&J.toString().length===this._maskValue.length+Number((this._maskValue.split("{")[1]??"").split("}")[0])-4)return null;if(this._maskValue.indexOf("*")>1&&J.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&J.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(J);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const Ee=this._maskValue.split("*"),_e=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-Y:this.prefix?this._maskValue.length+this.prefix.length-Y:this._maskValue.length-Y;if(1===Ee.length&&J.toString().length<_e)return this._createValidationError(J);if(Ee.length>1){const Fe=Ee[Ee.length-1];if(Fe&&this._maskService.specialCharacters.includes(Fe[0])&&J.includes(Fe[0])&&!this.dropSpecialCharacters){const ut=J.split(Fe[0]);return ut[ut.length-1].length===Fe.length-1?null:this._createValidationError(J)}return(Fe&&!this._maskService.specialCharacters.includes(Fe[0])||!Fe||this._maskService.dropSpecialCharacters)&&J.length>=_e?null:this._createValidationError(J)}}if(1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null}return J&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(J){(""===J||null==J)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(J){if(this._isComposing)return;const Y=J.target;if(this._inputValue=Y.value,this._setMask(),!this._maskValue)return void this.onChange(Y.value);let Ee=1===Y.selectionStart?Y.selectionStart+this._maskService.prefix.length:Y.selectionStart,_e=0,Fe=!1;if("Delete"===this._code&&(this._maskService.deletedSpecialCharacter=!0),this._maskService.applyValueChanges(Ee,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(W,ne)=>{this._justPasted=!1,_e=W,Fe=ne}),this._getActiveElement()!==Y)return;this._maskExpressionArray.length&&(Ee=1===Y.selectionStart?Y.selectionStart+this._maskService.prefix.length:Y.selectionStart),this._position=1===this._position&&1===this._inputValue.length?null:this._position;let ut=this._position?this._inputValue.length+Ee+_e:Ee+("Backspace"!==this._code||Fe?_e:0);ut>this._getActualInputLength()&&(ut=this._getActualInputLength()),ut<0&&(ut=0),Y.setSelectionRange(ut,ut),this._position=null}onCompositionStart(){this._isComposing=!0}onCompositionEnd(J){this._isComposing=!1,this._justPasted=!0,this.onInput(J)}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(J){if(!this._maskValue)return;const Y=J.target;null!==Y&&null!==Y.selectionStart&&Y.selectionStart===Y.selectionEnd&&Y.selectionStart>this._maskService.prefix.length&&38!==J.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),Y.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===Y.value?(Y.focus(),Y.setSelectionRange(0,0)):Y.selectionStart>this._maskService.actualValue.length&&Y.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Fe=Y&&(Y.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:Y.value);Y&&Y.value!==Fe&&(Y.value=Fe),Y&&(Y.selectionStart||Y.selectionEnd)<=this._maskService.prefix.length?Y.selectionStart=this._maskService.prefix.length:Y&&Y.selectionEnd>this._getActualInputLength()&&(Y.selectionEnd=this._getActualInputLength())}onKeyDown(J){if(!this._maskValue)return;if(this._isComposing)return void("Enter"===J.key&&this.onCompositionEnd(J));this._code=J.code?J.code:J.key;const Y=J.target;if(this._inputValue=Y.value,this._setMask(),"ArrowUp"===J.key&&J.preventDefault(),"ArrowLeft"===J.key||"Backspace"===J.key||"Delete"===J.key){if("Backspace"===J.key&&0===Y.value.length&&(Y.selectionStart=Y.selectionEnd),"Backspace"===J.key&&0!==Y.selectionStart)if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&Y.selectionStart<=this.prefix.length)Y.setSelectionRange(this.prefix.length,Y.selectionEnd);else if(this._inputValue.length!==Y.selectionStart&&1!==Y.selectionStart)for(;this.specialCharacters.includes((this._inputValue[Y.selectionStart-1]??"").toString())&&(this.prefix.length>=1&&Y.selectionStart>this.prefix.length||0===this.prefix.length);)Y.setSelectionRange(Y.selectionStart-1,Y.selectionEnd);this.checkSelectionOnDeletion(Y),this._maskService.prefix.length&&Y.selectionStart<=this._maskService.prefix.length&&Y.selectionEnd<=this._maskService.prefix.length&&J.preventDefault(),"Backspace"===J.key&&!Y.readOnly&&0===Y.selectionStart&&Y.selectionEnd===Y.value.length&&0!==Y.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<Y.selectionStart?Y.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):("KeyA"===J.code&&J.ctrlKey||"KeyA"===J.code&&J.metaKey)&&(Y.setSelectionRange(0,this._getActualInputLength()),J.preventDefault()),this._maskService.selStart=Y.selectionStart,this._maskService.selEnd=Y.selectionEnd}writeValue(J){var Y=this;return(0,y.Z)(function*(){if("object"==typeof J&&null!==J&&"value"in J&&("disable"in J&&Y.setDisabledState(!!J.disable),J=J.value),"number"==typeof J||Y._maskValue.startsWith("separator")){J=String(J);const Ee=Y._maskService.currentLocaleDecimalMarker();Array.isArray(Y._maskService.decimalMarker)||(J=Y._maskService.decimalMarker!==Ee?J.replace(Ee,Y._maskService.decimalMarker):J),Y._maskService.leadZero&&J&&Y.maskExpression&&!1!==Y.dropSpecialCharacters&&(J=Y._maskService._checkPrecision(Y.maskExpression.toString(),J)),","===Y._maskService.decimalMarker&&(J=J.toString().replace(".",",")),Y._maskService.isNumberValue=!0}"string"!=typeof J&&(J=""),Y._inputValue=J,Y._setMask(),J&&Y._maskService.maskExpression||Y._maskService.maskExpression&&(Y._maskService.prefix||Y._maskService.showMaskTyped)?(Y._maskService.writingValue=!0,Y._maskService.formElementProperty=["value",Y._maskService.applyMask(J,Y._maskService.maskExpression)],Y._maskService.writingValue=!1):Y._maskService.formElementProperty=["value",J],Y._inputValue=J})()}registerOnChange(J){this._maskService.onChange=this.onChange=J}registerOnTouched(J){this.onTouch=J}_getActiveElement(J=this.document){const Y=J?.activeElement?.shadowRoot;return Y?.activeElement?this._getActiveElement(Y):J.activeElement}checkSelectionOnDeletion(J){J.selectionStart=Math.min(Math.max(this.prefix.length,J.selectionStart),this._inputValue.length-this.suffix.length),J.selectionEnd=Math.min(Math.max(this.prefix.length,J.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(J){this._maskService.formElementProperty=["disabled",J]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(J){const Y=this._maskValue.split("").filter(Ee=>":"!==Ee).length;return J&&(0==+(J[J.length-1]??-1)&&J.length<Y||J.length<=Y-2)?this._createValidationError(J):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(J){return{mask:{requiredMask:this._maskValue,actualValue:J}}}_setMask(){this._maskExpressionArray.some(J=>{if(J.split("").some(Ee=>this._maskService.specialCharacters.includes(Ee))&&this._inputValue&&!J.includes("S")||J.includes("{")){const Ee=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(J)?.length;if(Ee)return this._maskValue=this.maskExpression=this._maskService.maskExpression=J.includes("{")?this._maskService._repeatPatternSymbols(J):J,Ee;{const _e=this._maskExpressionArray[this._maskExpressionArray.length-1]??"";this._maskValue=this.maskExpression=this._maskService.maskExpression=_e.includes("{")?this._maskService._repeatPatternSymbols(_e):_e}}else{const Ee=this._inputValue?.split("").every((_e,Fe)=>{const ut=J.charAt(Fe);return this._maskService._checkSymbolMask(_e,ut)});if(Ee)return this._maskValue=this.maskExpression=this._maskService.maskExpression=J,Ee}})}}return je.\u0275fac=function(J){return new(J||je)},je.\u0275dir=fe.lG2({type:je,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(J,Y){1&J&&fe.NdJ("paste",function(){return Y.onPaste()})("ngModelChange",function(_e){return Y.onModelChange(_e)})("input",function(_e){return Y.onInput(_e)})("compositionstart",function(_e){return Y.onCompositionStart(_e)})("compositionend",function(_e){return Y.onCompositionEnd(_e)})("blur",function(){return Y.onBlur()})("click",function(_e){return Y.onClick(_e)})("keydown",function(_e){return Y.onKeyDown(_e)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",leadZero:"leadZero",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],standalone:!0,features:[fe._Bn([{provide:V.JU,useExisting:je,multi:!0},{provide:V.Cf,useExisting:je,multi:!0},Le]),fe.TTD]}),je})()},5861:(nn,st,H)=>{"use strict";function y(se,V,Ce,De,$e,Xe,et){try{var Se=se[Xe](et),Re=Se.value}catch(Le){return void Ce(Le)}Se.done?V(Re):Promise.resolve(Re).then(De,$e)}function fe(se){return function(){var V=this,Ce=arguments;return new Promise(function(De,$e){var Xe=se.apply(V,Ce);function et(Re){y(Xe,De,$e,et,Se,"next",Re)}function Se(Re){y(Xe,De,$e,et,Se,"throw",Re)}et(void 0)})}}H.d(st,{Z:()=>fe})},7582:(nn,st,H)=>{"use strict";function V(ot,Ye){var rt={};for(var Qe in ot)Object.prototype.hasOwnProperty.call(ot,Qe)&&Ye.indexOf(Qe)<0&&(rt[Qe]=ot[Qe]);if(null!=ot&&"function"==typeof Object.getOwnPropertySymbols){var dt=0;for(Qe=Object.getOwnPropertySymbols(ot);dt<Qe.length;dt++)Ye.indexOf(Qe[dt])<0&&Object.prototype.propertyIsEnumerable.call(ot,Qe[dt])&&(rt[Qe[dt]]=ot[Qe[dt]])}return rt}function Le(ot,Ye,rt,Qe){return new(rt||(rt=Promise))(function(at,Ot){function qt(Kt){try{Lt(Qe.next(Kt))}catch(wn){Ot(wn)}}function jt(Kt){try{Lt(Qe.throw(Kt))}catch(wn){Ot(wn)}}function Lt(Kt){Kt.done?at(Kt.value):function dt(at){return at instanceof rt?at:new rt(function(Ot){Ot(at)})}(Kt.value).then(qt,jt)}Lt((Qe=Qe.apply(ot,Ye||[])).next())})}function Y(ot){return this instanceof Y?(this.v=ot,this):new Y(ot)}function Ee(ot,Ye,rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,Qe=rt.apply(ot,Ye||[]),at=[];return dt={},Ot("next"),Ot("throw"),Ot("return"),dt[Symbol.asyncIterator]=function(){return this},dt;function Ot(Fn){Qe[Fn]&&(dt[Fn]=function(jn){return new Promise(function(zn,ur){at.push([Fn,jn,zn,ur])>1||qt(Fn,jn)})})}function qt(Fn,jn){try{!function jt(Fn){Fn.value instanceof Y?Promise.resolve(Fn.value.v).then(Lt,Kt):wn(at[0][2],Fn)}(Qe[Fn](jn))}catch(zn){wn(at[0][3],zn)}}function Lt(Fn){qt("next",Fn)}function Kt(Fn){qt("throw",Fn)}function wn(Fn,jn){Fn(jn),at.shift(),at.length&&qt(at[0][0],at[0][1])}}function Fe(ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt,Ye=ot[Symbol.asyncIterator];return Ye?Ye.call(ot):(ot=function qe(ot){var Ye="function"==typeof Symbol&&Symbol.iterator,rt=Ye&&ot[Ye],Qe=0;if(rt)return rt.call(ot);if(ot&&"number"==typeof ot.length)return{next:function(){return ot&&Qe>=ot.length&&(ot=void 0),{value:ot&&ot[Qe++],done:!ot}}};throw new TypeError(Ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(ot),rt={},Qe("next"),Qe("throw"),Qe("return"),rt[Symbol.asyncIterator]=function(){return this},rt);function Qe(at){rt[at]=ot[at]&&function(Ot){return new Promise(function(qt,jt){!function dt(at,Ot,qt,jt){Promise.resolve(jt).then(function(Lt){at({value:Lt,done:qt})},Ot)}(qt,jt,(Ot=ot[at](Ot)).done,Ot.value)})}}}H.d(st,{FC:()=>Ee,KL:()=>Fe,_T:()=>V,mG:()=>Le,qq:()=>Y})}},nn=>{nn(nn.s=8150)}]);